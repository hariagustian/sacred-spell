var bugs = setInterval( function(){ if( Matter ){ clearInterval( bugs );!function(t,e,a){function i(t,e){return typeof t===e}function s(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):f?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function n(t,a,i,n){var r,o,l,c,h,p="modernizr",d=s("div"),g=((h=e.body)||((h=s(f?"svg":"body")).fake=!0),h);if(parseInt(i,10))for(;i--;)(l=s("div")).id=n?n[i]:p+(i+1),d.appendChild(l);return(r=s("style")).type="text/css",r.id="s"+p,(g.fake?g:d).appendChild(r),g.appendChild(d),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.createTextNode(t)),d.id=p,g.fake&&(g.style.background="",g.style.overflow="hidden",c=u.style.overflow,u.style.overflow="hidden",u.appendChild(g)),o=a(d,t),g.fake?(g.parentNode.removeChild(g),u.style.overflow=c,u.offsetHeight):d.parentNode.removeChild(d),!!o}function r(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function o(e,i){var s=e.length;if("CSS"in t&&"supports"in t.CSS){for(;s--;)if(t.CSS.supports(r(e[s]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];s--;)o.push("("+r(e[s])+":"+i+")");return n("@supports ("+(o=o.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==function(e,a,i){var s;if("getComputedStyle"in t){s=getComputedStyle.call(t,e,a);var n=t.console;null!==s?i&&(s=s.getPropertyValue(i)):n&&n[n.error?"error":"log"].call(n,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else s=!a&&e.currentStyle&&e.currentStyle[i];return s}(e,null,"position")})}return a}function l(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,a){return e+a.toUpperCase()}).replace(/^-/,"")}function c(t,e){return function(){return t.apply(e,arguments)}}function h(t,e,n,r,h){var p=t.charAt(0).toUpperCase()+t.slice(1),d=(t+" "+S.join(p+" ")+p).split(" ");return i(e,"string")||i(e,"undefined")?function(t,e,n,r){function c(){p&&(delete k.style,delete k.modElem)}if(r=!i(r,"undefined")&&r,!i(n,"undefined")){var h=o(t,n);if(!i(h,"undefined"))return h}for(var p,d,g,m,u,f=["modernizr","tspan","samp"];!k.style&&f.length;)p=!0,k.modElem=s(f.shift()),k.style=k.modElem.style;for(g=t.length,d=0;g>d;d++)if(m=t[d],u=k.style[m],!!~(""+m).indexOf("-")&&(m=l(m)),k.style[m]!==a){if(r||i(n,"undefined"))return c(),"pfx"!=e||m;try{k.style[m]=n}catch(t){}if(k.style[m]!=u)return c(),"pfx"!=e||m}return c(),!1}(d,e,r,h):function(t,e,a){var s;for(var n in t)if(t[n]in e)return!1===a?t[n]:i(s=e[t[n]],"function")?c(s,a||e):s;return!1}(d=(t+" "+y.join(p+" ")+p).split(" "),e,n)}var p=[],d={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var a=this;setTimeout(function(){e(a[t])},0)},addTest:function(t,e,a){p.push({name:t,fn:e,options:a})},addAsyncTest:function(t){p.push({name:null,fn:t})}},g=function(){};g.prototype=d,g=new g;var m=[],u=e.documentElement,f="svg"===u.nodeName.toLowerCase(),v=function(){var t=!("onblur"in e.documentElement);return function(e,i){var n;return!!e&&(i&&"string"!=typeof i||(i=s(i||"div")),!(n=(e="on"+e)in i)&&t&&(i.setAttribute||(i=s("div")),i.setAttribute(e,""),n="function"==typeof i[e],i[e]!==a&&(i[e]=a),i.removeAttribute(e)),n)}}();d.hasEvent=v;var b="Moz O ms Webkit",S=d._config.usePrefixes?b.split(" "):[];d._cssomPrefixes=S;var x={elem:s("modernizr")};g._q.push(function(){delete x.elem});var k={style:x.elem.style};g._q.unshift(function(){delete k.style});var y=d._config.usePrefixes?b.toLowerCase().split(" "):[];d._domPrefixes=y,d.testAllProps=h;var B=function(e){var i,s=prefixes.length,n=t.CSSRule;if(void 0===n)return a;if(!e)return!1;if((i=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in n)return"@"+e;for(var r=0;s>r;r++){var o=prefixes[r];if(o.toUpperCase()+"_"+i in n)return"@-"+o.toLowerCase()+"-"+e}return!1};d.atRule=B,d.prefixed=function(t,e,a){return 0===t.indexOf("@")?B(t):(-1!=t.indexOf("-")&&(t=l(t)),e?h(t,e,a):h(t,"pfx"))},g.addTest("audio",function(){var t=s("audio"),e=!1;try{(e=!!t.canPlayType)&&((e=new Boolean(e)).ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),e.mp3=t.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,""),e.opus=t.canPlayType('audio/ogg; codecs="opus"')||t.canPlayType('audio/webm; codecs="opus"').replace(/^no$/,""),e.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),e.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(t){}return e}),function(){var t,e,a,s,n,r;for(var o in p)if(p.hasOwnProperty(o)){if(t=[],(e=p[o]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(a=0;a<e.options.aliases.length;a++)t.push(e.options.aliases[a].toLowerCase());for(s=i(e.fn,"function")?e.fn():e.fn,n=0;n<t.length;n++)1===(r=t[n].split(".")).length?g[r[0]]=s:(!g[r[0]]||g[r[0]]instanceof Boolean||(g[r[0]]=new Boolean(g[r[0]])),g[r[0]][r[1]]=s),m.push((s?"":"no-")+r.join("-"))}}(),function(t){var e=u.className,a=g._config.classPrefix||"";if(f&&(e=e.baseVal),g._config.enableJSClass){var i=new RegExp("(^|\\s)"+a+"no-js(\\s|$)");e=e.replace(i,"$1"+a+"js$2")}g._config.enableClasses&&(e+=" "+a+t.join(" "+a),f?u.className.baseVal=e:u.className=e)}(m),delete d.addTest,delete d.addAsyncTest;for(var w=0;w<g._q.length;w++)g._q[w]();t.Modernizr=g}(window,document),function(d,win){var transformProp=Modernizr.prefixed("transform"),translateProp=Modernizr.prefixed("transition"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"},translateEndProp=transEndEventNames[translateProp],_owlBird=_owlBird||{};_owlBird.register=_owlBird.register||{},_owlBird.namespace=_owlBird.namespace||{},_owlBird.namespace.__namespace__=[],_owlBird.args=_owlBird.args||[],_owlBird.utils=function(){var t,a,i,s,n,r,o,l=this,c=function(){};for(var h in c.prototype={slice:function(t,e){return e&&Array.prototype.slice.call(t,e)[0]||Array.prototype.slice.call(t)},objToString:function(t){return Object.prototype.toString.call(t)},hasClassName:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)},delayFire:(r=setTimeout(function(){}),function(t,e){clearTimeout(r),r=setTimeout(t,e)}),delay:(n=_owlBird.args,function(){t=arguments,s=function(){for(var e in t)this[e]=t[e];this.populate()},a=Object.create(s.prototype={populate:function(){if(i=Object.create(this),n.length>0){for(var t=0,e=n,a=0;t<e.length;t++)if(e[t][0]===this[0]&&a++,!a&&t===e.length-1){n.push(i);break}}else n.push(i)},fire:function(){if(n.length>0){for(var t in n)setTimeout(function(t,e){t.call(null)}.bind(this,n[t][0]),n[t][1]);n.length=0}}}),new s&&this.delayFire&&this.delayFire(function(){a.fire()},100)}),attachListener:function(t,e,a){function i(t,e,a){function i(t,e){t!==window?t.addEventListener(e,a,!1):t.attachEvent&&t.attachEvent("on"+e,a)||t.addEventListener(e,a,!1),"mousedown"===e?t.addEventListener("touchstart",a,!1):"mousemove"===e?t.addEventListener("touchmove",a,!1):"mouseup"===e?t.addEventListener("touchend",a,!1):"mouseout"===e&&t.addEventListener("touchleave",a,!1)}if((e=(e=-1===e.indexOf(" ")?e:e.split(" ")).length<=1?e.join(""):e)instanceof Array)for(;e.length;)i(t,e.pop());else i(t,e)}if(this.objToString&&"[object Array]"===this.objToString(t))for(;t.length;)i(t.pop(),e,a);else i(t,e,a)},inArray:function(t,e){for(;e.length;)if(e.pop()===t)return!0;return!1},removeClassFn:function(t,e){if(-1!==e.indexOf(" ")&&e.split(" ").length>1){for(var a=t.className.toLowerCase().split(" "),i=a.length-1;i>=0;i--)this.inArray(a[i],e.split(" "))&&delete a[i];t.className=a.join(" ")}else if(this.hasClassName(t,e)){var s=t.className;t.className=s.replace(new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)","g")," ")}},addClassFn:function(t,e){this.hasClassName(t,e)||(t.className=[t.className,e].join(" "))},isTwoDimensional:function(t){return!(!/([object Array])/i.test(this.objToString(t))||!this.slice(t,0).length)}},new c)this[h]=(new c)[h];this.encodeStr=function(t){return encodedStr=t.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"})},this.normalizingMousewheel=function(t){t||(t=event);var e=t.wheelDelta,a=t.detail;return a?e?e/a/40*a>0?1:-1:-a/3:e/120},this.random=function(t,e){return Math.floor(Math.random()*(t-e+1)+e)},this.randomFloat=function(t,e){return Math.random()*(t-e)+e},this.uniqueId=function(){return this.random(999,100)+"-"+Math.random().toString(36).slice(-8)},this.uniqueArray=function(t){return t.slice().sort(function(t,e){return t>e}).reduce(function(t,e){return t.slice(-1)[0]!==e&&t.push(e),t},[]),t},this.detectLeftButton=function(t){return"buttons"in t?1===t.buttons:"which"in t?1===t.which:1===t.button},this.detectRightButton=function(t){return"which"in(t=t||window.event)?3==t.which:"button"in e?2==t.button:void 0},this.cancelBubble=function(t){(t=this?t:window.event).stopPropagation&&t.stopPropagation(),null!=t.cancelBubble&&(t.cancelBubble=!0),t.preventDefault()},this.nthParent=function(t,e){for(;e--&&t;)t=t.parentNode;return t},this.runFirst=(o=!0,function(t,e){this.delay(function(){o=!0},100),o&&(setTimeout(t.bind(this),e),o=!1)}),this.parentLastchild=function(t,e){var a=[];do{1==(t=t.nextSibling).nodeType&&a.push(t)}while(t.nextSibling);return a[a.length-1]},this.parentFirstchild=function(t,e){var a=[];do{1==(t=t.previousSibling).nodeType&&a.push(t)}while(t.previousSibling);return a[a.length-1]},this.getFirstChild=function(t){for(var e=t.firstChild;e&&3==e.nodeType;)e=e.nextSibling;return null!==e&&e},this.sibling=function(t,e){do{t="previous"==e?t.previousSibling:t.nextSibling}while(t&&1!=t.nodeType);return null!==t&&t},this.qsAll=function(t,e){t=-1===t.indexOf(".")?"."+t:t;return!!e&&e.querySelectorAll(t)||document.querySelectorAll(t)},this.qs=function(t,e){t=-1===t.indexOf(".")?"."+t:t;return!!e&&e.querySelector(t)||document.querySelector(t)},this.id=function(t){return document.getElementById(t)},this.addClass=function(t,e){if(this.isTwoDimensional(t))for(var a=t.length-1;a>=0;a--)this.addClassFn(t[a][0],t[a][1]);else this.addClassFn(t,e)},this.removeClass=function(t,e){if(this.isTwoDimensional(t))for(var a=t.length-1;a>=0;a--)this.removeClassFn(t[a][0],t[a][1]);else this.removeClassFn(t,e)},this.css=function(t,e,a){var i,s;function n(t){for(var a in e)if(a in e)switch(i=e[a],a){case"transform":i=e[a].split(","),x=i[0],y=i[1],z=i[2],s="translate3d("+x+","+y+","+z+")",t.style[transformProp]=s;break;case"transition":i=e[a],s=i,t.style[translateProp]=s;break;default:t.style[a]=i}}if(t.nodeName)n(t);else for(var r=t.length;r>0;r--)n(t[r-1])},this.text=function(t,e){t.innerText?t.innerText=e:t.textContent=e},this.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},this.intersectsCircle=function(t,e,a,i,s){var n=t-a,r=e-i;return n*n+r*r<=s*s},this.extend=function(t,e,a){if(!0===a)for(var i in e)i in e&&(t[i]=e[i]);else t:for(var i in e)if(i in e){for(var s in t)if(s in t&&i.toLowerCase()===s.toLowerCase()&&-1!==i.toLowerCase().indexOf("strict"))continue t;"function"==typeof e[i]?(t[i]=e[i],t[i]()):t[i]=e[i]}return t},this.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this.objCount=function(t){var e=0;for(var a in t)e++;return e};var p=!!("createTouch"in document);this.CursorStartEvent=p?"touchstart":"mousedown",this.CursorMoveEvent=p?"touchmove":"mousemove",this.CursorEndEvent=p?"touchend":"mouseup",this.CursorLeaveEvent=p?"touchleave":"mouseout",this.accessor=function(t){var e=t.namespace,a=e.__namespace__,i=t.global,s=t.accessorName;O=Object.create(new function(){return Object.defineProperty(t,s,{set:function(){l.slice(arguments).forEach(function(t){e["_initialize"+s]?e["_initialize"+s].push(t):e["_initialize"+s]=[t];for(var n=0,r=a;n<r.length;n++)for(var o in i)o in i&&(r[n][o]=Object.defineProperty({invoke:o},"value",{get:function(){return i[this.invoke]},set:function(e){for(var s in this)if(s in this&&"value"!==s){i[this[s]]=e;for(var n=a,r=n.length;r--;)n[r]!==t&&this[s]in n[r]&&(n[r][this[s]]=this)}},enumerable:!0}))})}})}),O[s]=this,e["_revoke"+s]=O},this.cloneImg=function(t){var e=document.createElement("img");return e.src=t,e.cloneNode(!0)},this.getTexture=function(t,e,a){var i=t.textures;if(a&&/textureNeedChange/i.test(a)){var s,n=a.split("|")[1];if(!i.pairTextures){s=/left/i.test(n)?n.split("left").join("right"):n.split("right").join("left");var r=!0,o=!0;if(owlDATA.assets)for(var c=0,h=d.assets;c<h.length;c++)h[c].result&&(h[c].src===n&&(p=l.cloneImg(h[c].src),r=!1),h[c].src===s&&(g=l.cloneImg(h[c].src),o=!1));if(r||o){var p=new Image,g=new Image;p.src=n,g.src=s}i.pairTextures={left:/left/i.test(n)?p:g,right:/right/i.test(n)?p:g}}return i.pairTextures.latest=/left/i.test(n)?"left":"right",/left/i.test(n)?i.pairTextures.left:i.pairTextures.right}if(i)return i.pairTextures?/left/i.test(i.pairTextures.latest)?i.pairTextures.left:i.pairTextures.right:i;var m=!0;if(owlDATA.assets)for(c=0,h=owlDATA.assets;c<h.length;c++)if(h[c].result&&h[c].src===e){i=t.textures=l.cloneImg(h[c].src),m=!1;break}return m&&((i=t.textures=new Image).src=e),i},this.distanceAndAngleBetweenTwoPoints=function(t,e,a,i){var s=a-t,n=i-e;return{distance:Math.sqrt(s*s+n*n),angle:180*Math.atan2(n,s)/Math.PI}},this.vector=function(t,e){var a=e*Math.PI/180;this.x=t*Math.cos(a),this.y=t*Math.sin(a)},this.getRelativeMousePosition=function(t,e,a){var i,s,n=e.getBoundingClientRect(),r=document.documentElement||document.body.parentNode||document.body,o=void 0!==window.pageXOffset?window.pageXOffset:r.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:r.scrollTop,c=t.changedTouches;return c?(i=c[0].pageX-n.left-o,s=c[0].pageY-n.top-l):(i=t.pageX-n.left-o,s=t.pageY-n.top-l),{x:i,y:s}},this.showImageHHandWW=function(t,e){return t.name=e,t.onload=function(){return this.height,this.width,!0},t.src=e,t},this.rgbRandom=function(t){return this.r=255,this.g=Math.round(255*Math.random()),this.b=Math.round(255*Math.random()),"rgba( "+this.r+","+this.g+","+this.b+","+t+")"},this.JSONstringfy=function(t){var e=[];return JSON.stringify(t,function(t,a){if("object"==typeof a&&null!==a){if(-1!==e.indexOf(a))return;e.push(a)}return a})},this.playAudio=function(t){if(d.mute)return!0;var e=function(){return new Audio},a=function(t,e){return src=l.fn.qs("site").getAttribute("data-bitmap")+"/audio/"+e,t.src=Modernizr.audio.ogg?src+".ogg":Modernizr.audio.mp3?src+".mp3":src+".wav",e},i=function(t,e){l.attachListener(t,"ended",function(a){t.currentTime=0,l.globalAudio.value.remove(e)}),l.globalAudio.value.remove(e),l.globalAudio.value.set(e,t)},s=t instanceof Array?t[l.random(t.length,1)-1]:t,n=!0;if(d.assets)for(var r=0,o=d.assets;r<o.length;r++)if(o[r].name===s&&/.ogg|.mp3|.wav/i.test(o[r].src)){c=o[r].result.cloneNode(),h=s,n=!1;break}if(n)var c=e(),h=a(c,s);i(c,h),c.play()},this.fullscreenToogle=function(t){if(/off/i.test(t.className)){if(t.className="fullscreen-on",void 0!==(a=(e=document).exitFullScreen||e.mozCancelFullScreen||e.webkitExitFullScreen||e.mozExitFullScreen||e.msExitFullScreen||e.webkitCancelFullScreen)&&a)a.call(e);else if(void 0!==window.ActiveXObject){null!==(i=new ActiveXObject("WScript.Shell"))&&i.SendKeys("{F11}")}}else{var e,a;if(void 0!==(a=(e=document.documentElement).requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen)&&a)a.call(e);else if(void 0!==window.ActiveXObject){var i;null!=(i=new ActiveXObject("WScript.Shell"))&&i.SendKeys("{F11}")}t.className="fullscreen-off"}}},_owlBird.bridge=function(){_owlBird.namespace.__namespace__.push(this);var t,e,a=this,i=_owlBird.namespace,s=(i.__namespace__,_owlBird.register),n=new a.utils,r={};r.register=(t=n,e=i,self={},self.windowResize=function(t){for(var e in s)if(s[e].register===t){s[e].fn();break}},self.globalOwlBirdrProperty=function(i){for(var n in s)if(s[n].register===i){a.extend(self,s[n].obj);break}t.accessor.call(this,{global:self,accessorName:i,namespace:e})},self),this.that=function(t){var e,i={};return{callback:(e=i||{},function(t){t(e)}),invokeWith:function(e){for(var a in s)if(s[a].register===e){r.register[a].apply(t,arguments);break}return this},use:function(e,a){var s;for(var r in n)r in n&&"function"==typeof n[r]&&r.toLowerCase()===e.toLowerCase()&&(/(attachlistener|addclass|removeclass|css)/i.test(r.toLowerCase())&&a.unshift(t),(s=n[r].apply(n,a))&&(i[e]=s));return this},findTarget:function(e){if(/([object NodeList]|[object Array])/i.test(a.objToString(t))){for(var s=t.length-1;s>=0;s--)t[s].contains(e.target||e.srcElement)?(this.target=t[s],i.self=this):i.self&&delete i.self;return this}},fireTarget:function(t,e){this.findTarget(t).callback(function(t){"self"in t&&t.self.use("delay",[function(){e.call(null,t.self.target)},100])})}}}},_owlBird.transport=function(){scope=this,scope.slice(arguments).forEach(function(t){({charset:t.charset||"application/json;charset=UTF-8",http:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),callback:t.callback,onerror:t.error||"ops, request time out",timeout:t.setTimeout||23e3,url:t.url,type:t.type,dataset:t.dataset||{},requestHeader:function(){var e={"Content-Type":this.charset};return scope.extend(e,t.requestHeader),e},setRequest:function(){var t=this,e=t.http;for(var a in t)if(a in t)for(var i in e)i in e&&i.toLowerCase()===a.toLowerCase()&&(e[a]=t[a]);return t.callback.call(this,"")}}).setRequest()})},_owlBird.storage=function(){var t=this,e=_owlBird.transport;return{csrf:t.qs("site").getAttribute("csrf"),url:t.qs("site").getAttribute("src"),regPage:["/sacred-spell"],fragment:[],filter:function(t){var e=t.id,a=this.fragment;if(!a.length&&e)return a.push(t),!0;for(var i=0,s=0;i<a.length;i++)for(var n in a[i])if(n in a[i]&&("page"!==e&&e===a[i][n]&&s++,!s&&e&&i===a.length-1))return a.push(t),!0;return!1},load:function(a){var i=this;e.call(t,{url:this.url+"/state",type:"post",requestHeader:{"X-CSRF-TOKEN":this.csrf},dataset:{id:a.id},callback:function(t){i.filter({id:a.id,page:t})&&a.fetch&&i.fetch(a)}})},fetch:function(t){var e=this.fragment,a=t.id;if(!e.length&&t.id)t.fetch=!0,this.load(t);else t:for(var i=0;i<e.length;i++)for(var s in e[i])if(s in e[i]){if("page"!==a&&a===e[i][s]){t.callback.call(this,e[i].page);break t}a&&i===e.length-1&&(t.fetch=!0,this.load(t))}}}},_owlBird.deligate=function(t,e,a){var i=this;i.extend(_owlBird.register,{windowResize:{register:"_windowResize",fn:function(){var t=i.qs("screen").getElementsByTagName("canvas")[0];i.browserWidthUpdate=i.browserWidth(),i.browserHeightUpdate=i.browserHeight(),i.controlGUICheck&&i.controlGUICheck.value(),t.width=i.browserWidthUpdate,t.height=i.browserHeightUpdate,i.css(t,{width:i.browserWidthUpdate+"px",height:i.browserHeightUpdate+"px"})}},globalOwlBirdrProperty:{register:"_globalOwlBirdrProperty",obj:{objTranslate:{staticObjMoveX:"",staticObjMoveY:5,staticObjStateX:"",staticObjStateY:"",staticObjAllX:!0,staticObjAllY:!0,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,firstLoadLeft:!0,firstLoadRight:!0,staticsWallOuterIsStopX:!0,charaIsCentered:!1,staticsWallOuterIsStopY:!0,objectMarker:{state:"",monster:"",registerMonster:[]},isShake:{shakeCnt:[],createShake:function(t){for(;t--;)this.shakeCnt.push(new this.constructor)},constructor:function(){this.state=!1,this.strength=3,this.tick=0,this.install=!1,this.initShake=0,this.stateShake=!0,this.pairShake=0,this.posX=0,this.posY=0,this.inOrDec=!0,this.amplitude={up:0,center:2,down:0,strength:1},this.randomnessFn=function(t){if(1===this.stateShake||3===this.stateShake)switch(t){case 1:this.posX=this.initShake;break;case 2:this.posX=this.initShake,this.posY=-this.initShake;break;case 3:this.posY=this.initShake;break;case 4:this.posX=this.initShake,this.posY=this.initShake}else if(2===this.stateShake)switch(t){case 1:this.posX=2*-this.initShake;break;case 2:this.posX=2*-this.initShake,this.posY=2*this.initShake;break;case 3:this.posY=2*-this.initShake;break;case 4:this.posX=2*-this.initShake,this.posY=2*-this.initShake}},this.update=function(){if(this.install||(this.randomness=i.random(1,0)?2:4,this.initShake=this.strength,this.inOrDec=!!i.random(1,0),this.amplitude.up=this.inOrDec?1:3,this.amplitude.down=this.inOrDec?3:1,this.install=!0),this.tick++,this.tick===this.amplitude.strength?(this.stateShake=this.amplitude.up,this.randomnessFn(this.randomness,this.stateShake)):this.tick===2*this.amplitude.strength?(this.stateShake=this.amplitude.center,this.randomnessFn(this.randomness,this.stateShake)):this.tick===3*this.amplitude.strength&&(this.stateShake=this.amplitude.down,this.randomnessFn(this.randomness,this.stateShake)),this.tick>3*this.amplitude.strength)return!0}}},effect:!0},initSkills:function(t){return"iceBeam"===t?new function(){this.fn="",this.launch=!1,this.hit=!1,this.monsterTarget=""}:/lifeDrain|lightning|fireBallAcid|fireBallAcid2|fireBallAcid3/i.test(t)?new function(){this.fn="",this.launch=!1,this.monsterTarget="","fireBallAcid3"===t?(this.fn=[],this.length=5,this.delay=15):"chain-lightning"===t&&(this.delay=5)}:void 0},globalSkill:{bindingRoot:function(){this.name="bindingRoot",this.delay=500,this.delayUpdate=500,this.active=!1,this.tick=200,this.speedMovement=0,this.strength=1},burningEffect:function(t){this.name="burningEffect",this.delay=1e3,this.delayUpdate=1500,this.active=!1,this.tick=700,this.tickDelay=70,this.tickDelayUpdate=70,this.damageMax=!!t&&t.damageMax||25,this.damageMin=!!t&&t.damageMin||5,this.chance=!!t&&t.chance||25},lightningShock:function(t){this.name="lightningShock",this.delay=1500,this.delayUpdate=1500,this.active=!1,this.id=i.uniqueId(),this.tick=200,this.speedMovement=0,this.chance=!!t&&t.chance||95}},globalPreloadError:function(){},staticWorld:"",staticAllMap:function(){for(var t=["mapA","mapB","mapAADungeonA","mapAADungeonB","mapC","mapDDungeonA","mapDungeonA","mapDungeonB","mapDungeonC","mapDungeonD","mapDungeonE","mapDungeonF","mapDungeonG","mapDungeonH"],e={},a=0,i=t.length;a<i;a++)e[t[a]]={content:"",textures:""};return e}(),activeMap:"mapA",estimate:{ori:["ti","ca","on","lo"],root:["na","st","me","ho"],spell:["u","i","h","b","t","g"],loc:"514203.3102"},switchRoll:{update:function(t){var e,a,s,n,r=0,o=t.switchState,l=t.triggerTo;o&&(e=setInterval(function(){if(r++,t.vertices[0].y+=2,t.vertices[1].y+=2,r>=15){clearInterval(e),r=0,pair=i[l].value,s=pair.moveStart,n=pair.switchTo;var c=setInterval(function(){"up"===n?(i.Body.translate(pair,{x:0,y:-3}),s-=3):(i.Body.translate(pair,{x:0,y:3}),s-=3),pair.moveEnd>=s-1&&(clearInterval(c),o=!1,a=setInterval(function(){r++,t.vertices[0].y+=-2,t.vertices[1].y+=-2,r>=15&&(clearInterval(a),r=0)},10),"up"===pair.switchTo?pair.switchTo="down":pair.switchTo="up")},10)}},10),o=!1)}},storageState:function(){this.storage=[],this.remove=function(t){var e=this.storage;if(e.length)for(var a=0;a<e.length;a++)e[a].name===t.toLowerCase()&&this.storage.splice(a,1)},this.get=function(t){var e=this.storage;if(e.length)for(var a=0;a<e.length;a++)if(e[a].name===t.toLowerCase())return e[a].status},this.set=function(t,e){var a=this.storage;if(a.length)for(var i=0,s=0;i<a.length;i++){if(a[i].name===t.toLowerCase()){a[i].status=e,s++;break}if(!s&&i===a.length-1){a.push({name:t.toLowerCase(),status:e});break}}else a.push({name:t.toLowerCase(),status:e})}},monsterTarget:"",isTranslateUpDown:!0,isScroll:!0,mousePosition:{pos:""},skillTarget:"",activeDialog:{state:!1,timeout:"",interval:"",dialogCnt:""},svgTot:{total:0,current:0}}}}),i.that(i).invokeWith("_globalOwlBirdrProperty")},_owlBird.mouse=function(){var t=this;this.mouseCreate=function(e){var a={};a.element=e||document.body,a.absolute={x:0,y:0},a.position={x:0,y:0},a.mousedownPosition={x:0,y:0},a.mouseupPosition={x:0,y:0},a.offset={x:0,y:0},a.scale={x:1,y:1},a.wheelDelta=0,a.button=-1,a.pixelRatio=a.element.getAttribute("data-pixel-ratio")||1,a.sourceEvents={mousemove:{x:0,y:0},mousedown:{x:0,y:0},mouseup:{x:0,y:0}},a.mousemove=function(e){var i=t.getRelativeMousePosition(e,a.element,a.pixelRatio);e.changedTouches&&(a.button=0),a.absolute.x=i.x,a.absolute.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mousemove=a.position,t.mousePosition.value.pos=a.sourceEvents},a.mousedown=function(e){var i=t.getRelativeMousePosition(e,a.element,a.pixelRatio),s=e.changedTouches;a.button=s?0:e.button,a.absolute.x=i.x,a.absolute.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mousedown=a.position,t.mousePosition.value.pos=a.sourceEvents},a.mouseup=function(e){var i=t.getRelativeMousePosition(e,a.element,a.pixelRatio);e.changedTouches;a.button=-1,a.absolute.x=i.x,a.absolute.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mouseup=a.position,t.mousePosition.value.pos=a.sourceEvents},e.addEventListener("mousemove",a.mousemove),e.addEventListener("mousedown",a.mousedown),e.addEventListener("mouseup",a.mouseup),e.addEventListener("mousewheel",a.mousewheel),e.addEventListener("DOMMouseScroll",a.mousewheel),e.addEventListener("touchmove",a.mousemove),e.addEventListener("touchstart",a.mousedown),e.addEventListener("touchend",a.mouseup)},this.getRelativeMousePositionToRegisterObject=function(e){if(t.mousePosition.value.pos)for(var a=t.mousePosition.value.pos.mouseup.x,i=t.mousePosition.value.pos.mouseup.y,s=0;s<e.length;s++){var n=e[s].getBoundingClientRect();if(n.right>a&&n.left<a&&n.top<i&&n.bottom>i)return e[s].id}}},_owlBird.physics=function(){var t=this;this.moveVector2dSmooth=function(e,a,i){var s=t.distanceAndAngleBetweenTwoPoints(e.position.x,e.position.y,a.position.x,a.position.y),n=s.distance/i;return new t.vector(n,s.angle)},this.moveVector2dWithVelocity=function(e,a,i,s){if(e.position)var n=t.distanceAndAngleBetweenTwoPoints(e.position.x,e.position.y,a.position.x,a.position.y);else n=t.distanceAndAngleBetweenTwoPoints(e.x,e.y,a.x,a.y);return s?{vector:new t.vector(i,n.angle),angle:n.angle}:new t.vector(i,n.angle)},this.moveVector2d=function(t,e,a){this.install=!1,this.start=t.position,this.dest=e.position,this.lastTime=(new Date).getTime(),this.startSpeed=a||.4,this.velocity=null,this.update=function(){if(!this.install){var t=this.start,e=this.dest,a=e.x-t.x,i=e.y-t.y,s=Math.sqrt(a*a+i*i),n=a/s,r=i/s,o=this.startSpeed,l={x:n*this.startSpeed,y:r*o};this.startVelocity=l,this.velocity=Object.create(l),this.install=!0}var c=(new Date).getTime(),h=c-this.lastTime,p=this.velocity;return this.lastTime=c,{x:p.x*h,y:p.y*h}}},this.rotateGeometry=function(t,e,a,i,s,n){t.translate(e+i/2,a+s/2),t.rotate(n*(Math.PI/180)),t.translate(-(e+i/2),-(a+s/2))}},_owlBird.particle=function(){var t=this,e={installParticles:function(t,e){for(var a=t,i=[],s=0;s<a;s++)i.push(new this.particleArc(e));return i},particleGeometry:function(t,e,a){t.beginPath(),a&&a.state?e.opacity=a.opacityTemp:e.opacity=Math.round(e.remaining_life/e.life*100)/100;var i=t.createRadialGradient(e.posX,e.posY,0,e.posX,e.posY,e.radius);i.addColorStop(0,"rgba("+e.color.r+","+e.color.g+","+e.color.b+","+e.opacity+")"),i.addColorStop(.5,"rgba("+e.color.r+","+e.color.g+","+e.color.b+","+e.opacity+")"),i.addColorStop(1,"rgba("+e.color.r+","+e.color.g+","+e.color.b+", 0)"),t.fillStyle=i,t.arc(e.posX,e.posY,e.radius,0,2*Math.PI,!1),t.fill()},particleArcStrokeGeometry:function(t,e){t.beginPath(),e.opacity=Math.round(e.remaining_life/e.life*100)/100;var a=t.createRadialGradient(e.posX,e.posY,0,e.posX,e.posY,e.radius);a.addColorStop(0,"rgba("+e.color.r+","+e.color.g+","+e.color.b+","+e.opacity+")"),a.addColorStop(.2,"rgba("+e.color.r+","+e.color.g+","+e.color.b+","+e.opacity+")"),a.addColorStop(1,"rgba("+e.color.r+","+e.color.g+","+e.color.b+", 0)"),t.lineWidth=e.lineWidth,t.strokeStyle=a,t.arc(e.posX,e.posY,e.radius,0,2*Math.PI,!1),t.stroke()},particleEllipseStrokeGeometry:function(t,e){t.beginPath(),e.opacity=Math.round(e.remaining_life/e.life*100)/100;var a=t.createRadialGradient(e.posX,e.posY,0,e.posX,e.posY,6*e.radius);a.addColorStop(0,"rgba("+e.color.r+","+e.color.g+","+e.color.b+","+e.opacity+")"),a.addColorStop(.2,"rgba("+e.color.r+","+e.color.g+","+e.color.b+","+e.opacity+")"),a.addColorStop(1,"rgba("+e.color.r+","+e.color.g+","+e.color.b+", 0)"),t.fillStyle=a,t.lineWidth=e.lineWidth,t.moveTo(e.posX,e.posY-e.height/2),t.bezierCurveTo(e.posX+e.width/2,e.posY-e.height/2,e.posX+e.width/2,e.posY+e.height/2,e.posX,e.posY+e.height/2),t.bezierCurveTo(e.posX-e.width/2,e.posY+e.height/2,e.posX-e.width/2,e.posY-e.height/2,e.posX,e.posY-e.height/2),t.fill(),t.closePath()},particleArc:function(e){e=e||{};this.radius=e.radius||5+12*Math.random(),this.life=(e.life||15)+8*Math.random(),this.remaining_life=this.life,this.color={},this.color.r=e.color&&e.color.r||255,this.color.g=e.color&&e.color.g||75,this.color.b=e.color&&e.color.b||22,this.posX=e.posX||0,this.posY=e.posY||0,this.randomWidth=0,this.randomHeight=0,this.lineWidth=e.lineWidth||20,this.lineWidth=e.lineWidth||20,this.width=e.width||0,this.height=e.height||0,this.randX=t.random(2,0),this.install=!1},particleNumber:function(t,e){t.beginPath(),e.opacity=Math.round(e.remaining_life/e.life*100)/100,t.fillStyle="rgba(0, 0, 0, "+e.opacity+")",t.fillRect(e.posX-50,e.posY,40,40)},particlePortalGlow:function(t){this.speed={x:3*Math.random()-1.5,y:3*Math.random()-1.5},this.location={x:t.x+t.height/2,y:t.y+t.width/2},this.radius=3+28*Math.random(),this.life=10+20*Math.random(),this.remaining_life=this.life,this.r=255,this.g=Math.round(180*Math.random()),this.b=Math.round(255*Math.random())},gradientPortalGlow:function(t,e){e.beginPath(),t.opacity=Math.round(t.remaining_life/t.life*100)/100;var a=e.createRadialGradient(t.location.x,t.location.y,0,t.location.x,t.location.y,t.radius);a.addColorStop(0,"rgba("+t.r+","+t.g+","+t.b+","+t.opacity+")"),a.addColorStop(.5,"rgba("+t.r+","+t.g+","+t.b+","+t.opacity+")"),a.addColorStop(1,"rgba("+t.r+","+t.g+","+t.b+",0)"),e.fillStyle=a,e.arc(t.location.x,t.location.y,t.radius,2*Math.PI,!1),e.fill()},effect:function(){this.fireBallEffect=function(t,a,i,s){if(this.installFireBall){if(this.stop)return!0;if(this.objTranslate.effect){var n=a.x,r=a.y;for(l=0;l<this.particlesFireBall.length;l++){t.globalCompositeOperation=l%5?"lighter":"destination-out";var o=this.particlesFireBall[l];o.install||(this.particlesFireBall[l].posX=n,this.particlesFireBall[l].posY=r,this.particlesFireBall[l].install=!0),this.objTranslate.staticObjStateX&&(this.objTranslate.moveLeft?o.posX+=this.objTranslate.staticObjMoveX:this.objTranslate.moveRight&&(o.posX+=this.objTranslate.staticObjMoveX)),this.objTranslate.staticObjStateY&&(this.objTranslate.moveUp?o.posY+=this.objTranslate.staticObjMoveY:this.objTranslate.moveDown&&(o.posY+=-this.objTranslate.staticObjMoveY)),s&&(o.posX=n,o.posY=r),e.particleGeometry(t,o),o.remaining_life--,this.effectStop?o.radius-=this.radiusLife:o.radius+=1,(o.remaining_life<0||o.radius<0)&&(this.particlesFireBall[l]=new e.particleArc({radius:this.radius(),color:{r:255,g:75,b:22}}))}t.globalCompositeOperation="source-over"}"stop"===i&&(this.stop=!0)}else{for(var l=0;l<30;l++)this.particlesFireBall.push(new e.particleArc({radius:0,color:{r:255,g:75,b:22}}));this.installFireBall=!0}}},fireBallProperties:function(){this.tick=0,this.installFireBall=!1,this.particlesEffect=[],this.particlesFireBall=[],this.lifeEffect=500,this.effectStop=!1}};this.iceBeam=function(a){this.install=!1,this.drawIceBeam="",this.posBeam={position:{x:-230,y:-230},posHit:0,posX:0,characterGetHit:!1},this.render={texture:"",src:t.path+"/ice-beam.png",resize:0,small:0},this.moveIceBeam="",this.delay=80,this.angle=0,this.lineTick=10,this.life=180,this.playSound=!1,this.delayInstallParticle=20,this.particleIceBeam=[],this.statePass=!1,this.objTranslate=t.objTranslate.value,this.beamVec=0,this.update=function(a,i,s){if(this.life--,this.life<0)return!0;s&&!this.statePass&&(this.life-=80,this.delay-=80,this.statePass=!0);var n=i.position,r=this.posBeam.position,o=(Math.abs(n.x-r.x),Math.abs(n.y-r.y),i.additionalBoundsValue&&i.additionalBoundsValue,t.getTexture(this.render,this.render.src));if(this.posBeam.characterGetHit||(this.posBeam.characterGetHit=n.y<r.y),this.install){if(a.save(),t.rotateGeometry(a,r.x,r.y,o.width/2/2,o.height/2,this.angle),this.drawIceBeam.update({context:a,width:o.width,height:o.height,image:o,posX:r.x,posY:r.y,resize:this.render.resize,small:this.render.small}),a.restore(),this.objTranslate.effect){a.globalCompositeOperation="lighter";for(var l=0;l<this.particleIceBeam.length;l++){var c=this.particleIceBeam[l];c.install||(this.particleIceBeam[l].posX=r.x+17+this.beamVec,this.particleIceBeam[l].posY=r.y-17,this.particleIceBeam[l].install=!0),e.particleGeometry(a,c),0===c.randX?c.posX--:1===c.randX&&c.posX++,c.posY--,c.radius--,(c.remaining_life<0||c.radius<0)&&(this.posBeam.characterGetHit?this.particleIceBeam.splice(l,1):this.particleIceBeam[l]=new e.particleArc({color:{r:90,g:203,b:248}}))}a.globalCompositeOperation="source-over"}if(this.delay--,this.delay<0){if(this.posBeam.characterGetHit)return this.playSound||(t.playAudio("Windshield_Hit_01"),this.playSound=!0),this.posBeam.position.x=this.posBeam.posHit+(n.x-this.posBeam.posX),this.posBeam.position.y=n.y,this.life<50&&(this.render.resize--,this.render.small--),"hit";if(this.moveIceBeam){var h=this.moveIceBeam.update();this.posBeam.position.x+=h.x,this.posBeam.position.y+=h.y,this.posBeam.posHit=this.posBeam.position.x,this.posBeam.posX=n.x,this.delayInstallParticle--,this.delayInstallParticle&&(this.particleIceBeam.push(new e.particleArc({color:{r:90,g:203,b:248}})),this.delayInstallParticle=20)}else this.moveIceBeam=new t.moveVector2d(this.posBeam,i,3)}else this.render.resize+=.5,this.angle=t.distanceAndAngleBetweenTwoPoints(r.x,r.y,n.x,n.y).angle,this.beamVec=this.angle-90}else t.playAudio("freeze-icy-crackling"),this.drawIceBeam=new t.drawIceBeamMagicSpell,this.posBeam.position.x=n.x,this.posBeam.position.y=n.y+4*-t.stage,this.install=!0}},this.lifeDrain=function(a){this.target=a,this.install=!1,this.spellEllipse=0,this.ellipsePos={x:0,y:0},this.ellipseParticle=[],this.drawEllipseMagicSpell="",this.render={texture:"",src:t.path+"/magic-circle.png",resize:0,small:0},this.lifeSpeed=500,this.lineTick=0,this.objTranslate=t.objTranslate.value,this.statePass=!1,this.update=function(a,i){var s=t.getTexture(this.render,this.render.src);if(!this.install){var n=20;for(this.ellipsePos.y=0;n--;)this.ellipseParticle.push(new e.particleArc({color:{r:93,g:93,b:255}}));this.ellipseMagicSpell=new t.draw.ellipseMagicSpell,this.install=!0}if(this.objTranslate.effect){if(this.lineTick--,a.globalCompositeOperation="lighter",this.ellipsePos.x=this.target.position.x,this.lineTick>-70)this.spellEllipse+=.3,this.ellipsePos.y-=4,this.render.resize++;else for(n=0;n<this.ellipseParticle.length;n++){var r=this.ellipseParticle[n];r.install||(r.posX=this.ellipsePos.x,r.posY=this.target.position.y+this.ellipsePos.y-t.random(50,0),r.install=!0),r.randomWidth<12?(r.randomWidth+=.4,r.randomHeight+=.2):(r.randomWidth=0,r.randomHeight=0),e.particleEllipseStrokeGeometry(a,r),r.width=this.spellEllipse*r.randomWidth,r.height=2*this.spellEllipse,r.width+=.1,r.remaining_life--,r.remaining_life<0&&(this.render.small<-10?this.ellipseParticle.splice(n,1):this.ellipseParticle[n]=new e.particleArc({color:{r:93,g:93,b:255}}))}a.globalCompositeOperation="source-over",this.ellipseMagicSpell.update({context:t.context,width:this.render.resize,height:145,image:s,posX:this.ellipsePos.x,posY:this.target.position.y+this.ellipsePos.y,resize:this.render.resize,small:this.render.small})}if(this.lifeSpeed--,this.lifeSpeed<0&&(this.render.small-=2,this.render.resize--,this.render.small<-70))return!0;i&&!this.statePass&&(this.lifeSpeed=0,this.statePass=!0)}},this.magicCircle=function(e){this.install=!1,this.imagePosY=e.imagePosY,this.imagePosX=e.imagePosX,this.scaleBefore=e.scaleBefore,this.scale=e.scale,this.scaleX=0,this.scaleY=0,this.scaleLength=e.scaleLength,this.life=e.life,this.target=e.target,this.offsetX=.1,this.offsetY=.1,this.lengthOpacity={lengthEnd:0,lengthStart:0,remove:1},this.opacity=function(t){return t?(this.lengthOpacity.remove>0&&(this.lengthOpacity.remove-=.05),this.lengthOpacity.remove<=0?0:this.lengthOpacity.remove):1/this.lengthOpacity.lengthEnd*this.lengthOpacity.lengthStart},this.render={texture:"",src:e.url},this.update=function(e,a){this.install||(t.getTexture(this.render,this.render.src),this.draw=new t.draw.generalDrawImage,this.lengthOpacity.lengthEnd=this.scaleLength,this.install=!0),this.scaleLength>0&&(this.scaleLength--,this.lengthOpacity.lengthStart++,this.scaleX+=this.scale,this.scaleY+=this.scale,this.offsetX+=this.scale/2,this.offsetY+=this.scale/2);var i=a.remove?this.opacity(!0):this.opacity();if(e.globalAlpha=i,this.draw.update({context:e,image:this.render.textures,posX:this.target.x,posY:this.target.y,imagePosY:this.imagePosY,imagePosX:this.imagePosX,scaleX:this.scaleX,scaleY:this.scaleY,offsetX:this.offsetX,offsetY:this.offsetY,scaleBefore:this.scaleBefore}),e.globalAlpha=1,this.lengthOpacity.remove<=.1)return!0}},this.fireBallAreaEffect=function(a){this.installEffect=!1,this.radiusLife=5,this.translateSpeedX=0,this.translateSpeedY=0,this.initRadius=!!a&&a||"big",this.objTranslate=t.objTranslate.value,this.radius=function(){return"medium"===this.initRadius?t.random(50,30):"big"===this.initRadius?t.random(60,40):void 0},this.update=function(a,i,s,n){return this.installEffect||(t.extend(this,new e.effect,!0),t.extend(this,new e.fireBallProperties,!0),this.effectStop=!0,this.installEffect=!0),this.fireBallEffect(a,i,s,n)}},this.fireBallAcidEffect=function(){this.radiusLife=1,this.translateSpeedX=0,this.translateSpeedY=0,this.radius=function(){return t.random(40,10)},this.installEffect=!1,this.objTranslate=t.objTranslate.value,this.update=function(a,i,s,n){if(this.stop)return!0;if(this.installEffect){if(this.objTranslate.effect){var r=i.x,o=i.y;a.globalCompositeOperation="color-burn";for(var l=0;l<this.particlesEffect.length;l++){var c=this.particlesEffect[l];if(c.posX||c.posY||(this.particlesEffect[l].posX=r,this.particlesEffect[l].posY=o),n&&(c.posX=r,c.posY=o),e.particleArcStrokeGeometry(a,c),this.lifeEffect--,this.lifeEffect<=0)c.radius=Math.round(c.radius),c.radius-2>0&&(c.radius-=2),c.remaining_life>0&&c.remaining_life--,this.lifeEffect<-50&&(this.effectStop=!0);else c.radius+=.7,(c.remaining_life<0||c.radius<0)&&(this.lifeEffect--,this.particlesEffect[l]=new e.particleArc({radius:0,color:{r:249,g:24,b:24}}))}a.globalCompositeOperation="source-over"}return this.fireBallEffect(a,i,s,n)}t.extend(this,new e.effect,!0),t.extend(this,new e.fireBallProperties,!0),this.particlesEffect=e.installParticles(5,{radius:this.radius(),color:{r:249,g:24,b:24}}),this.installEffect=!0}},this.explosionEffect2=function(a){this.install=!1,this.particles=[],this.thrust=7,this.size=50,this.explosion_strength=7,this.fragment_size_ratio=.53,this.colors=["255,60, 1","249, 24, 24","255, 75, 22"],this.particleSize=a,this.objTranslate=t.objTranslate.value,this.particle=function(t){this.gravity=.25,this.posX=t.x,this.posY=t.y+t.vy,this.vx=t.vx,this.vy=t.vy,this.angle=t.angle,this.life=t.life,this.remaining_life=this.life,this.radius=t.size/2,this.color={},this.color.r=t.r&&t.r||255,this.color.g=t.g&&t.g||75,this.color.b=t.b&&t.b||22,this.velocity=function(){this.vy+=this.gravity,this.posX+=this.vx,this.posY+=this.vy}},this.update=function(a,i){if(this.install){if(!this.particles.length)return!0;a.globalCompositeOperation="lighter";for(n=0,r=this.particles;n<r.length;n++){var s=r[n];this.objTranslate.effect&&(a.globalCompositeOperation=n%3?"lighter":"source-over",this.objTranslate.staticObjStateX&&(this.objTranslate.moveLeft?s.posX+=this.objTranslate.staticObjMoveX:this.objTranslate.moveRight&&(s.posX+=this.objTranslate.staticObjMoveX)),this.objTranslate.staticObjStateY&&(this.objTranslate.moveUp?s.posY+=this.objTranslate.staticObjMoveY:this.objTranslate.moveDown&&(s.posY+=-this.objTranslate.staticObjMoveY)),e.particleGeometry(a,s),s.velocity()),s.remaining_life--,s.radius>1&&(s.radius-=.5),s.remaining_life<0&&this.particles.splice(n,1)}return a.globalCompositeOperation="source-over",!1}for(var n=0,r=this.particleSize;n<r;n++){var o=360*Math.random()|0,l=Math.random()*this.explosion_strength+1,c=Math.sin(o+180*Math.PI/180)*l,h=function(){for(;;){var t=Math.random()*this.explosion_strength+1,e=360*Math.random()|0,a=Math.cos(e+180*Math.PI/180)*t;if(a<0)return a}}.bind(this)(),p=this.colors[Math.random()*this.colors.length|0].split(",");this.particles.push(new this.particle({vx:c,vy:h,x:i.x+c,y:i.y+h,angle:o,r:p[0],g:p[1],b:p[2],size:Math.random()*(2*this.size*this.fragment_size_ratio)+.1,life:t.random(50,30)}))}this.objTranslate.isShake.createShake(2),this.install=!0}},this.explosionEffect=function(){this.install=!1,this.random={x:5*Math.random(),y:10*Math.random()-15},this.particles=[],this.tick=0,this.objTranslate=t.objTranslate.value,this.update=function(a,i,s){if(this.install){if(this.objTranslate.effect){var n=i.position.x,r=i.position.y;for(l=0;l<this.particles.length;l++){a.globalCompositeOperation=l%5?"lighter":"destination-out";var o=this.particles[l];o.posX||o.posY||(this.particles[l].posX=n+t.random(-10,10),this.particles[l].posY=r+t.random(-10,10)),e.particleGeometry(a,o),o.radius>0&&o.radius--,o.remaining_life>0&&o.remaining_life--}a.globalCompositeOperation="source-over"}if(this.tick++,this.tick>25)return!0}else{for(var l=0;l<10;l++)this.particles.push(new e.particleArc({radius:t.random(30,60),color:s}));this.install=!0}}},this.rocketEffect=function(){this.install=!1,this.stop=!1,this.particles=[],this.update=function(t,a,i,s){if(this.install){if(this.stop)return!0;var n=a.position.x,r=a.position.y;t.globalCompositeOperation="lighter";for(var o=0;o<this.particles.length;o++){var l=this.particles[o];l.install||("left"===i?(this.particles[o].posX=n+20,this.particles[o].posY=r):"right"===i?(this.particles[o].posX=n-25,this.particles[o].posY=r):"top"===i?(this.particles[o].posX=n,this.particles[o].posY=r+20):"bottom"===i?(this.particles[o].posX=n,this.particles[o].posY=r-20):"leftTop"===i?(this.particles[o].posX=n+20,this.particles[o].posY=r+20):"rightTop"===i?(this.particles[o].posX=n-25,this.particles[o].posY=r+20):"leftBottom"===i?(this.particles[o].posX=n+20,this.particles[o].posY=r-20):"rightBottom"===i&&(this.particles[o].posX=n-25,this.particles[o].posY=r-20),this.particles[o].install=!0),e.particleGeometry(t,l),l.remaining_life--,l.radius--,"left"===i?l.posX+=3:"right"===i?l.posX-=3:"top"===i||"bottom"===i||("leftTop"===i?(l.posX+=3,l.posy-=3):"rightTop"===i?(l.posX-=3,l.posy-=3):"leftBottom"===i?(l.posX+=3,l.posy+=3):"rightBottom"===i&&(l.posX-=3,l.posy+=3)),(l.remaining_life<0||l.radius<0)&&(this.particles[o]=new e.particleArc)}"stop"===s&&(this.stop=!0),t.globalCompositeOperation="source-over"}else this.particles=e.installParticles(30),this.install=!0}},this.lights=function(a){this.lights=[],this.target=a,this.install=!1,this.translateSpeedX=0,this.translateSpeedY=0,this.objTranslate=t.objTranslate.value,this.update=function(a,i){if(!this.install){for(var s=20;s--;)this.lights.push(new e.particleArc({color:{r:93,g:93,b:255},radius:t.random(12,5),life:t.random(200,150)}));this.posX=this.target.position.x,this.posY=this.target.position.y,this.install=!0}if(this.objTranslate.effect){this.objTranslate.staticObjStateX&&(this.objTranslate.moveLeft?this.translateSpeedX+=this.objTranslate.staticObjMoveX:this.objTranslate.moveRight&&(this.translateSpeedX+=this.objTranslate.staticObjMoveX)),this.objTranslate.staticObjStateY&&(this.objTranslate.moveUp?this.translateSpeedY+=this.objTranslate.staticObjMoveY:this.objTranslate.moveDown&&(this.translateSpeedY+=-this.objTranslate.staticObjMoveY)),a.globalCompositeOperation="lighter";for(s=0;s<this.lights.length;s++){var n=this.lights[s],r={};if(!n.install){var o=t.random(145,-145);n.tempX=this.posX+o,n.tempY=this.posY+40,n.opacityTemp=0,n.speedY=o>-45&&o<45?t.randomFloat(2,1.5):o>-100&&o<100?t.randomFloat(1.5,.5):.5,n.lifeSpeed=t.random(3,2),n.install=!0}n.opacityTemp<1?(n.opacityTemp+=.1,r.opacityTemp=n.opacityTemp,r.state=!0):r.state=!1,n.tempY-=n.speedY,n.posX=n.tempX+this.translateSpeedX,n.posY=n.tempY+this.translateSpeedY,e.particleGeometry(a,n,r),n.remaining_life-=n.lifeSpeed,n.remaining_life<0&&i>100&&(this.lights[s]=new e.particleArc({color:{r:93,g:93,b:255},radius:t.random(12,5),life:t.random(200,150)}))}a.globalCompositeOperation="source-over"}}},this.lightningOld=function(e,a){this.target=e,this.monsterDir=a,this.colorType="",this.colorToString=function(t,e){return"white"===e?"rgba( 255, 255, 255, "+t+")":"lightBlue"===e?"hsla( 195, 100%, 50%,"+t+")":void 0},this.install=!1,this.point=[],this.particlePoint=function(t,e,a,i,s,n){this.pos={x:e.position.x+a,y:e.position.y+i},gradient=t.createRadialGradient(this.pos.x,this.pos.y,s/7,this.pos.x,this.pos.y,s),gradient.addColorStop(0,this.colorToString(1,n)),gradient.addColorStop(1,this.colorToString(0,n)),t.fillStyle=gradient,t.beginPath(),t.arc(this.pos.x,this.pos.y,s,0,2*Math.PI,!1),t.fill()},this.PointFn=function(e){for(var a,i,s=this.point,n=t.random(30,25),r=n-20,o=0,l=s.length;o<l;o++)"casted"===s[o].type?(a="left"===this.monsterDir?-90:90,i=-25):(a=0,i=0),this.particlePoint(e,s[o].target,a,i,n,"lightBlue"),s[o].alsoSmall&&this.particlePoint(e,s[o].target,a,i,r,"white")},this.createPoint=function(){for(var t=this.target,e=0;e<t.length;e++){var a="oval"===t[e].label;this.point.push({target:t[e],type:a?"casted":"target",alsoSmall:!!a})}},this.createLightning=function(e,a,i){this.targetPoint="",this.lightningCnt=[],this.targetEndPoint="",this.parent=e,this.pos="",this.findTargetPoint=function(){for(var t=this.parent.target,e=0,s=t.length;e<s;e++)t[e].label===a&&(this.targetPoint=t[e]),t[e].label===i&&(this.targetEndPoint=t[e])},this.install=!1,this.simplexNoise=new SimplexNoise,this.lightning={points:[],delay:0},this.noise2d=function(t,e){var a,i=1,s=1,n=0;for(a=0;a<2;++a)n+=(i*=.4)*(this.simplexNoise.noise2D(t*s,e*s)+1)*.5,s*=2;return n},this.lastPoint={position:{}},this.update=function(e){var a,i;this.install||(this.findTargetPoint(),this.lastPoint.position.x=this.targetPoint.position.x,this.lastPoint.position.y=this.targetPoint.position.y,this.install=!0),"oval"===this.targetPoint.label?(a="left"===this.parent.monsterDir?-90:90,i=-25):(a=0,i=0);var s,n=this.targetPoint.position,r=this.targetEndPoint.position;if(this.lightning.delay--,this.lightning.delay<0)for(this.lightning.points.length=0,this.lastPoint.position.x=this.targetPoint.position.x,this.lastPoint.position.y=this.targetPoint.position.y;;){var o=t.moveVector2dWithVelocity(this.lastPoint,this.targetEndPoint,1);if(this.lastPoint.position.x+=o.x,this.lastPoint.position.y+=o.y,this.lightning.points.push(this.lastPoint.position),Math.round(this.lastPoint.position.x)-Math.round(r.x)<4&&Math.round(this.lastPoint.position.y)-Math.round(r.y)<4){this.lightning.delay=5;break}}s=this.lightning.points,e.save(),e.globalCompositeOperation="lighter",e.beginPath(),e.lineCap="round",e.lineWidth=3,e.shadowColor=this.parent.colorToString(1,"lightBlue"),e.shadowBlur=50,e.moveTo(n.x+a,n.y+i);var l=0;for(s.length;l<s.length;l++)s[l],0!==l&&e.lineTo(r.x,r.y);e.fillStroke="rgba(255, 255, 255, 0)",e.stroke(),e.restore(),e.globalCompositeOperation="source-over"}},this.lightning=[],this.update=function(t){if(this.install){this.PointFn(t);for(var e=0;e<this.lightning.length;e++)this.lightning[e].update(t)}else this.createPoint(),this.lightning.push(new this.createLightning(this,"oval",this.target[1].label)),this.install=!0}},this.lightning=function(e,a,i){this.skillName=i,this.targets=e,this.factory=function(e,a){var i={skillName:a,mainParent:e,points:null,children:null,objTranslate:t.objTranslate.value,_simplexNoise:new SimplexNoise,render:function(t,e,a){this.objTranslate.effect&&("freeze"!==a&&this._update(e),this._draw(t,a))},_update:function(t){throw new Error("Not override")},_draw:function(t,e){var a,i,s,n,r,o,l,c,h,p,d="freeze"===e,g=d?this.mainParent.lastPoints:this.points;if(i=(a=!this.parent)?this:this.parent,a&&!d){var m,u,f=this.children;for(t.save(),h=0,p=g.length;h<p;h+=p-1)s=g[h],m=5*Math.random()+3,(u=t.createRadialGradient(s.x,s.y,m/3,s.x,s.y,m)).addColorStop(0,this._colorToString(1)),u.addColorStop(1,this._colorToString(0)),t.fillStyle=u,t.beginPath(),t.arc(s.x,s.y,m,0,2*Math.PI,!1),t.fill();for(t.restore(),h=0,p=f.length;h<p;h+=p-1)f[h].render(t)}for(t.save(),t.globalCompositeOperation="lighter",t.lineCap="round",t.lineWidth=1,t.fillStyle="rgba(0, 0, 0, 1)",t.shadowBlur=i.blur,t.shadowColor=this._colorToString(1),t.beginPath(),h=0,p=g.length;h<p;h++)s=g[h],p>1?(n=g[h===p-1?h-1:h+1],r=s.x-n.x,o=s.y-n.y,l=Math.sqrt(r*r+o*o)):l=0,l>30&&(l=30),t.moveTo(s.x+l,s.y),t.arc(s.x,s.y,l,0,2*Math.PI,!1);for(t.beginPath(),t.strokeStyle=this._colorToString(Math.random()*(i.maxAlpha-i.minAlpha)+i.minAlpha),c=Math.random()*(i.maxLineWidth-i.minLineWidth)+i.minLineWidth,t.lineWidth=a?c:.5*c,h=0;h<p;h++)s=g[h],t[0===h?"moveTo":"lineTo"](s.x,s.y);t.stroke(),t.restore(),this.mainParent.lastPoints=g},_noise2d:function(t,e){var a,i="lightning"===this.skillName?.8:"chain-lightning"===this.skillName?.6:.4,s=1,n=1,r=0;for(a=0;a<2;++a)r+=(s*=i)*(this._simplexNoise.noise2D(t*n,e*n)+1)*.5,n*=2;return r},_filterApply:function(t,e,a,i,s,n){var r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T=this.points,O=[],C=this._catmullRom;for(t.unshift(t[0]),t.push(t[t.length-1]),p=1/a,A=0,D=t.length-3;A<D;A++)for(r=t[A],o=t[A+1],l=t[A+2],c=t[A+3],j=0;j<a;j++)h=(j+1)*p,O.push({x:C(r.x,o.x,l.x,c.x,h),y:C(r.y,o.y,l.y,c.y,h)});for(t.pop(),O.unshift(t.shift()),t=[],p=1/((D=O.length)-1),i=1/i,A=0,D=O.length;A<D;A++)d=O[A],g=A===D-1?d:O[A+1],m=Math.atan2(g.y-d.y,g.x-d.x),u=Math.sin(m),f=Math.cos(m),v=A*i,S=(b=e*this._noise2d(v-n,n)*.5*s)*u,x=b*f,y=(k=e*this._noise2d(v+n,n)*.5*s)*u,B=k*f,w=Math.sin(Math.PI*(A*p)),M=d.x+(S-y)*w,P=d.y-(x-B)*w,T.length?((d=T.shift()).x=M,d.y=P):d={x:M,y:P},t.push(d);return t},_catmullRom:function(t,e,a,i,s){var n=.5*(a-t),r=.5*(i-e);return(2*e-2*a+n+r)*s*s*s+(-3*e+3*a-2*n-r)*s*s+n*s+e},_colorToString:function(t){var e=this.color;return"rgb"===this.colorType?"rgba("+e.join(",")+","+t+")":"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t+")"}};function s(t){this.points=[],this.children=[],this._params=[],this._offsets=[]}function n(t,e){this.parent=t,this.points=[],this._param=e}function r(){var t,e,a,i,s={};for(a=0,i=arguments.length;a<i;a++)for(e in t=arguments[a])s[e]=t[e];return s}return s.prototype=r(i,{color:[255,255,255],colorType:"rgb",blur:50,maxAlpha:1,minAlpha:.75,maxLineWidth:5,minLineWidth:.5,_params:null,_offsets:null,addParam:function(t,e,a,i){this._params.push({segmentsNum:t,base:e,amplitude:a,speed:i}),this._offsets[this._params.length-1]=0},createChild:function(t,e,a){var i=new n(this,{base:t||this._params.base,amplitude:e||this._params.amplitude,speed:a||this._params.speed});return this.children.push(i),i},_update:function(t){var e,a,i,s,n,r,o,l,c,h,p=this._params,d=this._offsets;for(o=0,l=p.length;o<l;o++){for(e=p[o],a=0,c=0,h=t.length;c<h;c++)c!==h-1&&(i=t[c],s=t[c+1],a+=(n=i.x-s.x)*n+(r=i.y-s.y)*r);a=Math.sqrt(a),d[o]+=Math.random()*e.speed,t=this._filterApply(t,a,e.segmentsNum,e.base,e.amplitude,d[o])}this.points=t}}),n.prototype=r(i,{parent:null,_startStep:0,_endStep:0,_separate:2,_param:null,_offset:0,_lastChangeTime:0,_update:function(){var t,e,a,i,s,n,r,o,l,c,h,p=this.parent,d=this.parent.points.length,g=this._param,m=[];if((t=(new Date).getTime())-this._lastChangeTime>1e4*Math.random()||d<this._endStep){var u=.1*d|0,f=this._startStep=Math.random()*(d/3*2|0)|0;this._endStep=f+u+(Math.random()*(d-f-u)+1|0),this._lastChangeTime=t}for(i=((a=(e=p.points.slice(this._startStep,this._endStep)).length)-1)/this._separate,c=0;c<=this._separate;c++)h=i*c|0,m.push(e[h]);s=m[0],n=m[m.length-1],r=s.x-n.x,o=s.y-n.y,l=Math.sqrt(r*r+o*o),this._offset+=Math.random()*g.speed,this.points=this._filterApply(m,l,.5*a|0,g.base,g.amplitude,this._offset)},_colorToString:function(t){var e=this.parent.color;return"rgb"===this.parent.colorType?"rgba("+e.join(",")+","+t+")":"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t+")"}}),new s},this.Point=function(t,e,a,i){this.x=t,this.y=e,this.color=a,this.colorType=i,this.vx=6*Math.random()-3,this.vy=6*Math.random()-3,this._latest={x:this.x,y:this.y}},this.Point.prototype={color:null,colorType:"rgb",radius:50,alpha:.2,dragging:!1,dying:!1,dead:!1,_mouse:null,_latest:null,_mouseDist:null,_currentAlpha:0,_currentRadius:0,objTranslate:t.objTranslate.value,lengthSq:function(){return this.x*this.x+this.y*this.y},hitTest:function(t){var e=t.x-this.x,a=t.y-this.y;return e*e+a*a<this.radius*this.radius},dragStart:function(t){return this.hitTest(t)&&(this._mouse=t,this._mouseDist={x:this.x-t.x,y:this.y-t.y},this.dragging=!0),this.dragging},dragEnd:function(){this.dragging=!1,this._mouse=this._mouseDist=null},kill:function(){this.dying=!0,this.radius=0},update:function(t){var e,a,i=this.radius;this._mouse?(this._latest.x=this.x,this._latest.y=this.y,this.x=this._mouse.x+this._mouseDist.x,this.y=this._mouse.y+this._mouseDist.y,this.vx=this.x-this._latest.x,this.vy=this.y-this._latest.y):(this.x+=this.vx,this.y+=this.vy,this.vx*=.98,this.vy*=.98),(e=Math.sqrt(this.vx*this.vx+this.vy*this.vy))&&e>20&&(this.vx/=e/20,this.vy/=e/20),((a=this.alpha-this._currentAlpha)<0?-a:a)>.001&&(this._currentAlpha+=.1*a),((a=i-this._currentRadius)<0?-a:a)>.01?this._currentRadius+=.35*a:this.dying&&(this.dead=!0),this._currentRadius*=Math.random()*(1-.85)+.85},draw:function(t){if(this.objTranslate.effect){var e=this._currentRadius,a=t.createRadialGradient(this.x,this.y,e/3,this.x,this.y,e);a.addColorStop(0,this._colorToString(this._currentAlpha)),a.addColorStop(1,this._colorToString(0)),t.fillStyle=a,t.beginPath(),t.moveTo(this.x+e,this.y),t.arc(this.x,this.y,e,0,2*Math.PI,!1),t.fill()}},_colorToString:function(t){var e=this.color;return"rgb"===this.colorType?"rgba("+e.join(",")+","+t+")":"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t+")"}},this.install=!1,this.dragPointNumber=2,this.dragPointMaxNumber=8,this.childNumber=2,this.lightningColor=[195,100,50],this.createPoint=function(t,e){return new this.Point(t,e,this.lightningColor.slice(),"hsl")},this.points=[],this.drawLightning=[],this.isOval=function(t){return"oval"===t.label?(x="left"===this.monsterDir?-60:60,y=-10):(x=0,y=0),{x:x,y:y}},this.updateFn=function(t,e){var a,i,s,n,r=this.points,o=this.targets,l=[];if(t.globalCompositeOperation="lighter","freeze"!==e)for(a=0,i=r.length;a<i;a++)s=r[a],n=this.isOval(o[a]),s.x=o[a].position.x+n.x,s.y=o[a].position.y+n.y,s.update(),s.draw(t),s.dead?(r.splice(a,1),a--,i--):s.dying||l.push(s);this.drawLightning.render(t,l,e),this.drawLightning.color[2]=65*Math.random()+35,t.globalCompositeOperation="source-over"},this.delay=5,this.latestDir=0,this.spliceNumber=25,this.update=function(t,e){if(this.install)if(this.monsterDir=a,this.latestDir!==e&&(this.delay=0),this.delay--,this.delay>0)this.updateFn(t);else{if(!this.lastPoints||!this.lastPoints.length)return!0;this.updateFn(t,"freeze"),this.lastPoints.splice(0,this.spliceNumber)}else{for(var i=0;i<this.targets.length;i++)this.points.push(this.createPoint(this.targets[i].position.x,this.targets[i].position.y));this.drawLightning=new this.factory(this,this.skillName),this.drawLightning.addParam(8,10,.7,.01),this.drawLightning.addParam(16,60,.5,.03),this.drawLightning.colorType="hsl",this.drawLightning.color=this.lightningColor.slice(),this.latestDir=e,"lightning-strike"===this.skillName&&(this.delay=600),"chain-lightning"===this.skillName?this.spliceNumber=100:(this.drawLightning.createChild(80,.5,.06),this.drawLightning.createChild(80,.5,.06)),this.install=!0}}},this.lightningArea=function(e,a,i){this.target=e,this.allTarget=[],this.attacker=t.oval.value,this.monsterDir=a,this.skillName=i,this.areaDmg="",this.tick=4,this.x=0,this.y=0,this.lightningFn="",this.objTranslate=t.objTranslate.value,this.update=function(e,a){if(this.install){if(this.lightningFn.update(e,a)){for(s=0;s<this.allTarget.length;s++){if("oval"===this.allTarget[s].label){this.allTarget.splice(s,1);break}}return this.allTarget}}else if(this.tick--,3===this.tick&&(this.x=this.target.position.x,this.y=this.target.position.y,this.areaDmg=t.staticAreaDmg.value(this,700,300),this.areaDmg.caster=this.attacker.label,t.World.add(t.engine.world,this.areaDmg),t.areaDmgPool.value.set(this.areaDmg.label,this.areaDmg)),t.Body.setPosition(this.areaDmg,{x:this.target.position.x,y:this.target.position.y}),0===this.tick&&t.monsterControl.triggerMonsterFn("area"),this.tick<-4){t.World.remove(t.engine.world,this.areaDmg);for(var i=t.areaDmgPool.value.get(this.areaDmg.label).monsterParameters,s=0,n=i.length;s<n;s++)this.allTarget.push(i[s].object);this.allTarget=t.AI.sortestEnemy(this.allTarget,this.target,{orderByDir:!0}),this.allTarget.length<=1&&this.allTarget.unshift(t.oval.value),this.lightningFn=new t.lightning(this.allTarget,this.monsterDir,this.skillName),t.areaDmgPool.value.remove(this.areaDmg.label),this.install=!0}}},this.fireBall=function(){this.install=!1,this.stop=!1,this.particles=[],this.update=function(a,i,s){if(this.install){if(this.stop)return!0;var n=i.position.x,r=i.position.y;a.globalCompositeOperation="lighter";for(l=0;l<this.particles.length;l++){var o=this.particles[l];o.install||(this.particles[l].posX=n,this.particles[l].posY=r,this.particles[l].install=!0),e.particleGeometry(a,o),o.remaining_life--,o.radius--,(o.remaining_life<0||o.radius<0)&&(this.particles[l]=new e.particleRocket({radius:t.random(10,30),color:{r:255,g:75,b:0}}))}"stop"===s&&(this.stop=!0),a.globalCompositeOperation="source-over"}else{for(var l=0;l<30;l++)this.particles.push(new e.particleRocket({radius:t.random(5,50),color:{r:255,g:75,b:0}}));this.install=!0}}},this.fireBallAcid=function(e,a,i,s){this.parent=s,this.fireBallFn="",this.monsterDir=i,this.attacker=t.oval.value,this.objTranslate=t.objTranslate.value,this.explosionFn="",this.remove=!1,this.install=!1,this.object=new t.staticFireBall.value,this.monsterTarget=a,this.monster=e,this.pos=0,this.life=270,this.attackAllowed=!0,this.moveObj="",this.delay=120,this.distanceDiv=40,this.translateSpeedX=0,this.translateSpeedY=0,this.testShake={state:!0,tick:3},this.update=function(e){if(this.remove)return!0;if(this.install){var a,i=this.object.position,s=this.monsterTarget.position,n=i.x,r=i.y,o=Math.abs(n-s.x),l=Math.abs(r-s.y),c=o<40&&l<40;if(this.delay>0)if(this.pos){t.characterStatus.value;this.objTranslate.staticObjStateX&&(this.objTranslate.moveLeft?this.translateSpeedX+=this.objTranslate.staticObjMoveX:this.objTranslate.moveRight&&(this.translateSpeedX+=this.objTranslate.staticObjMoveX));var h=this.dungeonActive?3:this.objTranslate.staticObjMoveY;this.objTranslate.staticObjStateY&&(this.objTranslate.moveUp?this.translateSpeedY+=h:this.objTranslate.moveDown&&(this.translateSpeedY+=-h)),t.Body.setPosition(this.object,{x:this.pos.x+this.translateSpeedX,y:this.pos.y+this.translateSpeedY}),a=!0}else{var p="left"===this.monsterDir?-90:90;this.pos={x:this.attacker.position.x+p,y:this.attacker.position.y+-25}}else{var d=t.moveVector2dSmooth(this.object,this.monsterTarget,this.distanceDiv-=.5);t.Body.setPosition(this.object,{x:this.object.position.x+d.x,y:this.object.position.y+d.y}),a=!1}if(this.fireBallFn.update(t.context,this.object.position,"",a,this.object.position.x),c&&this.attackAllowed){this.parent.convertAttackCharacterSkillToDamage({explode:!0,skill:"fireball-acid"}),this.parent.isSkillActive=!0,this.attackAllowed=!1,t.playAudio("explosion"),t.playAudio("heat-impact");var g=t.globalAudio.value.get("fire-ball");g&&(g.pause(),g.currentTime=0,t.globalAudio.value.remove("fire-ball"))}!this.life||c?(t.World.remove(t.engine.world,this.object),this.fireBallFn.update(t.context,this.object.position,"stop"),this.explosionFn.update(t.context,this.object,{r:255,g:75,b:22})&&(this.remove=!0),this.life=0):(this.life--,this.delay--)}else t.World.add(t.engine.world,this.object),this.fireBallFn=new t.fireBallAcidEffect,this.explosionFn=new t.explosionEffect,this.install=!0}},this.fireBallArea=function(e,a,i,s,n){this.skillInitName=n,this.parent=s,this.fireBallFn="",this.set=!1,this.monsterDir=i,this.attacker=e,this.explosionFn="",this.remove=!1,this.x=0,this.y=0,this.position={x:0,y:0},this.remove=!1,this.install=!1,this.object=new t.staticFireBall.value,this.areaDmg="",this.areaDmgState=!0,this.setTick=4,this.monster=a,this.pos=0,this.life=270,this.attackAllowed=!0,this.moveObj="",this.delay=120,this.speed=10,this.particleNumber=25,this.scaleLength=30,this.imagePosY=30,this.imagePosX=130,this.scaleBefore=-220,this.translateSpeedX=0,this.translateSpeedY=0,this.radius="big",this.texture="/fireball-acid-2-spell.png",this.update=function(e){if(this.remove)return!0;if(this.install){this.position.x=this.x,this.position.y=this.y;var a=t.moveVector2dWithVelocity(this.object,this,this.speed);t.Body.setPosition(this.object,{x:this.object.position.x+a.x,y:this.object.position.y+a.y}),this.life>0?this.life--:this.state="stop";var i=this.object.bounds,s=this.position,n=i.max.y;s.y<n&&!this.set&&(t.playAudio("explosion"),t.playAudio("heat-impact"),this.state="stop",this.set=!0,t.World.add(t.engine.world,this.areaDmg),t.areaDmgPool.value.set(this.areaDmg.label,this.areaDmg)),this.fireBallFn.update(t.context,this.object.position,this.state,!1)&&(t.World.remove(t.engine.world,this.object),this.setTick--,this.setTick<0&&this.areaDmgState&&(t.monsterControl.triggerMonsterFn("area"),this.areaDmgState=!1,t.monsterGotHitWithSkill.value.set(this.skillInitName,!0),this.parent.convertAttackCharacterSkillToDamage({skill:this.skillInitName}),this.parent.isSkillActive=!0),t.Body.setPosition(this.areaDmg,{x:this.x,y:this.y}),this.explosionFn.update(t.context,this)&&(t.World.remove(t.engine.world,this.areaDmg),this.remove=!0))}else{t.World.add(t.engine.world,this.object);var r=/fireball-acid-3/i.test(this.skillInitName),o=r?t.random(200,-200):0,l=r&&/dungeon/i.test(t.activeMap.value)?t.random(50,-50):0,c=this.monster.position.x+o,h=this.monster.position.y+l;r&&(this.speed=25,this.scaleLength=15,this.scaleBefore=-150,this.particleNumber=25,this.imagePosY=-10,this.imagePosX=90,this.radius="medium",this.texture="/fireball-acid-3-spell.png"),t.Body.setPosition(this.object,{x:c+t.random(-100,-300),y:h-t.browserHeightUpdate}),t.staticGeometry.createStoratePassBG({x:c,y:h,parent:this,fn:new t.magicCircle({url:t.path+this.texture,scale:5,scaleBefore:this.scaleBefore,scaleLength:this.scaleLength,life:270,target:"",imagePosY:this.imagePosY,imagePosX:this.imagePosX})}),this.x=c,this.y=h,this.fireBallFn=new t.fireBallAreaEffect(this.radius),this.explosionFn=new t.explosionEffect2(this.particleNumber),this.areaDmg=t.staticAreaDmg.value(this,500,200),this.areaDmg.caster=this.attacker.label,this.areaDmg.areaName="fireBallAcid3",this.install=!0}}},this.hitNumber=function(e,a){this.number=e,this.critical=!!a&&a||"",this.install=!1,this.life=100,this.radius=12,this.remaining_life=this.life,this.posX=0,this.posY=0,this.tick=0,this.scaleState=11,this.moveYState=7,this.moveYStateFloat=0,this.scaleY={a:10,b:20},this.scaleX={a:10,b:20},this.drawCnt=[],this.render={texture:"",src:t.path+"/hit-num-color.png"},this.renderBold={texture:"",src:t.path+"/hit-num-color-bold.png"},this.renderHeal={texture:"",src:t.path+"/hit-num-color-heal.png"},this.renderBlock={texture:"",src:t.path+"/block.png"},this.renderStun={texture:"",src:t.path+"/stun.png"},this.renderMiss={texture:"",src:t.path+"/miss.png"},this.opacity=1,this.numberCase=function(){switch(this.number){case"block":this.texture=t.getTexture(this.render,this.renderBlock.src);break;case"stun":this.texture=t.getTexture(this.render,this.renderStun.src);break;case"miss":this.texture=t.getTexture(this.render,this.renderMiss.src);break;default:this.texture=t.getTexture(this.render,this.render.src)}"critical"===this.critical?this.texture=t.getTexture(this.renderBold,this.renderBold.src):"heal"===this.critical&&(this.texture=t.getTexture(this.renderBold,this.renderHeal.src))},this.texture="",this.vy=0,this.vx=0,this.gravityY=0,this.gravityX=0,this.numberOnly=!0,this.vecUp={x:0,y:0},this.update=function(e,a){var i,s,n=a.position.x,r=a.bounds.min.y-50,o=a.additionalBoundsValue?-a.additionalBoundsValue:0,l=this.number.toString().split(""),c=l.length;if(this.numberCase(),!this.install){if(this.posX=n,this.posY=r,this.vx=t.randomFloat(4,2.5),this.vy=t.random(15,14),/block|miss|stun/i.test(this.number))this.numberOnly=!1,this.drawCnt.unshift({fn:new t.draw.hitNumber,number:this.number});else{this.number;for(var h=0;h<c;h++)this.drawCnt.unshift({fn:new t.draw.hitNumber,number:l[h]})}this.vecUp.y=Math.abs(t.randomFloat(2,1.5)),this.vecUp.x=Math.abs(t.randomFloat(1.5,.6)),this.install=!0}if(this.gravityY-=this.vy,this.gravityX+=this.vx,e.globalAlpha=this.opacity,this.numberOnly)for(h=0;h<this.drawCnt.length;h++)g="a",1===c?(i=20,s=0):2===c?(i=1===h?40/3*2:0,s=4):3===c?(i=0===h?-40/3*2:1===h?0:40/3*2,s=10):4===c&&(i=0===h?-40/3*2:1===h?0:2===h?40/3*2:40/3*4,s=8,g="b"),this.scaleState--,this.scaleState>0?(this.scaleY[g]++,this.scaleX[g]++):(this.scaleY[g]>-5&&(this.scaleY[g]-=1.5),this.scaleX[g]>-5&&(this.scaleX[g]-=1)),this.drawCnt[h].fn.update({context:t.context,width:40,height:40,state:this.drawCnt[h].number,image:this.texture,posX:this.posX-i-s+this.gravityX,posY:this.posY+this.gravityY,scaleY:this.scaleY[g],scaleX:this.scaleX[g],additionalBoundsValue:o});else{this.scaleState--;var p,d,g="a",m=0;this.scaleState>0?(this.scaleY[g]++,this.scaleX[g]++):(this.scaleY[g]>-7&&this.scaleY[g]--,this.scaleX[g]>-5&&this.scaleX[g]--),/stun|miss/i.test(this.number)?(p=101,m=-35,d=35):(p=101,d=25),this.drawCnt[0].fn.update({context:t.context,width:p,height:d,state:this.drawCnt[0].number,image:this.texture,posX:this.posX+m+this.gravityX,posY:this.posY+this.gravityY,scaleY:this.scaleY[g],scaleX:this.scaleX[g],additionalBoundsValue:o})}if(e.globalAlpha=1,this.moveYStateFloat+=1,this.posY+=6+this.moveYStateFloat,this.moveYState--,this.moveYState<0&&(this.opacity-=.07),this.tick++,this.tick>20)return!0}},this.characterBar=function(t,e){this.radius=80,this.color=t,this.maxBar=e,this.curPerc=e,this.circ=2*Math.PI,this.quart=Math.PI/2,this.update=function(t,e,a,i,s){t.lineWidth=10,t.strokeStyle="rgba( 0, 0, 0, 0.1 )",t.beginPath(),t.arc(this.radius+e,this.radius+a,this.radius,-this.quart,this.circ),t.stroke(),t.beginPath(),t.lineWidth=7,t.strokeStyle=this.color,t.arc(this.radius+e,this.radius+a,this.radius,-this.quart,-this.circ*-i/this.maxBar-this.quart,!1),t.stroke()}},this.loadingAct=function(t,e,a){this.radius=t,this.color=e||"rgba(0, 0, 0, 0.4 )",this.tick=a||100,this.curPerc=0,this.circ=2*Math.PI,this.quart=Math.PI/2,this.remove=!1,this.x=0,this.update=function(t,e,a,i){if("reset"===i&&(this.curPerc=0),!(this.curPerc<this.tick)||this.remove)return!0;this.x=e||-500,this.curPerc++,t.lineWidth=5,t.strokeStyle=this.color,t.shadowOffsetX=0,t.shadowOffsetY=0,t.beginPath(),t.arc(this.x,a,this.radius,-this.quart,this.circ*-this.curPerc/this.tick-this.quart,!1),t.stroke()}},this.glowPortal=function(){this.particle_count=80,this.objTranslate=t.objTranslate.value,this.particles=[],this.install=!1,this.update=function(t,a){a.x,a.width,a.y,a.height,a.color;if(!this.install){for(var i=0;i<this.particle_count;i++)this.particles.push(new e.particlePortalGlow(a));this.install=!0}if(this.objTranslate.effect){t.globalCompositeOperation="lighter";for(i=0;i<this.particles.length;i++){var s=this.particles[i];e.gradientPortalGlow(s,t),s.remaining_life--,s.radius--,s.location.x+=s.speed.x/1.3,s.location.y+=s.speed.y/1.3,(s.remaining_life<0||s.radius<0||a.x+70>s.location.x||a.x+130<s.location.x||a.y+70>s.location.y||a.y+130<s.location.y)&&(this.particles[i]=new e.particlePortalGlow(a))}t.globalCompositeOperation="source-over"}}}},_owlBird.sprites=function(){scope=this,this.draw={},this.draw.coin=function(options){this.frameIndex=0,this.tickCount=0,this.numberOfFrames=9,this.frameSpeed=2,this.update=function(options){with(options){this.tickCount+=1;var imgWidth=width*this.numberOfFrames;this.tickCount>this.frameSpeed&&this.frameIndex<this.numberOfFrames?(this.tickCount=0,this.frameIndex+=1):this.frameIndex*width>=imgWidth&&(this.frameIndex=0),context.drawImage(image,this.frameIndex*width,0,width,height,-25,-20,width,height)}}},this.draw.enviOrnaments=function(){this.update=function(t){t.context.drawImage(t.textures,Math.floor(t.posX),Math.floor(t.posY),t.textures.width,t.textures.height)}},this.draw.rocket=function(options){this.frameIndex=0,this.tickCount=0,this.numberOfFrames=7,this.frameSpeed=2,this.update=function(options){with(options){var imgWidth=width*this.numberOfFrames;"left"===state?this.frameIndex=6:"leftTop"===state?this.frameIndex=7:"top"===state?this.frameIndex=0:"rightTop"===state?this.frameIndex=1:"right"===state?this.frameIndex=2:"rightBottom"===state?this.frameIndex=3:"bottom"===state?this.frameIndex=4:"leftBottom"===state&&(this.frameIndex=5),context.drawImage(image,this.frameIndex*width,0,width,height,-25,-20,width,height)}}},this.draw.generalDrawImage=function(){this.update=function(options){with(options)context.drawImage(image,Math.floor(Math.floor(posX+imagePosX)-image.width/2-offsetX),Math.floor(Math.floor(posY+imagePosY)-offsetY),Math.floor(image.width+scaleBefore+scaleX),Math.floor(image.height+scaleBefore+scaleY))}},this.draw.monsterSlime=function(){this.frame=0,this.tick=0,this.numberOfFrames=3,this.frameSpeed=35,this.update=function(options){with(options){if("idle"===state||"attack"===state){this.tick++;var frameIdle=2;this.tick>this.frameSpeed&&this.frame<frameIdle&&(this.tick=0,this.frame+=1,this.frame>=frameIdle&&(this.frame=0)),"attack"===state?this.frameSpeed=15:this.frameSpeed=35}else"hit"===state?(this.frame=2,this.tick=0):(this.frame=0,this.tick=0);context.drawImage(image,this.frame*width/this.numberOfFrames,0,width/this.numberOfFrames,height+8,-20,-20,width/this.numberOfFrames,height)}}},this.draw.monsterJump=function(){this.frameB=0,this.tickB=0,this.nofFrameB=4,this.fSpeedB=8,this.update=function(options){with(options){if("idle"===state){this.tickB+=1;var imgWidth=width*this.nofFrameB;this.tickB>this.fSpeedB&&this.frameB<this.nofFrameB?(this.tickB=0,this.frameB+=1):this.frameB*width>=imgWidth&&(this.frameB=0)}else"hit"===state?(this.frameB=4,this.tickB=0):(this.frameB=0,this.tickB=0);needClear&&(this.frameB=4),context.drawImage(image,this.frameB*width,0,width,height,-20,-20,width,height)}}},this.draw.monsterGolem=function(){this.state="",this.frameIndex=0,this.frameStartFrom=0,this.tick=0,this.numberOfFrames=34,this.totalOfFrames=34,this.frameSpeed=10,this.height=0,this.frameFn=function(t){this.tick+=1;var e=t*this.numberOfFrames;this.tick>this.frameSpeed&&this.frameIndex<this.numberOfFrames?(this.tick=0,this.frameIndex++):this.frameIndex*t>=e&&(this.frameIndex=this.frameStartFrom),this.frameIndex<this.frameStartFrom&&(this.frameIndex=this.frameStartFrom),this.frameIndex>this.numberOfFrames&&(this.frameIndex=this.numberOfFrames),this.frameIndex>=this.totalOfFrames&&(this.frameIndex=this.frameStartFrom)},this.update=function(options){with(options)/walk|idle/i.test(state)&&this.state!==state?(this.frameIndex=28,this.numberOfFrames=34,this.frameStartFrom=28,this.frameSpeed=8,this.state=state):"attack"===state&&this.state!==state?(this.frameIndex=15,this.numberOfFrames=20,this.frameStartFrom=15,this.frameSpeed=8,this.state=state):"disappear"===state&&this.state!==state?(this.frameIndex=21,this.numberOfFrames=28,this.frameStartFrom=21,this.frameSpeed=8,this.state=state):"appear"===state&&this.state!==state&&(this.frameIndex=0,this.numberOfFrames=15,this.frameStartFrom=0,this.frameSpeed=6,this.state=state),this.frameFn(width),context.drawImage(image,this.frameIndex*width/this.totalOfFrames,0,width/this.totalOfFrames,height,-100,-130,width/this.totalOfFrames,height)}},this.draw.monsterGeneral=function(){this.state="",this.repeat=!0,this.install=!1,this.width=0,this.height=0,this.frameindexWidth=0,this.frameindexHeight=0,this.indexHeight=0,this.frameindexAbsolute=0,this.frameStartFrom=0,this.levelFrames=8,this.levelFramePerState=0,this.levelFrameUpdate=0,this.tick=0,this.numberOfFrames=9,this.totalOfFrames=72,this.frameSpeed=5,this.tickHeight=0,this.opacity=1,this.frameFn=function(){if(this.tick+=1,this.tick>this.frameSpeed&&this.frameindexWidth<this.numberOfFrames)this.tick=0,this.frameindexWidth++,this.frameindexAbsolute++;else if(this.frameindexWidth>this.levelFrameUpdate&&this.repeat){this.tickHeight>1&&(this.frameindexAbsolute=this.frameStartFrom,this.frameindexHeight=this.indexHeight-this.height,this.tickHeight=0),this.frameindexWidth=this.frameStartFrom,this.frameindexHeight+=this.height,this.tickHeight++;var t=this.height*(this.levelFramePerState+1)-this.height;this.frameindexHeight>t&&(this.frameindexHeight=t)}else this.frameindexWidth>this.levelFrameUpdate&&!this.repeat&&(this.frameindexAbsolute<this.numberOfFrames&&(this.frameindexHeight+=this.height),this.frameindexWidth=this.frameStartFrom,this.tickHeight++);!this.repeat&&this.frameindexAbsolute>=this.numberOfFrames&&(this.frameindexWidth=this.levelFrameUpdate)},this.draw=function(t,e){t.context.drawImage(t.image,e*t.image.width/(this.totalOfFrames/this.levelFrames),this.frameindexHeight,this.width,this.height,-this.width/2+t.additionalBoundsWidthValue,-160+t.additionalBoundsHeightValue,this.width,this.height)},this.update=function(t){if(this.install){this.state!==t.state&&"walk"===t.state?(this.indexHeight=0,this.frameindexHeight=0,this.frameSpeed=t.walkFrameSpeed,this.levelFramePerState=0,this.repeat=!0):this.state!==t.state&&"idle"===t.state?(this.indexHeight=1*this.height,this.frameindexHeight=this.indexHeight,this.frameSpeed=2,this.levelFramePerState=1,this.repeat=!0):"attack"===t.state&&this.state!==t.state?(this.indexHeight=2*this.height,this.frameindexHeight=this.indexHeight,this.frameSpeed=2,this.levelFramePerState=2,this.repeat=!0):"die"===t.state&&this.state!==t.state?(this.indexHeight=3*this.height,this.frameindexHeight=this.indexHeight,this.frameSpeed=2,this.levelFramePerState=3,this.repeat=!1):"jump"===t.state&&this.state!==t.state&&(this.indexHeight=4*this.height,this.frameindexHeight=this.indexHeight,this.frameSpeed=4,this.levelFramePerState=4,this.repeat=!1),this.state!==t.state&&(this.tickHeight=this.tick=this.frameindexAbsolute=this.frameindexWidth=0,this.state=t.state);var e=this.frameindexWidth>this.levelFrameUpdate?0:this.frameindexWidth;this.frameFn(),"die"===t.state?(this.opacity>0?this.opacity-=.02:this.opacity=0,t.context.globalAlpha=t.opacity?t.opacity:this.opacity,this.draw(t,e),t.context.globalAlpha=1):this.draw(t,e)}else this.totalOfFrames=t.totalOfFrames,this.levelFrames=this.totalOfFrames/9,this.width=Math.floor(t.width/(this.totalOfFrames/this.levelFrames)),this.height=t.height/this.levelFrames,this.levelFrameUpdate=this.totalOfFrames/this.levelFrames-1,t.width&&(this.install=!0)}},this.draw.mapMark=function(t){this.mapSize=200,this.posX=0,this.posY=0,this.positionX=0,this.positionY=0,this.screenWidthMax=0,this.screenWidthMin=0,this.screenHeightMax=0,this.screenHeightMin=0,this.render={red:{textures:"",src:scope.path+"/dot-red.png"},purple:{textures:"",src:scope.path+"/dot-purple.png",oval:!0},blue:{textures:"",src:scope.path+"/dot-blue.png"},orange:{textures:"",src:scope.path+"/dot-orange.png"},arrow:{textures:"",src:scope.path+"/arrow map.png"},help:{textures:"",src:scope.path+"/help.png"},info:{textures:"",src:scope.path+"/info.png"}},this.isInside=function(t,e,a){return this.posX=this.positionX+e/t.scaleSize,this.posY=this.positionY+a/t.scaleSize,this.posX<this.screenWidthMax-t.center.x-15&&this.posX>this.screenWidthMin-t.center.x&&this.posY>this.screenHeightMax-t.center.y&&this.posY<this.screenHeightMin-t.center.y},this.updateTest=1,this.posTemp={x:-100,y:-100},this.updatePos={x:0,y:0},this.delayTick=100,this.heightPos=0,this.moveY=0,this.update=function(t){if(!this.install){for(var e in this.positionY=10,this.screenHeightMax=0,this.screenHeightMin=this.mapSize-20,this.render)scope.getTexture(this.render[e],this.render[e].src);t.quest&&(this.updatePos.x=t.pos.x,this.updatePos.y=t.pos.y),this.install=!0}if(this.screenWidthMax=scope.browserWidthUpdate,this.screenWidthMin=scope.browserWidthUpdate-this.mapSize,this.positionX=t.screenSizeX-this.mapSize-10,this.isInside(t,t.pos.x,t.pos.y)){if(t.quest){this.updatePos={x:t.pos.x,y:t.pos.y};var a=this.render[t.colorTarget]}else a=this.render[t.color];if("purple"===t.color)var i=this.mapSize/2-a.textures.height/2;else i=this.posY+t.center.y+a.textures.height/2;t.context.drawImage(a.textures,Math.floor(this.posX+t.center.x),i,a.textures.width,a.textures.height)}else if(t.quest){var s=scope.moveVector2dWithVelocity(t.characterPos,this.updatePos,this.updateTest,!0),n=(a=this.render[t.color],s.vector),r=s.angle;this.isInside(t,this.updatePos.x,this.updatePos.y)?(this.posTemp.x=Math.floor(this.posX+t.center.x),this.posTemp.y=Math.floor(this.posY+t.center.y),this.updatePos.x=t.pos.x,this.updatePos.y=t.pos.y,this.updateTest=1):(this.updatePos.x=this.updatePos.x+n.x,this.updatePos.y=this.updatePos.y+n.y,this.updateTest--),t.context.save(),scope.rotateGeometry(t.context,this.posTemp.x,this.posTemp.y,16,12,r),t.context.drawImage(a.textures,this.posTemp.x,this.posTemp.y,a.textures.width,a.textures.height),t.context.restore()}}},this.draw.map=function(){this.heightPos=0,this.widthPos=0,this.mapSize=200,this.delayTick=100,this.install=!1,this.positionX=0,this.moveY=0,this.update=function(t){this.delayTick&&(this.moveY=scope.staticWallOutter.value()[0].position.y-scope.oval.value.position.y,this.heightPos=t.posY/4-this.moveY/4-this.mapSize,this.delayTick--),this.positionX=t.screenSizeX-this.mapSize,t.context.drawImage(t.textures,Math.floor(-t.posX/4-t.center.x),Math.floor(this.heightPos+-t.posY/4+t.center.y),Math.floor(this.mapSize*t.scaleSize),Math.floor(this.mapSize*t.scaleSize),Math.floor(this.positionX),0,this.mapSize,this.mapSize)}},this.draw.monsterHorn=function(){this.state="",this.frameIndex=0,this.frameStartFrom=0,this.tick=0,this.numberOfFrames=7,this.totalOfFrames=7,this.frameSpeed=10,this.height=0,this.frameFn=function(t){this.tick+=1;var e=t*this.numberOfFrames;this.tick>this.frameSpeed&&this.frameIndex<this.numberOfFrames?(this.tick=0,this.frameIndex++):this.frameIndex*t>=e&&(this.frameIndex=this.frameStartFrom),this.frameIndex>=this.totalOfFrames&&(this.frameIndex=this.frameStartFrom)},this.update=function(options){with(options)"walk"===state&&this.state!==state?(this.numberOfFrames=4,this.frameStartFrom=0,this.frameSpeed=10,this.frameIndex=0,this.state=state):"hit"===state&&this.state!==state?(this.numberOfFrames=1,this.frameStartFrom=4,this.state=state):"idle"===state&&this.state!==state&&(this.frameIndex=4,this.numberOfFrames=7,this.frameStartFrom=5,this.frameSpeed=17,this.state=state),this.frameFn(width),context.drawImage(image,this.frameIndex*width/this.totalOfFrames,0,width/this.totalOfFrames,height,-20,-20,width/this.totalOfFrames,height)}},this.draw.greenDragon=function(options){this.frameIndex=0,this.tickCount=0,this.numberOfFrames=3,this.frameSpeed=5,this.update=function(options){with(options){this.tickCount+=1;var imgWidth=width*this.numberOfFrames;this.tickCount>this.frameSpeed&&this.frameIndex<this.numberOfFrames?(this.tickCount=0,this.frameIndex+=1):this.frameIndex*width>=imgWidth&&(this.frameIndex=0),context.drawImage(image,this.frameIndex*width,0,width,height,-55,-50,width,height)}}},this.draw.ellipseMagicSpell=function(options){this.update=function(options){with(options)context.drawImage(image,0,0,image.width,image.height,posX-image.width/4-resize/2,posY,image.width/2+resize,image.height/2+small/2)}},this.drawIceBeamMagicSpell=function(option){this.update=function(options){with(options)context.drawImage(image,0,0,image.width,image.height,posX-image.width/4-resize/2,posY,image.width/2+resize,image.height/2+small/4)}},this.draw.hitNumber=function(options){this.frameIndex=0,this.tickCount=0,this.numberOfFrames=10,this.update=function(options,object){with(options)if("block"!==options.state){var imgWidth=width*this.numberOfFrames;"1"===state?this.frameIndex=0:"2"===state?this.frameIndex=1:"3"===state?this.frameIndex=2:"4"===state?this.frameIndex=3:"5"===state?this.frameIndex=4:"6"===state?this.frameIndex=5:"7"===state?this.frameIndex=6:"8"===state?this.frameIndex=7:"9"===state?this.frameIndex=8:"0"===state?this.frameIndex=9:"+"===state&&(this.frameIndex=10),context.drawImage(image,Math.floor(this.frameIndex*width),0,width,height,Math.floor(posX-scaleY/2),posY+additionalBoundsValue,width+scaleY,height+scaleX)}else context.drawImage(image,Math.floor(Math.floor(posX)-width/2),Math.floor(Math.floor(posY+additionalBoundsValue)),width+scaleY,height+scaleY)}}},_owlBird.plugins=function(){var t=this;this.screenTransition=function(e,a,i,s){var n={loading:function(e,a,i,s){this.renderVal=function(e,a,i){this.loop=function(e,a){for(var i=0,s=e;i<s.length;i++)"progress-val"===s[i].className?t.text(s[i],a+"%"):"progress-in"===s[i].className&&(s[i].style.width=a+"%")},"open"===e?this.loop(a,i):this.loop(a,0)},"open"===e?(t.loading.style.display="block",this.renderVal(e,s,Math.floor(i/a*100))):"close"===e&&(t.loading.style.display="none",this.renderVal(e,s))},status:function(e){for(var a=t.loading.getElementsByTagName("div"),i=0;i<a.length;i++)if("status"===a[i].className){t.text(a[i],e);break}}},r=t.slice(t.loading.getElementsByTagName("span"));if("download"===e){var o,l,c=[],h=t.staticAllMap.value[a],p=t.staticGeometry.storage.get(a),g=t.staticGeometry.storageMap.get(a),m=d.manualPng,u=d.manualAudio,f=Modernizr.audio.ogg?".ogg":Modernizr.audio.mp3?".mp3":".wav",v=function(t){for(var e=0,a=c;e<a.length;e++)if(a[e].render&&a[e].src===t)return!1;return!0},b={img:0,WWHH:0};for(var S in h)if("content"===S){t:for(var x in h[S])if(x in h[S])if(/staticName/i.test(x))for(var k in h[S][x]){var y=h[S][x][k],B={};for(var w in B.textures={src:y.src},t.getTexture(B,y.src,"textureNeedChange|"+y.src),t.extend(y,B),B.textures.pairTextures)/left|right/i.test(w)&&c.push({pairTextures:!0,location:w,render:B.textures.pairTextures,img:B.textures.pairTextures[w],src:B.textures.pairTextures[w].src})}else{if(!(o=h[S][x].render?h[S][x].render.sprite.texture||"undefined":h[S][x].src)||!v(o))continue t;void 0!==o&&((l=new Image).scr=o,h[S][x].src?c.push({render:h[S][x].render.sprite,img:l,src:o}):((B={}).renderBody={textures:"",src:o},t.extend(h[S][x],B),c.push({render:B,img:l,src:o})))}}else t:for(var x in h[S])if(x in h[S]){if(!(o=h[S][x].src)||!v(o))continue t;o&&((l=new Image).scr=o,c.push({render:h[S][x],img:l,src:o}))}for(S=0,x=p;S<x.length;S++)(o=x[S].render.src)&&v(o)&&void 0!==o&&((l=new Image).scr=o,c.push({render:x[S].render,img:l,src:o}));for(S=0,x=g;S<x.length;S++)o=x[S].render.src,(B={}).renderBody={textures:"",src:o},(l=new Image).scr=o,c.push({render:B,img:l,src:o});for(S=0,x=m;S<x.length;S++)src=d.urlData+"/bitmap/2d/"+x[S]+".png",B={},v(src)&&(B.textures={src:src},(l=new Image).scr=src,c.push({render:B,img:l,src:src}));for(S=0,x=u;S<x.length;S++)c.push({src:d.urlData+"/bitmap/2d/audio/"+x[S]+f});n.status("Loading Assets");var M=c.length,P=[],A=function(e,a){var i=new createjs.LoadQueue;i.addEventListener("fileload",function(t,e){for(var a=0,i=c;a<i.length;a++)if(i[a].src===t){var s=i[a].src.split("/");i[a].name=s[s.length-1].split(".")[0],i[a].result=e.result;break}b.img++,n.loading("open",M,b.img,r)}.bind(this,e)),i.addEventListener("fileerror",function(e,i){t.removeClass(t.qs("preload-alert"),"hidden"),P.push(e),a&&(c.length<b.img&&b.img++,t.removeClass(t.qs("btn-pre-cnt-btn"),"hidden"),t.removeClass(t.qs("btn-pre-cnt-li"),"hidden"))}.bind(this,e)),i.addEventListener("error",function(e,i){t.removeClass(t.qs("preload-alert"),"hidden"),P.push(e),a&&(c.length<b.img&&b.img++,t.removeClass(t.qs("btn-pre-cnt-btn"),"hidden"),t.removeClass(t.qs("btn-pre-cnt-li"),"hidden"))}.bind(this,e)),i.loadFile(e)};n.loading("open",M,0,r);for(S=0,x=c;S<x.length;S++)"undefined"!==x[S].src?A(x[S].src):(b.img++,c.splice(S,1));t.globalPreloadError.value=function(){b.img=0;for(var t=0,e=c;t<e.length;t++)"undefined"!==e[t].src&&A(e[t].src,!0)};var D=0;for(S=0,x=c;S<x.length;S++)x[S].render&&D++;var j=setInterval(function(){var e=c.length,a=t.svgTot.value.total,s=t.svgTot.value.current;if(b.img+s>=e+a||Math.floor(b.img/e*100)>=99)for(var n=0,r=c;n<r.length;n++)if(r[n].render&&r[n].img.complete&&"undefined"!==r[n].src){if(r[n].pairTextures){r[n].render[r[n].location];r[n].result}else r[n].render.src&&(r[n].render.textures=r[n].result);if(b.WWHH++,b.WWHH>=D){d.assets=c,clearInterval(j),i&&i.call(!0);break}}},1e3)}else if("build-map"===e)n.status("Building a map");else if("move-character"===e){var T=a;n.status("Summoing character"),"open"===T?n.loading("open",100,100,r):"close"===T&&n.loading("close",100,100,r)}},this.toggleButton=function(){setTimeout(function(){for(var e=t.slice(t.qsAll("switch-control")),a=(t.qs("bar-hp"),t.qs("bar-mp"),t.characterParameters.value),i=0,s=e.length;i<s;i++){var n=e[i],r=t.getFirstChild(n),o=t.getFirstChild(r),l=t.sibling(r,"next");a.setting.effect?(o.style.left="35px",t.text(l,"ON"),t.objTranslate.value.effect=!0,l.style.marginRight="-40px"):(o.style.left="0px",t.text(l,"OFF"),t.objTranslate.value.effect=!1,l.style.marginRight="-50px")}for(i=0,s=e.length;i<s;i++)t.attachListener(e[i],t.CursorEndEvent,function(e){var i=t.getFirstChild(e),s=t.getFirstChild(i),n=i.getBoundingClientRect(),r=t.sibling(i,"next");Math.abs(n.left-t.mousePosition.value.pos.mousedown.x)>n.width/2?(s.style.left=n.width/2-5+"px",t.text(r,"ON"),t.objTranslate.value.effect=!0,a.setting.effect=!0,r.style.marginRight="-40px"):(s.style.left="0px",t.text(r,"OFF"),t.objTranslate.value.effect=!1,a.setting.effect=!1,r.style.marginRight="-50px")}.bind(this,e[i]))},1e3)},this.dragBar=function(){var e=t.slice(t.qsAll("bar-control")),a={parent:"",drag:"",dragObject:"",dragBar:"",start:!1,init:"",end:0},i=function(){var e=t.mousePosition.value.pos.mousemove.x;if(e>a.parent.left&&e<a.parent.right){var i=Math.round(a.parent.right)-Math.round(a.parent.left);if(currentLength=Math.round(e)-Math.round(a.parent.left),length=Math.round(100*currentLength/i)+1,charparams=t.characterParameters.value,a.dragBar.style.width=length<0?0:length+"%",a.dragObject.style.left=e-a.parent.left+"px","hp"===a.init){var s=charparams.maxHealth;charparams.setting.healthPercentage=length,charparams.maxHealthCure=Math.round(s*length/100)}else{var n=charparams.maxMp;charparams.setting.mpPercentage=length,charparams.maxMpCure=Math.round(n*length/100)}}};setTimeout(function(){var s=t.isMobile.value(),n=s?t.qs("tab-performance-mb"):t.controlContainer;s&&t.qs("tab-performance-mb").appendChild(t.qs("performance-detail"));var r=t.qs("bar-hp"),o=t.qs("bar-mp"),l=t.characterParameters.value,c=l.setting.healthPercentage,h=l.setting.mpPercentage;r.style.width=l.setting.healthPercentage+"%",o.style.width=l.setting.mpPercentage+"%",l.maxHealthCure=Math.round(l.maxHealth*c/100),l.maxMpCure=Math.round(l.maxMp*h/100);for(var p=0,d=e.length;p<d;p++){e[p];t.attachListener(e[p],t.CursorStartEvent,function(t){if(!a.start){var e=t.querySelectorAll("div");a.parent=t.getBoundingClientRect(),a.dragObject=e[e.length-1],a.dragBar=e[0],a.init=/bar-hp/i.test(a.dragBar.className)?"hp":"mp",a.start=!0,i()}}.bind(t,e[p]))}t.attachListener(n,t.CursorMoveEvent,function(t){a.start&&i()}),t.attachListener(n,t.CursorEndEvent,function(t){a.start=!1})},1e3)},this.scrollSlide=function(){var e=t.slice(t.qsAll("box-quest")),a={firstLoad:!1,checkOverflow:function(t,e){for(var a=0,i=e.length;a<i;a++){e[a].getBoundingClientRect().bottom>t.bottom&&(e[a].style.display="none")}},attachEvent:function(e,a){t.that(e).use("attachListener",[t.CursorMoveEvent,function(e,a,i,s){if(t.isScroll.value){for(var n=a.getElementsByTagName("li"),r=e.getBoundingClientRect(),o=0,l=n.length;o<l;o++)n[o].style.display="block";var c=e.offsetHeight,h=a.offsetHeight+15,p=t.mousePosition.value.pos.mousemove,d=t.sibling(a,"next"),g=function(t){return 3*Math.abs(t/2/100*h)},m=function(t){return t/2/100*c*3};newVal=p.y,newVal>i.oldVal?i.moveVal>=0&&i.moveVal<=h&&i.moveValInPercent<h-c&&Math.abs(i.moveVal++):i.moveVal>=0&&i.moveVal<=h&&Math.abs(i.moveVal--),(i.moveVal<0||i.moveValInPercent<0)&&(i.moveVal=0),i.oldVal=p.y,i.moveValInPercent=g(i.moveVal),moveScroll=m(i.moveVal),widthScroll=c-function(){var t,e=0,a=0;if(!t)for(;a<h-c;)a=g(++e),t=m(e);return t}(),t.css(a,{transform:"0px,"+-i.moveValInPercent+"px,0px"}),t.css(d,{transform:"0px,"+moveScroll+"px,0px",height:widthScroll+"px",opacity:"0.5",transition:"opacity 0.5s linear"}),this.checkOverflow(r,n)}else a.setAttribute("style","")}.bind(this,e,a,{oldVal:0,newVal:0,moveVal:0,moveValInPercent:0,inPercent:0,moveScroll:0,widthScroll:0})]),t.attachListener(e,t.CursorEndEvent,function(e){t.sibling(e,"next").style.opacity=0}.bind(this,a)),t.attachListener(e,t.CursorLeaveEvent,function(e){t.sibling(e,"next").style.opacity=0}.bind(this,a))},fn:function(){for(var a=0,i=e.length;a<i;a++){var s=t.getFirstChild(e[a]),n=e[a].getBoundingClientRect(),r=s.getElementsByTagName("li");this.checkOverflow(n,r),this.firstLoad||this.attachEvent(e[a],s)}this.firstLoad=!0}};a.fn(),this.scrollSlideParams=a},this.textDialog=function(e){clearTimeout(t.activeDialog.value.timeout),clearInterval(t.activeDialog.value.interval),t.activeDialog.value.state=!1;var a=t.qs("body-dialog"),i=t.qs("left-dialog"),s=t.qs("right-dialog"),n="innerText"in a?"innerText":"textContent",r=0,o=function(e){e.avatarPosition&&(e.avatarPosition,t.qs("avatar-position").className="avatar-position "+e.avatarPosition+" "+e.avatarBackground,t.text(t.qs("title-dialog"),e.avatarName),t.text(t.qs("count-dialog"),r+1+"  / "+t.activeDialog.value.dialogCnt.length))},l=function(){t.activeDialog.value.state||(t.activeDialog.value.timeout=setTimeout(function(){var e=t.activeDialog.value.dialogCnt,i=e[r];console.log(i),o(i),t.activeDialog.value.state=!0;var s=i.text.split(","),c={loopText:s[0].split(" "),loopChildText:""};a[n]="",t.activeDialog.value.interval=setInterval(function(){c.loopText.length||c.loopChildText.length?""!==c.loopChildText&&c.loopChildText.length?t.text(a,'"'+a[n].split('"').join("")+c.loopChildText.splice(0,1)+'"'):(c.loopChildText=c.loopText[0].split(""),t.text(a,a[n]+" "+c.loopChildText.splice(0,1)),c.loopText.splice(0,1)):s.length?(s.splice(0,1),s.length&&(c.loopText=s[0].split(" "),c.loopText.unshift(", "),t.text(t.qs("count-dialog"),r+1+"  / "+e.length))):(clearInterval(t.activeDialog.value.interval),t.activeDialog.value.state=!1,e.length-1>r&&(r++,l()))},50)},1e3))};t.activeDialog.value.dialogCnt=e,l(),t.attachListener(i,"click",function(e){if(r-1>=0){r--;var i=t.activeDialog.value.dialogCnt[r];o(i),t.text(a,i.text),clearTimeout(t.activeDialog.value.timeout),clearInterval(t.activeDialog.value.interval)}}),t.attachListener(s,"click",function(e){if(r+1<=t.activeDialog.value.dialogCnt.length-1){r++;var i=t.activeDialog.value.dialogCnt[r];o(i),t.text(a,i.text),clearTimeout(t.activeDialog.value.timeout),clearInterval(t.activeDialog.value.interval)}})}},_owlBird.AIs=function(t){var e=this,a=function(t,a){for(var i=a.position,s=[],n=[],r=0,o=t;r<o.length;r++){var l=o[r].position,c=Math.round(e.distanceAndAngleBetweenTwoPoints(i.x,i.y,l.x,l.y).distance);n.push({path:o[r],distance:c}),s.push(c)}s=s.sort(function(t,e){return t-e});t:for(var h in s)for(var p in n){if("Object"==typeof s[h])continue t;s[h]===n[p].distance&&(s[h]=n[p].path)}return s};this.AI={},this.AI.sortestEnemy=function(t,i,s){if(!s)return a(t,i);if(s.orderByDir){var n=a(t,{position:{x:0,y:0}});return e.random(1,0)&&n||n.reverse()}},this.AI.orderPath=function(t){if(e.activeMapContent=e.staticAllMap.value[e.activeMap.value],e.activeMapContent.content.staticOriGroupPathPoints){t.position;var i=e.activeMapContent.content.staticOriGroupPathPoints;return a(i,t)}},this.AI.pathFinding=function(){this.initialPathFinding=new function(){this.temp="",this.getPath=!1,this.tick=10,this.active=!0,this.update=function(t,e){if(this.tick--,this.tick<0){var a,i,s=this.temp;if(s){if(a=Math.abs(s.x-t),i=Math.abs(s.y-e),a<5&&i<5?this.getPath++:this.getPath=0,this.getPath>5)return this.getPath=0,this.active=!0,!0;this.temp={x:t,y:e}}else this.temp={x:t,y:e};this.tick=10}return!1}}}},_owlBird.component=function(){var scope=this;this.components={},this.components.monster=function(){this.objectGetDamage=function(t,e,a,i,s,n){return s<0?this.health=0:this.health-=t,n&&this.hitNumber.push(new scope.hitNumber(t)),this.turnState=scope.random(600,500),i!==this.boss.label&&(this.partyRandomHelp(),this.hitterNotTarget(i),!0)},this.displayBar=function(){if(this.label===scope.monsterTarget.value){this.installHealthGUI.state=!1,this.installHealthGUI.state||(this.installHealthGUI.fn(this.health,this.maxHealth),this.installHealthGUI.state=!0);var t=this.object.additionalBoundsValue?this.object.additionalBoundsValue:0;scope.healthBar.value(scope.context,this.health,this.maxHealth,this.hpSize,this.object.position.x,this.object.bounds.min.y-t)}else this.installHealthGUI.state=!1},this.stat=function(){var t=scope.monsterGetDamage.value.get(this.label);if(t&&t.length)for(var e=0,a=t.length;e<a;e++)if(this.health){var i=Math.round(t[e].damage),s=t[e].debuff,n=t[e].status,r=t[e].selfAbilities,o=t[e].attackerAbilities,l=t[e].attacker,c=t[e].hitType,h=Math.round(this.health)-i;t.splice(e,1),damageState=!0,selfLen=r.length,attackerLen=o.length,hitNumberState=!0;for(var p=this.parentObject.attackerAbilities(this.monsterParameters),d=!1,g=0,m=p.length;g<m;g++)if("avoid"===p[g]){d=!0;break}if(d)this.hitNumber.push(new scope.hitNumber("miss")),damageState=!1,hitNumberState=!1;else if(selfLen)for(var u=0,f=selfLen;u<f;u++)"block"===r[u]&&(scope.playAudio("shiled-blocking"),this.hitNumber.push(new scope.hitNumber("block")),damageState=!1,hitNumberState=!1);if(attackerLen)for(g=0,m=attackerLen;g<m;g++)"stun"===o[g]?(this.attackerEffect.stun.state=!0,this.attackerEffect.stun.tick=100,hitNumberState=!1,this.hitNumber.push(new scope.hitNumber("stun"))):damageState&&"critical"===o[g]&&(hitNumberState=!1,i*=2,this.hitNumber.push(new scope.hitNumber(i,"critical")));return damageState&&"attack"===n&&(i="hitNormal"===c?this.parentObject.abilityDefense(this.monsterParameters,i):this.parentObject.abilityMagicDefense(this.monsterParameters,i),this.objectGetDamage(i,s,n,l,h,hitNumberState),scope.playAudio(["stab"])),"attack"!==this.behave&&(this.attacker=l,this.setTarget()),l!==this.object.bossLabel&&("oval"!==this.character.label&&this.buffEffecedAdd(),this.pitboss&&(this.object.attacker=this.attacker,this.object.needHelp=!0),!0)}},this.buffEffectedGUI=new function(){this.storage=new scope.storageState.value,this.update=function(){if(this.storage.storage.length){var t=this.storage.storage,e=t.length,a=22;1===e&&(a=0);for(var i=0;i<e;i++){var s=t[i].status;s.drawFn.update({context:scope.context,image:s.image,posX:s.target.x-a*i,posY:s.boundMin.y-s.boundY,imagePosY:s.imagePosY,imagePosX:s.imagePosX,scaleX:s.scaleX,scaleY:s.scaleY,offsetX:s.offsetX,offsetY:s.offsetY,scaleBefore:s.scaleBefore})}}}},this.installHealthGUI=new function(){this.state=!1,this.fn=function(t,e){scope.removeClass(scope.qs("monster-bar"),"hidden");var a=scope.qs("health-full-bar"),i=scope.qs("healthbar");scope.css(i,{width:t/e*a.clientWidth+"px"})}}},this.components.monsterDungeon=function(){this.remove=!1,this.activeFrame={frame:"",tick:0,audio:""},this.boss="",this.pointMove="",this.parentObject="",this.character=scope.oval.value,this.objTranslate=scope.objTranslate.value,this.attacker="",this.object="",this.isArcherOrMage="",this.ArcherOrMage={distanceUpdate:!1,maxState:"",currentState:0},this.label="",this.hpSize="",this.install=!1,this.monsterAttribute=!0,this.moveSpeed=1,this.moveState=50,this.moveIdle=15,this.moveStrict=!1,this.idleAttackWalk=scope.random(35,5),this.rand=0,this.randState=0,this.behave="walk",this.behaveRandom=10,this.behaveState=!0,this.tick=0,this.attackTick=0,this.attackDelay=0,this.attackRangeX=300,this.attackRangeY=-300,this.vector={x:0,y:0},this.stateBack="",this.stateBackTick=50,this.isTranslate=!0,this.turnState=-1,this.turn="right",this.hitNumber=[],this.pathStateBack="",this.pathTick=0,this.pathRange=1,this.nextPathBack=0,this.nextPath=0,this.dirPathBack=!1,this.objectPointing={objTranslate:scope.objTranslate.value,position:{x:0,y:0},translate:function(){this.objTranslate.staticObjStateX&&(this.objTranslate.moveLeft?this.position.x+=this.objTranslate.staticObjMoveX:this.objTranslate.moveRight&&(this.position.x+=this.objTranslate.staticObjMoveX)),this.objTranslate.staticObjStateY&&(this.objTranslate.moveUp?this.position.y+=this.objTranslate.staticObjMoveY:this.objTranslate.moveDown&&(this.position.y+=-this.objTranslate.staticObjMoveY))}},this.isPathfindActive=!1,this.engineCollide=function(){var self=this;with(scope)Events.on(engine,"collisionStart",function(t){for(var e=t.pairs,a=0,i=e.length;a!=i;++a){var s=e[a],n="Body"!==s.bodyA.label||s.bodyA.outterWall?s.bodyA.label:s.bodyA.parent.label,r="Body"!==s.bodyB.label||s.bodyB.outterWall?s.bodyB.label:s.bodyB.parent.label;n!==self.label&&r!==self.label||(self.initialPathFinding.active=!1)}})},this.addSpeed=function(){return"attack"===this.behave?2.5:2},this.moveLeft=function(){var t=this.object.initialName+"-left.png";this.turn="left",this.object.additionalBoundsWidthValue=Math.abs(this.object.additionalBoundsWidthValue),this.moveSpeed=-Math.abs(this.addSpeed()),scope[this.object.stateStorage].value.set(this.label,"textureNeedChange|"+scope.path+"/"+t)},this.moveRight=function(){var t=this.object.initialName+"-right.png";this.turn="right",this.object.additionalBoundsWidthValue=-Math.abs(this.object.additionalBoundsWidthValue),this.moveSpeed=Math.abs(this.addSpeed()),scope[this.object.stateStorage].value.set(this.label,"textureNeedChange|"+scope.path+"/"+t)},this.pathBack=[],this.itemTrajectory=function(t,e,a,i){this.parent=i,this.install=!1,this.x=0,this.y=-2,this.turn="",this.vy=0,this.vx=0,this.deltaY=0,this.deltaX=0,this.gravity=.03,this.deg=0,this.characterGetHit=!1,this.posHit=0,this.isTrajectory=!0,this.angle=0,this.speed=12,this.item=scope.createItem.value(t,e,a),this.life=100,this.pass=0,this.angleSpeed=.03,this.acceleration=function(){this.vy+=this.gravity,this.x=this.speed,this.y+=this.vy},this.update=function(t,e,a,i,s,n,r){if(!this.install){if(void 0===s.position)return scope.World.remove(scope.engine.world,this.item),!0;var o;scope.Body.setPosition(this.item,{x:t,y:e}),scope.Composite.addBody(scope.engine.world,this.item),scope.orderObjectFn.value(),(h=s.position.y-e)<=100?o=18:h>100&&h<=130?o=19:h>130&&h<180?o=15.5:h>180&&(o=12.5),this.item.isStatic=!0,this.deltaX=t,this.deltaY=e,this.angle=a,this.speed=o*((s.position.x-t)/(this.parent.dungeonAttackRange-100)),this.turn=i,this.angleSpeed=r||this.angleSpeed,this.install=!0}if(this.life--,this.life<0||n&&n)return scope.World.remove(scope.engine.world,this.item),!0;if(this.item.bounds.max.y<s.bounds.max.y&&this.isTrajectory){var l=s.position,c=Math.abs(l.x-this.item.position.x),h=Math.abs(l.y-this.item.position.y),p=this.item.position,d=s.bounds.min.y-s.additionalBoundsValue-this.item.bounds.min.y;this.characterGetHit||c<60&&d<40&&this.parent.character.statParameters&&(this.parent.parentObject.characterDamagePool(this.parent.attacker,this.parent.monsterParameters,this.parent.character,this.parent.object),this.characterGetHit=!0),this.acceleration();var g=p.x+this.x,m=p.y+this.y;this.characterGetHit&&this.pass?(this.x=this.posHit,this.y=l.y+100,this.item.force.x=this.x,this.item.force.y=this.y):(scope.Body.setPosition(this.item,{x:g,y:m}),this.posHit=p.x,this.angle+="right"===this.turn?this.angleSpeed:-this.angleSpeed,this.item.angle=this.angle,this.prevX=g,this.prevY=m),this.pass++}else this.isTrajectory=!1;return!1}},this.trajectoriesUpdate=[],this.behaveRandomFn=function(t){var e=scope.random(1,0);0===(e=t||e)?(this.object.behave=this.behave="walk",scope[this.object.stateStorage].value.set(this.label,"walk")):1===e&&(this.turnState=scope.random(200,50),this.object.behave=this.behave="idle",scope[this.object.stateStorage].value.set(this.label,"idle")),this.pitboss&&(this.object.attacker=!1,this.object.needHelp=!1),this.behaveState=!0,this.behaveRandom=scope.random(15,10),this.attackTick=50,this.stateBack=!0,this.bugAttacker=!1,this.object.walkFrameSpeed=this.walkNormalSpeed,this.tempTarget.huntTarget=this.tempTarget.init=!0,this.attackTick=0,this.idleAttackWalk=scope.random(35,5),this.ArcherOrMage.maxState=scope.random(5,2),this.ArcherOrMage.currentState=0,this.object.selected=!1},this.posCapture={position:{x:0,y:0}},this.isInitialPathFinding=!1,this.needPathFinding=function(t){if(this.moveStrict)return!0;if(!this.pathState&&this.initialPathFinding.update(Math.round(this.object.position.x),Math.round(this.object.position.y))){var e=scope.AI.orderPath(this.object);this.nextPath>e.length-1&&(this.nextPath=0),this.pathObject=e[this.nextPath],this.pathState=!0,this.isPathfindActive=!0,this.pathObject.position.x<this.object.position.x?this.moveLeft():this.moveRight()}else{if(!this.pathState)return this.isPathfindActive=!1,!0;if(this.posCapture.position.x=this.pathObject.position.x,this.posCapture.position.y=this.pathObject.position.y,this.pathTick--,this.pathTick<0&&!t)this.initialPathFinding.update(Math.round(this.object.position.x),Math.round(this.object.position.y))||(this.pathState=!1,this.posCapture.position.y=0),this.pathTick=scope.random(20*this.pathRange,10*this.pathRange),this.pathRange++;else{var a=scope.moveVector2dWithVelocity(this.object,this.posCapture,2);scope.Body.setPosition(this.object,{x:this.object.position.x+Math.round(a.x),y:this.object.position.y+Math.round(a.y)});var i=Math.abs(this.pathObject.position.x-this.object.position.x),s=Math.abs(this.pathObject.position.y-this.object.position.y);t&&(i<1&&s<1||this.initialPathFinding.update(Math.round(this.object.position.x),Math.round(this.object.position.y)))?(this.pathState=!1,this.nextPath++,this.nextPath>scope.AI.orderPath(this.object).length-1&&(this.nextPath=0)):setTimeout(function(){i<10&&s<10&&this.nextPath++}.bind(this),100)}}return!1},this.forceSwitchBitmap=function(){"right"===this.turn&&/left/i.test(this.object.bitmap)&&this.moveRight(),"left"===this.turn&&/right/i.test(this.object.bitmap)&&this.moveLeft()},this.updateBossTickBack=!1,this.updateIntervalBack=600,this.backDir=function(t,e,a){t<-a?(this.moveLeft(),this.vector.x=-1):t>a&&(this.moveRight(),this.vector.x=1),e>a?this.vector.y=.5:e<-a&&(this.vector.y=-.5)},this.findBodies=function(t){for(var e=0,a=scope.Composite.allBodies(scope.engine.world);e<a.length;e++)if(a[e].label===t)return a[e];return!1},this.AIParty=function(t){if("attack"!==this.behave){var e;if(t.pions)e=[t].concat(t.pions);else{var a=this.findBodies(t.bossLabel);e=a?[t].concat(a.pions):[t]}for(var i=scope.AI.sortestEnemy(e,this.object),s=0,n=i;s<n.length;s++)if("attack"!==n[s].behave&&!n[s].selected)return n[s].selected=!0,n[s];return objectTarget=i[scope.random(i.length-1,0)],objectTarget.selected=!0,objectTarget}},this.setTarget=function(){for(var t=0,e=scope.Composite.allBodies(scope.engine.world);t<e.length;t++)if(e[t].label===this.attacker){e[t].selected=!1,this.character=e[t],this.moveDir(Math.round(this.character.position.x-this.object.position.x));break}},this.hitterNotTargetTick=0,this.hitterNotTarget=function(t){this.attacker!==t&&0===this.hitterNotTargetTick&&(this.hitterNotTargetTick=scope.random(5,2)),this.hitterNotTargetTick>0&&(this.hitterNotTargetTick--,1===this.hitterNotTargetTick&&(this.attacker=t,this.setTarget()))},this.partyRandomHelpTick=0,this.partyRandomHelp=function(){if(0===this.partyRandomHelpTick&&(this.partyRandomHelpTick=scope.random(15,7)),this.partyRandomHelpTick>0&&(this.partyRandomHelpTick--,1===this.partyRandomHelpTick&&this.boss&&"attack"===this.behave)){for(var t=[this.boss].concat(this.boss.pions),e=0,a=t;e<a.length;e++)a[e].label!==this.object.label&&"attack"!==a[e].behave||a.splice(e,1);if(t.length){var i=t[scope.random(t.length-1,0)];i.rigBody&&(i.rigBody.attacker=this.attacker,i.rigBody.character=this.character,i.rigBody.behave="attack",i.rigBody.object.behave="attack",i.rigBody.moveDir(Math.round(i.rigBody.character.position.x-i.rigBody.object.position.x)),i.rigBody.object.selected=!1,i.rigBody.behaveState=!0)}}},this.bossNeedHelp=function(){if(this.boss&&this.boss.attacker&&"pointing"!==this.behave){if("die"===this.boss.attacker)this.objSpawn=this.boss.setObjectSpawn,this.pointMove=this.objSpawn,this.boss="",this.object.behave=this.behave="attack";else if(this.boss.needHelp&&"attack"!==this.behave){this.attacker=this.boss.attacker,this.setTarget();var t=this.AIParty(this.character);this.character=t,this.moveDir(Math.round(this.character.position.x-this.object.position.x)),this.attacker=t.label,this.object.behave=this.behave="attack",this.boss.needHelp=!1}this.updateBossTickBack=!0}else this.updateBossTickBack&&(this.stateBackTick=scope.random(150,50),this.updateBossTickBack=!1)},this.forceGravity=!1,this.requireInstall=function(t,e,a,i,s,n,r){if(this.x=e,this.y=a,this.object=i,this.isArcherOrMage=/Archer|Mage/i.test(this.object.initialName),this.ArcherOrMage.maxState=scope.random(3,1),this.object.statParameters=this.monsterParameters,this.label=i.label,this.rand=s,this.items=n,this.parentObject=t,this.boss=!!r&&r||"",this.object.bossLabel=this.boss.label,this.monsterParameters.object=this.object,this.attacker=this.character.label,this.pointMove=this.boss?this.boss:this.objSpawn,this.pathObject=this.character,this.engineCollide(),this.object.behave=this.behave="idle",this.forceGravity=!!this.object.forceGravity&&this.object.forceGravity,scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.Body.setPosition(i,{x:e,y:a}),scope[this.object.stateStorage].value.set(this.label,"idle"),this.boss&&(this.boss.pions?this.boss.pions.push(this.object):(this.boss.pions=[],this.boss.pions.push(this.object))),this.turnState=scope.random(600,100),this.moveRight(),!this.disableExtendMap){var o={};o[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,o)}this.object.rigBody=this,this.install=!0},this.characterNotExist=function(){this.character.deleted?(this.spell&&(scope.oval.value.attacker=!1,scope.oval.value.needHelp=!1),this.character={},this.character.position={x:0,y:0},this.character.bounds={max:{x:0,y:0},min:{x:0,y:0}},this.attacker=!1,this.behaveRandomFn(1)):this.character.label||(this.attacker=!1,this.character.label="dummy",this.behaveRandomFn(1))},this.tempTarget={position:{x:0,y:0},init:!0,huntTarget:!0,pathFinding:!1},this.moveDir=function(t){t>0?this.moveRight():this.moveLeft()},this.randomAttacking=scope.random(50,10),this.areaDamageHitter=[],this.areaDamageFn=function(){this.areaDamageHitter.length=0;var t=scope.areaDmgPool.value.storage,e=this.object.position;t:for(var a=0,i=t;a<i.length;a++){for(var s=0,n=this.areaDamageHitter;s<n.length;s++)if(i[a].status.label===n[s])break t;e.x>i[a].status.bounds.min.x&&e.x<i[a].status.bounds.max.x&&e.y>i[a].status.bounds.min.y&&e.y<i[a].status.bounds.max.y&&(i[a].status.monsterParameters.push(this.monsterParameters),this.areaDamageHitter.push(i[a].status.label))}},this.toAggresive=function(){if(this.aggresive&&"attack"!==this.behave&&!this.spell){var t=[];if(this.aggresive instanceof Array)for(var e=0,a=scope.Composite.allBodies(scope.engine.world);e<a.length;e++)for(var i=0,s=this.aggresive.length;i<s;i++)-1!==a[e].label.indexOf(this.aggresive[i])&&t.push(a[e]);else{var n=scope.oval.value;"die"!==n.behave&&(t=[n].concat(n.pions))}if(t.length){targetEnemy=scope.AI.sortestEnemy(t,this.object)[0];var r=this.object.position.x,o=this.object.position.y,l=targetEnemy.position.x,c=targetEnemy.position.y;scope.distanceAndAngleBetweenTwoPoints(r,o,l,c).distance<350&&(this.character=targetEnemy,this.moveDir(Math.round(this.character.position.x-this.object.position.x)),this.attacker=targetEnemy.label,this.object.behave=this.behave="attack")}}},this.attackerEffect={stun:{tick:100,state:!1,effect:"idle"}},this.attackerEffectFn=function(t){if(this.attackerEffect.stun.state){if(this.attackerEffect.stun.tick>0)return this.attackerEffect.stun.tick--,!/textureNeedChange|idle/i.test(t)&&scope[this.object.stateStorage].value.set(this.label,"idle"),!1;this.attackerEffect.stun.state=!1,this.attackerEffect.stun.tick=100}return!0},this.hitNumberFn=function(){if(this.hitNumber.length)for(var t=0;t<this.hitNumber.length;t++)this.hitNumber[t].update(scope.context,this.object)&&this.hitNumber.splice(t,1)},this.buffEffecedAdd=function(t){if(void 0===t){this.character;var e=this.character.rigBody.monsterParameters,a=e.buffSkill}var i=this.object.additionalBoundsValue?this.object.additionalBoundsValue:0,s=scope.uniqueId();if(t){var n=!0,r=function(t,e){for(var a=this.buffAffected,i=0;i<a.length;i++)if(a[i].skill===t){if(!e)return!0;e.call(a[i])}if(this.object.skillEffected){var s=this.object.skillEffected;for(i=0;i<s.length;i++)if(s[i]===t)return!0}}.bind(this),o=function(t){t={textures:"",src:scope.path+t};return scope.getTexture(t,t.src),t};"aquaSpirit"===t.skill?(r(t.skill,function(e){e&&(e.tick=t.tick,n=!1)}),n&&(this.buffAffected.push({skill:t.skill,tick:t.tick,id:s}),l=o("/aqualHealSmall.png"))):"burningEffect"===t.skill?(r(t.skill)&&(n=!1),n&&(this.buffAffected.push({skill:t.skill,tick:t.skillParams.tick,id:s,tickDelay:t.skillParams.tickDelay,tickDelayUpdate:t.skillParams.tickDelayUpdate,damageMin:t.skillParams.damageMin,damageMax:t.skillParams.damageMax}),l=o("/burningEffectSmall.png"))):"lightningShock"===t.skill&&(r(t.skill)&&(n=!1),n&&(this.buffAffected.push({skill:t.skill,tick:t.skillParams.tick,id:s}),this.attackerEffect.stun.state=!0,this.attackerEffect.stun.tick=t.skillParams.tick,l=o("/lightningShockSmall.png"))),n&&this.buffEffectedGUI.storage.set(s,{name:t.skill,image:l.textures,drawFn:new scope.draw.generalDrawImage,boundY:i,imagePosY:-42,imagePosX:0,scaleBefore:0,scaleX:0,scaleY:0,offsetX:.1,offsetY:.1,boundMin:this.object.bounds.min,target:this.object.position})}else{n=!1;var l,c,h=function(t){if(this.object.skillEffected)for(var e=this.object.skillEffected,a=0;a<e.length;a++)if(e[a]===t)return!0;var i=this.buffAffected;for(a=0;a<i.length;a++)if(i[a].skill===t)return!0}.bind(this);o=function(t){t={textures:"",src:scope.path+t};return scope.getTexture(t,t.src),t};t:for(var p in a){if("burningEffect"===p&&!a[p].active){if(h(p))continue t;this.buffAffected.push({skill:a[p].name,tick:a[p].tick,id:s,tickDelay:a[p].tickDelay,tickDelayUpdate:a[p].tickDelayUpdate,damageMin:a[p].damageMin,damageMax:a[p].damageMax,monsterParams:e}),a[p].active=!0,l=o("/burningEffectSmall.png"),c=a[p].name,n=!0,scope.playAudio("evil-swish");break}if("bindingRoot"===p&&!a[p].active){if(h(p))continue t;this.buffAffected.push({skill:"bindingRoot",tick:a[p].tick,id:s,monsterParams:e}),this.moveStrict=!0,a[p].active=!0,l=o("/bindingrootSmall.png"),c=p,n=!0;break}if("lightningShock"===p&&!a[p].active){if(h(p))continue t;this.buffAffected.push({skill:p,tick:a[p].tick,id:s}),this.attackerEffect.stun.state=!0,this.attackerEffect.stun.tick=a[p].tick,n=!0,c=p,l=o("/lightningShockSmall.png")}}n&&(this.object.skillEffected=[c],a[c].active=!0,this.buffEffectedGUI.storage.set(s,{name:c,image:l.textures,drawFn:new scope.draw.generalDrawImage,boundY:i,imagePosY:-42,imagePosX:0,scaleBefore:0,scaleX:0,scaleY:0,offsetX:.1,offsetY:.1,boundMin:this.object.bounds.min,target:this.object.position}))}},this.buffAffected=[],this.buffAffectedFn=function(){if(this.buffAffected.length)for(var t=this.buffAffected,e=function(t){if(this.object.skillEffected){objEffected=this.object.skillEffected;for(var e=0;e<objEffected.length;e++)if(objEffected[e]===t.skill){objEffected.splice(e,1);break}}if(t.monsterParams){for(var a=t.monsterParams.activeSkill,i=0;i<a.length;i++)if(objEffected[i]===t.skill)return!0;a.push(t.skill)}return!0}.bind(this),a=0;a<t.length;a++){var i=t[a];if(i.tick--,i.tick<0)"bindingRoot"===i.skill?(e(i),this.characterParameters.health&&(this.moveStrict=!1)):"aquaSpirit"===i.skill||("burningEffect"===i.skill?e(i):"lightningShock"===i.skill&&e(i)),this.buffEffectedGUI.storage.remove(i.id),t.splice(a,1);else if("burningEffect"===i.skill&&(i.tickDelay--,i.tickDelay<0)){var s=(s=scope.random(i.damageMax,i.damageMin)-scope.random(this.monsterParameters.magicDefenseMax,this.monsterParameters.magicDefenseMax))>0?s:Math.round(scope.random(40,1)/2);tempHealth=this.health-s,this.health&&(this.hitNumber.push(new scope.hitNumber(s)),tempHealth<0?this.health=0:this.health-=s),i.tickDelay=i.tickDelayUpdate}}},this.buffSkillFn=function(){var t=this.monsterParameters,e=t.activeSkill;if(e.length){var a=t.buffSkill;t:for(var i=0;i<e.length;i++){var s=a[e[i]];if(s.delay--,s.delay<0)for(var n=0;n<e.length;n++)if(e[n]===s.name){s.delay=s.delayUpdate,s.active=!1,e.splice(n,1);continue t}}}t.castedDelay>0&&t.castedDelay--},this.generalAIBehaviours=function(t){this.bossNeedHelp(),this.characterNotExist(),this.buffSkillFn(),this.buffAffectedFn(),this.buffEffectedGUI.update(),this.tick++,this.turnState--;this.pointMove.position;var e=scope[this.object.stateStorage].value.get(this.label);if(!/back|attack/i.test(this.behave)&&this.tick>this.moveState+this.moveIdle&&(this.tick=0,this.behaveRandom--,this.behaveRandom<0&&this.behaveRandomFn()),-1===this.location.indexOf("Dungeon")){if("walk"===this.behave)!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk"),this.turnState<0&&("left"===this.turn?this.moveLeft():"right"===this.turn&&this.moveRight(),this.turn="left"===this.turn?"right":"left",this.turnState=scope.random(600,200),this.moveState=50,this.behaveState=!0,this.object.walkFrameSpeed=this.walkNormalSpeed),scope.Body.translate(this.object,{x:this.moveSpeed,y:0});else if("pointing"===this.behave){this.objectPointing.translate(),!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk");var a=scope.moveVector2dWithVelocity(this.object,this.objectPointing,2),i=this.object.position.x+Math.round(a.x),s=!0;(o=Math.abs(Math.round(this.objectPointing.position.x-this.object.position.x)))<20&&(s=!1),s?scope.Body.setPosition(this.object,{x:i,y:this.object.position.y}):this.behaveRandomFn(1)}else if("attack"===this.behave){var n=this.character.position,r=this.object.position,o=Math.round(n.x-r.x),l=(M=Math.round(n.y-r.y))>this.attackRangeY&&M<-this.attackRangeY&&Math.abs(o)<this.dungeonAttackRange;if(this.attackerEffectFn(e)){if(o>0?("right"!==this.turn||this.behaveState)&&this.moveRight():("left"!==this.turn||this.behaveState)&&this.moveLeft(),Math.abs(o)<this.dungeonAttackRange&&(l||t&&t.attackRange))if(this.attackDelay<0){if(!/textureNeedChange|attack/i.test(e)&&(scope[this.object.stateStorage].value.set(this.label,"attack"),this.randomAttacking=scope.random(100,30),this.attackFrame)){var c=this.attackFrame[scope.random(this.attackFrame.length,1)-1];this.activeFrame.frame=c.frame,this.activeFrame.tick=0,this.activeFrame.audio=c.audio?c.audio[scope.random(c.audio.length,1)-1]:""}this.attackFrame?this.activeFrame.tick++:this.attackTick--;var h=function(){if(!this.attackFrame)return this.attackTick<0;for(var t=0,e=this.activeFrame.frame;t<e.length;t++)if(this.activeFrame.tick===e[t]||this.activeFrame.tick>=this.attackTick)return!0}.bind(this)();t&&t.trajectory&&h?this.activeFrame.tick>=this.attackTick?(this.attackTick=30,this.attackDelay=scope.random(90,80),this.turnState=scope.random(600,300),this.tempTarget.pathFinding=!1,this.attackFrame||t.trajectory.call(this)):t.trajectory.call(this):h&&(this.activeFrame.tick>=this.attackTick?(this.attackTick=30,this.attackDelay=scope.random(90,80),this.turnState=scope.random(600,300),this.tempTarget.pathFinding=!1,this.attackFrame||this.parentObject.characterDamagePool(this.attacker,this.monsterParameters,this.character,this.object)):(this.activeFrame.audio&&scope.playAudio(this.activeFrame.audio),this.parentObject.characterDamagePool(this.attacker,this.monsterParameters,this.character,this.object)))}else!/textureNeedChange|idle/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"idle"),this.attackDelay--,this.attackTick=30;else this.randomAttacking--,this.randomAttacking<0&&(!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk"),scope.Body.translate(this.object,{x:this.moveSpeed,y:0}),this.attackTick=30,this.object.walkFrameSpeed=this.walkAttackSpeed);this.turnState<0&&!l&&(this.object.behave=this.behave="walk",scope[this.object.stateStorage].value.set(this.label,"walk")),this.behaveState=!1}}}else{n=this.character.position,r=this.object.position,o=Math.round(n.x-r.x),l=(M=Math.round(n.y-r.y))>this.attackRangeY&&M<-this.attackRangeY&&Math.abs(o)<this.dungeonAttackRange,M>this.attackRangeY&&M<-this.attackRangeY&&(Math.abs(o),this.dungeonAttackRange);var p=this.pointMove.position.x-r.x,d=this.pointMove.position.y-r.y,g=600,m=p>-g&&p<g&&d>-g&&d<g;if("back"===this.behave){if(!this.moveStrict){!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk");var u=this.boss?this.boss:this.objSpawn;this.stateBack&&!this.isPathfindActive&&(this.stateBack=!1,a=scope.moveVector2dWithVelocity(this.object,u,0),scope[this.object.stateStorage].value.set(this.label,"walk"),p<-g?this.moveLeft():p>g&&this.moveRight());var f,v,b=function(){this.isPathfindActive=!0,this.pathBack[this.nextPathBack].position.x<this.object.position.x?this.moveLeft():this.moveRight()}.bind(this),S=function(){for(var t in f=scope.AI.orderPath(u,this.character),v=scope.AI.orderPath(this.object),f)if(v[0].label===f[t].label){this.pathBack=f.slice(0,t),this.pathBack.unshift(u);break}}.bind(this);if(!this.pathStateBack||this.initialPathFinding.update(Math.round(r.x),Math.round(r.y)))S(),this.pathStateBack=!0,this.nextPathBack=this.pathBack.length-1,b();else if(this.pathStateBack){var k=Math.abs(this.pathBack[this.nextPathBack].position.x-r.x),B=Math.abs(this.pathBack[this.nextPathBack].position.y-r.y);k<10&&B<10&&(this.nextPathBack--,void 0===this.pathBack[this.nextPathBack]&&(this.nextPathBack=this.pathBack.length-1),b(),0===this.nextPathBack&&(this.pathStateBack=!1),S()),this.needPathFinding(!0)?(this.dirPathBack&&(this.dirPathBack=!1,b()),a=scope.moveVector2dWithVelocity(this.object,this.pathBack[this.nextPathBack],2),scope.Body.setPosition(this.object,{x:this.object.position.x+a.x,y:this.object.position.y+a.y})):this.dirPathBack=!0}else this.isPathfindActive=!1,a=scope.moveVector2dWithVelocity(this.object,u,3),scope.Body.setPosition(this.object,{x:this.object.position.x+a.x,y:this.object.position.y+a.y});m&&(this.behaveState=!0,this.behaveRandomFn())}}else if("turn"===e)scope[this.object.stateStorage].value.set(this.label,"walk"),this.object.behave=this.behave="walk",/left|right/i.test(this.object.outterWall)?(this.vector.y=this.vector.y>0?-.5:this.vector.y<0?.5:0,this.vector.x=this.vector.x>0?-1:this.vector.x<0?1:0,"right"===this.turn?this.moveLeft():this.moveRight(),this.object.outterWall=""):this.vector.y=this.vector.y>0?-.5:this.vector.y<0?.5:0;else if("idle"===this.behave)!/textureNeedChange|idle/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"idle");else if("pointing"===this.behave){this.objectPointing.translate(),!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk");a=scope.moveVector2dWithVelocity(this.object,this.objectPointing,2),i=this.object.position.x+Math.round(a.x);var w=this.object.position.y+Math.round(a.y),M=(o=Math.abs(Math.round(this.objectPointing.position.x-this.object.position.x)),Math.abs(Math.round(this.objectPointing.position.y-this.object.position.y)));s=!0;o<20&&M<20&&(s=!1),s?scope.Body.setPosition(this.object,{x:i,y:w}):this.behaveRandomFn(1)}else if("walk"===this.behave){if(!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk"),this.turnState<0){var P=scope.random(1,0)?-1:1,A=parseFloat(scope.random(1,0)?-scope.randomFloat(.9,.1):scope.randomFloat(.9,.1)).toFixed(1),D=Math.abs(1-(P>0)?Math.abs(A):-Math.abs(A));A=this.forceGravity?0:A;this.vector={x:parseFloat(P+(P>0?D:-D)/2),y:parseFloat(A)},this.moveDir(P),this.turnState=scope.random(600,400),this.moveState=50,this.stateChange=!0,this.behaveState=!0,this.object.walkFrameSpeed=this.walkNormalSpeed}this.moveStrict||scope.Body.setPosition(this.object,{x:this.object.position.x+this.vector.x,y:this.object.position.y+this.vector.y}),this.stateBackTick--,m||0!==this.stateBackTick?this.stateBackTick<-1&&!m&&this.backDir(p,d,g):(this.object.behave=this.behave="back",this.behaveState=!1,this.object.walkFrameSpeed=this.walkAttackSpeed),this.stateChange=!0}else if("attack"===this.behave&&this.attackerEffectFn(e)){!this.isPathfindActive&&this.tempTarget.huntTarget&&(o>0?("right"!==this.turn||this.behaveState)&&this.moveRight():("left"!==this.turn||this.behaveState)&&this.moveLeft(),this.behaveState=!1);var j="oval"===this.character.label?this.character.bounds.max.y:this.character.bounds.max.y+10,T=this.object.bounds.max.y;if(Math.abs(o)<this.dungeonAttackRange&&Math.abs(M)<this.dungeonAttackRangeY.min&&!this.ArcherOrMage.distanceUpdate){if(Math.abs(j<T+this.dungeonAttackRangeY.max))this.randomAttacking--,this.idleAttackWalk--,this.idleAttackWalk<0&&this.randomAttacking<0?(this.moveStrict||(scope.Body.translate(this.object,{x:0,y:A=this.forceGravity?0:"left"===this.turn?this.moveSpeed:-this.moveSpeed}),this.initialPathFinding.update(Math.round(r.x),Math.round(r.y))&&(scope.monsterTarget.value=""),this.object.walkFrameSpeed=this.walkAttackSpeed),!/textureNeedChange|walk/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"walk")):!/textureNeedChange|idle/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"idle");else{if(this.attackDelay<0){if(!/textureNeedChange|attack/i.test(e)){if(this.tempTarget.huntTarget=this.tempTarget.init=!0,this.behaveState=!0,scope[this.object.stateStorage].value.set(this.label,"attack"),this.attackFrame){c=this.attackFrame[scope.random(this.attackFrame.length,1)-1];this.activeFrame.frame=c.frame,this.activeFrame.tick=0,this.activeFrame.audio=c.audio?c.audio[scope.random(c.audio.length,1)-1]:""}if(this.isArcherOrMage&&this.ArcherOrMage.currentState<this.ArcherOrMage.maxState)scope.distanceAndAngleBetweenTwoPoints(this.object.position.x,this.object.position.y,this.character.position.x,this.character.position.y).distance<100&&(this.ArcherOrMage.distanceUpdate=!0)}this.attackFrame?this.activeFrame.tick++:this.attackTick--;h=function(){if(!this.attackFrame)return this.attackTick<0;for(var t=0,e=this.activeFrame.frame;t<e.length;t++)if(this.activeFrame.tick===e[t]||this.activeFrame.tick>=this.attackTick)return!0}.bind(this)();t&&t.trajectory&&h?this.activeFrame.tick>=this.attackTick?(this.attackTick=30,this.attackDelay=scope.random(90,80),this.turnState=scope.random(600,300),this.tempTarget.pathFinding=!1,this.attackFrame||t.trajectory.call(this)):(t.trajectory.call(this),this.activeFrame.audio&&scope.playAudio(this.activeFrame.audio)):h&&(this.activeFrame.tick>=this.attackTick?(this.attackTick=30,this.attackDelay=scope.random(90,80),this.turnState=scope.random(600,300),this.tempTarget.pathFinding=!1,this.attackFrame||this.parentObject.characterDamagePool(this.attacker,this.monsterParameters,this.character,this.object)):(this.activeFrame.audio&&scope.playAudio(this.activeFrame.audio),this.parentObject.characterDamagePool(this.attacker,this.monsterParameters,this.character,this.object)))}else!/textureNeedChange|idle/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"idle"),this.attackDelay--,this.attackTick<=0&&(this.attackTick=30);this.idleAttackWalk<0&&(this.idleAttackWalk=scope.random(35,15))}this.pathState=!1,this.posCapture.position.y=0,this.pathRange=1,this.nextPath=0}else if(this.randomAttacking--,this.idleAttackWalk--,this.randomAttacking<0&&this.idleAttackWalk<0){if(/textureNeedChange|walk/i.test(e)||(this.isArcherOrMage||(this.tempTarget.huntTarget=!0,this.behaveState=!0),scope[this.object.stateStorage].value.set(this.label,"walk")),this.needPathFinding()){if(!this.isArcherOrMage||this.initialPathFinding.update(Math.round(r.x),Math.round(r.y))||this.tempTarget.pathFinding)this.ArcherOrMage.distanceUpdate&&(this.ArcherOrMage.distanceUpdate=!1,this.ArcherOrMage.currentState=this.ArcherOrMage.maxState+1),this.tempTarget=this.character,this.tempTarget.init=!0,this.tempTarget.pathFinding=!0;else if(this.tempTarget.init){var O=scope.random(this.dungeonAttackRange-50,this.dungeonAttackRange-250);x="right"===this.turn?this.character.position.x-O:this.character.position.x+O,y=this.character.position.y,this.tempTarget={prevPosition:{x:this.character.position.x,y:this.character.position.y},position:{x:x,y:y},init:!1,huntTarget:!1,pathFinding:!1},this.moveDir(Math.round(x-r.x))}if(!this.tempTarget.init){if(this.objTranslate.staticObjStateX&&(this.tempTarget.position.x+=this.objTranslate.staticObjMoveX),"up"===this.objTranslate.staticObjStateY?this.tempTarget.position.y+=this.objTranslate.staticObjMoveY:"down"===this.objTranslate.staticObjStateY&&(this.tempTarget.position.y-=this.objTranslate.staticObjMoveY),this.ArcherOrMage.distanceUpdate)C=scope.distanceAndAngleBetweenTwoPoints(this.tempTarget.prevPosition.x,this.tempTarget.prevPosition.y,this.object.position.x,this.object.position.y).distance>150;else var C=scope.distanceAndAngleBetweenTwoPoints(this.object.position.x,this.object.position.y,this.tempTarget.position.x,this.tempTarget.position.y).distance<10;C&&(this.ArcherOrMage.currentState++,this.ArcherOrMage.distanceUpdate=!1,this.tempTarget=this.character,this.tempTarget.init=!0,this.tempTarget.pathFinding=!1)}a=scope.moveVector2dWithVelocity(this.object,this.tempTarget,3),equalY=Math.round(j)===Math.round(T),a.y=this.forceGravity?0:equalY?0:a.y,this.moveStrict||scope.Body.setPosition(this.object,{x:this.object.position.x+Math.round(a.x),y:this.object.position.y+Math.round(a.y)})}else this.isArcherOrMage&&(this.tempTarget=this.character,this.tempTarget.init=!0,this.tempTarget.pathFinding=!0);this.attackTick<=0&&(this.attackTick=30),this.object.walkFrameSpeed=this.walkAttackSpeed}else!/textureNeedChange|idle/i.test(e)&&scope[this.object.stateStorage].value.set(this.label,"idle");this.turnState<0&&!l&&(this.object.behave=this.behave="walk",scope[this.object.stateStorage].value.set(this.label,"walk")),this.stateBack=!0}this.updateIntervalBack--,this.updateIntervalBack<0&&this.boss&&!m&&!/back|attack/i.test(this.behave)&&(this.object.behave=this.behave="back",this.behaveState=!1,this.updateIntervalBack=600,this.object.walkFrameSpeed=this.walkAttackSpeed,this.backDir(p,d,g))}this.health||this.hitNumber.length||(setTimeout(function(){if(this.trajectoriesUpdate.length)for(var t=0;t<this.trajectoriesUpdate.length;t++)this.trajectoriesUpdate[t].update(0,0,0,0,this.turn,this.character,!0)&&this.trajectoriesUpdate.splice(t,1);if(this.boss&&this.boss.pions&&this.boss.pions.length)for(var e=0,a=this.boss.pions.length;e<a;e++)if(this.boss.pions[e].label===this.object.label){this.boss.pions.splice(e,1);break}this.object.deleted=!0,this.pitboss&&(this.object.attacker="die",this.object.setObjectSpawn=this.objSpawn,this.object.deleted=!0),scope.World.remove(scope.engine.world,this.object),scope.addClass(scope.qs("monster-bar"),"hidden"),delete scope.staticAllMap.value[this.location].content[this.label],scope.monsterTarget.value="",scope.monsterParameters.value.remove(this.label),scope.monsterGetDamage.value.remove(this.label),scope[this.object.stateStorage].value.remove(this.label),this.monsterAttribute&&(scope.characterUpdateQuest.value(this.object.initialName),this.items&&this.items(this.parentObject,this.object,this.monsterParameters))}.bind(this),1e3),this.remove=!0,scope[this.object.stateStorage].value.set(this.label,"die"),this.object.behave=this.behave="die",this.audioDie&&this.audioDie.length&&scope.playAudio(this.audioDie),!/sekleton/i.test(this.monsterParameters.object.label)&&this.monsterAttribute&&scope.characterLevel.value(this.monsterParameters,this.character.label))}},this.components.items=function(){this.itemTemp=[],this.item=new function(){this.create=function(t,e,a,i,s){this.object=new scope.createItem.value(i.name,i.width,i.height),this.object.isStatic=!0,this.firstload=function(){return scope.Body.setPosition(this.object,{x:t,y:e}),scope.intervalList.value.set(this.object.label,{tick:3600,fn:function(){scope.World.remove(scope.engine.world,this.object)}.bind(this)}),null}.bind(this)(),this.character=scope.oval.value,this.update=function(t,e){var i,n,r=t.position,o=e.position,l=r.x,c=r.y,h=Math.abs(l-o.x),p=Math.abs(c-o.y);if(h<40&&p<40){if(t.itemVal&&(scope.playAudio("Pickup_Gold_04"),scope.infoLogFn.value({title:"regular-title",text:{white:"Accured",chocolate:" "+t.itemVal+" ",gold:a}})),scope.characterUpdateQuest.value(a.toLowerCase()),s)n=s.parent,i=s.initial;else switch(n="dropMonster",a.toLowerCase()){case"ness scale":i="nessScale";break;case"ness fang":i="nessFang";break;case"queen ness scale":i="nessQueenScale";break;case"meat":i="meat";break;case"gall boar fang":i="gallBoarFang";break;case"nortus green scale":i="nortusGreenScale";break;case"nortus red scale":i="nortusRedScale";break;case"light soul":i="lightSoul";break;case"basic magical plant":i="basicMagicPlant";break;case"basic herb plant":i="basicHerbPlant";break;case"goblin elixir":i="goblinElixir";break;case"bedrock meat":i="bedrockMeat";break;case"bedrock bone":i="bedrockBone";break;case"bedrock fang":i="bedrockFang";break;case"lapis fragment":i="lapisFragment";break;case"nortus tail heart":i="nortusTailHeart";break;case"nortus red tail scale":i="nortusRedTailScale";break;case"nortus green tail scale":i="nortusGreenTailScale";break;case"tainted gem":i="taintedGem";break;case"tainted soul":i="taintedSoul";break;default:i=""}return scope.intervalList.value.remove(t.label),scope.pickUpDropItem.value({parent:n,initial:i,value:t.itemVal}),scope.World.remove(scope.engine.world,t),!0}return!1}}},this.coin=new function(){this.create=function(t,e,a){this.object=new scope.createItem.value("Ness Scale",74,68),this.firstload=function(){return this.object.isStatic=!0,scope.Body.setPosition(this.object,{x:t,y:e}),scope.intervalList.value.set(this.object.label,{tick:3600,fn:function(){scope.World.remove(scope.engine.world,this.object)}.bind(this)}),null}.bind(this)(),this.character=scope.oval.value,this.update=function(t,e){var a=t.position,i=e.position,s=scope.characterParameters.value,n=a.x,r=a.y;return rangeX=Math.abs(n-i.x),rangeY=Math.abs(r-i.y),rangeX<40&&rangeY<40&&(t.coinVal&&(s.soulPoint+=t.coinVal,scope.playAudio("Pickup_Gold_04"),scope.infoLogFn.value({title:"regular-title",text:{white:"Accured",chocolate:" "+t.coinVal+" ",gold:"Soul Cristals"}})),scope.World.remove(scope.engine.world,t),!0)}}}},this.components.companions=function(){this.triggerMonsterFn=function(t){for(var e=scope.activeMap.value,a=function(e){switch(t){case"area":e.areaDamageFn();break;case"aggresive":e.toAggresive()}},i=0,s=this.objSpawnMonster;i<s.length;i++)for(var n=s[i],r=0;r<n.length;r++){var o=n[r];if(o)if(o.monsters){if(e===o.location)for(var l=0;l<o.monsters.length;l++)a(o.monsters[l].play)}else a(o.play)}},this.abilityBlock=function(t){var e=[];if(t.abilitySkill){var a=t.abilitySkill;for(var i in a){if("block"===i)100*Math.random()<=a[i]&&e.push(i)}}return e},this.abilityMagicDefense=function(t,e){var a=e;if(t.abilitySkill&&t.abilitySkill.magicDefense){var i=t.abilitySkill.magicDefense,s=e-e*scope.random(i.max,i.min)/100;a=s>0?s:Math.round(scope.random(40,1)/2)}return Math.round(a)},this.abilityDefense=function(t,e){var a=e;if(t.abilitySkill&&t.abilitySkill.defense){var i=t.abilitySkill.defense,s=e-e*scope.random(i.max,i.min)/100;a=s>0?s:Math.round(scope.random(40,1)/2)}return Math.round(a)},this.attackerAbilities=function(t){var e=[];if(t.modifierAbilities){var a=t.modifierAbilities;for(var i in a){100*Math.random()<=a[i]&&e.push(i)}}return e},this.monsterDamagePool=function(t,e,a,i){var s=a.statParameters,n=i.label;if("melee"===e.attackType)var r=e.attackMax,o=e.attackMin;else if("long-range"===e.attackType)r=e.attackRangeMax,o=e.attackRangeMin;var l,c,h,p=s.defenseMax,d=s.defenseMin,g=scope.random(r,o)-scope.random(p,d);if(l=this.abilityBlock(s),c=this.attackerAbilities(e),h=g>0?g:Math.round(scope.random(40,1)/2),t){if(void 0===(m=scope.monsterGetDamage.value.get(t))){scope.monsterGetDamage.value.storage=[],scope.monsterGetDamage.value.set(t,[]);var m=scope.monsterGetDamage.value.get(t)}m.push({damage:h,debuff:"",status:"attack",selfAbilities:l,attackerAbilities:c,attacker:n})}}},this.components.initArmored=function(options){return function(onload){onload.spell&&(this.spell=options.spell,this.itemLabel=onload.itemLabel,this.disableExtendMap=!0),this.aggresive=options.aggresive,this.audioDie=options.audioDie,this.attackFrame=options.attackFrame,this.pitboss=onload.pitboss,this.location=onload.location,this.objSpawn=onload.objSpawn,this.dungeonAttackRange=options.attackRange,this.dungeonAttackRangeY={max:-30,min:30},this.walkAttackSpeed=1,this.walkNormalSpeed=2,this.maxHealth=options.maxHealth,this.health=options.maxHealth,this.monsterParameters={name:options.name,level:options.level,range:options.attackRange,attackRangeMax:options.attackRangeMax,attackRangeMin:options.attackRangeMin,attackMax:options.attackMax,attackMin:options.attackMin,defenseMax:options.defenseMax,defenseMin:options.defenseMin,magicDefenseMax:options.magicDefenseMax,magicDefenseMin:options.magicDefenseMin,modifierAbilities:{},activeSkill:[],castedDelay:200,buffSkill:function(){var t={};for(var e in options.buffSkill)t[options.buffSkill[e]]=new scope.globalSkill.value[options.buffSkill[e]];return t}(),abilitySkill:options.abilitySkill,coin:scope.monsterAttribute.value(options.level,"soul")||scope.random(15,5),item:options.item||"",exp:scope.monsterAttribute.value(options.level,"exp")||scope.random(25,50),maxHealth:options.maxHealth,mp:options.mp,attackType:"melee",object:""},this.statInitial=function(){if(this.hpSize=options.hpBar,stat=this.stat(this.hpSize),stat)with(stat)"back"===this.behave&&(this.pathState=!1,this.posCapture.position.y=0,this.pathRange=1,this.nextPath=0),this.object.behave=this.behave="attack",this.stateBackTick=scope.random(200,50)},this.update=function(t,e,a,i,s,n,r){return this.install||(scope.extend(this,new scope.components.monster,!0),scope.extend(this,new scope.components.monsterDungeon,!0),scope.extend(this,new scope.AI.pathFinding,!0),this.requireInstall(t,e,a,i,s,n,r)),this.statInitial(),this.generalAIBehaviours(),this.remove}}},this.components.initSpear=function(options){return function(onload){this.audioDie=options.audioDie,this.attackFrame=options.attackFrame,this.pitboss=onload.pitboss,this.location=onload.location,this.objSpawn=onload.objSpawn,this.dungeonAttackRange=options.attackRange,this.dungeonAttackRangeY={max:-30,min:30},this.aggresive=options.aggresive,this.walkAttackSpeed=1,this.walkNormalSpeed=2,this.maxHealth=options.maxHealth,this.health=options.maxHealth,this.monsterParameters={name:options.name,level:options.level,range:options.attackRange,attackRangeMax:options.attackRangeMax,attackRangeMin:options.attackRangeMin,attackMax:options.attackMax,attackMin:options.attackMin,defenseMax:options.defenseMax,defenseMin:options.defenseMin,magicDefenseMax:options.magicDefenseMax,magicDefenseMin:options.magicDefenseMin,modifierAbilities:options.modifierAbilities?options.modifierAbilities:{},activeSkill:[],castedDelay:200,buffSkill:function(){var t={};for(var e in options.buffSkill)t[options.buffSkill[e]]=new scope.globalSkill.value[options.buffSkill[e]];return t}(),abilitySkill:options.abilitySkill,coin:scope.monsterAttribute.value(options.level,"soul"),item:options.item||"",exp:scope.monsterAttribute.value(options.level,"exp"),maxHealth:options.maxHealth,mp:options.mp,attackType:"melee",object:""},this.statInitial=function(){if(this.hpSize=!!options&&options.hpBar||"medium",stat=this.stat(this.hpSize),stat)with(stat)"back"===this.behave&&(this.pathState=!1,this.posCapture.position.y=0,this.pathRange=1,this.nextPath=0),this.object.behave=this.behave="attack",this.stateBackTick=scope.random(200,50)},this.update=function(t,e,a,i,s,n,r){return this.install||(scope.extend(this,new scope.components.monster,!0),scope.extend(this,new scope.components.monsterDungeon,!0),scope.extend(this,new scope.AI.pathFinding,!0),this.requireInstall(t,e,a,i,s,n,r)),this.statInitial(),this.generalAIBehaviours(),this.remove}}},this.components.initMage=function(options){return function(onload){var lz;this.audioDie=options.audioDie,this.attackFrame=options.attackFrame,this.pitboss=onload.pitboss,this.location=onload.location,this.objSpawn=onload.objSpawn,this.aggresive=options.aggresive,this.dungeonAttackRange=(lz=scope.browserWidthUpdate/2,lz<options.attackRange?lz:options.attackRange),this.dungeonAttackRangeY={max:-130,min:130},this.walkAttackSpeed=2,this.walkNormalSpeed=3,this.maxHealth=options.maxHealth,this.health=options.maxHealth,this.monsterParameters={name:options.name,level:options.level,range:options.attackRange,attackRangeMax:options.attackRangeMax,attackRangeMin:options.attackRangeMin,attackMax:options.attackMax,attackMin:options.attackMin,defenseMax:options.defenseMax,defenseMin:options.defenseMin,magicDefenseMax:options.magicDefenseMax,magicDefenseMin:options.magicDefenseMin,modifierAbilities:options.modifierAbilities?options.modifierAbilities:{},coin:scope.monsterAttribute.value(options.level,"soul"),item:options.item,exp:scope.monsterAttribute.value(options.level,"exp"),maxHealth:options.maxHealth,mp:options.mp,activeSkill:[],castedDelay:200,buffSkill:function(){var t={};for(var e in options.buffSkill)t[options.buffSkill[e]]=new scope.globalSkill.value[options.buffSkill[e]];return t}(),abilitySkill:options.abilitySkill,attackType:"long-range",object:""},this.statInitial=function(){if(this.hpSize=!!options&&options.hpBar||"medium",stat=this.stat(this.hpSize),stat)with(stat)"back"===this.behave&&(this.pathState=!1,this.posCapture.position.y=0,this.pathRange=1,this.nextPath=0),this.object.behave=this.behave="attack",this.stateBackTick=scope.random(200,50)},this.update=function(t,e,a,i,s,n,r){return this.install||(scope.extend(this,new scope.components.monster,!0),scope.extend(this,new scope.components.monsterDungeon,!0),scope.extend(this,new scope.AI.pathFinding,!0),this.object.pionNeedHelp=!1,this.requireInstall(t,e,a,i,s,n,r)),this.statInitial(),this.generalAIBehaviours(),this.remove}}},this.components.initArhcer=function(options){return function(onload){var vz;onload.spell&&(this.spell=options.spell,this.itemLabel=onload.itemLabel,this.disableExtendMap=!0),this.aggresive=options.aggresive,this.audioDie=options.audioDie,this.attackFrame=options.attackFrame,this.pitboss=onload.pitboss,this.location=onload.location,this.objSpawn=onload.objSpawn,this.dungeonAttackRange=(vz=scope.browserWidthUpdate/2,vz<600?vz:600),this.dungeonAttackRangeY={max:0,min:scope.random(180,100)},this.walkAttackSpeed=2,this.walkNormalSpeed=3,this.maxHealth=options.maxHealth,this.health=options.maxHealth,this.monsterParameters={name:options.name,level:options.level,range:options.attackRange,attackRangeMax:options.attackRangeMax,attackRangeMin:options.attackRangeMin,attackMax:options.attackMax,attackMin:options.attackMin,defenseMax:options.defenseMax,defenseMin:options.defenseMin,magicDefenseMax:options.magicDefenseMax,magicDefenseMin:options.magicDefenseMin,coin:scope.monsterAttribute.value(options.level,"soul"),item:options.item,exp:scope.monsterAttribute.value(options.level,"exp"),maxHealth:options.maxHealth,mp:options.mp,activeSkill:[],castedDelay:200,buffSkill:function(){var t={};for(var e in options.buffSkill)t[options.buffSkill[e]]=new scope.globalSkill.value[options.buffSkill[e]];return t}(),abilitySkill:options.abilitySkill,attackType:"long-range",object:""},this.statInitial=function(){if(this.hpSize=!!options&&options.hpBar||"medium",stat=this.stat(this.hpSize),stat)with(stat)"back"===this.behave&&(this.pathState=!1,this.posCapture.position.y=0,this.pathRange=1,this.nextPath=0),this.object.behave=this.behave="attack",this.stateBackTick=scope.random(200,50)},this.update=function(t,e,a,i,s,n,r){if(this.install||(scope.extend(this,new scope.components.monster,!0),scope.extend(this,new scope.components.monsterDungeon,!0),scope.extend(this,new scope.AI.pathFinding,!0),this.requireInstall(t,e,a,i,s,n,r)),this.trajectoriesUpdate.length){if("right"===this.turn){a=this.object.position.y-options.posY,e=this.object.position.x+options.posX;var o=130}else e=this.object.position.x-options.posX,a=this.object.position.y-options.posY,o=-130;for(var l=0;l<this.trajectoriesUpdate.length;l++)this.trajectoriesUpdate[l].update(e,a,o,this.turn,this.character)&&this.trajectoriesUpdate.splice(l,1)}return this.statInitial(),this.generalAIBehaviours({attackRange:!0,trajectory:function(){this.trajectoriesUpdate.push(new this.itemTrajectory(options.weaponName,options.weaponWidth,options.weaponHeight,this)),options&&options.angleSpeed&&(this.trajectoriesUpdate[this.trajectoriesUpdate.length-1].angleSpeed=options.angleSpeed)}.bind(this)}),this.remove}}}},_owlBird.animation=function(_obj){var scope=this;scope.fn=new _obj.utils;for(var obj={screen:scope.fn.qs("screen"),canvas:scope.fn.id("canvas"),browserWidthUpdate:_obj.browserWidth(),browserHeightUpdate:_obj.browserHeight(),deltaTime:"",isSwitchMapActive:!1,context:scope.fn.id("canvas").getContext("2d"),canvasStatus:"play",path:scope.fn.qs("site").getAttribute("data-bitmap"),Engine:Matter.Engine,Composite:Matter.Composite,Composites:Matter.Composites,Constraint:Matter.Constraint,World:Matter.World,Runner:Matter.Runner,Bodies:Matter.Bodies,Events:Matter.Events,Svg:Matter.Svg,orderObj:[],Body:Matter.Body,fragment:[],objFragment:{},bugTranslate:1,layer:{fnEnvi:function(t,e){for(var a=0,i=e.layer.object;a<i.length;a++)"add"===t?(scope.Body.setPosition(i[a],{x:e.x+i[a].FixedPosition.x,y:e.y+i[a].FixedPosition.y}),scope.Composite.addBody(scope.engine.world,i[a])):"remove"===t&&scope.World.remove(scope.engine.world,i[a]);scope.orderObjectFn.value()},environment:function(t,e,a){e.appear&&!e.layer.init?(this.fnEnvi("add",{body:e,x:e.x,y:e.yMax(),layer:e.layer}),e.layer.init=!0):!e.appear&&e.layer.init&&(this.fnEnvi("remove",{layer:e.layer}),e.layer.init=!1)},bgStorage:[],isVisible:function(t){var e=scope.browserWidthUpdate,a=scope.browserHeightUpdate;return t.x<e&&t.xMax()>0&&t.y<a&&t.yMax()>0},fnBackgr:function(t){for(var e=this.bgStorage,a=[],i=0;i<e.length;i++){var s=e[i];if(this.isVisible(s)){for(var n in s.neighbor){var r=s.neighbor[n];(function(){for(var t=0;t<e.length;t++)if(e[t].label===r.label)return!1;switch(n){case"right":r.y=s.y,r.x=s.x+500;break;case"left":r.y=s.y,r.x=s.x-500;break;case"top":r.y=s.y-500,r.x=s.x;break;case"bottom":r.y=s.y+500,r.x=s.x}return!!this.isVisible(r)}).bind(this)()&&this.bgStorage.push(r)}if(t.tickMap<=0&&t.isTranslate&&(t.staticAllX&&t.staticStateX?s.translate({x:t.staticMoveX,y:0}):t.staticStateX&&s.translate({x:t.staticMoveX,y:0}),s.translate({x:0,y:t.staticMoveY})),t.shakeLen){var o=t.isShake.shakeCnt[0];s.translate({x:o.posX,y:0}),s.translate({x:0,y:o.posY})}s.update()}else a.push(i)}for(i=0;i<a.length;i++)this.bgStorage.splice(a[i],1)},background:function(t){this.bgStorage.length=0;for(var e=0;e<t.length;e++){var a=t[e];a.resetPos(),(this.isVisible(a)||!a.install||a.visible)&&(a.update(scope.context),this.bgStorage.push(a))}}},currentMap:"mapA",tickMap:0,tickMinute:6,staticGeometry:{storageMap:"",storagePassBG:[],storagePortal:"",storageSVG:"",storageLayer:"",storage:"",returnGeometry:function(t,e,a){if("svg"===a)var i=this.storageSVG.get(t);else if("portal"===a)i=this.storagePortal.get(t);else i=this.storage.get(t);for(var s=0;s<i.length;s++)if(i[s].label===e)return i[s]},storageFn:function(option,cnt,label,location){with(option){function fn(t,e,a){cnt.push({visible:!1,imgType:option.type||"",attach:attach,neighbor:!!a&&a||"",range:t||0,x:0,y:0,install:!1,drawFn:"",width:0,height:0,spawn:"",additionalHeight:option.additionalHeight&&additionalHeight||0,render:{textures:"",src:e},resetPos:function(){this.spawn&&(this.x=this.spawn.min.x+this.range-500,this.y=this.spawn.min.y-this.height+(this.additionalHeight?this.additionalHeight:0))},xMax:function(){return this.x+this.width},yMax:function(){return this.y+this.height},update:function(t){var e;this.install?this.drawFn.update({textures:this.render.textures,context:scope.context,posX:this.x,posY:this.y,geoWidth:this.width,geoHeight:this.height}):("svg"===this.imgType?e=scope[this.attach].value.bounds:-1!==this.attach.indexOf("staticWallOutter")?"staticWallOutterBottom"===this.attach&&(e=scope.staticWallOutter.value()[1].bounds):e=scope[this.attach].value.bounds,this.spawn=e,this.drawFn=new scope.draw.enviOrnaments,option.background?(this.width=500,this.height=500):(this.width=this.render.textures.width,this.height=this.render.textures.height),"svg"===this.imgType?(this.x=this.spawn.min.x,this.y=this.spawn.min.y):(this.x=this.spawn.min.x+this.range-(option.repeatX?repeatX:0),this.y=this.spawn.min.y-this.height+(option.additionalHeight?additionalHeight:0)),this.install=!0)},translate:function(t){this.x+=t.x,this.y+=t.y},location:location,label:option.label?option.label:label})}if(option.repeat){for(var objRepeat=option.repeat,url,repeatXval=0,ii=0;ii<objRepeat.length;ii++){var url=option.scr+objRepeat[ii],neighbor={top:option.indexRepeat+1<=option.layer.length-1?location+option.layer[option.indexRepeat+1][ii].split(".")[0]:"",bottom:option.indexRepeat-1>=0?location+option.layer[option.indexRepeat-1][ii].split(".")[0]:"",left:ii-1>=0?location+objRepeat[ii-1].split(".")[0]:"",right:ii+1<=objRepeat.length-1?location+objRepeat[ii+1].split(".")[0]:""};option.label=location+objRepeat[ii].split(".")[0],fn(repeatXval+=option.repeatX,url,neighbor)}for(var ii=0,len=cnt.length;ii<len;ii++)for(var jj in cnt[ii].neighbor){var neighbor=cnt[ii].neighbor[jj];if(""!==neighbor)for(var kk=0;kk<len;kk++)neighbor===cnt[kk].label&&(cnt[ii].neighbor[jj]=cnt[kk])}}else fn(range,option.src)}},createEnviPoint:function(t,e){var a=e.label?e.label:scope.uniqueId();if(e.type){var i=(i=this.storageSVG.get(t))instanceof Array?i:[];this.storageFn(e,i,a,t),this.storageSVG.set(t,i)}else{i=(i=this.storage.get(t))instanceof Array?i:[];this.storageFn(e,i,a,t),this.storage.set(t,i)}var s=e.type?"svg":"envi";return this.returnGeometry(t,a,s)},createLayer:function(option){with(option){var cnt=this.storageLayer.get(location),label=scope.uniqueId(),cnt=cnt instanceof Array?cnt:[];return cnt.push({x:-1e3,y:-1e3,rangeX:rangeX,rangeY:rangeY,layer:layer,attach:attach,install:!1,width:width,height:height,xMax:function(){return this.x+this.width},yMax:function(){return this.y+this.height},update:function(t){var e;this.install||(/staticWallOutter/i.test(this.attach)?"staticWallOutterBottom"===this.attach&&(e=scope.staticWallOutter.value()[1].bounds):e=scope[this.attach].value.bounds,this.x=e.min.x+this.rangeX-15,this.y=e.min.y-this.height+this.rangeY-30,this.install=!0)},translate:function(t){location===scope.currentMap&&(this.x+=t.x,this.y+=t.y)},color:"red",location:location,label:option.label?option.label:label}),this.storageLayer.set(location,cnt),cnt[cnt.length-1]}},createPortal:function(option){with(option){var cnt=this.storagePortal.get(location),label=scope.uniqueId(),cnt=cnt instanceof Array?cnt:[];return cnt.push({x:-1e3,y:-1e3,attach:attach,range:option.range||0,install:!1,delay:!0,width:width,height:height,effect:"",xMax:function(){return this.x+this.width},yMax:function(){return this.y+this.height},update:function(t){var e;this.install||(/staticWallOutter/i.test(this.attach)?"staticWallOutterBottom"===this.attach&&(e=scope.staticWallOutter.value()[1].bounds):e=scope[this.attach].value.bounds,this.x=e.min.x+this.range+(option.rangeX?option.rangeX:0),this.y=e.min.y-this.height+(option.rangeY?option.rangeY:0),this.effect=option.effect&&scope[option.effect]?new scope[option.effect]:"",this.install=!0);this.isVisible&&(this.effect?this.effect.update(t,this):(t.beginPath(),t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)))},translate:function(t){this.x+=t.x,this.y+=t.y},color:color,location:location,isVisible:void 0===option.isVisible||option.isVisible,locationTarget:option.targetLocation?targetLocation:"",spawnTarget:option.spawnTarget?spawnTarget:"",forceGravity:(option.forceGravity,option.forceGravity),label:label}),this.storagePortal.set(location,cnt),this.returnGeometry(location,label,"portal")}},createStoratePassBG:function(t){this.storagePassBG.push(new function(){this.parent=t.parent,this.bgPass=!0,this.remove=!1,this.x=t.x,this.y=t.y,this.fn=t.fn,this.fn.target=this,this.xMax=function(){return this.x},this.yMax=function(){return this.y},this.translate=function(t){this.x+=t.x,this.y+=t.y,this.parent.x=this.x,this.parent.y=this.y}})},createMap:function(option){with(option){var cnt=this.storageMap.get(location),label=scope.uniqueId(),cnt=cnt instanceof Array?cnt:[];cnt.push({character:"",x:-1e3,y:-1e3,visible:!0,install:!1,width:0,height:0,drawFn:"",render:{textures:"",src:src},xMax:function(){return this.x+this.scaleX},yMax:function(){return this.y+this.scaleY},update:function(t){if(this.install){var e=scope.scaleMap.value;scope.activeMap.value;if(!e.close){this.drawFn.update({textures:this.render.textures,screenSizeX:scope.browserWidthUpdate,screenSizeY:scope.browserHeightUpdate,context:t,posX:this.x,posY:this.y,scaleSize:e.map,center:e.centerMap}),this.character.mapMark.update({context:t,screenSizeX:scope.browserWidthUpdate,pos:this.character.position,color:"purple",scaleSize:e.mark,center:e.centerMark});var a=this.character.pions,i=a.length;if(i)for(var s=0;s<i;s++){var n=a[s];n.mapMark.update({context:t,screenSizeX:scope.browserWidthUpdate,pos:n.position,color:"blue",scaleSize:e.mark,center:e.centerMark})}for(var r in this.mapContent.content){var o=this.mapContent.content[r];if(/monster/i.test(r)){var l="attack"===o.behave?"red":"orange";o.mapMark.update({context:t,screenSizeX:scope.browserWidthUpdate,pos:o.position,color:l,scaleSize:e.mark,center:e.centerMark})}else/spawn/i.test(r)&&o.quest&&o.quest.update.length&&o.quest.mapMark.update({quest:!0,context:t,screenSizeX:scope.browserWidthUpdate,pos:o.position,characterPos:this.character.position,color:"arrow",colorTarget:o.quest.target,scaleSize:e.mark,center:e.centerMark})}}}else{var c=scope.getTexture(this.render,this.render.src);c.complete&&(this.width=c.width,this.height=c.height,this.drawFn=new scope.draw.map,this.install=!0,this.x=0,this.y=0,this.mapContent=scope.staticAllMap.value[location],this.character=scope.oval.value)}},translate:function(t){this.x+=t.x,this.y+=t.y},location:location,label:label}),this.storageMap.set(location,cnt)}}},renderInit:function(){var t=this;t.engine=t.Engine.create(),t.runner=t.Runner.create(),t.levelHeight=t.browserHeightUpdate,t.stage=t.levelHeight/4,t.halfCenter=t.levelHeight/2,t.halfTopCenter=t.halfCenter/2,t.halfTopTop=t.halfCenter-t.halfCenter,t.halfBottom=t.halfCenter/2+t.halfCenter,t.halfBottomTop=t.halfCenter/2/2+t.halfCenter,t.halfBottomBottom=t.halfBottom+t.stage,t.halfBottomLvl2=-t.stage,t.halfCenterLvl2=-t.stage-t.stage,t.halfTopCenterLvl2=-t.stage-t.stage-t.stage,t.halfTopTopLvl2=-t.stage-t.stage+2*-t.stage,t.halfBottomTopLvl2=(-t.stage-t.stage)/2},resize:function(){scope.that(scope).invokeWith("_windowResize"),scope.that(window).use("attachListener",["resize",function(){scope.that(scope).invokeWith("_windowResize")}])},applyGravity:function(t){if(t&&t.forceGravity&&!t.isStatic&&!t.isSleeping){var e=/staticOriPassBGBridge/i.test(t.label)?1:2;t.force.y+=t.mass*e*.001,t.force.x+=0*t.mass*.001}},inrender:function(){var t=scope.estimate.value.spell,e=scope.estimate.value.loc,a=scope.estimate.value.ori,i=scope.estimate.value.root,s=e.split(".");oriArr=s[1].split(""),spellArr=s[0].split(""),tempLoc=[],tempRoot=[],tempSpell=[];for(var n=0;n<spellArr.length;n++)tempSpell.push(t[spellArr[n]]);for(n=0;n<oriArr.length;n++)tempLoc.push(a[oriArr[n]]),tempRoot.push(i[oriArr[n]]);return-1!=win[tempLoc.join("")][tempRoot.join("")].indexOf(tempSpell.join(""))},filterStrength:20,frameTime:0,lastLoop:new Date,thisLoop:""},ii=arguments,jj=ii.length;jj--;)"function"==typeof ii[jj]&&(ii[jj].apply(null,[scope,_obj]),ii[jj].apply(null,[scope,obj]),scope.staticGeometry.storage=new scope.storageState.value,scope.staticGeometry.storageLayer=new scope.storageState.value,scope.staticGeometry.storageSVG=new scope.storageState.value,scope.staticGeometry.storagePortal=new scope.storageState.value,scope.staticGeometry.storageMap=new scope.storageState.value,scope.attachListener(window,"resize",function(){scope.browserWidthUpdate=scope.browserWidth(),scope.browserHeightUpdate=scope.browserHeight()}),performance.now=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||Date.now,scope.geometries(),scope.initilizeObject(),scope.statics(),scope.resize(),scope.monster(),scope.companions())},_owlBird.animation.prototype={play:function(){var t,e,a,i,s=this;function n(r){requestAnimationFrame(n),(i=(e=r)-a)>t&&(a=e-i%t,s.thisFrameTime=(s.thisLoop=new Date)-s.lastLoop,s.frameTime+=(s.thisFrameTime-s.frameTime)/s.filterStrength,s.lastLoop=s.thisLoop,s.isLanscape=s.browserWidth()>s.browserHeight(),!s.isSwitchMapActive&&s.isLanscape?(s.drawing.update(s),s.characterControl.update(),s.companionsControl.update(),s.monsterControl.update(),s.staticControl.update(),s.skillCasting(),s.setIntervalFn()):!s.isLanscape&&/hidden/i.test(s.qs("orientation-alert").className)&&s.removeClass(s.qs("orientation-alert"),"hidden"))}t=1e3/40,a=window.performance.now(),n()},drawing:{update:function(){var t,e,a,i=scope.context,s=scope.objDrawTranslate,n=scope.activeMap.value,r=scope.currentMap!==n,o=scope.characterMage,l=/dungeon/i.test(n)?scope.orderObj:scope.Composite.allBodies(scope.engine.world),c=s.staticObjStateX,h=scope.bugTranslate?s.staticObjMoveX:scope.bugTranslate,p=s.staticObjAllX,d=s.staticObjStateY,g=s.isShake,m=g.shakeCnt.length,u=!0,f=!(!c&&!d),v=scope.bugTranslate?"up"===d?s.staticObjMoveY:"down"===d?-s.staticObjMoveY:0:scope.bugTranslate,b=scope.browserWidthUpdate,S=scope.browserHeightUpdate,x=!0,k=scope.staticGeometry.storagePassBG;if(scope.context.clearRect(0,0,scope.context.canvas.width,scope.context.canvas.height),scope.Runner.tick(scope.runner,scope.engine,25,{map:n}),r&&(scope.enviOrnaments=scope.staticGeometry.storage.get(n),scope.enviLayer=scope.staticGeometry.storageLayer.get(n),scope.enviOrnamentsSvg=scope.staticGeometry.storageSVG.get(n),scope.enviOrnamentsPortal=scope.staticGeometry.storagePortal.get(n),scope.enviMiniMap=scope.staticGeometry.storageMap.get(n),scope.textures(n),scope.allMapContent=scope.staticAllMap.value[n],scope.layer.bgStorage.length=0,scope.currentMap=n,scope.tickMap=100,scope.screenTransition("move-character","open"),scope.isMobile.value&&("mapDDungeonA"!==scope.activeMap.value?scope.addClass(scope.qs("jump-right-nav"),"hidden"):scope.removeClass(scope.qs("jump-right-nav"),"hidden"))),scope.tickMap>-10){if(0===scope.tickMap){c=!0,p=!0,f=!0;var y=scope.browserWidthUpdate/2,B=scope.browserHeightUpdate/2,w=o.position.x,M=o.position.y;h=T=y-w,v=O=B-M}else if(-5===scope.tickMap){for(var P=scope.staticWallOutter.value(),A=function(t){return t.bounds.min.x<b&&t.bounds.max.x>0},D=function(t){return t.bounds.min.y<S&&t.bounds.max.y>0},j=!1,T=(y=scope.browserWidthUpdate/2,B=scope.browserHeightUpdate/2,w=o.position.x,M=o.position.y,0),O=0,C=0,N=P.length;C<N;C++)/left/i.test(P[C].label)&&A(P[C])?(T=y-P[C].bounds.max.x-w,j=!0):/right/i.test(P[C].label)&&A(P[C])?(T=y-Math.abs(P[C].bounds.min.x-w),j=!0):/bottom/i.test(P[C].label)&&D(P[C])?(O=B-P[C].bounds.min.y+M,j=!0):/top/i.test(P[C].label)&&D(P[C])&&(O=B-P[C].bounds.max.y-M,j=!0);if(j){u=!1;c=!0,p=!0,f=!0,h=T,v=O}}scope.tickMap--,scope.layer.background(scope.enviOrnaments),-9===scope.tickMap&&("mapDDungeonA"===scope.currentMap&&(scope.characterControl.preventControl=!1),scope.screenTransition("move-character","close"),scope.intervalList.value.set("nbid",{always:!0,tick:100,tickUpdate:100,fn:function(){scope.qs("loading-assets").style.display="none"}}))}function q(t,e){if(t)for(var a=0;a<t.length;a++){var s=t[a];if(scope.tickMap<=0&&f&&(p&&c?s.translate({x:h,y:0}):c&&s.translate({x:h,y:0}),s.translate({x:0,y:v})),s.x<b&&s.xMax()>0&&s.y<S&&s.yMax()>0||!s.install||s.visible){if(m){var n=g.shakeCnt[0];s.translate({x:n.posX,y:0}),s.translate({x:0,y:n.posY})}s.bgPass?s.fn.update(i,s.parent)&&(s.remove=!0):(s.appear=!0,s.update(i),s.layer&&scope.layer.environment(scope.currentMap,s))}else s.appear&&(s.appear=!1,s.layer&&scope.layer.environment(scope.currentMap,s))}}for(scope.layer.fnBackgr({tickMap:scope.tickMap,isTranslate:f,staticAllX:p,staticStateX:c,staticMoveX:h,staticMoveY:v,shakeLen:m,isShake:g}),a=0,len=l.length;a<len;a++)if((t=l[a]).render.visible)if(scope.tickMap<=0&&f&&!/controlRight/i.test(l[a].label)&&(p&&c?(u||/oval/i.test(l[a].label),scope.Body.translate(l[a],{x:h,y:0})):/static|item|test|coin|monster/i.test(l[a].label)&&c&&(u||/oval/i.test(l[a].label),scope.Body.translate(l[a],{x:h,y:0})),/static|test|item|coin|monster|oval/i.test(l[a].label)&&(u||/oval/i.test(l[a].label),scope.Body.translate(l[a],{x:0,y:v}))),t.bounds.min.x<b&&t.bounds.max.x>0&&t.bounds.min.y<S&&t.bounds.max.y>0){if(t.rigBody&&(t.rigBody.displayBar(),t.rigBody.hitNumberFn()),m&&/static|test|item|coin|monster|oval/i.test(l[a].label)){var E=g.shakeCnt[0];scope.Body.translate(l[a],{x:E.posX,y:0}),scope.Body.translate(l[a],{x:0,y:E.posY})}if(k.length&&x){q(k);for(var F=0,I=k.length,R=0;R<I;R++)k[R].remove&&F++;I===F&&(k.length=0),x=!1}for(var L=t.parts.length>1?1:0,G=t.parts.length;L<G;L++)if((e=t.parts[L]).render.visible){if(1!==e.render.opacity&&(i.globalAlpha=e.render.opacity),e.render.sprite&&e.render.sprite.texture){void 0===e.render.texture&&(e.render.texture="",/monster-black/i.test(e.label)?e.render.textureFn=new scope.draw.monsterJump:/coin/i.test(e.label)?e.render.textureFn=new scope.draw.coin:/monster-yellow/i.test(e.label)?(e.render.textureFn=new scope.draw.monsterJump,e.render.textureWidth=52):/monster-slime/i.test(e.label)?e.render.textureFn=new scope.draw.monsterSlime:/monster-golem/i.test(e.label)?(e.render.textureFn=new scope.draw.monsterGolem,e.render.prevState="idle"):/npc|yeti|bug|elemental|boar|wolf|hollow|minatour|sekleton|goblin|elf|human|oval/i.test(e.label)?(e.render.textureFn=new scope.draw.monsterGeneral,e.render.prevState="idle",e.totalOfFrames||(e.totalOfFrames=36)):/monster-horn/i.test(e.label)?(e.render.textureFn=new scope.draw.monsterHorn,e.render.prevState="walk"):/staticRocket/i.test(e.label)?e.render.textureFn=new scope.draw.rocket:/monster-green-dragon/i.test(e.label)&&(e.render.textureFn=new scope.draw.greenDragon));var H,W=e.render.sprite,Y=scope.getTexture(e.render,W.texture);if(i.translate(e.position.x,e.position.y),i.rotate(e.angle),e.behave){var V=e.render.textureFn;if(tt=scope[e.stateStorage].value.get(e.label)){(H=-1!==tt.indexOf("textureNeedChange"))&&(Y=scope.getTexture(e.render,W.texture,tt),e.bitmap=tt,scope[e.stateStorage].value.set(e.label,e.render.prevState));var X={context:i,totalOfFrames:e.totalOfFrames?e.totalOfFrames:72,width:Y.width,height:Y.height,image:Y,sprite:W,additionalBoundsWidthValue:e.additionalBoundsWidthValue?e.additionalBoundsWidthValue:0,additionalBoundsHeightValue:e.additionalBoundsHeightValue,walkFrameSpeed:e.walkFrameSpeed,state:tt};!H&&(e.render.prevState=tt),/oval/i.test(e.label)?(X.opacity=1,V.update(X)):V.update(X)}}else if(/npc/i.test(e.label)){if(e.isVisible){V=e.render.textureFn,Y=e.render.textures;V.update({context:i,totalOfFrames:e.totalOfFrames,width:Y.width,height:Y.height,image:Y,sprite:W,additionalBoundsWidthValue:e.additionalBoundsWidthValue?e.additionalBoundsWidthValue:0,additionalBoundsHeightValue:e.additionalBoundsHeightValue,walkFrameSpeed:e.walkFrameSpeed,state:e.behaveState?e.behaveState:"idle",opacity:1})}}else if(e.isStatic||/passBG/i.test(e.label))i.drawImage(Y,Y.width*-W.xOffset*W.xScale,Y.height*-W.yOffset*W.yScale,Y.width*W.xScale,Y.height*W.yScale);else if(-1!==e.label.indexOf("monster-slime")){var _=e.render.textureFn;(tt=scope.monsterSlimeState.value.get(e.label))&&(tt.indexOf("textureNeedChange"),Y=scope.getTexture(e.render,W.texture,tt),scope.monsterSlimeState.value.set(e.label,"idle")),_.update({context:i,width:Y.width,height:Y.height,image:Y,sprite:W,state:tt})}else if(-1!==e.label.indexOf("coin")){e.render.textureFn.update({context:i,width:44,height:44,image:Y,sprite:W})}else if(-1!==e.label.indexOf("monster-golem")){var U=e.render.textureFn;(tt=scope.monsterGolemState.value.get(e.label))&&(H=-1!==tt.indexOf("textureNeedChange"),Y=scope.getTexture(e.render,W.texture,tt),scope.monsterGolemState.value.set(e.label,e.render.prevState),!H&&(e.render.prevState=tt)),U.update({context:i,width:Y.width,height:Y.height,image:Y,sprite:W,state:tt})}else if(-1!==e.label.indexOf("monster-horn")){var z=e.render.textureFn;(tt=scope.monsterHornState.value.get(e.label))&&-1!==tt.indexOf("textureNeedChange")&&(Y=scope.getTexture(e.render,W.texture,tt),"idleNormal"===e.render.prevState?scope.monsterHornState.value.set(e.label,"walk"):scope.monsterHornState.value.set(e.label,e.render.prevState)),e.render.prevState=tt,tt="idleNormal"===tt?"idle":tt,z.update({context:i,width:Y.width,height:Y.height,image:Y,sprite:W,state:tt})}else if(-1!==e.label.indexOf("monster-black")){var Q=e.render.textureFn,J=!1;(tt=scope.monsterBlackState.value.get(e.label))&&-1!==tt.indexOf("textureNeedChange")&&(Y=scope.getTexture(e.render,W.texture,tt),scope.monsterBlackState.value.set(e.label,"move")),Q.update({context:i,width:40,height:40,image:Y,sprite:W,state:tt,needClear:J})}else if(-1!==e.label.indexOf("monster-yellow")){var K=e.render.textureFn,$=e.render.textureWidth;J=!1;(tt=scope.monsterYellowState.value.get(e.label))&&-1!==tt.indexOf("textureNeedChange")&&(/monster-yellow-right|monster-yellow-left/i.test(tt)?(e.render.textureWidth=40,J=!0):e.render.textureWidth=52,Y=scope.getTexture(e.render,W.texture,tt),scope.monsterYellowState.value.set(e.label,"move")),K.update({context:i,width:$,height:40,image:Y,sprite:W,state:tt,needClear:J})}else if(-1!==e.label.indexOf("staticRocket")){var Z=e.render.textureFn,tt=(J=!1,scope.rocketState.value.get(e.label));Z.update({context:i,width:40,height:40,image:Y,sprite:W,state:tt,needClear:J})}else if(-1!==e.label.indexOf("monster-green-dragon")){var et=e.render.textureFn;J=!1,(tt=scope.greenDragonState.value.get(e.label))&&-1!==tt.indexOf("textureNeedChange")&&(tt.indexOf("textureNeedChange"),Y=scope.getTexture(e.render,W.texture,tt),scope.greenDragonState.value.set(e.label,"move")),et.update({context:i,width:108,height:80,image:Y,sprite:W,state:tt,needClear:J})}i.rotate(-e.angle),i.translate(-e.position.x,-e.position.y)}i.globalAlpha=1}if(t.src&&scope.allMapContent.textures.update({isVisible:void 0===t.isVisible||t.isVisible,label:t.label,context:i,posX:t.bounds.min.x,posY:t.bounds.min.y,fixedBounds:{bool:!!t.fixedBounds,value:t.fixedBounds},object:t}),s.objectMarker.state){var at=s.objectMarker.monster;t.position.x>at.bounds.min.x&&t.position.x<at.bounds.max.x&&t.position.y>at.bounds.min.y&&t.position.y<at.bounds.max.y&&/monster|sekleton/i.test(t.label)&&s.objectMarker.registerMonster.push(t)}scope.applyGravity(t),t.visible=!0}else t.visible&&(t.visible=!1);scope.enviOrnamentsSvg&&q(scope.enviOrnamentsSvg),q(scope.enviOrnamentsPortal),q(scope.enviMiniMap),q(scope.enviLayer),m&&g.shakeCnt[0].update()&&g.shakeCnt.splice(0,1),scope.markerMonsterMobile(s)}},textures:function(map){var scope=this,onePx=scope.path+"/1px.png",content=scope.staticAllMap.value[map].content,newTexture={},label;if(scope.staticAllMap.value[map].textures)return!0;for(var kk in content)if(kk in content){var t={};if(content[kk]instanceof Array)for(var ll=0;ll<content[kk].length;ll++)if(/Layer/i.test(kk)&&content[kk][ll].layer)for(var mm=0,layer=content[kk][ll].layer.object;mm<layer.length;mm++)label=layer[mm].label,t[label]={textures:"",src:layer[mm].src?layer[mm].src:onePx},scope.getTexture(t[label],t[label].src),scope.extend(newTexture,t);else label=content[kk][ll].label,t[label]={textures:"",src:content[kk][ll].src?content[kk][ll].src:onePx},scope.getTexture(t[label],t[label].src),scope.extend(newTexture,t);else label=content[kk].label,t[label]={textures:"",src:content[kk].src?content[kk].src:onePx},scope.getTexture(t[label],t[label].src),scope.extend(newTexture,t)}scope.staticAllMap.value[map].textures=newTexture,scope.staticAllMap.value[map].textures.update=function(options){with(options)if(this[options.label]){var wall=this[options.label],repeat;/staticWall/i.test(options.label)||(fixedBounds.bool&&(posY+=fixedBounds.value),options.isVisible&&context.drawImage(wall.textures,0,0,wall.textures.width,wall.textures.height,posX,posY,wall.textures.width,wall.textures.height)),scope.bugTranslate=1}},newTexture={}},monster:function(){var scope=this,_obj;_obj={character:scope.oval.value,characterDamagePool:function(t,e,a,i){if("oval"===t){var s=scope.characterGetDamage.value.get(t);s.push(e),scope.characterGetDamage.value.set(t,s)}else this.monsterDamagePool(t,e,a,i)},items:function(t,e,a){t.coin.spawnTotal=1,spawnX=e.position.x,spawnY=e.position.y;var i=new t.coin.create(spawnX+scope.random(50,-50),spawnY+scope.random(30,-30));if(e.rigBody.monsterParameters.coin&&(i.object.coinVal=e.rigBody.monsterParameters.coin),t.itemTemp.push(i),scope.World.add(scope.staticWorld.value,i.object),a)for(var s=0,n=a.item.length;s<n;s++){var r=a.item[s].itemName,o=a.item[s].spawn,l=a.item[s].prob;if(texture=a.item[s].texture,100*Math.random()<=l)(i=new t.item.create(spawnX+scope.random(50,-50),spawnY+scope.random(30,-30),r,texture)).object.itemVal=scope.random(o.max,o.min),t.itemTemp.push(i),scope.World.add(scope.staticWorld.value,i.object)}},monstersBugQueenSpawn:[{monsters:[],objectSpawn:scope.staticOriDungeonGSpawnA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"},{monsters:[],objectSpawn:scope.staticOriDungeonGSpawnA.value,spawnTotal:6,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonG"}],monsterBugQueen:scope.components.initSpear({name:"Queen Ness",level:9,aggresive:!1,attackRange:70,attackRangeMax:25,attackRangeMin:15,attackMax:90,attackMin:80,defenseMax:9,defenseMin:5,magicDefenseMax:20,magicDefenseMin:15,maxHealth:800,mp:23,hpBar:"small",buffSkill:{},abilitySkill:{},item:[{itemName:"Queen Ness Scale",spawn:{max:1,min:1},prob:60,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Ness Fang",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[15]}],audioDie:""}),monstersBugSpawn:[{monsters:[],objectSpawn:scope.staticOriDungeonGSpawnA.value,spawnTotal:6,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonG"}],monsterBug:scope.components.initSpear({name:"Ness",level:4,aggresive:!1,attackRange:70,attackRangeMax:15,attackRangeMin:5,attackMax:65,attackMin:50,defenseMax:5,defenseMin:2,magicDefenseMax:15,magicDefenseMin:10,maxHealth:400,mp:15,hpBar:"small",buffSkill:{},abilitySkill:{},item:[{itemName:"Ness Scale",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Ness Fang",spawn:{max:2,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[15]}],audioDie:""}),monstersFireElementalSpawn:[{monsters:[],objectSpawn:scope.staticOriDungeonGSpawnB.value,spawnTotal:3,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonG"}],monsterFireElemental:scope.components.initMage({name:"Fire Nord",level:17,aggresive:!1,attackRange:500,attackRangeMax:353,attackRangeMin:293,attackMax:95,attackMin:65,defenseMax:75,defenseMin:57,magicDefenseMax:145,magicDefenseMin:130,maxHealth:3500,mp:125,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{}],attackFrame:[{frame:[18]}],audioDie:""}),monstersBoarWhiteSpawn:[{monsters:[],objectSpawn:scope.staticOriDungeonGSpawnC.value,spawnTotal:5,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonG"}],monsterBoarWhite:scope.components.initSpear({name:"Gall Boar",level:11,aggresive:!1,attackRange:70,attackRangeMax:55,attackRangeMin:35,attackMax:165,attackMin:135,defenseMax:16,defenseMin:7,magicDefenseMax:9,magicDefenseMin:5,maxHealth:2300,mp:42,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Meat",spawn:{max:6,min:4},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Gall Boar Fang",spawn:{max:4,min:2},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[15]}],audioDie:""}),monstersBoarSpawn:[{monsters:[],objectSpawn:scope.staticOriDungeonGSpawnD.value,spawnTotal:5,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonG"}],monsterBoar:scope.components.initSpear({name:"Beast Gall Boar",level:12,aggresive:!1,attackRange:70,attackRangeMax:65,attackRangeMin:45,attackMax:215,attackMin:175,defenseMax:41,defenseMin:35,magicDefenseMax:36,magicDefenseMin:26,maxHealth:3100,hpBar:"medium",mp:45,buffSkill:{},abilitySkill:{},item:[{itemName:"Meat",spawn:{max:6,min:4},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Gall Boar Fang",spawn:{max:4,min:2},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[15]}],audioDie:""}),monstersBugWarriorSpawn:[{monsters:[],objectSpawn:scope.staticOriDngCPassSpawnA.value,spawnTotal:6,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonC"}],monsterBugWarrior:scope.components.initSpear({name:"Nortus Green",level:13,aggresive:!1,attackRange:70,attackRangeMax:75,attackRangeMin:52,attackMax:295,attackMin:215,defenseMax:63,defenseMin:51,magicDefenseMax:53,magicDefenseMin:41,maxHealth:3900,mp:77,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Nortus Green Scale",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[27]}],audioDie:""}),monstersBugWarriorRedSpawn:[{monsters:[],objectSpawn:scope.staticOriDngCPassSpawnB.value,spawnTotal:3,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonC"}],monsterBugWarriorRed:scope.components.initSpear({name:"Nortus Red",level:15,aggresive:!1,attackRange:70,attackRangeMax:95,attackRangeMin:72,attackMax:315,attackMin:245,defenseMax:75,defenseMin:63,magicDefenseMax:59,magicDefenseMin:47,maxHealth:4300,mp:71,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Nortus Red Scale",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[27]}],audioDie:""}),monstersLightElementalSpawn:[{monsters:[],objectSpawn:scope.staticOriDngBPassSpawnA.value,spawnTotal:5,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonB"}],monsterLightElemental:scope.components.initMage({name:"Light Mosseal",level:17,aggresive:!1,attackRange:500,attackRangeMax:375,attackRangeMin:285,attackMax:115,attackMin:81,defenseMax:82,defenseMin:67,magicDefenseMax:74,magicDefenseMin:52,maxHealth:4705,mp:121,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Light Soul",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[20]}],audioDie:""}),monstersGoblinArcherSpawn:[{monsters:[],objectSpawn:scope.staticOriDngCPassSpawnE.value,spawnTotal:5,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonC"},{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterGoblinArcher:scope.components.initArhcer({name:"Goblin Archer",level:15,aggresive:!1,posX:60,posY:20,weaponName:"arrow",weaponWidth:7,weaponHeight:44,attackRange:500,attackRangeMax:345,attackRangeMin:265,attackMax:135,attackMin:91,defenseMax:81,defenseMin:65,magicDefenseMax:74,magicDefenseMin:52,maxHealth:3800,mp:81,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"basic magical plant",spawn:{max:6,min:3},prob:99,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Goblin Elixir",spawn:{max:4,min:2},prob:99,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[26],audio:["arrow-fly-2"]}],audioDie:["monster-5","Goblin_03","Goblin_01"]}),monstersGoblinSpearSpawn:[{monsters:[],objectSpawn:scope.staticOriDngCPassSpawnF.value,spawnTotal:5,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonC"},{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterGoblinSpear:scope.components.initSpear({name:"Goblin Spear",level:15,aggresive:!1,attackRange:70,attackRangeMax:105,attackRangeMin:82,attackMax:345,attackMin:231,defenseMax:87,defenseMin:62,magicDefenseMax:128,magicDefenseMin:83,maxHealth:4470,mp:95,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Basic Herb Plant",spawn:{max:6,min:3},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Goblin Elixir",spawn:{max:4,min:2},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:["monster-5","Goblin_03","Goblin_01"]}),monstersGoblinArmoredSpawn:[{monsters:[],objectSpawn:scope.staticOriDngBPassSpawnD.value,spawnTotal:3,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonB"},{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterGoblinArmored:scope.components.initArmored({name:"Goblin Armor",level:16,aggresive:!1,attackRange:70,attackRangeMax:75,attackRangeMin:52,attackMax:265,attackMin:181,defenseMax:157,defenseMin:132,magicDefenseMax:77,magicDefenseMin:56,maxHealth:5770,mp:91,hpBar:"medium",buffSkill:{},abilitySkill:{block:25},item:[{itemName:"Basic Herb Plant",spawn:{max:6,min:3},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Goblin Elixir",spawn:{max:4,min:2},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:["monster-5","Goblin_03","Goblin_01"]}),monstersGoblinMageSpawn:[{monsters:[],objectSpawn:scope.staticOriDngBPassSpawnC.value,spawnTotal:2,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonB",pions:{monsterGoblinArcher:2,monsterGoblinArmored:1,monsterGoblinSpear:1}}],monsterGoblinMage:scope.components.initMage({name:"Goblin Mage",level:17,aggresive:!1,attackRange:500,attackRangeMax:395,attackRangeMin:312,attackMax:135,attackMin:102,defenseMax:95,defenseMin:73,magicDefenseMax:124,magicDefenseMin:82,maxHealth:5100,mp:133,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"basic magical plant",spawn:{max:6,min:3},prob:99,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Goblin Elixir",spawn:{max:4,min:2},prob:99,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[26]}],audioDie:["monster-5","Goblin_03","Goblin_01"]}),monstersHollowSpearSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterHollowSpear:scope.components.initSpear({name:"Hollow Spear",level:18,aggresive:!0,attackRange:50,attackRangeMax:135,attackRangeMin:102,attackMax:385,attackMin:271,defenseMax:107,defenseMin:82,magicDefenseMax:138,magicDefenseMin:93,maxHealth:5950,mp:106,hpBar:"small",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[25],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersHollowArmoredSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterHollowArmored:scope.components.initArmored({name:"Hollow Armor",level:16,aggresive:!0,attackRange:70,attackRangeMax:75,attackRangeMin:52,attackMax:315,attackMin:261,defenseMax:197,defenseMin:162,magicDefenseMax:143,magicDefenseMin:112,maxHealth:6970,mp:93,hpBar:"small",buffSkill:{},abilitySkill:{block:25},item:[],attackFrame:[{frame:[25],audio:["swing","swing2","swing3"]}],audioDie:["monster-5","Goblin_03","Goblin_01"]}),monstersHollowArcherBSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterHollowArcherB:scope.components.initArhcer({name:"Hollow Archer",level:19,aggresive:!0,posX:34,posY:15,weaponName:"arrowD",weaponWidth:6,weaponHeight:37,attackRange:500,attackRangeMax:389,attackRangeMin:283,attackMax:155,attackMin:109,defenseMax:103,defenseMin:75,magicDefenseMax:158,magicDefenseMin:113,maxHealth:5830,mp:111,hpBar:"small",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[28],audio:["arrow-fly-2"]}],audioDie:[]}),monstersHollowArcherSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterHollowArcher:scope.components.initArhcer({name:"Hollow Boomber",level:19,aggresive:!0,posX:20,posY:50,weaponName:"boom",weaponWidth:16,weaponHeight:20,angleSpeed:.3,attackRange:500,attackRangeMax:399,attackRangeMin:273,attackMax:145,attackMin:119,defenseMax:109,defenseMin:77,magicDefenseMax:163,magicDefenseMin:118,maxHealth:5990,mp:117,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[23],audio:["arrow-fly-2"]}],audioDie:[]}),monstersHollowMageSpawn:[{monsters:[],objectSpawn:scope.staticOriDngAPassSpawnB.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonA",pions:{monsterHollowSpear:1,monsterHollowArmored:1,monsterHollowArcherB:1}},{monsters:[],objectSpawn:scope.staticOriDngAPassSpawnC.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonA",pions:{monsterHollowSpear:1,monsterHollowArmored:1,monsterHollowArcher:1}}],monsterHollowMage:scope.components.initMage({name:"Hollow Mage",level:20,aggresive:!0,attackRange:500,attackRangeMax:435,attackRangeMin:372,attackMax:175,attackMin:152,defenseMax:135,defenseMin:93,magicDefenseMax:164,magicDefenseMin:112,maxHealth:6300,mp:187,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[20]}],audioDie:[]}),monstersBoarJrSpawn:[{monsters:[],objectSpawn:scope.staticOriMapAADngBPassSpawnC.value,spawnTotal:5,reSpawnTick:1500,reSpawnTickFixed:1500,install:!1,location:"mapAADungeonB"},{monsters:[],objectSpawn:scope.staticOriMapAADngBPassSpawnE.value,spawnTotal:3,reSpawnTick:1500,reSpawnTickFixed:1500,install:!1,location:"mapAADungeonB"}],monsterBoarJr:scope.components.initSpear({name:"Bedrock Cliff",level:17,aggresive:!1,attackRange:70,attackRangeMax:115,attackRangeMin:82,attackMax:335,attackMin:241,defenseMax:107,defenseMin:82,magicDefenseMax:122,magicDefenseMin:102,maxHealth:13350,mp:127,hpBar:"small",buffSkill:{},abilitySkill:{},item:[{itemName:"Bedrock Meat",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Bedrock Bone",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Bedrock Fang",spawn:{max:30,min:23},prob:86,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[18]}],audioDie:[]}),monstersWhiteBoarJrSpawn:[{monsters:[],objectSpawn:scope.staticOriMapAADngBPassSpawnD.value,spawnTotal:5,reSpawnTick:1500,reSpawnTickFixed:1500,install:!1,location:"mapAADungeonB"},{monsters:[],objectSpawn:scope.staticOriMapAADngBPassSpawnE.value,spawnTotal:3,reSpawnTick:1500,reSpawnTickFixed:1500,install:!1,location:"mapAADungeonB"}],monsterWhiteBoarJr:scope.components.initSpear({name:"Bedrock Cliff",level:17,aggresive:!1,attackRange:70,attackRangeMax:111,attackRangeMin:84,attackMax:325,attackMin:231,defenseMax:127,defenseMin:92,magicDefenseMax:112,magicDefenseMin:91,maxHealth:13150,mp:124,hpBar:"small",buffSkill:{},abilitySkill:{},item:[{itemName:"Bedrock Meat",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Bedrock Bone",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Bedrock Fang",spawn:{max:30,min:23},prob:86,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[18]}],audioDie:[]}),monstersMinatourArcherSpawn:[{monsters:[],objectSpawn:scope.staticOriMapAADngAPassSpawnF.value,spawnTotal:1,reSpawnTick:5e3,reSpawnTickFixed:5e3,install:!1,location:"mapAADungeonA"}],monsterMinatourArcher:scope.components.initArhcer({name:"Minotaur Archer",level:21,aggresive:!0,posX:80,posY:70,weaponName:"arrowC",weaponWidth:9,weaponHeight:53,attackRange:500,attackRangeMax:445,attackRangeMin:352,attackMax:195,attackMin:162,defenseMax:145,defenseMin:108,magicDefenseMax:189,magicDefenseMin:135,maxHealth:12700,mp:168,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[22],audio:["arrow-fly-2"]}],audioDie:[]}),monstersMinatourSpearSpawn:[{monsters:[],objectSpawn:scope.staticOriMapAADngAPassSpawnF.value,spawnTotal:1,reSpawnTick:5e3,reSpawnTickFixed:5e3,install:!1,location:"mapAADungeonA"}],monsterMinatourSpear:scope.components.initSpear({name:"Minotaur Spear ",level:21,aggresive:!0,attackRange:50,attackRangeMax:135,attackRangeMin:102,attackMax:223,attackMin:153,defenseMax:153,defenseMin:92,magicDefenseMax:187,magicDefenseMin:138,maxHealth:12645,mp:168,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[10,17],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersMinatourArmoredSpawn:[{monsters:[],objectSpawn:scope.staticOriMapAADngAPassSpawnE.value,spawnTotal:2,reSpawnTick:5e3,reSpawnTickFixed:5e3,install:!1,location:"mapAADungeonA"}],monsterMinatourArmored:scope.components.initArmored({name:"Manatour Spear",level:21,aggresive:!0,attackRange:100,attackRangeMax:125,attackRangeMin:109,attackMax:355,attackMin:313,defenseMax:234,defenseMin:189,magicDefenseMax:217,magicDefenseMin:168,maxHealth:16500,mp:165,hpBar:"medium",buffSkill:{},abilitySkill:{block:20},item:[],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersMinatourMageSpawn:[{monsters:[],objectSpawn:scope.staticOriMapAADngAPassSpawnC.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapAADungeonA",pions:{monsterMinatourSpear:1,monsterMinatourArmored:1,monsterMinatourArcher:1}},{monsters:[],objectSpawn:scope.staticOriMapAADngAPassSpawnD.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapAADungeonA",pions:{monsterMinatourSpear:1,monsterMinatourArmored:1,monsterMinatourArcher:1}}],monsterMinatourMage:scope.components.initMage({name:"Manatour Mage",level:23,aggresive:!0,attackRange:500,attackRangeMax:475,attackRangeMin:418,attackMax:205,attackMin:209,defenseMax:155,defenseMin:103,magicDefenseMax:224,magicDefenseMin:162,maxHealth:15764,mp:225,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[25]}],audioDie:[]}),monstersGoblinWarriorArcherSpawn:[{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnB.value,spawnTotal:3,reSpawnTick:5e3,reSpawnTickFixed:5e3,respawnLimit:1,install:!1,location:"mapDungeonD"}],monsterGoblinWarriorArcher:scope.components.initArhcer({name:"High Goblin Archer",level:22,aggresive:["elf","oval","human"],posX:80,posY:70,weaponName:"arrowC",weaponWidth:9,weaponHeight:53,attackRange:500,attackRangeMax:452,attackRangeMin:369,attackMax:205,attackMin:172,defenseMax:225,defenseMin:188,magicDefenseMax:243,magicDefenseMin:205,maxHealth:17500,mp:175,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[25],audio:["arrow-fly-2"]}],audioDie:[]}),monstersGoblinWarriorSpearSpawn:[{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnC.value,spawnTotal:3,reSpawnTick:5e3,respawnLimit:1,reSpawnTickFixed:5e3,install:!1,location:"mapDungeonD"}],monsterGoblinWarriorSpear:scope.components.initSpear({name:"High Goblin Spear",level:22,aggresive:["elf","oval","human"],attackRange:70,attackRangeMax:215,attackRangeMin:172,attackMax:472,attackMin:375,defenseMax:238,defenseMin:208,magicDefenseMax:249,magicDefenseMin:211,maxHealth:16300,mp:172,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[15],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersGoblinWarriorArmoredSpawn:[{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnD.value,spawnTotal:2,reSpawnTick:5e3,respawnLimit:1,reSpawnTickFixed:5e3,install:!1,location:"mapDungeonD"}],monsterGoblinWarriorArmored:scope.components.initArmored({name:"High Goblin Spear",level:22,aggresive:["elf","oval","human"],attackRange:70,attackRangeMax:192,attackRangeMin:152,attackMax:365,attackMin:333,defenseMax:288,defenseMin:238,magicDefenseMax:279,magicDefenseMin:231,maxHealth:18300,mp:161,hpBar:"medium",buffSkill:{},abilitySkill:{block:20},item:[],attackFrame:[{frame:[15],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersGoblinWarriorMageSpawn:[{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnE.value,spawnTotal:1,reSpawnTick:5e3,reSpawnTickFixed:5e3,respawnLimit:1,install:!1,location:"mapDungeonD",pions:{monsterGoblinWarriorArcher:1,monsterGoblinWarriorSpear:1,monsterGoblinWarriorArmored:1}},{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnF.value,spawnTotal:1,reSpawnTick:5e3,reSpawnTickFixed:5e3,respawnLimit:1,install:!1,location:"mapDungeonD",pions:{monsterGoblinWarriorArcher:1,monsterGoblinWarriorSpear:1,monsterGoblinWarriorArmored:1}}],monsterGoblinWarriorMage:scope.components.initMage({name:"High Goblin Mage",level:23,aggresive:["elf","oval","human"],attackRange:500,attackRangeMax:515,attackRangeMin:458,attackMax:255,attackMin:239,defenseMax:155,defenseMin:103,magicDefenseMax:314,magicDefenseMin:252,maxHealth:15900,mp:232,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[25]}],audioDie:[]}),monstersElfArcherSpawn:[],monsterElfArcher:scope.components.initArhcer({name:"Elf Archer",level:22,aggresive:!1,posX:80,posY:70,weaponName:"arrow",weaponWidth:7,weaponHeight:44,attackRange:500,attackRangeMax:452,attackRangeMin:369,attackMax:205,attackMin:172,defenseMax:225,defenseMin:188,magicDefenseMax:243,magicDefenseMin:205,maxHealth:16500,mp:178,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[27],audio:["arrow-fly-2"]}],audioDie:[]}),monstersElfArmoredSpawn:[],monsterElfArmored:scope.components.initArmored({name:"Elf Armor",level:22,aggresive:!1,attackRange:70,attackRangeMax:192,attackRangeMin:152,attackMax:365,attackMin:333,defenseMax:288,defenseMin:238,magicDefenseMax:279,magicDefenseMin:231,maxHealth:18300,mp:175,hpBar:"medium",buffSkill:{},abilitySkill:{block:20},item:[],attackFrame:[{frame:[18],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersElfSpearSpawn:[],monsterElfSpear:scope.components.initSpear({name:"Elf Spear",level:22,aggresive:!1,attackRange:70,attackRangeMax:215,attackRangeMin:172,attackMax:238,attackMin:145,defenseMax:238,defenseMin:208,magicDefenseMax:249,magicDefenseMin:211,maxHealth:16300,mp:182,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[9,25],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersElfMageSpawn:[{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnB.value,spawnTotal:1,reSpawnTick:5e3,reSpawnTickFixed:5e3,install:!1,location:"mapDungeonD",pions:{monsterElfArmored:1,monsterElfArcher:1}},{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnE.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonD",pions:{monsterElfArmored:1,monsterElfSpear:1}}],monsterElfMage:scope.components.initMage({name:"Elf Mage",level:23,aggresive:!1,attackRange:500,attackRangeMax:515,attackRangeMin:458,attackMax:255,attackMin:239,defenseMax:155,defenseMin:103,magicDefenseMax:314,magicDefenseMin:252,maxHealth:15900,mp:275,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[15]}],audioDie:[]}),monstersHumanArcherSpawn:[],monsterHumanArcher:scope.components.initArhcer({name:"Hunter Archer",level:22,aggresive:!1,posX:80,posY:70,weaponName:"arrow",weaponWidth:7,weaponHeight:44,attackRange:500,attackRangeMax:452,attackRangeMin:369,attackMax:205,attackMin:172,defenseMax:225,defenseMin:188,magicDefenseMax:243,magicDefenseMin:205,maxHealth:15500,mp:185,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[27],audio:["arrow-fly-2"]}],audioDie:[]}),monstersHumanArmoredSpawn:[],monsterHumanArmored:scope.components.initArmored({name:"Hunter Armor",level:22,aggresive:!1,attackRange:70,attackRangeMax:192,attackRangeMin:152,attackMax:365,attackMin:333,defenseMax:288,defenseMin:238,magicDefenseMax:279,magicDefenseMin:231,maxHealth:18300,mp:163,hpBar:"medium",buffSkill:{},abilitySkill:{block:20},item:[],attackFrame:[{frame:[10,18],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersHumanMageSpawn:[{monsters:[],objectSpawn:scope.staticOriDngDPassSpawnF.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonD",pions:{monsterHumanArmored:1,monsterHumanArcher:1}}],monsterHumanMage:scope.components.initMage({name:"Hunter Mage",level:23,aggresive:!1,attackRange:500,attackRangeMax:515,attackRangeMin:458,attackMax:255,attackMin:239,defenseMax:155,defenseMin:103,magicDefenseMax:314,magicDefenseMin:252,maxHealth:15900,mp:263,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[17]}],audioDie:[]}),monstersEarthElementalMageSpawn:[{monsters:[],objectSpawn:scope.staticOriMapDDngAPassSpawnA.value,spawnTotal:2,reSpawnTick:500,reSpawnTickFixed:500,respawnLimit:1,forceGravity:!0,install:!1,location:"mapDDungeonA"},{monsters:[],objectSpawn:scope.staticOriMapDDngAPassSpawnC.value,spawnTotal:2,reSpawnTick:500,reSpawnTickFixed:500,forceGravity:!0,respawnLimit:1,install:!1,location:"mapDDungeonA"}],monsterEarthElementalMage:scope.components.initMage({name:"Garnet Mage",level:24,aggresive:!0,attackRange:500,attackRangeMax:562,attackRangeMin:489,attackMax:295,attackMin:232,defenseMax:315,defenseMin:253,magicDefenseMax:358,magicDefenseMin:295,maxHealth:28500,mp:293,hpBar:"big",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[20]}],audioDie:[]}),monstersEarthElementalMageBSpawn:[{monsters:[],objectSpawn:scope.staticOriMapDDngAPassSpawnD.value,spawnTotal:2,reSpawnTick:500,reSpawnTickFixed:500,respawnLimit:1,forceGravity:!0,install:!1,location:"mapDDungeonA"},{monsters:[],objectSpawn:scope.staticOriMapDDngAPassSpawnE.value,spawnTotal:2,reSpawnTick:500,reSpawnTickFixed:500,respawnLimit:1,forceGravity:!0,install:!1,location:"mapDDungeonA"}],monsterEarthElementalMageB:scope.components.initMage({name:"Critine Mage",level:25,aggresive:!0,attackRange:500,attackRangeMax:575,attackRangeMin:499,attackMax:295,attackMin:232,defenseMax:325,defenseMin:263,magicDefenseMax:378,magicDefenseMin:315,maxHealth:30500,mp:307,hpBar:"big",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[20]}],audioDie:[]}),monstersWolfArcherSpawn:[],monsterWolfArcher:scope.components.initArhcer({name:"Wolf Archer",level:26,aggresive:!0,posX:80,posY:30,weaponName:"boom",weaponWidth:16,weaponHeight:20,angleSpeed:.3,attackRange:500,attackRangeMax:605,attackRangeMin:529,attackMax:305,attackMin:262,defenseMax:375,defenseMin:283,magicDefenseMax:408,magicDefenseMin:345,maxHealth:32500,mp:208,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[25],audio:["arrow-fly-2"]}],audioDie:[]}),monstersWolfSpearSpawn:[],monsterWolfSpear:scope.components.initSpear({name:"Wolf Spear",level:26,aggresive:!0,attackRange:100,attackRangeMax:311,attackRangeMin:277,attackMax:605,attackMin:529,defenseMax:382,defenseMin:298,magicDefenseMax:418,magicDefenseMin:365,maxHealth:33500,mp:218,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersWolfMageSpawn:[],monsterWolfMage:scope.components.initMage({name:"Wolf Mage",level:26,aggresive:!0,attackRange:500,attackRangeMax:598,attackRangeMin:521,attackMax:305,attackMin:262,defenseMax:375,defenseMin:283,magicDefenseMax:438,magicDefenseMin:375,maxHealth:32800,mp:358,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[29]}],audioDie:[]}),monstersWolfArmoredSpawn:[],monsterWolfArmored:scope.components.initArmored({name:"Wolf Armor",level:26,aggresive:!0,attackRange:70,attackRangeMax:275,attackRangeMin:222,attackMax:525,attackMin:453,defenseMax:412,defenseMin:333,magicDefenseMax:413,magicDefenseMin:353,maxHealth:35800,mp:232,hpBar:"medium",buffSkill:{},abilitySkill:{block:20},item:[],attackFrame:[{frame:[18],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersWolfHunterSpawn:[],monsterWolfHunter:scope.components.initSpear({name:"Wolf Hunter",level:26,aggresive:!0,attackRange:100,attackRangeMax:311,attackRangeMin:277,attackMax:565,attackMin:489,defenseMax:372,defenseMin:268,magicDefenseMax:388,magicDefenseMin:335,maxHealth:33500,mp:247,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersWolfHummerSpawn:[{monsters:[],objectSpawn:scope.staticOriDngHPassSpawnB.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapDungeonH",pions:{monsterWolfMage:1,monsterWolfSpear:1,monsterWolfArmored:1,monsterWolfArcher:1,monsterWolfHunter:1}}],monsterWolfHummer:scope.components.initSpear({name:"Wolf Hummer",level:26,aggresive:!0,attackRange:70,attackRangeMax:311,attackRangeMin:277,attackMax:645,attackMin:559,defenseMax:402,defenseMin:328,magicDefenseMax:438,magicDefenseMin:385,maxHealth:36900,mp:254,hpBar:"big",buffSkill:{skill:"lightningShock"},abilitySkill:{},item:[{itemName:"Lapis Fragment",spawn:{max:1,min:1},prob:85,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersBugTailWarriorSpawn:[{monsters:[],objectSpawn:scope.staticOriDngHPassSpawnD.value,spawnTotal:3,reSpawnTick:5e3,reSpawnTickFixed:5e3,install:!1,location:"mapDungeonH"}],monsterBugTailWarrior:scope.components.initSpear({name:"Nortus Green Tail",level:24,aggresive:!0,attackRange:100,attackRangeMax:271,attackRangeMin:217,attackMax:495,attackMin:439,defenseMax:342,defenseMin:268,magicDefenseMax:388,magicDefenseMin:325,maxHealth:28500,mp:177,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Nortus Green Tail Scale",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Nortus Tail Heart",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[27],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersBugTailWarriorRedSpawn:[{monsters:[],objectSpawn:scope.staticOriDngHPassSpawnD.value,spawnTotal:3,reSpawnTick:5e3,reSpawnTickFixed:5e3,install:!1,location:"mapDungeonH"}],monsterBugTailWarriorRed:scope.components.initSpear({name:"Nortus Red Tail",level:24,aggresive:!0,attackRange:100,attackRangeMax:271,attackRangeMin:217,attackMax:495,attackMin:439,defenseMax:342,defenseMin:268,magicDefenseMax:388,magicDefenseMin:325,maxHealth:28500,mp:179,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Nortus Red Tail Scale",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}},{itemName:"Nortus Tail Heart",spawn:{max:23,min:18},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[27],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersYetiAlphaSpawn:[{monsters:[],objectSpawn:scope.staticOriDngHPassSpawnE.value,spawnTotal:3,reSpawnTick:2500,reSpawnTickFixed:2500,install:!1,location:"mapDungeonH"}],monsterYetiAlpha:scope.components.initSpear({name:"Yeti Crasher",level:27,aggresive:!0,attackRange:100,attackRangeMax:341,attackRangeMin:307,attackMax:705,attackMin:624,defenseMax:449,defenseMin:361,magicDefenseMax:493,magicDefenseMin:427,maxHealth:41500,mp:231,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Tainted Gem",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersYetiSpawn:[{monsters:[],objectSpawn:scope.staticOriDngHPassSpawnF.value,spawnTotal:3,reSpawnTick:2500,reSpawnTickFixed:2500,install:!1,location:"mapDungeonH"}],monsterYeti:scope.components.initSpear({name:"Yeti Crabble",level:27,aggresive:!0,attackRange:100,attackRangeMax:331,attackRangeMin:297,attackMax:695,attackMin:619,defenseMax:432,defenseMin:358,magicDefenseMax:488,magicDefenseMin:415,maxHealth:39900,mp:227,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[{itemName:"Tainted Soul",spawn:{max:1,min:1},prob:70,texture:{name:"Ness Scale",width:74,height:68}}],attackFrame:[{frame:[20],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersBeastElementalArmoredSpawn:[{monsters:[],objectSpawn:scope.staticOriDngEPassSpawnB.value,spawnTotal:2,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:1,install:!1,location:"mapDungeonE",pions:{monsterBeastElementalSpear:1}},{monsters:[],objectSpawn:scope.staticOriDngEPassSpawnC.value,spawnTotal:2,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:1,install:!1,location:"mapDungeonE",pions:{monsterBeastElementalSpear:1}},{monsters:[],objectSpawn:scope.staticOriDngEPassSpawnD.value,spawnTotal:2,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:1,install:!1,location:"mapDungeonE",pions:{monsterBeastElementalSpear:1}},{monsters:[],objectSpawn:scope.staticOriDngEPassSpawnE.value,spawnTotal:2,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:1,install:!1,location:"mapDungeonE",pions:{monsterBeastElementalSpear:1}},{monsters:[],objectSpawn:scope.staticOriDngEPassSpawnF.value,spawnTotal:2,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:1,install:!1,location:"mapDungeonE",pions:{monsterBeastElementalSpear:1}}],monsterBeastElementalArmored:scope.components.initArmored({name:"Tibias Armor",level:28,aggresive:!0,attackRange:100,attackRangeMax:311,attackRangeMin:257,attackMax:655,attackMin:579,defenseMax:532,defenseMin:460,magicDefenseMax:548,magicDefenseMin:475,maxHealth:49e3,mp:273,hpBar:"big",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[18],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersBeastElementalSpearSpawn:[],monsterBeastElementalSpear:scope.components.initSpear({name:"Tibias Spear",level:28,aggresive:!0,attackRange:100,attackRangeMax:331,attackRangeMin:297,attackMax:695,attackMin:619,defenseMax:482,defenseMin:410,magicDefenseMax:523,magicDefenseMin:445,maxHealth:44e3,mp:259,hpBar:"big",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[21],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersHumanRoyalSpearSpawn:[],monsterHumanRoyalSpear:scope.components.initSpear({name:"Royal Army Spear",level:28,aggresive:!0,attackRange:100,attackRangeMax:331,attackRangeMin:297,attackMax:695,attackMin:619,defenseMax:482,defenseMin:410,magicDefenseMax:523,magicDefenseMin:445,maxHealth:38e3,mp:261,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[17],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersHumanRoyalArmoredSpawn:[{monsters:[],objectSpawn:scope.staticOriDngFPassSpawnB.value,spawnTotal:1,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:2,install:!1,location:"mapDungeonF",pions:{monsterHumanRoyalSpear:1,monsterHumanRoyalArcher:1}},{monsters:[],objectSpawn:scope.staticOriDngFPassSpawnC.value,spawnTotal:1,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:2,install:!1,location:"mapDungeonF",pions:{monsterHumanRoyalSpear:1,monsterHumanRoyalArcher:1}},{monsters:[],objectSpawn:scope.staticOriDngFPassSpawnD.value,spawnTotal:1,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:2,install:!1,location:"mapDungeonF",pions:{monsterHumanRoyalSpear:1,monsterHumanRoyalArcher:1}},{monsters:[],objectSpawn:scope.staticOriDngFPassSpawnE.value,spawnTotal:1,reSpawnTick:2500,reSpawnTickFixed:2500,respawnLimit:2,install:!1,location:"mapDungeonF",pions:{monsterHumanRoyalSpear:1,monsterHumanRoyalArcher:1}}],monsterHumanRoyalArmored:scope.components.initArmored({name:"Royal Army Armor",level:28,aggresive:!0,attackRange:100,attackRangeMax:311,attackRangeMin:257,attackMax:635,attackMin:559,defenseMax:532,defenseMin:460,magicDefenseMax:548,magicDefenseMin:475,maxHealth:42e3,mp:231,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[17],audio:["swing","swing2","swing3"]}],audioDie:[]}),monstersHumanRoyalArcherSpawn:[],monsterHumanRoyalArcher:scope.components.initArhcer({name:"Royal Army Arhcer",level:28,aggresive:!0,posX:80,posY:70,weaponName:"arrowC",weaponWidth:9,weaponHeight:53,attackRange:500,attackRangeMax:685,attackRangeMin:629,attackMax:322,attackMin:239,defenseMax:462,defenseMin:490,magicDefenseMax:517,magicDefenseMin:445,maxHealth:37900,mp:252,hpBar:"medium",buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[23],audio:["arrow-fly-2"]}],audioDie:[]}),monstersGolemSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:2,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"}],monsterGolem:function(location,objSpawn){this.remove=!1,this.boss="",this.location=location,this.objSpawn=objSpawn,this.parentObject="",this.character=scope.oval.value,this.attacker="",this.object="",this.label="",this.install=!1,this.moveSpeed=1,this.moveState=50,this.moveIdle=15,this.rand=0,this.randState=0,this.behave="walk",this.uniqueBehave="",this.behaveRandom=10,this.behaveState=!0,this.teleportDelay=200,this.uniqueBehaveTick=0,this.tick=0,this.attackState=200,this.attackTick=30,this.attackDelay=0,this.attackRangeX=300,this.attackRangeY=-100,this.isTranslate=!0,this.turnState=400,this.turn="right",this.maxHealth=3500,this.health=3500,this.hitNumber=[],this.monsterParameters={attackMax:155,attackMin:80,defenseMax:35,defenseMin:22,buffSkill:0,maxHealth:3500,attackType:"melee",object:""},this.statInitial=function(){var stat=this.stat("medium");if(stat)with(stat)this.behave="attack"},this.addSpeed=function(){return"attack"===this.behave?2:1},this.moveLeft=function(){this.moveSpeed=-Math.abs(this.addSpeed()),scope.monsterGolemState.value.set(this.label,"textureNeedChange|"+scope.path+"/golem-left.png")},this.moveRight=function(){this.moveSpeed=Math.abs(this.addSpeed()),scope.monsterGolemState.value.set(this.label,"textureNeedChange|"+scope.path+"/golem-right.png")},this.update=function(t,e,a,i,s,n){if(!this.install){this.x=e,this.y=a,this.object=i,this.label=i.label,this.rand=s,this.items=n,this.parentObject=t,this.monsterParameters.object=i,this.attacker=this.character.label,scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.Body.setPosition(i,{x:e,y:a}),/dungeon/i.test(this.location)&&(this.object.isStatic=!0),scope.monsterGolemState.value.set(this.label,"idle"),scope.extend(this,new scope.components.monster,!0);var r={};r[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,r),this.install=!0}if(this.hitNumber.length)for(var o=0;o<this.hitNumber.length;o++)this.hitNumber[o].update(scope.context,this.object)&&this.hitNumber.splice(o,1);if(this.statInitial(),this.randState>this.rand){this.tick++,this.turnState--;var l=this.character.position,c=this.object.position,h=(e=l.x-c.x,(a=l.y-c.y)>this.attackRangeY&&a<-this.attackRangeY&&Math.abs(e)<this.attackRangeX);if(this.tick>this.moveState+this.moveIdle&&this.behaveState&&(this.tick=0,this.behaveRandom--,this.behaveRandom<0)){var p=scope.random(2,0);0===p?(this.behave="walk",scope.monsterGolemState.value.set(this.label,"walk")):1===p?(this.behave="idle",scope.monsterGolemState.value.set(this.label,"idle")):(this.uniqueBehave="teleport",scope.monsterGolemState.value.set(this.label,"disappear")),this.behaveRandom=scope.random(15,10),this.turnState=scope.random(600,200)}if("teleport"===this.uniqueBehave){this.uniqueBehaveTick++;var d,g="attack"===this.behave?"attack":scope.random(1,0)?"idle":"walk";if(56===this.uniqueBehaveTick){var m=this.objSpawn.position.x;if("attack"===g&&Math.abs(e)>100)d=l.x+scope.random(100,-100);else{var u=m+1e3,f=m-1e3;(d=c.x+scope.random(600,-600))<u&&d>f||(d>u?d=u-scope.random(500,200):d<f&&(d=f+scope.random(500,200)))}scope.Body.setPosition(this.object,{x:d,y:c.y}),scope.monsterGolemState.value.set(this.label,"appear")}else this.uniqueBehaveTick>=146&&(this.behave=g,this.uniqueBehave="",scope.monsterGolemState.value.set(this.label,g),this.uniqueBehaveTick=0,this.attackTick=30)}if(h&&(this.behave="attack"),"walk"===this.behave)this.turnState<0&&("left"===this.turn?this.moveLeft():"right"===this.turn&&this.moveRight(),this.turn="left"===this.turn?"right":"left",this.turnState=scope.random(600,200),this.moveState=50,this.attackState=!0,this.behaveState=!0,this.object.attacker=!1),scope.Body.translate(this.object,{x:this.moveSpeed,y:0});else if("attack"===this.behave){e>0?("right"!==this.turn||this.behaveState)&&(this.turn="right",this.moveRight()):("left"!==this.turn||this.behaveState)&&(this.turn="left",this.moveLeft());var v=scope.monsterGolemState.value.get(this.label);if(Math.abs(e)<100&&h)this.attackDelay<0?(this.uniqueBehaveTick||/disappear|appear|textureNeedChange|attack/i.test(v)||scope.monsterGolemState.value.set(this.label,"attack"),this.attackTick--,this.attackTick<0&&!this.uniqueBehaveTick&&(this.parentObject.characterDamagePool(this.attacker,this.monsterParameters),this.attackTick=30,this.attackDelay=30)):(!/disappear|appear|textureNeedChange|idle/i.test(v)&&scope.monsterGolemState.value.set(this.label,"idle"),this.attackDelay--);else if(!/disappear|appear|textureNeedChange|walk/i.test(v)&&scope.monsterGolemState.value.set(this.label,"walk"),scope.Body.translate(this.object,{x:this.moveSpeed,y:0}),this.teleportDelay--,this.teleportDelay<0)scope.random(2,0)||(this.uniqueBehave="teleport",scope.monsterGolemState.value.set(this.label,"disappear")),this.teleportDelay=200;this.turnState<0&&!h&&(this.behave="walk"),this.behaveState=!1}}else this.randState++}},monstersSlimeSpawn:[{monsters:[],objectSpawn:scope.staticOriMBSpawnA.value,spawnTotal:4,reSpawnTick:7200,reSpawnTickFixed:7200,install:!1,location:"mapB"}],monsterSlime:function(location){this.remove=!1,this.boss="",this.location=location,this.parentObject="",this.character=scope.oval.value,this.object="",this.label="",this.install=!1,this.behave="move",this.moveSpeed=2,this.moveState=50,this.moveIdle=15,this.rand=0,this.randState=0,this.behaveRandom=10,this.tick=0,this.attackState=200,this.turnState=400,this.turn="right",this.maxHealth=500,this.health=500,this.hitNumber=[],this.monsterParameters={attackMax:35,attackMin:20,defenseMax:5,defenseMin:2,buffSkill:0,maxHealth:500,attackType:"",object:""},this.statInitial=function(){var stat=this.stat("small");if(stat)with(stat)this.behave="attack",scope.monsterSlimeState.value.set(this.label,"attack")},this.moveLeft=function(){this.moveSpeed=-Math.abs(this.moveSpeed),scope.monsterSlimeState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-slime-left.png")},this.moveRight=function(){this.moveSpeed=Math.abs(this.moveSpeed),scope.monsterSlimeState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-slime-right.png")},this.update=function(t,e,a,i,s,n){if(!this.install){this.x=e,this.y=a,this.object=i,this.label=i.label,this.rand=s,this.items=n,this.parentObject=t,this.monsterParameters.object=i,scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.Body.setPosition(i,{x:e,y:a}),/dungeon/i.test(this.location)&&(this.object.isStatic=!0),scope.extend(this,new scope.components.monster,!0);var r={};r[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,r),this.install=!0}if(this.hitNumber.length)for(var o=0;o<this.hitNumber.length;o++)this.hitNumber[o].update(scope.context,this.object)&&this.hitNumber.splice(o,1);return this.statInitial(),this.randState>this.rand?(0===this.tick&&scope.monsterSlimeState.value.set(this.label,"idle"),this.tick++,this.turnState--,this.tick>this.moveState&&this.health?(this.tick>this.moveState+this.moveIdle&&(this.tick=0,scope.monsterSlimeState.value.set(this.label,"move"),this.behaveRandom--,this.behaveRandom<0&&"attack"!==this.behave&&(scope.random(1,0)?this.behave="move":this.behave="idle",this.behaveRandom=scope.random(15,10))),"move"===this.behave?(this.turnState<0&&("left"===this.turn?this.moveLeft():"right"===this.turn&&this.moveRight(),this.turn="left"===this.turn?"right":"left",this.turnState=500,this.moveState=50),scope.Body.translate(this.object,{x:this.moveSpeed,y:0})):"attack"===this.behave&&(scope.Body.translate(this.object,{x:this.moveSpeed,y:0}),this.moveState=30,this.attackState--,this.attackState<0&&(this.behave="move",this.attackState=200))):this.health||(setTimeout(function(){scope.World.remove(scope.engine.world,this.object),scope.addClass(scope.qs("monster-bar"),"hidden"),delete scope.staticAllMap.value[this.location].content[this.label],scope.monsterTarget.value="",scope.monsterParameters.value.remove(this.label),scope.monsterGetDamage.value.remove(this.label),scope.monsterSlimeState.value.remove(this.label),this.remove=!0}.bind(this),1e3),this.object.pass=!0,this.moveSpeed=0,scope.monsterSlimeState.value.set(this.label,"hit"))):this.randState++,this.remove}},monstersHornSpawn:[{monsters:[],objectSpawn:scope.staticOriMCPortalB.value,spawnTotal:1,reSpawnTick:7200,reSpawnTickFixed:7200,install:!1,location:"mapC",pions:{monsterBlack:5}}],monsterHorn:function(location){this.remove=!1,this.location=location,this.parentObject="",this.character=scope.oval.value,this.object="",this.label="",this.install=!1,this.behave="walk",this.moveSpeed=1,this.moveState=50,this.moveIdle=15,this.rand=0,this.randState=0,this.behaveRandom=10,this.tick=0,this.tickState=0,this.attacker="",this.attackTick=0,this.attackIdleState=!1,this.attackWalkState=!1,this.behaveState=!0,this.attackRangeX=300,this.attackDelay=0,this.attackRangeY=-100,this.turnState=400,this.turn="left",this.maxHealth=1500,this.health=1500,this.hitNumber=[],this.monsterParameters={attackMax:35,attackMin:20,defenseMax:5,defenseMin:2,buffSkill:{bindingRoot:scope.buffSkill.value.get("binding-root")},maxHealth:1500,attackType:"melee",object:""},this.statInitial=function(){var stat=this.stat("small");if(stat)with(stat)this.behave="attack"},this.moveLeft=function(){this.moveSpeed=-Math.abs(this.moveSpeed),scope.monsterHornState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-horn-left.png")},this.moveRight=function(){this.moveSpeed=Math.abs(this.moveSpeed),scope.monsterHornState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-horn-right.png")},this.update=function(t,e,a,i,s,n){if(!this.install){this.x=e,this.y=a,this.object=i,this.label=i.label,this.rand=s,this.items=n,this.parentObject=t,this.attacker=this.character.label,this.monsterParameters.object=i,scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.Body.setPosition(i,{x:e,y:a}),/dungeon/i.test(this.location)&&(this.object.isStatic=!0),scope.extend(this,new scope.components.monster,!0);var r={};r[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,r),scope.monsterHornState.value.set(this.label,"walk"),this.install=!0}if(this.hitNumber.length)for(var o=0;o<this.hitNumber.length;o++)this.hitNumber[o].update(scope.context,this.object)&&this.hitNumber.splice(o,1);if(this.statInitial(),this.randState>this.rand){this.tick++,this.turnState--;var l=this.character.position,c=this.object.position,h=(e=l.x-c.x,(a=l.y-c.y)>this.attackRangeY&&a<-this.attackRangeY&&Math.abs(e)<this.attackRangeX);this.tick>this.moveState+this.moveIdle&&this.behaveState&&(this.tick=0,this.behaveRandom--,this.behaveRandom<0&&(scope.random(1,0)?(this.behave="walk",scope.monsterHornState.value.set(this.label,"walk")):(this.behave="idle",scope.monsterHornState.value.set(this.label,"idleNormal"),this.turnState=scope.random(600,200)),this.behaveRandom=scope.random(15,10))),"walk"===this.behave?(this.turnState<0&&("left"===this.turn?this.moveLeft():"right"===this.turn&&this.moveRight(),this.turn="left"===this.turn?"right":"left",this.turnState=scope.random(600,200),this.moveState=50,this.attackState=!0,this.behaveState=!0,this.object.attacker=!1),scope.Body.translate(this.object,{x:this.moveSpeed,y:0})):"attack"===this.behave&&(e>0?("right"!==this.turn||this.behaveState)&&(this.turn="right",this.moveRight()):("left"!==this.turn||this.behaveState)&&(this.turn="left",this.moveLeft()),e<250&&e>-250?this.attackIdleState&&(scope.monsterHornState.value.set(this.label,"idle"),this.attackIdleState=!1,this.attackWalkState=!0):(scope.Body.translate(this.object,{x:this.moveSpeed,y:0}),this.attackWalkState&&(scope.monsterHornState.value.set(this.label,"walk"),this.attackWalkState=!1),this.attackIdleState=!0),this.attackDelay--,this.attackDelay<0&&h&&(this.parentObject.characterDamagePool(this.attacker,this.monsterParameters),this.attackDelay=100),this.behaveState=!1,this.object.attacker=this.attacker,this.turnState<0&&(this.behave="walk")),h&&(this.behave="attack"),this.health||(setTimeout(function(){scope.World.remove(scope.engine.world,this.object),scope.addClass(scope.qs("monster-bar"),"hidden"),delete scope.staticAllMap.value[this.location].content[this.label],scope.monsterTarget.value="",scope.monsterParameters.value.remove(this.label),scope.monsterGetDamage.value.remove(this.label),scope.monsterHornState.value.remove(this.label),this.items(this.parentObject,this.object)}.bind(this),1e3),this.remove=!0,this.object.attacker="die",scope.monsterHornState.value.set(this.label,"hit"))}else this.randState++;return this.remove}},monstersBlackSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:500,reSpawnTickFixed:500,install:!1,location:"mapA"},{monsters:[],objectSpawn:scope.staticSpawnPhaseOneB.value,spawnTotal:2,reSpawnTick:7200,reSpawnTickFixed:7200,install:!1,location:"mapA"},{monsters:[],objectSpawn:scope.staticSpawnPhaseOneF.value,spawnTotal:3,reSpawnTick:7200,reSpawnTickFixed:7200,install:!1,location:"mapA"},{monsters:[],objectSpawn:scope.staticOriMBSpawnA.value,spawnTotal:1,reSpawnTick:7200,reSpawnTickFixed:7200,install:!1,location:"mapB"}],interval:5,monsterBlack:function(location){this.remove=!1,this.boss="",this.location=location,this.parentObject="",this.character=scope.oval.value,this.object="",this.label="",this.install=!1,this.x=0,this.y=0,this.moveSpeed=2,this.jumpSpeed=-8.5,this.jumpState=30,this.jumpIdle=15,this.behave="idle",this.behaveState=!0,this.tickIdle=300,this.attackRangeX=200,this.attackRangeY=-100,this.attacker=scope.oval.value.label,this.attackDelay=20,this.turn="left",this.turnState=500,this.tickState=0,this.tick=0,this.rand=0,this.randState=0,this.items="",this.attackTick=0,this.maxHealth=500,this.health=500,this.hitNumber=[],this.monsterParameters={attackMax:35,attackMin:20,defenseMax:0,defenseMin:0,buffSkill:0,maxHealth:500,attackType:"",object:""},this.moveLeft=function(){this.moveSpeed=-Math.abs(this.moveSpeed),scope.monsterBlackState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-black-left.png")},this.moveRight=function(){this.moveSpeed=Math.abs(this.moveSpeed),scope.monsterBlackState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-black-right.png")},this.statInitial=function(){var stat=this.stat("small");if(stat)with(stat)this.behave="attack"},this.bossNeedHelp=function(){this.boss&&this.boss.attacker&&("die"===this.boss.attacker?this.boss="":(this.attacker=this.boss.attacker,this.behave="attack"))},this.update=function(t,e,a,i,s,n,r){if(!this.install){this.x=e,this.y=a,this.object=i,this.label=i.label,this.rand=s,this.items=n,this.parentObject=t,this.monsterParameters.object=i,this.boss=!!r&&r||"",scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.Body.setPosition(i,{x:e,y:a}),/dungeon/i.test(this.location)&&(this.object.isStatic=!0),scope.extend(this,new scope.components.monster,!0);var o={};o[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,o),this.install=!0}if(this.hitNumber.length)for(var l=0;l<this.hitNumber.length;l++)this.hitNumber[l].update(scope.context,this.object)&&this.hitNumber.splice(l,1);if(this.statInitial(),this.bossNeedHelp(),this.randState>this.rand){if(this.tick+=1,this.tickState+=1,this.attackDelay--,this.tick>this.jumpState){this.attackAllowed=!1;var c=this.character.position,h=this.object.position,p=(e=c.x-h.x,a=c.y-h.y,!!this.boss&&this.boss.position.x-h.x||0);this.attackTick+=1,this.tick>this.jumpState+this.jumpIdle&&(this.tick=0,scope.monsterBlackState.value.set(this.label,"move")),"idle"===this.behave?this.boss&&Math.abs(p)>600&&this.tickState>this.turnState?(p>0?this.moveRight():this.moveLeft(),this.turn="left"===this.turn?"right":"left",this.tickState=0,this.turnState=scope.random(600,200),this.jumpIdle=15):this.tickState>this.turnState&&("left"===this.turn?this.moveLeft():"right"===this.turn&&this.moveRight(),this.tickState=0,this.turnState=scope.random(600,200),this.jumpIdle=15,this.turn="left"===this.turn?"right":"left"):"attack"===this.behave&&this.attackTick>30&&(e>0?("right"!==this.turn||this.behaveState)&&(this.turn="right",this.moveRight()):("left"!==this.turn||this.behaveState)&&(this.turn="left",this.moveLeft()),this.behaveState=!1,this.jumpIdle=75,this.attackTick=0);var d=scope.monsterBlackState.value.get(this.label);/turn/i.test(d)?("left"===this.turn?(this.moveRight(),scope.Body.translate(this.object,{x:-4,y:0})):"right"===this.turn&&(this.moveLeft(),scope.Body.translate(this.object,{x:4,y:0})),this.turn="left"===this.turn?"right":"left",this.tickState=0,this.jumpIdle=15):(this.health?"hit"===d&&this.attackDelay<0&&(this.monsterParameters.attackType="melee",this.parentObject.characterDamagePool(this.attacker,this.monsterParameters),scope.monsterBlackState.value.set(this.label,"move"),this.attackDelay=20):(setTimeout(function(){scope.World.remove(scope.engine.world,this.object),scope.addClass(scope.qs("monster-bar"),"hidden"),delete scope.staticAllMap.value[this.location].content[this.label],scope.monsterTarget.value="",scope.monsterParameters.value.remove(this.label),scope.monsterGetDamage.value.remove(this.label),scope.monsterBlackState.value.remove(this.label),this.items(this.parentObject,this.object)}.bind(this),1e3),this.moveSpeed=0,this.jumpSpeed=0,this.remove=!0,this.object.pass=!0,scope.monsterBlackState.value.set(this.label,"hit")),a>this.attackRangeY&&a<-this.attackRangeY&&Math.abs(e)<this.attackRangeX?(this.behave="attack",this.tickIdle=200):(this.tickIdle--,this.tickIdle<0&&"idle"!==this.behave&&(this.behave="idle",this.behaveState=!0,this.tickIdle=200)),scope.Body.translate(this.object,{x:this.moveSpeed,y:this.jumpSpeed}))}}else this.randState++;return this.remove}},monstersYellowSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneG.value,spawnTotal:1,reSpawnTick:7200,reSpawnTickFixed:7200,interval:0,install:!1,location:"mapA"}],monsterYellow:function(location){this.install=!1,this.remove=!1,this.boss="",this.location=location,this.parentObject="",this.character=scope.oval.value,this.object="",this.label="",this.x=0,this.y=0,this.moveSpeed=2,this.jumpSpeed=-8.5,this.jumpState=30,this.jumpIdle=15,this.behave="idle",this.behaveState=!0,this.tickIdle=300,this.rocket="",this.rocketRangeX=scope.browserWidthUpdate/4,this.rocketRangeY=-100,this.attackRangeX=200,this.attackRangeY=-100,this.turn="left",this.turnState=500,this.tickState=0,this.tick=0,this.rand=0,this.randState=0,this.items="",this.attackTick=0,this.attackDelay=20,this.attacker=scope.oval.value.label,this.status="",this.maxHealth=500,this.health=500,this.hitNumber=[],this.monsterParameters={attackRangeMax:70,attackRangeMin:50,attackMax:35,attackMin:20,defenseMax:5,defenseMin:2,buffSkill:0,maxHealth:500,attackType:"",object:""},this.moveLeft=function(){this.moveSpeed=-Math.abs(this.moveSpeed),this.rocketLaunchInit.state?scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-left.png"):scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-rocket-left.png")},this.moveRight=function(){this.moveSpeed=Math.abs(this.moveSpeed),this.rocketLaunchInit.state?scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-right.png"):scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-rocket-right.png")},this.rocketLaunch=function(t,e,a,i,s){this.location=s,this.rocketEffectFn="",this.explosionFn="",this.remove=!1,this.install=!1,this.rocket=t,this.monster=e,this.attacker=scope.oval.value.label,this.attackState=!0,this.monsterParameters=i,this.target=scope.oval.value,this.characterDamagePool=function(t,e){var a=scope.characterGetDamage.value.get(t);a.push(e),scope.characterGetDamage.value.set(t,a)},this.tick=0,this.life=400,this.xLeft=!1,this.xRight=!1,this.yTop=!1,this.yBottom=!1,this.update=function(t){if(!this.remove)if(this.install){var e,a=this.target.position,i=this.rocket.position,s=i.x,n=i.y,r=this.rocket.label,o=s-a.x,l=n-a.y;o<-25?(scope.Body.translate(this.rocket,{x:3,y:0}),this.xRight=!0):this.xRight=!1,l>25?(scope.Body.translate(this.rocket,{x:0,y:-3}),this.yTop=!0):this.yTop=!1,o>25?(scope.Body.translate(this.rocket,{x:-3,y:0}),this.xLeft=!0):this.xLeft=!1,l<-25?(scope.Body.translate(this.rocket,{x:0,y:3}),this.yBottom=!0):this.yBottom=!1,"stop"===scope.rocketState.value.get(r)&&(scope.World.remove(scope.engine.world,this.rocket),this.rocketEffectFn.update(scope.context,this.rocket,e,"stop")),!this.xLeft||this.xRight||this.yTop||this.yBottom?this.xLeft||!this.xRight||this.yTop||this.yBottom?this.xLeft||this.xRight||!this.yTop||this.yBottom?this.xLeft||this.xRight||this.yTop||!this.yBottom?this.xLeft&&!this.xRight&&this.yTop&&!this.yBottom?(e="leftTop",scope.rocketState.value.set(r,e)):!this.xLeft&&this.xRight&&this.yTop&&!this.yBottom?(e="rightTop",scope.rocketState.value.set(r,e)):this.xLeft&&!this.xRight&&!this.yTop&&this.yBottom?(e="leftBottom",scope.rocketState.value.set(r,e)):!this.xLeft&&this.xRight&&!this.yTop&&this.yBottom&&(e="rightBottom",scope.rocketState.value.set(r,e)):(e="bottom",scope.rocketState.value.set(r,e)):(e="top",scope.rocketState.value.set(r,e)):(e="right",scope.rocketState.value.set(r,e)):(e="left",scope.rocketState.value.set(r,e)),Math.abs(o)<40&&Math.abs(l)<40&&(t="stop",this.attackState&&(this.monsterParameters.attackType="long-range",this.characterDamagePool(this.attacker,this.monsterParameters),this.attackState=!1)),this.rocketEffectFn.update(scope.context,this.rocket,e,t)&&(scope.World.remove(scope.engine.world,this.rocket),this.explosionFn.update(scope.context,this.rocket)&&(delete scope.staticAllMap.value[this.location].content[this.rocket.label],this.remove=!0)),this.life--,this.life||(scope.World.remove(scope.engine.world,this.rocket),this.rocketEffectFn.update(scope.context,this.rocket,e,"stop"))}else{scope.Body.setPosition(this.rocket,{x:this.monster.position.x,y:this.monster.position.y}),scope.World.add(scope.engine.world,this.rocket),this.rocketEffectFn=new scope.rocketEffect,this.explosionFn=new scope.explosionEffect;var c={};c[this.rocket.label]=this.rocket,scope.extend(scope.staticAllMap.value[this.location].content,c),this.install=!0}}},this.rocketLaunchInit={fn:"",launch:!1},this.statInitial=function(){var stat=this.stat("small");if(stat)with(stat)this.rocketLaunchInit.state||(this.behave="launchRocket",this.rocketLaunchInit.state=!0),this.behave="attack"},this.changeTexture=!0,this.bossNeedHelp=function(){this.boss&&this.boss.attacker&&("die"===this.boss.attacker?this.boss="":(this.attacker=this.boss.attacker,/setRocket|launchRocket/i.test(this.behave)?this.changeTexture&&("left"===this.turn?scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-left.png"):scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-right.png"),this.changeTexture=!1):this.behave="attack"))},this.update=function(t,e,a,i,s,n,r){if(!this.install){this.x=e,this.y=a,this.object=i,this.label=i.label,this.rand=s,this.rocket=new scope.staticRocket.value,this.items=n,this.parentObject=t,this.monsterParameters.object=i,this.boss=!!r&&r||"",this.rocketLaunchInit.fn=new this.rocketLaunch(this.rocket,this.object,this.attacker,this.monsterParameters,this.location),scope.Body.setPosition(i,{x:e,y:a}),scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.extend(this,new scope.components.monster,!0);var o={};o[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,o),this.install=!0}if(this.hitNumber.length)for(var l=0;l<this.hitNumber.length;l++)this.hitNumber[l].update(scope.context,this.object)&&this.hitNumber.splice(l,1);if(this.statInitial(),this.bossNeedHelp(),this.rocketLaunchInit.state&&this.rocketLaunchInit.fn.update(this.status),this.randState>this.rand){if(this.tick+=1,this.tickState+=1,this.attackDelay--,this.tick>this.jumpState){this.attackAllowed=!1;var c=this.character.position,h=this.object.position,p=(e=c.x-h.x,a=c.y-h.y,!!this.boss&&this.boss.position.x-h.x||0);this.attackTick+=1,this.tick>this.jumpState+this.jumpIdle&&(this.tick=0,"setRocket"===this.behave?("left"===this.turn?scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-left.png"):scope.monsterYellowState.value.set(this.label,"textureNeedChange|"+scope.path+"/monster-yellow-right.png"),this.behave="launchRocket",this.rocketLaunchInit.state=!0):scope.monsterYellowState.value.set(this.label,"move")),"idle"===this.behave?this.boss&&Math.abs(p)>600&&this.tickState>this.turnState?(p>0?this.moveRight():this.moveLeft(),this.turn="left"===this.turn?"right":"left",this.tickState=0,this.turnState=scope.random(600,200),this.jumpIdle=15):this.tickState>this.turnState&&("left"===this.turn?this.moveLeft():"right"===this.turn&&this.moveRight(),this.turn="left"===this.turn?"right":"left",this.tickState=0,this.turnState=scope.random(600,200),this.jumpIdle=15):"attack"===this.behave&&this.attackTick>30?(e>0?("right"!==this.turn||this.behaveState)&&(this.turn="right",this.moveRight()):("left"!==this.turn||this.behaveState)&&(this.turn="left",this.moveLeft()),this.behaveState=!1,this.jumpIdle=75,this.attackTick=0):"setRocket"===this.behave&&(e>0?("right"!==this.turn||this.behaveState)&&(this.turn="right",this.moveRight()):("left"!==this.turn||this.behaveState)&&(this.turn="left",this.moveLeft()),this.behaveState=!1,this.attackTick=0),"stop"!==this.status&&(this.status=scope.monsterYellowState.value.get(this.label),/turn/i.test(this.status)?("left"===this.turn?(this.moveRight(),scope.Body.translate(this.object,{x:-4,y:0})):"right"===this.turn&&(this.moveLeft(),scope.Body.translate(this.object,{x:4,y:0})),this.turn="left"===this.turn?"right":"left",this.tickState=0,this.jumpIdle=15):(this.health?"hit"===this.status&&this.attackDelay<0&&(this.monsterParameters.attackType="melee",this.parentObject.characterDamagePool(this.attacker,this.monsterParameters),scope.monsterYellowState.value.set(this.label,"move"),this.attackDelay=20):(this.status="stop",this.rocketLaunchInit.fn.update(this.status),setTimeout(function(){scope.World.remove(scope.engine.world,[this.object,this.rocket]),this.moveSpeed=0,this.jumpSpeed=0,this.remove=!0,this.items(this.parentObject,this.object,2),scope.monsterParameters.value.remove(this.label),scope.monsterGetDamage.value.remove(this.label),scope.monsterYellowState.value.remove(this.label),scope.monsterTarget.value="",scope.addClass(scope.qs("monster-bar"),"hidden"),delete scope.staticAllMap.value[this.location].content[this.label]}.bind(this),1e3),scope.monsterYellowState.value.set(this.label,"hit"),this.object.pass=!0),this.rocketLaunchInit.state?a>this.attackRangeY&&a<-this.attackRangeY&&Math.abs(e)<this.attackRangeX?(this.behave="attack",this.tickIdle=200):(this.tickIdle--,this.tickIdle<0&&"idle"!==this.behave&&(this.behave="idle",this.behaveState=!0,this.tickIdle=200)):a>this.rocketRangeY&&a<-this.rocketRangeY&&Math.abs(e)<this.rocketRangeX?this.behave="setRocket":this.behave="idle","setRocket"===this.behave?scope.Body.translate(this.object,{x:0,y:this.jumpSpeed}):scope.Body.translate(this.object,{x:this.moveSpeed,y:this.jumpSpeed})))}}else this.randState++;return this.remove}},greenDragonSpawn:[{monsters:[],objectSpawn:scope.staticSpawnPhaseOneA.value,spawnTotal:1,reSpawnTick:7200,reSpawnTickFixed:7200,interval:-100,install:!1,location:"mapA"}],greenDragon:function(location){this.install=!1,this.location=location,this.remove=!1,this.parentObject="",this.character=scope.oval.value,this.object="",this.label="",this.x=0,this.y=0,this.moveSpeedX=-1,this.moveSpeedY=-1,this.behave="idle",this.idleTick=0,this.idleStatus="",this.behaveState=!0,this.attackState="set",this.attacker="",this.turn="left",this.turnState=700,this.idleState=0,this.tick=0,this.flyState=!0,this.rand=0,this.randState=0,this.items="",this.attackTick=0,this.status="",this.stageY=0,this.objectSpawn="",this.turnIsFalse=!1,this.moveState=!0,this.isUp=!1,this.moveLeft=function(){scope.greenDragonState.value.set(this.label,"textureNeedChange|"+scope.path+"/dragon-green-left.png")},this.moveAttackLeft=function(){scope.greenDragonState.value.set(this.label,"textureNeedChange|"+scope.path+"/dragon-green-attack-left.png")},this.moveRight=function(){scope.greenDragonState.value.set(this.label,"textureNeedChange|"+scope.path+"/dragon-green-right.png")},this.moveAttackRight=function(){scope.greenDragonState.value.set(this.label,"textureNeedChange|"+scope.path+"/dragon-green-attack-right.png")},this.fireBall=function(t,e,a,i){this.fireBallFn="",this.turn=e,this.attacker=scope.oval.value.label,this.monsterParameters=i,this.explosionFn="",this.remove=!1,this.install=!1,this.characterDamagePool=function(t,e){var a=scope.characterGetDamage.value.get(t);a.push(e),scope.characterGetDamage.value.set(t,a)},this.object=new scope.staticFireBall.value,this.character=scope.oval.value,this.monster=t,this.tick=0,this.life=150,this.attackAllowed=!0,this.moveObj="",this.update=function(){if(this.remove)return!0;if(this.install){var t=this.moveObj.update(),e=this.object.position,a=this.character.position,i=e.x,s=e.y,n=Math.abs(i-a.x),r=Math.abs(s-a.y),o=n<40&&r<40;this.fireBallFn.update(scope.context,this.object),this.object.position.x+=t.x,this.object.position.y+=t.y,o&&this.attackAllowed&&(this.monsterParameters.attackType="long-range",this.characterDamagePool(this.attacker,this.monsterParameters),this.attackAllowed=!1),!this.life||o?(scope.World.remove(scope.engine.world,this.object),this.fireBallFn.update(scope.context,this.object,"stop"),this.explosionFn.update(scope.context,this.object)&&(this.remove=!0),this.life=0):this.life--}else scope.Body.setPosition(this.object,{x:this.monster.position.x,y:this.monster.position.y}),scope.World.add(scope.engine.world,this.object),this.moveObj=new scope.moveVector2d(this.object,this.character),this.fireBallFn=new scope.fireBall,this.explosionFn=new scope.explosionEffect,"right"===this.turn?this.object.position.x+=30:this.object.position.x-=30,this.install=!0}},this.fireBallInit={fn:"",launch:!1},this.turnAttack=function(){this.attackTick++,this.attackTick>50&&("left"===this.turn?this.moveAttackLeft():this.moveAttackRight(),this.attackTick=0,this.fireBallInit.state||(this.fireBallInit.fn=new this.fireBall(this.object,this.turn,this.attacker,this.monsterParameters),this.fireBallInit.state=!0)),this.idleTick++,this.idleTick>300&&(this.behave="idle",this.idleStatus="back",this.idleTick=0)},this.maxHealth=5e3,this.health=5e3,this.hitNumber=[],this.monsterParameters={attackRangeMax:300,attackRangeMin:100,attackMax:0,attackMin:0,defenseMax:500,defenseMin:100,buffSkill:0,maxHealth:5e3,attackType:"",object:""},this.statInitial=function(){var stat=this.stat("medium");if(stat)with(stat)this.behave="attack"},this.update=function(t,e,a,i,s,n,r){if(!this.install){this.x=e,this.y=a,this.objectSpawn=i,this.object=s,this.monsterParameters.object=s,this.label=s.label,this.rand=n,this.items=r,this.parentObject=t,scope.Body.setPosition(s,{x:e,y:a}),scope.monsterParameters.value.set(this.label,this.monsterParameters),scope.extend(this,new scope.components.monster,!0);var o={};o[this.label]=this.object,scope.extend(scope.staticAllMap.value[this.location].content,o),this.install=!0}if(this.hitNumber.length)for(var l=0;l<this.hitNumber.length;l++)this.hitNumber[l].update(scope.context,this.object)&&this.hitNumber.splice(l,1);this.statInitial(),this.status=scope.greenDragonState.value.get(this.label);var c,h,p=this.character.position,d=this.object.position;e=p.x-d.x;(a=p.y-d.y)<-45&&"hit"===this.status&&"idle"===this.behave&&(scope.greenDragonState.value.set(this.label,"attack"),this.behave="attack"),this.fireBallInit.state&&this.fireBallInit.fn.update()&&(this.fireBallInit.fn="",this.fireBallInit.state=!1),"idle"===this.behave?(this.idleState++,(this.idleState>this.turnState||"back"===this.idleStatus)&&(h=this.objectSpawn.position.y-Math.round(d.y),"back"===this.idleStatus?(c=Math.round(this.objectSpawn.position.x)-Math.round(d.x),"left"===this.turn?(this.moveSpeedX=-1,c>5?this.moveRight():this.moveLeft()):(this.moveSpeedX=1,c<5?this.moveLeft():this.moveRight()),this.turnIsFalse=!1):("left"===this.turn?(this.turn="right",this.moveRight(),this.moveSpeedX=1):(this.turn="left",this.moveLeft(),this.moveSpeedX=-1),h<5&&(this.flyState=!0,this.stageY=0),this.idleState=0)),this.stageY<scope.stage&&this.flyState?this.moveSpeedY=-1:this.flyState&&(this.flyState=!1,this.stageY=0),this.stageY<scope.stage&!this.flyState?this.moveSpeedY=1:this.flyState||(this.flyState=!0,this.stageY=0),"back"===this.idleStatus?this.moveState?h>5&&c>5?scope.Body.translate(this.object,{x:Math.abs(this.moveSpeedX),y:.5}):h>5&&c<5?scope.Body.translate(this.object,{x:-Math.abs(this.moveSpeedX),y:.5}):(this.moveState=!1,this.stageY=0):c>5?scope.Body.translate(this.object,{x:Math.abs(this.moveSpeedX),y:this.moveSpeedY}):c<5?scope.Body.translate(this.object,{x:-Math.abs(this.moveSpeedX),y:this.moveSpeedY}):(this.idleStatus="",this.flyState=!0,this.moveState=!0,this.stageY=0):scope.Body.translate(this.object,{x:this.moveSpeedX,y:this.moveSpeedY}),this.stageY+=1):"attack"===this.behave&&("left"===this.turn&&e>0?(this.turn="right",this.moveRight(),this.moveSpeedX=-2):"right"===this.turn&&e<0?(this.turn="left",this.moveLeft(),this.moveSpeedX=2):"attack"===this.turn&&("left"===this.turn?this.moveLeft():this.moveRight()),Math.abs(Math.round(a)-Math.round(scope.stage))<5?Math.abs(e)<300?scope.Body.translate(this.object,{x:this.moveSpeedX,y:0}):this.turnAttack():Math.abs(e)>300?this.turnAttack():Math.abs(a)>scope.stage&&"setFire"===this.attackState?(scope.Body.translate(this.object,{x:this.moveSpeedX,y:2}),this.isUp&&("left"===this.turn?this.moveLeft():this.moveRight(),this.idleTick=0,this.isUp=!1)):Math.abs(a)<scope.stage&&"setFire"===this.attackState?(scope.Body.translate(this.object,{x:this.moveSpeedX,y:-3}),this.isUp||("left"===this.turn?this.moveLeft():this.moveRight(),this.idleTick=0,this.isUp=!0)):("set"===this.attackState||Math.abs(e)<200)&&(scope.Body.translate(this.object,{x:this.moveSpeedX,y:0}),this.attackState="setFire"))}},spawnMonster:function(t,e,a,i,s,n,r,o){for(var l=0;l<e.length;l++){var c=e[l];if(c.location===t)if(c.install)if(c.monsters.length)for(B=0;B<c.monsters.length;B++)c.monsters[B].play.update()&&c.monsters.splice(B,1);else c.reSpawnTick--,c.reSpawnTick<0&&(c.reSpawnTick=c.reSpawnTickFixed,c.currentRespawn?c.currentRespawn++:c.currentRespawn=1,(!c.respawnLimit||c.currentRespawn<c.respawnLimit)&&(c.install=!1));else{for(var h,p,d=c.objectSpawn.position.x,g=c.objectSpawn.position.y,m=(scope.browserWidthUpdate,Math.abs(a-d),Math.abs(i-g),function(e){for(var a=this.variablesMonsterSpawn[t],i=e.split("monster").join("").toLowerCase(),s={},n=0,r=a.length;n<r;n++){var o=a[n];if(i===o[1].toLowerCase())return s.additionalBoundsValue=o[2],s.additionalBoundsWidthValue=o[3],s.additionalBoundsHeightValue=o[4],s}}.bind(this)),u=0;u<c.spawnTotal;u++){if("monster-black"===s?(h=new this.monsterBlack(c.location,c.objectSpawn),p=scope.staticMonsterBlack.value()):"monster-yellow"===s?(h=new this.monsterYellow(c.location,c.objectSpawn),p=scope.staticMonsterYellow.value()):"monster-horn"===s?(h=new this.monsterHorn(c.location,c.objectSpawn),p=scope.staticMonsterHorn.value()):"monster-slime"===s?(h=new this.monsterSlime(c.location,c.objectSpawn),p=scope.staticMonsterSlime.value()):"green-dragon"===s?(h=new this.greenDragon(c.location,c.objectSpawn),p=scope.staticGreenDragon.value()):"monster-golem"===s?(h=new this.monsterGolem(c.location,c.objectSpawn),p=scope.staticMonsterGolem.value()):(h=new(this["monster"+scope.ucFirst(s)])({location:c.location,objSpawn:c.objectSpawn,pitboss:!!c.pions}),p=scope.staticGeneralMonster.value(s,n,r,o)),/dungeon/i.test(t)&&!c.forceGravity)var f=d+scope.random(250,-250),v=g+scope.random(250,-250);else{f=d+=scope.random(150,-150),v=g-100;c.forceGravity&&(p.forceGravity=!0,v=g)}c.monsters.push({play:h,object:p,x:f,y:v})}for(var b=c.monsters,S=0;S<c.spawnTotal;S++){var x=b[S].x,k=b[S].y,y=b[S].object;if(scope.World.add(scope.staticWorld.value,y),"green-dragon"===s)b[S].play.update(this,x,k,c.objectSpawn,y,this.interval+=10,this.items);else if(b[S].play.update(this,x,k,y,this.interval+=10,this.items),c.pions)for(var B in c.pions){var w=p;if(T=w.position.x,O=w.position.y,monsterConstructor=this[B],staticMonsterConstructor="monsterBlack"===B?scope.staticMonsterBlack.value:"monsterYellow"===B?scope.staticMonsterYellow.value:scope.staticGeneralMonster.value,pionsSpawnTotal=c.pions[B],temp=[],interval=5,M=s,"monster-horn"!==s){var M=B.split("monster").join("");M=M.charAt(0).toLowerCase()+M.slice(1)}for(var P=0;P<pionsSpawnTotal;P++){var A=new monsterConstructor({location:c.location,objSpawn:w,pitboss:!1}),D=m(B),j=staticMonsterConstructor(M,D.additionalBoundsValue,D.additionalBoundsWidthValue,D.additionalBoundsHeightValue);if(/dungeon/i.test(t))var T=d+scope.random(250,-250),O=g+scope.random(250,-250);else T=d+=scope.random(150,-150),O=g-100;temp.push({play:A,object:j,x:T+=scope.random(250,-250),y:O-100})}for(var C=temp,N=0;N<pionsSpawnTotal;N++){x=C[N].x,k=C[N].y,y=C[N].object;scope.World.add(scope.staticWorld.value,y),C[N].play.update(this,x,k,y,interval+=10,this.items,w),c.monsters.push(C[N])}temp.length=0}}c.install=!0}}},objSpawnMonster:"",variablesMonsterSpawn:{mapDungeonH:[["monstersWolfArcherSpawn","wolfArcher",75,20,50],["monstersWolfSpearSpawn","wolfSpear",75,0,-30],["monstersWolfMageSpawn","wolfMage",75,0,50],["monstersWolfArmoredSpawn","wolfArmored",75,0,50],["monstersWolfHunterSpawn","wolfHunter",75,20,30],["monstersWolfHummerSpawn","wolfHummer",95,0,-20],["monstersBugTailWarriorSpawn","bugTailWarrior",25,0,85],["monstersBugTailWarriorRedSpawn","bugTailWarriorRed",25,0,85],["monstersYetiAlphaSpawn","yetiAlpha",75,25,50],["monstersYetiSpawn","yeti",75,25,50]],mapDungeonG:[["monstersBoarSpawn","boar",0,0,120],["monstersBoarWhiteSpawn","boarWhite",0,0,120],["monstersFireElementalSpawn","fireElemental",45,0,75],["monstersBugSpawn","bug",-35,0,150],["monstersBugQueenSpawn","bugQueen",-15,0,130]],mapDungeonF:[["monstersHumanRoyalSpearSpawn","humanRoyalSpear",95,20,25],["monstersHumanRoyalArcherSpawn","humanRoyalArcher",95,26,25],["monstersHumanRoyalArmoredSpawn","humanRoyalArmored",95,0,0]],mapDungeonE:[["monstersBeastElementalArmoredSpawn","beastElementalArmored",75,0,30],["monstersBeastElementalSpearSpawn","beastElementalSpear",75,0,40]],mapDungeonD:[["monstersGoblinWarriorArcherSpawn","goblinWarriorArcher",55,0,45],["monstersGoblinWarriorSpearSpawn","goblinWarriorSpear",65,10,50],["monstersGoblinWarriorArmoredSpawn","goblinWarriorArmored",60,25,25],["monstersGoblinWarriorMageSpawn","goblinWarriorMage",65,0,55],["monstersElfArcherSpawn","elfArcher",75,25,35],["monstersElfArmoredSpawn","elfArmored",85,0,20],["monstersElfSpearSpawn","elfSpear",85,0,-25],["monstersElfMageSpawn","elfMage",85,25,45],["monstersHumanArcherSpawn","humanArcher",70,25,45],["monstersHumanArmoredSpawn","humanArmored",80,0,-10],["monstersHumanMageSpawn","humanMage",70,15,45]],mapDungeonC:[["monstersBugWarriorSpawn","bugWarrior",25,0,105],["monstersBugWarriorRedSpawn","bugWarriorRed",25,0,95],["monstersGoblinArcherSpawn","goblinArcher",30,20,85],["monstersGoblinSpearSpawn","goblinSpear",30,0,85]],mapDungeonB:[["monstersGoblinMageSpawn","goblinMage",50,0,65],["monstersGoblinArmoredSpawn","goblinArmored",30,10,85],["monstersGoblinArcherSpawn","goblinArcher",30,20,85],["monstersGoblinSpearSpawn","goblinSpear",30,0,85],["monstersLightElementalSpawn","lightElemental",45,0,75]],mapDungeonA:[["monstersHollowMageSpawn","hollowMage",55,20,65],["monstersHollowSpearSpawn","hollowSpear",25,20,95],["monstersHollowArmoredSpawn","hollowArmored",25,20,95],["monstersHollowArcherBSpawn","hollowArcherB",25,20,95],["monstersHollowArcherSpawn","hollowArcher",55,0,60]],mapDDungeonA:[["monstersEarthElementalMageSpawn","earthElementalMage",85,0,40],["monstersEarthElementalMageBSpawn","earthElementalMageB",85,0,45]],mapAADungeonB:[["monstersBoarJrSpawn","boarJr",-15,0,130],["monstersWhiteBoarJrSpawn","whiteBoarJr",-15,0,130]],mapAADungeonA:[["monstersMinatourArcherSpawn","minatourArcher",75,10,30],["monstersMinatourSpearSpawn","minatourSpear",75,0,0],["monstersMinatourArmoredSpawn","minatourArmored",85,0,15],["monstersMinatourMageSpawn","minatourMage",75,0,30]],mapA:[["monstersHumanArcherSpawn","humanArcher",70,25,45]]},monsterSpawnByMap:function(t,e,a){var i=this.variablesMonsterSpawn[t];if(i)for(var s=0,n=i.length;s<n;s++){var r=i[s];this.spawnMonster(t,this[r[0]],e,a,r[1],r[2],r[3],r[4])}},update:function(){var t=this.character.position.x,e=this.character.position.y;if(this.monsterSpawnByMap(scope.currentMap,t,e),this.itemTemp.length)for(var a=0;a<this.itemTemp.length;a++){var i=this.itemTemp[a];i.update(i.object,i.character)&&this.itemTemp.splice(a,1)}}};var spawn=_obj.variablesMonsterSpawn,companions=["sekletonArmored","sekletonArcher","mage-character"];for(var ii in spawn){for(var cnt={staticName:{}},jj=0,kk=spawn[ii];jj<kk.length;jj++){var temp={};temp.src=scope.path+"/"+kk[jj][1]+"-right.png",cnt.staticName[kk[jj][1]]=temp}for(var jj=0,kk=companions;jj<kk.length;jj++){var temp={};temp.src=scope.path+"/"+kk[jj]+"-right.png",cnt.staticName[kk[jj]]=temp}scope.extend(scope.staticAllMap.value[ii].content,cnt)}cnt=temp=0,_obj.objSpawnMonster=function(){var t=[];for(var e in _obj)/spawn/i.test(e)&&_obj[e]instanceof Array&&t.push(_obj[e]);return t}(),scope.extend(_obj,new scope.components.companions,!0),scope.extend(_obj,new scope.components.items,!0),scope.monsterControl=_obj},companions:function(){var t,e=this;(t={characterDamagePool:function(t,e,a,i){this.monsterDamagePool(t,e,a,i)},companions:[],monsterSekletonArmored:e.components.initArmored,monsterSekletonArcher:e.components.initArhcer,objSpawnMonster:"",create:function(t){var a=e.activeMap.value;if(t.summoner.pions)for(var i=t.summoner.pions,s=0,n=this.companions;s<n.length;s++)n[s].play.spell===t.spell&&this.deletePion(i,n[s]);for(var r in t.pions){var o,l=t.summoner.position.x,c=t.summoner.position.y,h=t.summoner,p=0,d=0;"sekletonArcher"===(o=(o=r.split("monster").join("")).charAt(0).toLowerCase()+o.slice(1))?(p=60,d=60,additionalBoundsWidthValue=0):"sekletonArmored"===o&&(p=60,d=30,additionalBoundsWidthValue=0);for(var g=0;g<t.pions[r].value;g++){var m=new(this[r](t.pions[r].parameters[g]))({location:a,spell:t.spell,objSpawn:h,itemLabel:t.pions[r].itemLabel[g],pitboss:!1}),u=e.staticGeneralMonster.value(o,p,additionalBoundsWidthValue,d);if(/mapAADungeonA|mapDDungeonA/i.test(e.currentMap)){u.forceGravity=t.summoner.forceGravity;var f=l+e.random(50,-50),v=c}else if(/dungeon/i.test(a))f=l+e.random(250,-250),v=c+e.random(250,-250);else f=l+=e.random(150,-150),v=c-100;e.World.add(e.staticWorld.value,u),m.update(this,f,v,u,e.random(20,5),"",h),t.monsters.push({duration:t.durationTick,summoner:t.summoner,play:m,object:u,x:f,y:v,interval:e.random(20,5)})}for(var b=0;b<t.monsters.length;b++)this.companions.push(t.monsters[b]);t.monsters.length=0}},deletePionBySpell:function(t){for(var e=0,a=this.companions;e<a.length;e++)a[e].play.spell===t&&(a[e].play.object.deleted=!0,a[e].play.maxHealth=0,a[e].play.health=0,a[e].play.monsterParameters.maxHealth=0,a.splice(a,1))},deletePion:function(t,e){for(var a=0,i=t;a<i.length;a++)if(i[a].label===e.play.object.label){e.play.object.deleted=!0,e.play.maxHealth=0,e.play.health=0,e.play.monsterParameters.maxHealth=0,t.splice(i,1);break}},update:function(){if(this.companions.length)for(var t=0;t<this.companions.length;t++){var e=this.companions[t];if(e.duration--,e.duration<0&&(e.play.object.deleted=!0,e.play.maxHealth=0,e.play.health=0,e.play.monsterParameters.maxHealth=0),e.play.update()){var a=e.summoner.pions;this.deletePion(a,e),this.companions.splice(t,1)}}}}).objSpawnMonster=function(){var e=[];for(var a in t)/companions/i.test(a)&&t[a]instanceof Array&&e.push(t[a]);return e}(),e.extend(t,new e.components.companions,!0),e.companionsControl=t},markerMonsterMobile:function(t){if(t.objectMarker.state){for(var e,a,i=[],s=[],n=t.objectMarker.monster.position,r=0,o=t.objectMarker.registerMonster;r<o.length;r++){var l=o[r].position,c=Math.round(scope.distanceAndAngleBetweenTwoPoints(n.x,n.y,l.x,l.y).distance);i.push(c),s.push({distance:c,label:o[r].label,objMarker:o[r]})}i.sort(function(t,e){return t-e});for(var h=0;h<s.length;h++)if(s[h].distance===i[0]){e=s[h].label,a=s[h].objMarker;break}t.objectMarker.registerMonster=[];var p=scope.characterControl;e?/sekleton/i.test(e)?p.pointingAnimate.initMb?p.pointingAnimate.moveEventMb(n):p.pointingAnimate.updateLoadingMb(a)&&p.pointingAnimate.startEventMb(n):(p.monsterTarget.value=e,p.monsterTarget=e,p.monsterParameters=scope.monsterParameters.value.get(e),scope.monsterTarget.value=e,p.pointingAnimate.initMb&&p.pointingAnimate.moveEventMb(n,a)):(p.pointingAnimate.initMb&&p.pointingAnimate.moveEventMb(n),p.pointingAnimate.drawLoadingMb.curPerc=0)}else{(p=scope.characterControl.pointingAnimate).initMb&&(p.endEventMb(t.objectMarker.monster.position),p.drawLoadingMb.curPerc=0,p.initMb=!1)}},hiddenPortal:function(t){if(scope.preventBugLoad){var e=scope.staticAllMap.value[t];for(var a in e.content)if(/staticOriPortal/i.test(a)&&scope[a]&&scope[a].value.attach){var i=scope[a].value,s=i.attach;i.isVisible=!0,scope[s].value.isVisible=!0}}},loadGame:function(t,e){scope.activeMap.value=t,scope.enviOrnaments=scope.staticGeometry.storage.get(t),scope.enviLayer=scope.staticGeometry.storageLayer.get(t),scope.enviOrnamentsSvg=scope.staticGeometry.storageSVG.get(t),scope.enviOrnamentsPortal=scope.staticGeometry.storagePortal.get(t),scope.enviMiniMap=scope.staticGeometry.storageMap.get(t),scope.objDrawTranslate=scope.objTranslate.value,scope.characterMage=scope.oval.value,scope.textures(t),scope.allMapContent=scope.staticAllMap.value[t],scope.play(),scope.preventBugLoad=!0,/dungeon/i.test(t)?(scope.engine.world.gravity.y=0,scope.engine.world.gravity.x=0):(scope.engine.world.gravity.y=1.7,scope.engine.world.gravity.x=0),scope.isSwitchMapActive=!0,scope.staticControl.installMapObject("mapA","remove"),scope.staticControl.installMapObject(t,"add"),scope.screenTransition("download",t,function(){if(setTimeout(function(){scope.isSwitchMapActive=!1},950),e){var a=e.charPoints.pathPoint,i=e.charPoints.userPoint,s=scope.staticAllMap.value[t].content.staticOriGroupPathPoints[0].position,n=a.x-s.x,r=a.y-s.y;scope.Body.setPosition(scope.characterMage,{x:i.x-n,y:i.y-r}),e.charParams.rigBody=scope.characterControl,e.charParams.object=scope.characterMage,scope.characterParameters.value=e.charParams,scope.characterLevel.value(!1,!0),scope.characterInventoryBag.value.set("oval",e.charBag),scope.registerMagicBoxItem.value.storage=e.regMagicItem,scope.characterQuest.value.storage=e.charQuest,scope.questLog.value("load",e.charQuest),scope.itemShop.value.set("global",e.itemShop),scope.oval.value.forceGravity=e.charForceGravity;var o=JSON.parse(e.charSkills),l=JSON.parse(e.systemSkills);for(var c in o)o[c].loading=new scope.loadingAct(25,"rgba( 0, 0, 0, 0.7 )",o[c].tick),o[c].slotLocation&&(o[c].state=!0);for(var c in l)l[c].loading=new scope.loadingAct(25,"rgba( 0, 0, 0, 0.7 )",l[c].tick);scope.characterSkills.value.set("oval",o),scope.items.value.skills=l,scope.character(!0),scope.globalSaveLoad.value(),scope.dragBar(),scope.toggleButton();(function(){var e={hideShadowNpc:{title:"Be an 'Enchanter'",childQuest:"",fn:function(){scope.staticOriNpcPassSpawnB.value.isVisible=!1}},hideElementalNpc:{title:"Fire Elemental",childQuest:"",fn:function(){scope.staticOriNpcPassSpawnD.value.isVisible=!1}},bugQuestA:{title:"familiar",childQuest:"questB",fn:function(){scope.fragmentQuestFn.value.familiarQuestA()}},bugQuestB:{title:"Slay the Goblins",childQuest:"",fn:function(){var t=scope.staticOriPortalBmapDungeonG.value.attach;scope.staticOriPortalBmapDungeonG.value.isVisible=!0,scope[t].value.isVisible=!0}},goblinRaceQuestF:{title:"Talk to Elder Goblin",childQuest:"questF",fn:function(){var t=scope.staticOriPortalBmapDungeonC.value.attach;scope.staticOriPortalBmapDungeonC.value.isVisible=!0,scope[t].value.isVisible=!0}},bloodLichArcherQuestF:{title:"Archer Companion",childQuest:"",fn:function(){scope.fragmentQuestFn.value.bloodlicharcherQuestE()}},khalpartyQuestG:{title:"Khal Sign",childQuest:"questG",fn:function(){scope.fragmentQuestFn.value.khalQuestG()}},lapisQuestD:{title:"Lapis The Shining Gemstone",childQuest:"questD",fn:function(){scope.fragmentQuestFn.value.lapisQuestD()}},invasionQuestF:{title:"The invasion",childQuest:"questD",fn:function(){scope.fragmentQuestFn.value.invasionQuestF()}}};scope.hiddenPortal(t);var a=scope.characterQuest.value.storage;for(var i in a){var s=a[i].status;if(s){for(var n in e)if(s.title.toLowerCase()===e[n].title.toLowerCase())if(s.isFinish)e[n].fn();else{var r=s.questTree;for(var o in r)e[n].childQuest===o&&e[n].fn()}r=s.questTree;for(var o in r)/npc/i.test(r[o].target)&&(s.active?scope[r[o].target].value.isVisible=!0:scope[r[o].target].value.isVisible=!1)}}})()}else scope.dragBar(),scope.toggleButton();scope.screenTransition("build-map")},!0),scope.monsterTarget.value="","mapDDungeonA"===scope.activeMap.value&&scope.isMobile.value&&scope.removeClass(scope.qs("jump-right-nav"),"hidden");var a=document.getElementById("fps");setInterval(function(){scope.orderObjectFn.value(),scope.caracterSkillToogleFn.value(),scope.monsterControl.triggerMonsterFn("aggresive"),scope.isLanscape&&scope.addClass(scope.qs("orientation-alert"),"hidden"),a.innerHTML=(1e3/scope.frameTime).toFixed(1)+" fps"},1e3)},setIntervalFn:function(){for(var t=0,e=scope.intervalList.value.storage;t<e.length;t++)e[t].status.tick>0?e[t].status.tick--:e[t].status.always?(e[t].status.fn(),e[t].status.tick=e[t].status.tickUpdate):(e[t].status.fn(),e.splice(t,1))},character:function(reset){var scope=this,_obj;_obj={object:scope.oval.value,label:scope.oval.value.label,staticWallOutter:scope.staticWallOutter.value(),objTranslate:scope.objTranslate.value,activeMap:"",dungeonActive:!1,container:scope.canvas,moveSpeed:3,jumpSpeed:-22.5,mouseTempX:0,mouseTempY:0,mousePosX:0,mousePosY:0,moveX:3,moveStaticX:3,moveStaticY:2,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,moveStrict:!1,translateLeft:!0,translateRight:!0,leftPass:!1,jump:!1,preventControl:!1,isTranslateY:!0,isAttacking:!1,monsterTarget:"",monsterParameters:"",hitNumber:[],loadingHpPotion:new scope.loadingAct(25,"rgba( 255, 22, 22, 0.5 )"),hpTickState:!0,hpPotionUpdate:function(t){var e=scope.slotButtonHp.getBoundingClientRect(),a=e.left+(e.right-e.left)/2,i=e.bottom+(e.top-e.bottom)/2+1;return this.loadingHpPotion.update(scope.context,a,i,t)},loadingMpPotion:new scope.loadingAct(25,"rgba( 83, 83, 255, 0.5 )"),mpTickState:!0,isSkillActive:!1,isSkillCasting:!1,mpPotionUpdate:function(t){var e=scope.slotButtonMp.getBoundingClientRect(),a=e.left+(e.right-e.left)/2,i=e.bottom+(e.top-e.bottom)/2+1;return this.loadingMpPotion.update(scope.context,a,i,t)},characterParameters:scope.characterParameters.value,buffDelay:0,buffAffected:[],buffGUI:function(t,e,a){if("add"===t){var i=document.createElement("div");i.className="buff-skill "+a,i.id=e;var s=document.createElement("span");i.appendChild(s),scope.buffBox.insertBefore(i,scope.buffBox.firstChild)}else if("remove"===t)for(var n=scope.slice(scope.buffBox.getElementsByTagName("div")),r=0;r<n.length;r++)if(n[r].id===e){n[r].remove();break}},buffHeal:function(t){var e=Math.round(parseInt(this.characterParameters.maxHealth)*(parseInt(t)/100)+scope.random(15,0));this.hitNumber.push(new scope.hitNumber("+"+e,"heal")),this.characterParameters.health+e<this.characterParameters.maxHealth?this.characterParameters.health+=e:this.characterParameters.health=Math.round(this.characterParameters.maxHealth),this.updateHpBar()},buffFn:function(){if(this.buffAffected.length)for(var t=this.buffAffected,e=function(t){if(this.object.skillEffected){objEffected=this.object.skillEffected;for(var e=0;e<objEffected.length;e++)if(objEffected[e]===t.skill){objEffected.splice(e,1);break}}if(t.monsterParams){for(var a=t.monsterParams.activeSkill,i=0;i<a.length;i++)if(objEffected[i]===t.skill)return!0;a.push(t.skill)}return!0}.bind(this),a=0;a<t.length;a++){var i=t[a];if(i.tick--,scope.buffGUI.value.set(i.skill,{tick:i.tick,id:i.id}),i.tick<0)/bindingRoot|lightningShock/i.test(i.skill)?(this.moveSpeed=i.speedNormal>1?i.speedNormal:3,this.velocity=/dungeon/i.test(this.activeMap)?2:3,this.objTranslate.staticObjMoveY=this.velocity,"lightningShock"===i.skill&&(this.moveStrict=!1,scope.characterSkillDisable.value("enable"),scope.disableSkill.value("enable")),e(i)):"aquaSpirit"===i.skill?i.remove=!0:"burningEffect"===i.skill&&e(i),this.buffGUI("remove",i.id),scope.buffGUI.value.remove(i.skill),t.splice(a,1);else if("burningEffect"===i.skill){if(i.tickDelay--,i.tickDelay<0){var s=(s=scope.random(i.damageMax,i.damageMin)-scope.random(this.characterParameters.magicDefenseMax,this.characterParameters.magicDefenseMax))>0?s:Math.round(scope.random(40,1)/2);tempHealth=this.characterParameters.health-s,this.characterParameters.health&&(this.hitNumber.push(new scope.hitNumber(s)),tempHealth<0?this.characterParameters.health=0:this.characterParameters.health-=s),i.tickDelay=i.tickDelayUpdate}}else if("aquaHeal"===i.skill)i.delay--,i.delay<0&&this.characterParameters.health&&this.characterParameters.health<this.characterParameters.maxHealth&&(this.buffHeal(i.healing),scope.playAudio("heartbeat-1"),i.delay=50);else if("aquaSpirit"===i.skill){if(i.delay--,48===i.delay&&this.characterParameters.health)i.areaDmg=scope.staticAreaDmg.value(i,500,200),i.areaDmg.caster=this.object.label,scope.World.add(scope.engine.world,i.areaDmg),scope.areaDmgPool.value.set(i.areaDmg.label,i.areaDmg),scope.Body.setPosition(i.areaDmg,{x:i.x,y:i.y});else if(46===i.delay&&this.characterParameters.health)scope.companionsControl.triggerMonsterFn("area");else if(44===i.delay&&this.characterParameters.health){var n=scope.areaDmgPool.value.get(i.areaDmg.label),r=n.monsterParameters,o=this.object.position,l=!0;t:for(var c=0,h=r.length;c<h;c++){var p=r[c].object.rigBody,d=parseInt(p.maxHealth)*(parseInt(i.healing-2)/100)+scope.random(15,0)-scope.random(35,0);if(p.health<p.maxHealth&&/sekleton/i.test(p.label)){p.hitNumber.push(new scope.hitNumber("+"+Math.round(d),"heal")),p.health+d<p.maxHealth?(p.health+=d,l&&(scope.playAudio("heartbeat-1"),l=!1)):p.health=p.maxHealth;for(var g=p.buffAffected.length;g--;)if(p.buffAffected[g]===i.skill)continue t;p.buffEffecedAdd({skill:i.skill,tick:50})}}this.characterParameters.health<this.characterParameters.maxHealth&&o.x>n.bounds.min.x&&o.x<n.bounds.max.x&&o.y>n.bounds.min.y&&o.y<n.bounds.max.y&&(this.buffHeal(i.healing),l&&(scope.playAudio("heartbeat-1"),l=!1)),scope.World.remove(scope.engine.world,i.areaDmg),scope.areaDmgPool.value.remove(i.areaDmg.label)}else i.delay<0&&(i.delay=50);i.effect.update(scope.context,i.tick)}}},attackTolerance:function(){if(this.monsterParameters.object){var t=this.object.position.y-this.monsterParameters.object.position.y;return scope.distanceAndAngleBetweenTwoPoints(this.object.position.x,this.object.position.y,this.monsterParameters.object.position.x,this.monsterParameters.object.position.y).distance<=this.characterParameters.range&&t>-scope.stage/2}return!1},monsterGetDamageFn:function(t,e,a,i,s,n,r){if(void 0===(o=scope.monsterGetDamage.value.get(t))){scope.monsterGetDamage.value.set(t,[]);var o=scope.monsterGetDamage.value.get(t)}o.push({damage:a,debuff:"",selfAbilities:s,attackerAbilities:n,status:e,attacker:i,hitType:r})},monsterSetFocus:function(){var t=this.monsterParameters.object.label;""===scope.monsterTarget.value&&scope.monsterParameters.value.get(t)&&(scope.monsterTarget.value=this.monsterParameters.object.label)},calculateMonsterDamageWithSkill:function(t,e){var a=this.characterParameters.attackRangeMax,i=this.characterParameters.attackRangeMin,s=t.magicDefenseMax,n=t.magicDefenseMin,r=scope.random(a,i),o=scope.random(s,n),l=r+Math.round(r*this.characterParameters[e].damage/100)-o;return l>0||Math.round(scope.random(40,1)/2),l},convertAttackCharacterSkillToDamage:function(t){var e,a,i="attack",s=[];if(/fireball-acid-2|fireball-acid-3/i.test(t.skill)){if(!0===scope.monsterGotHitWithSkill.value.get("fireball-acid-2")||!0===scope.monsterGotHitWithSkill.value.get("fireball-acid-3")){this.isAttacking=!0,this.monsterSetFocus(),scope.monsterGotHitWithSkill.value.set("fireball-acid-2",!1),scope.monsterGotHitWithSkill.value.set("fireball-acid-3",!1);for(var n=scope.areaDmgPool.value,r="fireball-acid-2"===t.skill?"fireBall2":"fireBall3",o=0,l=n.storage;o<l.length;o++)if(l[o].status.caster===this.label&&"fireBallAcid3"===l[o].status.areaName){for(var c=l[o].status.monsterParameters,h=this.characterParameters[r].effect,p=0,d=c;p<d.length;p++){e=this.calculateMonsterDamageWithSkill(d[p],r),a=this.abilityBlock(d[p]),s=this.attackerAbilities(this.characterParameters),this.monsterGetDamageFn(d[p].object.label,i,e,this.label,a,s,"hitMagic");var g=d[p].object.rigBody;if(h)for(var m in h)100*Math.random()<=h[m].chance&&g.buffEffecedAdd({skill:h[m].name,skillParams:h[m]})}scope.areaDmgPool.value.remove(l[o].status.label)}}}else if("lightning"===t.skill)e=this.calculateMonsterDamageWithSkill(this.monsterParameters,"lightning"),a=this.abilityBlock(this.monsterParameters),s=this.attackerAbilities(this.characterParameters),this.monsterSetFocus(),this.monsterGetDamageFn(this.monsterTarget,i,e,this.object.label,a,s,"hitMagic"),scope.monsterGotHitWithSkill.value.set("lightning",!1);else if("lightning-strike"===t.skill){var u=this.characterParameters.attackDelaySkill.lifeDrain;this.characterParameters.attackDelaySkill.lifeDrain++,scope.monsterGotHitWithSkill.value.get("lightning-strike")&&u>=50&&(e=this.calculateMonsterDamageWithSkill(this.monsterParameters,"lightningStrike"),this.characterParameters.attackDelaySkill.lifeDrain=0,a=this.abilityBlock(this.monsterParameters),this.monsterSetFocus(),this.monsterGetDamageFn(this.monsterTarget,i,e,this.object.label,a,s,"hitMagic"))}else if("chain-lightning"===t.skill){var f=t.target,v=t.activeSkill.delay;if(t.activeSkill.delay--,0===f.length)scope.monsterGotHitWithSkill.value.set("chain-lightning",!1);else if(v<0&&f.length){c=f[0].rigBody,h=this.characterParameters.chainLightning.effect;if(e=this.calculateMonsterDamageWithSkill(c.monsterParameters,"chainLightning"),a=this.abilityBlock(c.monsterParameters),s=this.attackerAbilities(this.characterParameters),this.monsterGetDamageFn(c.monsterParameters.object.label,i,e,this.label,a,s,"hitMagic"),this.monsterSetFocus(),f.splice(0,1),h)for(var m in h)100*Math.random()<=h[m].chance&&c.buffEffecedAdd({skill:h[m].name,skillParams:h[m]});scope.playAudio("electric-shock"),scope.playAudio("monster-smash")}}else if("life-drain"===t.skill){u=this.characterParameters.attackDelaySkill.lifeDrain;this.characterParameters.attackDelaySkill.lifeDrain++,scope.monsterGotHitWithSkill.value.get("life-drain")&&u>=50&&(e=this.calculateMonsterDamageWithSkill(this.monsterParameters,"lifeDrainDmg"),this.characterParameters.attackDelaySkill.lifeDrain=0,a=this.abilityBlock(this.monsterParameters),scope.playAudio("electric-spark"),this.monsterSetFocus(),this.monsterGetDamageFn(this.monsterTarget,i,e,this.object.label,a,s,"hitMagic"))}else"fireball-acid"===t.skill?scope.monsterGotHitWithSkill.value.get("fireball-acid")&&t.explode&&(e=this.calculateMonsterDamageWithSkill(this.monsterParameters,"fireBallDmg"),a=this.abilityBlock(this.monsterParameters),s=this.attackerAbilities(this.characterParameters),this.monsterSetFocus(),this.monsterGetDamageFn(this.monsterTarget,i,e,this.object.label,a,s,"hitMagic"),scope.monsterGotHitWithSkill.value.set("fireball-acid",!1)):"ice-beam"===t.skill&&scope.monsterGotHitWithSkill.value.get("ice-beam")&&(e=this.calculateMonsterDamageWithSkill(this.monsterParameters,"fireBallDmg"),a=this.abilityBlock(this.monsterParameters),s=this.attackerAbilities(this.characterParameters),this.monsterSetFocus(),this.monsterGetDamageFn(this.monsterTarget,i,e,this.object.label,a,s,"hitMagic"),scope.monsterGotHitWithSkill.value.set("ice-beam",!1),t.hit=!0);this.isAttacking=!0},convertAttackCharacterToDamage:function(){var t,e,a,i,s=this.characterParameters.attackRangeMax,n=this.characterParameters.attackRangeMin,r=this.monsterParameters.defenseMax,o=this.monsterParameters.defenseMin,l=(this.characterParameters.attackDelayNormal,this.characterParameters.attackDelaySkill.lifeDrain,scope.distanceAndAngleBetweenTwoPoints(this.object.position.x,this.object.position.y,this.monsterParameters.object.position.x,this.monsterParameters.object.position.y),scope.random(s,n)),c=scope.random(r,o);(this.isAttacking||this.isSkillActive)&&this.monsterDir(),this.attackTolerance()?this.isAttacking&&(i=(a=l-c)>0?a:Math.round(scope.random(40,1)/2),t=this.abilityBlock(this.monsterParameters),e=this.attackerAbilities(this.characterParameters),this.setHelpToSummon(this.monsterParameters.object.label),this.monsterGetDamageFn(this.monsterTarget,"attack",i,this.object.label,t,e,"hitNormal")):this.isSkillActive||(scope.monsterTarget.value="",this.isAttacking=!1,scope[this.object.stateStorage].value.set(this.label,"idle"))},helpTick:1e3,setHelpToSummon:function(t){var e=!0;if(this.object.pions&&this.object.pions.length)for(var a=0,i=this.object.pions;a<i.length;a++)if(i[a].label===t){e=!1;break}e&&(this.helpTick=1e3,this.object.attacker=t,this.object.needHelp=!0)},characterGetDamage:scope.characterGetDamage.value,convertAttackMonsterToDamage:function(){var t=this.characterGetDamage.get(this.object.label);if(t.length)for(var e=0;e<t.length;e++){if("melee"===t[e].attackType)var a=t[e].attackMax,i=t[e].attackMin;else if("long-range"===t[e].attackType)a=t[e].attackRangeMax,i=t[e].attackRangeMin;var s=!0;if(t[e].buffSkill&&t[e].castedDelay<=0){var n=t[e].buffSkill,r=scope.uniqueId(),o=function(a){if(t[e].castedDelay=200,this.object.skillEffected)for(var i=this.object.skillEffected,s=0;s<i.length;s++)if(i[s]===a)return!0;var n=this.buffAffected;for(s=0;s<n.length;s++)if(n[s].skill===a)return!0;return!1}.bind(this);t:for(var l in n){if("burningEffect"===l&&!n[l].active){if(o(l))continue t;this.buffAffected.push({skill:n[l].name,tick:n[l].tick,id:r,tickDelay:n[l].tickDelay,tickDelayUpdate:n[l].tickDelayUpdate,damageMin:n[l].damageMin,damageMax:n[l].damageMax,monsterParams:t[e]}),s=!1,n[l].active=!0,this.object.skillEffected=[l],this.buffGUI("add",r,n[l].name);break}if(/bindingRoot|lightningShock/i.test(l)&&!n[l].active&&this.moveSpeed){if(o(l))continue t;this.buffAffected.push({skill:l,speedAffected:n[l].speedMovement,speedNormal:this.moveSpeed,tick:n[l].tick,id:r,monsterParams:t[e]}),n[l].active=!0,s=!1,this.moveSpeed=n[l].speedMovement,this.velocity=0,this.objTranslate.staticObjMoveY=this.velocity,this.object.skillEffected=[l],this.buffGUI("add",r,n[l].name),"lightningShock"===l&&(this.moveStrict=!0,scope.characterSkillDisable.value("disable"),scope.disableSkill.value("disable"));break}}}if(s){for(var c,h=this.characterParameters.defenseMax,p=this.characterParameters.defenseMin,d=(c=(c=scope.random(a,i)-scope.random(h,p))<=0?0:c)>0?c:Math.round(scope.random(40,1)/2),g=this.attackerAbilities(this.characterParameters),m=!1,u=0,f=g.length;u<f;u++)if("avoid"===g[u]){m=!0;break}m?this.hitNumber.push(new scope.hitNumber("miss")):t[e].object.deleted||(this.setHelpToSummon(t[e].object.label),this.characterParameters.health-d<0?(this.characterParameters.health&&(scope.intervalList.value.set("reload",{tick:500,fn:function(){location.reload()}}),scope.pushMsgText.value("YOUR CHARACTER HAS DIED",400)),this.characterParameters.health=0,this.updateHpBar(),scope[this.object.stateStorage].value.set(this.label,"die"),this.moveStrict=!0,this.object.behave="die",t[e].object.rigBody.attacker=!1,t[e].object.rigBody.behaveState=!0,t[e].object.rigBody.behaveRandomFn(1)):(this.hitNumber.push(new scope.hitNumber(d)),scope.playAudio(["stab"]),this.characterParameters.health-=d,this.characterParameters.health<this.characterParameters.maxHealthCure&&this.cureSelf(scope.slotButtonHp,"healthpotion","hpTickState","hpPotionUpdate"),this.updateHpBar())),this.characterGetDamage.get(this.object.label).splice(e,1)}}if(this.hitNumber.length)for(l=0;l<this.hitNumber.length;l++)this.hitNumber[l].update(scope.context,this.object)&&this.hitNumber.splice(l,1)},inventoryBag:scope.characterInventoryBag.value.get(scope.oval.value.label),cureSelf:function(t,e,a,i){var s=t.getElementsByTagName("div");if(s.length)for(var n=s[0].getAttribute("label"),r=this.inventoryBag,o=scope.qs("item-number",t),l=0;l<r.length;l++)if(r[l]&&r[l].label===n&&r[l].name===e&&this[a])if(this[i]("reset"),this[a]=!1,r[l].cooldown&&(this.loadingHpPotion.tick=r[l].cooldown),r[l].quantity>=1)"small"===r[l].size&&("healthpotion"===e&&this.characterParameters.health<this.characterParameters.maxHealthCure?(r[l].quantity--,this.characterParameters.health+r[l].cure<this.characterParameters.maxHealth?this.characterParameters.health+=r[l].cure:this.characterParameters.health=this.characterParameters.maxHealth):this.characterParameters.mp<this.characterParameters.maxMpCure&&(r[l].quantity--,this.characterParameters.mp+r[l].cure<this.characterParameters.maxMp?this.characterParameters.mp+=r[l].cure:this.characterParameters.mp=this.characterParameters.maxMp)),scope.text(o,r[l].quantity),"healthpotion"===e?this.updateHpBar():"manapotion"===e&&this.updateMpBar();else{r.splice(l,1),t.innerHTML="",scope.addClass(o,"hidden");for(var c=scope.isMobile.value()?scope.qs("bag-wrap-mb"):scope.qs("bag-a"),h=scope.slice(c.getElementsByTagName("li")),p=0;p<h.length;p++){var d=scope.getFirstChild(h[p]);if(/health-potion|health-medium-potion|health-strong-potion|health-strong-potion/i.test(d.className)&&"healthpotion"===e||/mana-potion|mana-medium-potion|mana-strong-potion/i.test(d.className)&&"manapotion"===e){t.appendChild(d);break}}this[a]=!0}},createUndead:function(t){var e=scope.isMobile.value()?scope.qs("familiar-box-mb"):scope.qs("familia-box"),a=scope.slice(e.getElementsByTagName("div")),i=scope.characterInventoryBag.value.get(scope.oval.value.label),s={monsterSekletonArmored:{value:0,itemLabel:[],parameters:[]},monsterSekletonArcher:{value:0,itemLabel:[],parameters:[]}};undeadTempArr=[],undeadArr=[],this.object.attacker=!1,this.object.needHelp=!1;for(var n=0,r=a.length;n<r;n++){var o=a[n].getAttribute("label");o&&undeadTempArr.push(o)}undeadTempArr=scope.uniqueArray(undeadTempArr);for(var l=0,c=i.length;l<c;l++)for(var h=0;h<undeadTempArr.length;h++)i[l].label===undeadTempArr[h]&&undeadArr.push(i[l]);for(n=0;n<undeadArr.length;n++)for(var r in s)if(undeadArr[n].companion===r){s[r].value++,s[r].parameters.push(undeadArr[n].familiar),s[r].itemLabel.push(undeadArr[n].label);break}for(var n in s)s[n].value||delete s[n];(s.monsterSekletonArmored||s.monsterSekletonArcher)&&(scope.playAudio("teleport-swish"),scope.characterPionsAttribute.value("reset"),scope.companionsControl.create({monsters:[],spell:"undead",summoner:this.object,durationTick:t.tickUpdate,pions:s}),scope.characterPionsAttribute.value("update"))},cntActiveSkill:[],registerSkill:function(t){for(var e=0;e<this.cntActiveSkill.length;e++)if(this.cntActiveSkill[e].name===t&&this.cntActiveSkill[e].skill.state)return!1;return this.cntActiveSkill.push({name:t,skill:scope.initSkills.value(t)}),this.cntActiveSkill[this.cntActiveSkill.length-1]},isSkillRegistered:function(t){for(var e=this.buffAffected,a=!0,i=0;i<e.length;i++)if(e[i].skill===t){a=!1;break}return a},characterSkills:scope.characterSkills.value,skillUpdate:function(){var t=this.characterSkills.get("initial"),e=this.characterSkills.get(this.label);if(t.state&&this.characterParameters.health){for(var a=t.label,i=0;i<e.length;i++)if(e[i].label===a&&function(){return!!/undead|aqua-heal|aqua-spirit/i.test(e[i].name)||this.attackTolerance()}.bind(this)()&&e[i].state&&this.characterParameters.mp>0){e[i].target=t.target,e[i].state=!1,e[i].loading||(e[i].loading=new scope.loadingAct(25,"rgba( 0, 0, 0, 0.7 )",e[i].tick)),e[i].loading.update(scope.context,-1e3,-1e3,"reset"),scope.characterSkills.value.set("initial",{label:"",state:!1}),!/undead|aqua-heal|aqua-spirit/i.test(e[i].name)&&("left"===this.monsterDir()?this.changeLeftFn(!0):this.changeRightFn(!0));this.characterParameters.mp;var s=e[i].mp;if("fireball-acid-3"===e[i].name){if(p=this.registerSkill("fireBallAcid3")){scope.monsterGotHitWithSkill.value.set("fireball-acid-3","setAttack");for(var n=0;n<p.skill.length;n++)p.skill.fn.push({tick:p.skill.delay*(n+1),skill:new scope.fireBallArea(this.object,this.monsterParameters.object,this.monsterDir(),this,"fireball-acid-3")});p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value,scope.playAudio("Bassy_swoosh")}}else if("fireball-acid-2"===e[i].name){(p=this.registerSkill("fireBallAcid2"))&&(scope.monsterGotHitWithSkill.value.set("fireball-acid-2","setAttack"),p.skill.fn=new scope.fireBallArea(this.object,this.monsterParameters.object,this.monsterDir(),this,"fireball-acid-2"),p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value,scope.playAudio("Bassy_swoosh"))}else if("undead"===e[i].name)this.createUndead(e[i]);else if("aqua-spirit"===e[i].name){var r=scope.buffSkill.value.get("aqua-spirit"),o=this.isSkillRegistered(r.name),l=scope.uniqueId(),c=this.object.position.x,h=this.object.position.y;r={skill:r.name,healing:r.healing,tick:r.tick,delay:r.delay,effect:new scope.lights(this.object),id:l,areaDmg:"",remove:!1,x:c,y:h};if(o){this.buffGUI("add",l,"aqua-spirit"),this.buffAffected.push(r),scope.playAudio("evil-crack");c=this.object.position.x,h=this.object.position.y;scope.staticGeometry.createStoratePassBG({target:this.object.position,x:c,y:h,parent:r,fn:new scope.magicCircle({url:scope.path+"/heal.png",scale:5,scaleBefore:-220,scaleLength:30,life:270,target:"",imagePosY:30,imagePosX:120})})}}else if("aqua-heal"===e[i].name){r=scope.buffSkill.value.get("aqua-heal"),o=this.isSkillRegistered(r.name),l=scope.uniqueId();o&&(scope.playAudio("healspell2"),this.buffGUI("add",l,"aqua-heal"),this.buffAffected.push({skill:r.name,healing:r.healing,tick:r.tick,delay:r.delay,id:l}))}else if("fireball-acid"===e[i].name){(p=this.registerSkill("fireBallAcid"))&&(scope.monsterGotHitWithSkill.value.set("fireball-acid","setAttack"),p.skill.fn=new scope.fireBallAcid(this.object,this.monsterParameters.object,this.monsterDir(),this),p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value,scope.playAudio("fire-ball"))}else if("life-drain"===e[i].name){(p=this.registerSkill("lifeDrain"))&&(scope.monsterGotHitWithSkill.value.set("life-drain",!0),p.skill.fn=new scope.lifeDrain(this.monsterParameters.object),p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value,scope.playAudio("life-drain"))}else if("ice-beam"===e[i].name){(p=this.registerSkill("iceBeam"))&&(scope.monsterGotHitWithSkill.value.set("ice-beam",!0),p.skill.fn=new scope.iceBeam,p.skill.state=!0,p.skill.hit=!1,p.skill.monsterTarget=scope.monsterTarget.value)}else if("lightning"===e[i].name){(p=this.registerSkill("lightning"))&&(scope.monsterGotHitWithSkill.value.set("lightning",!0),p.skill.fn=new scope.lightning([this.object,this.monsterParameters.object],this.monsterDir(),"lightning"),p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value,scope.playAudio("storage-bin"),scope.playAudio("electric-shock"))}else if("lightning-strike"===e[i].name){(p=this.registerSkill("lightning-strike"))&&(scope.monsterGotHitWithSkill.value.set("lightning-strike",!0),p.skill.fn=new scope.lightning([this.object,this.monsterParameters.object],this.monsterDir(),"lightning-strike"),p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value,scope.playAudio("continues-electric-start"))}else if("chain-lightning"===e[i].name){var p;(p=this.registerSkill("chain-lightning"))&&(scope.monsterGotHitWithSkill.value.set("chain-lightning",!0),p.skill.fn=new scope.lightningArea(this.monsterParameters.object,this.monsterDir(),"chain-lightning"),p.skill.state=!0,p.skill.monsterTarget=scope.monsterTarget.value)}this.characterParameters.mp>0?this.characterParameters.mp-=s:this.characterParameters.mp=0,this.isSkillActive=!0,this.isSkillCasting=!0,this.cureSelf(scope.slotButtonMp,"healthpotion","mpTickState","mpPotionUpdate"),this.updateMpBar();break}t.state=!1}n=0;for(var d=e.length;n<d;n++)if(!e[n].state){var g=e[n],m=g.target.getBoundingClientRect(),u=m.left+(m.right-m.left)/2,f=m.bottom+(m.top-m.bottom)/2;if(g.tickUpdate--,g.loading.update(scope.context,u,f,g.tick)){g.state=!0,g.loading.remove=!1,g.tickUpdate=!!g.tickOriginal&&g.tickOriginal||g.tick;var v=scope.qs("time-span-"+g.label);v&&(v.style.display="none")}}},activeListSkill:function(t){if(o=this.cntActiveSkill.length)for(var e=0;e<o;e++){var a=this.cntActiveSkill[e];if(a)if("iceBeam"===a.name){var i=this.removeAnimateSkill(t,a.skill.monsterTarget),s=a.skill.fn.update(scope.context,this.monsterParameters.object,i);!0===s?(scope.monsterGotHitWithSkill.value.set("ice-beam",!1),a.skill.fn="",a.skill.state=!1,a.skill.hit=!1,this.isSkillActive=!1,this.cntActiveSkill.splice(e,1)):"hit"===s&&(this.convertAttackCharacterSkillToDamage({skill:"ice-beam",hit:s}),this.isSkillActive=!0)}else if("lifeDrain"===a.name){this.convertAttackCharacterSkillToDamage({skill:"life-drain"});i=this.removeAnimateSkill(t,a.skill.monsterTarget);a.skill.fn.update(scope.context,i)&&(scope.monsterGotHitWithSkill.value.set("life-drain",!1),a.skill.fn="",a.skill.state=!1,this.isSkillActive=!1,this.cntActiveSkill.splice(e,1))}else if("fireBallAcid"===a.name)a.skill.fn.update(this)&&(a.skill.fn="",a.skill.state=!1,this.cntActiveSkill.splice(e,1));else if("fireBallAcid2"===a.name)a.skill.fn.update(this)&&(a.skill.fn="",a.skill.state=!1,this.cntActiveSkill.splice(e,1));else if("lightning"===a.name)a.skill.fn.update(scope.context,this.latestDir)&&(this.convertAttackCharacterSkillToDamage({skill:"lightning"}),a.skill.fn="",a.skill.state=!1,this.cntActiveSkill.splice(e,1));else if("lightning-strike"===a.name){if(this.convertAttackCharacterSkillToDamage({skill:"lightning-strike"}),a.skill.fn.update(scope.context,this.latestDir)){var n=scope.globalAudio.value.get("continues-electric-start");n&&(n.pause(),n.currentTime=0,scope.globalAudio.value.remove("continues-electric-start")),scope.monsterGotHitWithSkill.value.set("lightning-strike",!1),a.skill.fn="",a.skill.state=!1,this.cntActiveSkill.splice(e,1)}}else if("chain-lightning"===a.name){var r=a.skill.fn.update(scope.context,this.latestDir);r instanceof Array&&(this.convertAttackCharacterSkillToDamage({skill:"chain-lightning",target:r,activeSkill:a.skill}),scope.monsterGotHitWithSkill.value.get("chain-lightning")||(a.skill.fn="",a.skill.state=!1,this.cntActiveSkill.splice(e,1)))}else if("fireBallAcid3"===a.name){var o;if(o=a.skill.fn.length)for(e=0;e<a.skill.fn.length;e++)a.skill.fn[e].tick--,a.skill.fn[e].tick<0&&a.skill.fn[e].skill.update(this)&&a.skill.fn.splice(e,1);else a.skill.fn="",a.skill.state=!1,this.cntActiveSkill.splice(e,1)}}},activeAttacking:!1,latestDir:"",monsterDir:function(){return this.monsterParameters.object.position.x<this.object.position.x?"left":"right"},dirSwitch:{delayDir:-1,changeIdle:!0,left:!1,right:!1,idle:!1,jump:!0,attack:{tick:30,idleTick:20}},changeLeftFn:function(t){if(this.dirSwitch.left&&this.moveLeft&&!this.moveRight&&(!this.moveLeft||!this.moveRight)||t){this.dirSwitch.left=!1,this.latestDir="left",this.object.additionalBoundsWidthValue=-Math.abs(this.object.additionalBoundsWidthValue);var e=this.object.initialName+"-left.png";this.objTranslate.firstLoadLeft=!1,scope[this.object.stateStorage].value.set(this.label,"textureNeedChange|"+scope.path+"/"+e)}},changeRightFn:function(t){if(this.dirSwitch.right&&!this.moveLeft&&this.moveRight&&(!this.moveLeft||!this.moveRight)||t){this.dirSwitch.right=!1,this.latestDir="right",this.object.additionalBoundsWidthValue=Math.abs(this.object.additionalBoundsWidthValue);var e=this.object.initialName+"-right.png";this.objTranslate.firstLoadRight=!1,scope[this.object.stateStorage].value.set(this.label,"textureNeedChange|"+scope.path+"/"+e)}},performAttacking:function(t,e){if(this.characterParameters.health){if(this.isAttacking&&!this.moveLeft&&!this.moveRight&&!this.moveUp&&!this.moveDown){var a=scope[this.object.stateStorage].value.storage[0].status;this.dirSwitch.attack.tick>0?(25===this.dirSwitch.attack.tick?"right"===this.monsterDir()?this.changeRightFn(!0):this.changeLeftFn(!0):24===this.dirSwitch.attack.tick?(this.dirSwitch.right=!0,this.dirSwitch.left=!0,this.dirSwitch.changeIdle=!0,scope[this.object.stateStorage].value.set(this.label,"attack")):1===this.dirSwitch.attack.tick&&"attack"===a&&(this.dirSwitch.attack.idleTick=25,scope.playAudio(["stab"]),scope.random(5,1)>=3&&scope.playAudio(["grunt-2","grunt-3","grunt-7","grunt-9"]),this.convertAttackCharacterToDamage()),this.dirSwitch.attack.tick--):("idle"!==a&&scope[this.object.stateStorage].value.set(this.label,"idle"),this.dirSwitch.attack.idleTick>=0?this.dirSwitch.attack.idleTick--:this.dirSwitch.attack.tick=25)}this.isAttacking||""===t?""===t&&(this.isAttacking=!1,this.dirSwitch.changeIdle&&(scope[this.object.stateStorage].value.set(this.label,"idle"),this.dirSwitch.changeIdle=!1)):this.isAttacking=!1}else{a=scope[this.object.stateStorage].value.storage[0].status;/idle|die/i.test(a)||scope[this.object.stateStorage].value.set(this.label,"idle"),this.moveDown=!1,this.moveUp=!1,this.moveRight=!1,this.moveLeft=!1,e.moveUp=!1,e.moveDown=!1,e.moveLeft=!1,e.moveRight=!1,e.staticObjStateX=!1,e.staticObjStateY=!1}},removeAnimateSkill:function(t,e){return""===t||e!==t},pointingAnimate:{drawFn:new scope.draw.generalDrawImage,drawLoadingMb:new scope.loadingAct(10,"rgba( 255, 22, 22, 0.8 )",25),active:!1,install:!1,imagePosY:-30,imagePosX:0,scaleBefore:0,scaleX:0,scaleY:0,offsetX:.1,offsetY:.1,posX:310,posY:310,target:{state:!1,object:"",objectTarget:"",visible:!1,behave:""},renderWalk:{textures:"",src:scope.path+"/point-walk.png"},renderAttack:{textures:"",src:scope.path+"/point-attack.png"},updateLoadingMb:function(t){var e=t.position,a=t.additionalBoundsValue;if(this.drawLoadingMb.update(scope.context,e.x,e.y-a-45))return this.startEventMb(t),!0},mouseInTargetFn:function(t,e){var a=t.additionalBoundsValue?t.additionalBoundsValue:0;return t.bounds.min.x-a<e.x&&t.bounds.max.x>e.x&&t.bounds.min.y-a<e.y&&t.bounds.max.y>e.y},targetCompanion:{dirX:0,sekleton:"",sekletonTarget:""},initMb:!1,startEventMb:function(t){this.initMb||(this.targetCompanion.dirX=t.position.x,this.cursorStartEventFn(t.position),this.initMb=!0)},endEventMb:function(t){this.cursorEndEventFn(t)},moveEventMb:function(t,e){this.initMb&&this.cursorMoveEventFn(t,e)},cursorStartEventFn:function(t){for(var e=scope.Composite.allBodies(scope.engine.world),a=0;a<e.length;a++){var i=e[a],s=this.mouseInTargetFn(i,t);if(/sekleton/i.test(i.label)&&s){this.targetCompanion.sekleton=i,this.target.object=i,this.active=!0,this.target.behave="walk";break}}},cursorMoveEventFn:function(t,e){this.posX=t.x,this.posY=t.y;var a=this.target,i=this.target.objectTarget,s=a.object instanceof Object&&this.mouseInTargetFn(a.object,t);if(""===a.object||s)this.target.visible=!1;else{if(a.visible=!0,e)a.objectTarget=e;else for(var n=scope.Composite.allBodies(scope.engine.world),r=0;r<n.length;r++){var o=n[r],l=o.label,c=this.mouseInTargetFn(o,t);if(i.label!==l&&/monster|dragon/i.test(l)&&!/sekleton/i.test(l)&&c&&l!==a.label){a.objectTarget=o;break}}""!==i&&this.mouseInTargetFn(i,t)?(a.render="renderAttack",a.state=!0):(a.render="renderWalk",a.state=!1)}},cursorEndEventFn:function(t){if(""!==this.targetCompanion.sekleton){for(var e,a=scope.Composite.allBodies(scope.engine.world),i=this.mouseInTargetFn(this.targetCompanion.sekleton,t),s=this.targetCompanion.sekleton,n=0;n<a.length;n++){if(e=a[n],mouseInTarget=this.mouseInTargetFn(e,t),/monster|dragon/i.test(e.label)&&!/sekleton/i.test(e.label)&&e.label!==s.label&&!i&&mouseInTarget){s.rigBody.character=e,s.rigBody.moveDir(Math.round(e.position.x-s.rigBody.object.position.x)),s.rigBody.attacker=e.label,s.rigBody.object.behave=s.rigBody.behave="attack",s.rigBody.turnState=scope.random(600,500);break}if(n===a.length-1&&!i){var r=t.x-this.targetCompanion.dirX;s.rigBody.moveDir(r),s.rigBody.objectPointing.position.x=t.x,s.rigBody.objectPointing.position.y=t.y,s.rigBody.behave="pointing",s.rigBody.turnState=scope.random(600,500);break}}this.active=!1,this.target.object="",this.target.objectTarget="",this.targetCompanion.sekleton=""}},update:function(t){this.install||(scope.getTexture(this.renderWalk,this.renderWalk.src),scope.getTexture(this.renderAttack,this.renderAttack.src),this.install=!0);var e=this.target.objectTarget;this.target.state&&e instanceof Object&&(this.posX=e.position.x,this.posY=e.bounds.min.y-e.additionalBoundsValue),this.target.visible&&this.drawFn.update({context:t,image:this[this.target.render].textures,posX:this.posX,posY:this.posY,imagePosY:this.imagePosY,imagePosX:this.imagePosX,scaleX:this.scaleX,scaleY:this.scaleY,offsetX:this.offsetX,offsetY:this.offsetY,scaleBefore:this.scaleBefore})}},footstep:{tick:0,tickStep:12,fn:function(){scope.playAudio("footstep")}},update:function(){var t=this.object.position,e=this.objTranslate,a=scope.monsterTarget.value,i=e.staticObjStateX,s=e.staticObjMoveY,n=e.staticsWallOuterIsStopX;this.isSkillActive&&this.isSkillCasting&&this.attackTolerance();(this.performAttacking(a,e),this.activeListSkill(a),this.pointingAnimate.active&&this.pointingAnimate.update(scope.context),this.dirSwitch.delayDir--,0===this.dirSwitch.delayDir)&&("walk"===scope[this.object.stateStorage].value.storage[0].status||this.jump||scope[this.object.stateStorage].value.set(this.label,"walk"));if(this.isSkillCasting&&(this.isSkillCasting=!1),this.helpTick>0&&(this.helpTick--,0===this.helpTick&&(this.object.attacker=!1,this.object.needHelp=!1)),this.skillUpdate(),this.buffFn(),this.characterParameters.health>0&&this.characterParameters.health<this.characterParameters.maxHealthCure&&this.cureSelf(scope.slotButtonHp,"healthpotion","hpTickState","hpPotionUpdate"),this.hpTickState||this.hpPotionUpdate()&&(this.hpTickState=!0),this.characterParameters.mp<this.characterParameters.maxMpCure&&this.cureSelf(scope.slotButtonMp,"manapotion","mpTickState","mpPotionUpdate"),this.mpTickState||this.mpPotionUpdate()&&(this.mpTickState=!0),this.convertAttackMonsterToDamage(),this.moveUp&&this.dungeonActive&&!this.object.forceGravity&&scope.Body.translate(this.object,{x:0,y:-s}),this.moveDown&&this.dungeonActive&&scope.Body.translate(this.object,{x:0,y:s}),this.moveLeft&&this.translateLeft){var r=e.firstLoadLeft;this.changeLeftFn(r),n&&!i&&scope.Body.translate(this.object,{x:-this.moveSpeed,y:0})}if(this.moveRight&&this.translateRight){r=e.firstLoadRight;this.changeRightFn(r),n&&!i&&scope.Body.translate(this.object,{x:this.moveSpeed,y:0})}this.jump&&!this.preventControl&&(this.dirSwitch.jump&&(scope[this.object.stateStorage].value.set(this.label,"jump"),this.dirSwitch.jump=!1),scope.Body.translate(this.object,{x:0,y:this.jumpSpeed})),this.screenCheck(),!this.isShake&&this.characterParameters.health&&(this.moveLeft||this.moveRight||this.moveUp||this.moveDown?(this.footstep.tick--,this.footstep.tick<0&&(this.footstep.tick=this.footstep.tickStep,this.footstep.fn()),this.isAttacking&&(this.activeAttacking=this.isAttacking,this.isAttacking=!1),this.isSkillActive=!1,e.staticObjMoveX=this.moveLeft?this.moveSpeed:this.moveRight?-this.moveSpeed:0):this.activeAttacking&&(this.activeAttacking=!1,this.isAttacking=!0),this.translating&&((this.moveLeft||this.moveRight)&&t.x>0&&t.x<scope.browserWidthUpdate?e.staticObjStateX=!0:i&&(e.staticObjStateX=!1),e.staticObjAllX&&!this.isShake&&(e.staticObjMoveX=this.moveStaticX,e.staticObjStateX=!0)))},event:function(){var self=this,map="",stateRocket={},targetCompanion={dirX:0,sekleton:"",sekletonTarget:""},mouseInTargetFn=function(t,e){var a=t.additionalBoundsValue?t.additionalBoundsValue:0;return t.bounds.min.x-a<e.x&&t.bounds.max.x>e.x&&t.bounds.min.y-a<e.y&&t.bounds.max.y>e.y};with(scope)Events.on(engine,"collisionStart",function(t){for(var e=t.pairs,a=0,i=e.length;a!=i;++a){var s=e[a],n="Body"!==s.bodyA.label||s.bodyA.outterWall?s.bodyA.label:s.bodyA.parent.label,r="Body"!==s.bodyB.label||s.bodyB.outterWall?s.bodyB.label:s.bodyB.parent.label;if(/static|oval/i.test(n)&&/static|oval/i.test(r)&&(self.jump||scope.characterMobileControl.value.jump)&&(self.jump=!1,scope.characterMobileControl.value.jump=!1,self.dirSwitch.jump=!0,self.moveLeft||self.moveRight||scope.characterMobileControl.value.moveLeft?scope[self.object.stateStorage].value.set(self.label,"walk"):scope[self.object.stateStorage].value.set(self.label,"idle"),/staticBoxPreventJump|staticWall/i.test(r)?self.isTranslateY=!0:self.isTranslateY=!1),/staticWall|monster/i.test(n)&&/staticWall|monster/i.test(r)&&/dungeon/i.test(scope.activeMap.value)&&(/monster/i.test(r)&&(scope[s.bodyB.stateStorage].value.set(r,"turn"),s.bodyB.outterWall=n),/monster/i.test(n)&&(scope[s.bodyB.stateStorage].value.set(n,"turn"),s.labelA.outterWall=r)),/oval|coin|monster-slime|monster-black|monster-yellow|monster-green-dragon|staticBoxroll|staticRocket/i.test(r))if(/static/i.test(n)&&/monster-black/i.test(r))"hit"!==scope.monsterBlackState.value.get(r)&&scope.monsterBlackState.value.set(r,"idle");else if(/static/i.test(n)&&/monster-yellow/i.test(r)){"hit"!==scope.monsterYellowState.value.get(r)&&scope.monsterYellowState.value.set(r,"idle")}else if(/monster-black/i.test(n)&&/monster-black/i.test(r))scope.monsterBlackState.value.set(n,"turn"),scope.monsterBlackState.value.set(r,"turn");else if(/monster-yellow/i.test(n)&&/monster-yellow/i.test(r))scope.monsterYellowState.value.set(n,"turn"),scope.monsterYellowState.value.set(r,"turn");else if(/monster-black/i.test(n)&&/monster-yellow/i.test(r))scope.monsterBlackState.value.set(n,"turn"),scope.monsterYellowState.value.set(r,"turn");else if(/oval/i.test(n)&&/monster-slime/i.test(r))scope.monsterSlimeState.value.set(r,"hit");else if(/oval/i.test(n)&&/monster-black/i.test(r))scope.monsterBlackState.value.set(r,"hit");else if(/oval/i.test(n)&&/monster-yellow/i.test(r))scope.monsterYellowState.value.set(r,"hit");else if(/oval/i.test(n)&&/monster-green-dragon/i.test(r))scope.greenDragonState.value.set(r,"hit");else if(/oval/i.test(n)&&/staticBoxroll/i.test(r)){var o=scope.oval.value.position,l=s.bodyB.position,c=Math.abs(Math.ceil(l.x-o.x)),h=Math.abs(Math.ceil(l.y-o.y));c<40&&h>40&&scope.switchRoll.value.update(s.bodyB)}else/oval/i.test(n)&&/staticRocket/i.test(r)&&scope.rocketState.value.set(r,"stop")}}),Events.on(mouseConstraint.value,"mousedown",function(t){var e=t.mouse.position;scope.oval.value.position;self.pointingAnimate.targetCompanion.dirX=e.x;for(var a,i,s=Composite.allBodies(engine.world),n=0,r=0;n<s.length;n++){if(a=s[n],i=self.pointingAnimate.mouseInTargetFn(a,e),/monster|dragon/i.test(a.label)&&!/sekleton/i.test(a.label)&&i){monsterTarget.value=a.label;var o=a.label;""!==o&&self.monsterTarget!==o&&(self.monsterTarget=o,self.monsterParameters=scope.monsterParameters.value.get(o));var l,c=scope.monsterParameters.value.get(o),h=self.characterParameters.attackRangeMax,p=self.characterParameters.attackRangeMin,d=c.defenseMax,g=c.defenseMin,m=25*c.maxHealth/100,u=h+p/2,f=scope.random(d,g);isEasy=u-m>=0,tempDemage=u-f,tempDemage=tempDemage<=0?0:tempDemage,l=isEasy?"green":tempDemage>0?"orange":"red",scope.qs("circle-bar-stat").className="circle-bar-stat "+l,r++;break}if(/npc/i.test(a.label)&&i&&a.isVisible&&(a.touch&&scope.removeClass(scope.qs("box-dialog"),"hidden"),scope.updateMessageText.value(a.label),a.touch&&scope.characterUpdateQuest.value(a.label)),!r&&n===s.length-1){monsterTarget.value="",scope.addClass(scope.qs("monster-bar"),"hidden");break}}self.pointingAnimate.initMb||self.pointingAnimate.cursorStartEventFn(e)}),Events.on(mouseConstraint.value,"mousemove",function(t){self.pointingAnimate.initMb||self.pointingAnimate.cursorMoveEventFn(t.mouse.position)}),Events.on(mouseConstraint.value,"mouseup",function(t){self.pointingAnimate.initMb||self.pointingAnimate.cursorEndEventFn(t.mouse.position)})},keyDown:function(){var t=this;scope.attachListener(document.body,"keydown",function(e){if(/hidden/i.test(scope.qs("gui-player").className)&&!this.preventControl&&scope.characterParameters.value.health){var a=scope[t.object.stateStorage].value.storage[0].status;switch(e.keyCode){case 87:t.moveUp=!0,scope.objTranslate.value.moveUp=!0,"up"!==scope.characterStatus.value&&(scope.characterStatus.value="up"),"walk"===a||t.jump||scope[t.object.stateStorage].value.set(t.label,"walk");break;case 83:t.moveDown=!0,scope.objTranslate.value.moveDown=!0,"down"!==scope.characterStatus.value&&(scope.characterStatus.value="down"),"walk"===a||t.jump||scope[t.object.stateStorage].value.set(t.label,"walk");break;case 70:t.isAttacking=!0;break;case 65:t.moveLeft=!0,scope.objTranslate.value.moveLeft||(scope.objTranslate.value.moveLeft=!0),"left"!==scope.characterStatus.value&&(scope.characterStatus.value="left"),t.dirSwitch.delayDir=2;break;case 68:t.moveRight=!0,scope.objTranslate.value.moveRight||(scope.objTranslate.value.moveRight=!0),"right"!==scope.characterStatus.value&&(scope.characterStatus.value="right"),t.dirSwitch.delayDir=2;break;case 32:""!==scope.monsterTarget.value||t.dungeonActive&&!t.object.forceGravity||(t.jump=!0,scope.characterStatus.value="jump")}}})},keyUp:function(){var t=this;function e(){t.moveUp||t.moveDown||t.moveLeft||t.moveRight||t.jump||scope[t.object.stateStorage].value.set(t.label,"idle")}scope.attachListener(document.body,"keyup",function(a){if(scope.characterParameters.value.health&&!this.preventControl)switch(a.keyCode){case 87:t.moveUp=!1,scope.objTranslate.value.moveUp=!1,scope.objTranslate.value.staticObjMoveX=0,e(),scope.characterStatus.value="idle";break;case 83:t.moveDown=!1,scope.objTranslate.value.moveDown=!1,scope.objTranslate.value.staticObjMoveX=0,e(),scope.characterStatus.value="idle";break;case 65:t.moveLeft=!1,t.dirSwitch.left=!0,e(),scope.objTranslate.value.staticObjMoveX=0,scope.characterStatus.value="idle",scope.objTranslate.value.moveLeft=!1;break;case 68:t.moveRight=!1,t.dirSwitch.right=!0,e(),scope.objTranslate.value.moveRight=!1,scope.objTranslate.value.staticObjMoveX=0,scope.characterStatus.value="idle"}}.bind(this))},velocity:0,translating:!1,screenCheck:function(){var t=scope.activeMap.value,e=this.objTranslate;if(this.activeMap!==t){var a="inrender";this.staticWallOutter=scope.staticWallOutter.value(),this.activeMap=t,this.block=!!scope[a]&&scope[a](),/dungeon/i.test(t)?(this.velocity=2,e.staticObjMoveY=this.velocity,this.dungeonActive=!0):(this.velocity=3,e.staticObjMoveY=this.velocity,this.dungeonActive=!1)}if(this.block&&!scope.isSwitchMapActive&&!e.isShake.shakeCnt.length&&this.characterParameters.health){var i=scope.browserWidthUpdate,s=scope.browserHeightUpdate,n=this.object.position,r=(this.object.bounds,Math.floor(i-i/2),Math.floor(i/2)),o=this.staticWallOutter[3].position,l=this.staticWallOutter[2].position,c=this.staticWallOutter[1].position,h=this.staticWallOutter[0].position,p=e.staticObjStateY,d=s/2,g=(e.staticsWallOuterIsStopX,e.staticObjStateX),m=e.staticObjAllX,u=e.staticObjMoveY,f=o.x>=-30&&o.x<=30,v=l.x>=i-30&&l.x<=i+30;toleranceY=Math.abs(d-n.y),(!this.isTranslateY||!this.jump)&&toleranceY>0&&toleranceY<30&&p?(e.staticObjStateY="",!this.dungeonActive&&e.moveDown&&(e.moveDown=!1),!this.dungeonActive&&e.moveUp&&(e.moveUp=!1)):this.isTranslateY&&this.jump||!(d-n.y>30)?this.isTranslateY&&this.jump||!(d-20-n.y<0)?(this.isTranslateY||this.jump)&&p&&(e.staticObjStateY=""):c.y>=s+30?(e.staticObjStateY="down",e.moveDown=!0,this.dungeonActive||(e.moveDown=!0,this.velocity+=.2,this.object.velocity.y>0?e.staticObjMoveY+=.2:e.staticObjMoveY=Math.floor(this.velocity))):p&&(e.staticObjStateY=""):h.y<0?(e.staticObjStateY="up",this.dungeonActive||(e.moveUp=!0,4!==u&&(e.staticObjMoveY=4),this.velocity=9)):p&&(e.staticObjStateY="");var b=Math.abs(r-Math.round(n.x));b<=this.moveSpeed?(f||v?f?(e.moveRight&&(this.translating=!0),e.moveLeft&&(this.translating=!1,g&&(e.staticObjStateX=!1),m&&(e.staticObjAllX=!1))):v&&(e.moveLeft&&(this.translating=!0),e.moveRight&&(this.translating=!1,g&&(e.staticObjStateX=!1),m&&(e.staticObjAllX=!1))):(g||(e.staticObjStateX=!0),g||(e.staticObjAllX=!0),this.translating=!0),this.translateLeft=!0,this.translateRight=!0):n.x<i&&n.x>0&&n.y<s&&n.y>0&&this.moveSpeed&&(f&&e.moveLeft&&(this.translating=!1),v&&e.moveRight&&(this.translating=!1),g&&(e.staticObjStateX=!1),m&&(e.staticObjAllX=!1),!v&&!f&&b>2*this.moveSpeed&&(r<Math.round(n.x)?this.moveStaticX=-Math.abs(this.moveStaticX):this.moveStaticX=Math.abs(this.moveStaticX),e.staticObjStateX=!0,e.staticObjAllX=!0,this.translating=!0))}},onMove:function(){var t=this;scope.attachListener(t.container,scope.CursorStartEvent,function(t){}),scope.attachListener(t.container,scope.CursorEndEvent,function(t){}),scope.attachListener(t.container,scope.CursorLeaveEvent,function(t){}),scope.attachListener(t.container,scope.CursorMoveEvent,function(e){t.mousePosX=e.clientX,t.mousePosY=e.clientY})},updateMpBar:function(){scope.text(scope.qs("mp-indicator-text"),Math.round(this.characterParameters.mp)+" / "+Math.round(this.characterParameters.maxMp)),scope.qs("mp-circle-bar").className="c100 blue mp-circle-bar p"+Math.floor(this.characterParameters.mp/this.characterParameters.maxMp*100)},updateHpBar:function(){scope.text(scope.qs("hp-indicator-text"),Math.round(this.characterParameters.health)+" / "+Math.round(this.characterParameters.maxHealth)),scope.qs("hp-circle-bar").className="h100 red hpBox hp-circle-bar p"+Math.round(this.characterParameters.health/this.characterParameters.maxHealth*100)},initControl:function(){this.object.statParameters=this.characterParameters,this.onMove(),this.keyUp(),this.keyDown(),this.event(),this.updateHpBar(),this.updateMpBar(),scope[this.object.stateStorage].value.set(this.label,"idle"),scope.characterMobileControl.value.charObj=this}},scope.extend(_obj,new scope.components.companions,!0),scope.characterControl=_obj,scope.characterParameters.value.rigBody=_obj,scope.text(scope.qs("mp-indicator-text"),_obj.mp+" / "+_obj.maxMp),scope.text(scope.qs("hp-indicator-text"),_obj.health+" / "+_obj.maxHealth),_obj.initControl()},statics:function(){var t,e,a,i=this;t={staticWallOutter:i.staticWallOutter.value(),object:i.oval.value,delayPortal:(a=setTimeout(function(){}),function(t,e){clearTimeout(a),a=setTimeout(t,e)}),delayInnerPortal:(e=setTimeout(function(){}),function(t,a){clearTimeout(e),e=setTimeout(t,a)}),activeMap:"",isInPortalFn:function(t){var e=this.object.position;return t.x<e.x&&t.y<e.y&&t.xMax()>e.x&&t.yMax()>e.y&&t.isVisible},installMapObject:function(t,e){var a=i.staticAllMap.value[t].content,s=i.monsterParameters.value.storage;i.browserWidthUpdate,i.browserHeightUpdate;"add"===e&&(s.length=0,i.monsterGetDamage.value.storage.length=0);var n=function(t,e,a){if(/monster/i.test(t))if("add"===e)i.monsterParameters.value.set(t,a);else for(var n=0,r=s.length;n<r;n++)s[n]&&s[n].name===t&&i.monsterParameters.value.remove(t)};for(var r in a)if(r in a){var o=a[r];if(a[r]instanceof Array)for(var l=0;l<o.length;l++)if("add"===e)if(o[l].layer&&!localStorage.getItem("load")&&o[l].appear)for(var c=0,h=o[l].layer.object;c<h.length;c++)i.World.add(i.engine.world,h[c]);else i.World.add(i.engine.world,o[l]),o[l].rigBody&&n(o[l].label,"add",o[l].rigBody.monsterParameters);else if(o[l].layer&&!localStorage.getItem("load")&&o[l].appear)for(c=0,h=o[l].layer.object;c<h.length;c++)i.World.remove(i.engine.world,h[c]);else i.World.remove(i.engine.world,o[l]),n(o[l].label,"remove");else"add"===e?(i.World.add(i.engine.world,o),o.rigBody&&n(o.label,"add",o.rigBody.monsterParameters)):(i.World.remove(i.engine.world,o),n(o.label,"remove"))}},teleportPortal:function(t,e){this.object.position;if(this.isInPortalFn(t)){var a=i[t.spawnTarget].value;this.object.attacker=!1,this.object.needHelp=!1,i.screenTransition("move-character","open"),"mapDDungeonA"===i.currentMap?i.characterControl.preventControl=!0:i.characterControl.preventControl=!1,setTimeout(function(){var s=/dungeon/i.test(e)&&!t.forceGravity?i.random(100,50):0,n=i.random(100,50);if(i.tickMap=100,this.object.forceGravity=!!t.forceGravity&&t.forceGravity,i.Body.setPosition(this.object,{x:a.x+a.width/2,y:a.y+a.height/2}),this.object.pions&&this.object.pions.length)for(var r=0,o=this.object.pions;r<o.length;r++)o[r].rigBody.behaveRandomFn(1),i.Body.setPosition(o[r],{x:this.object.position.x+n,y:this.object.position.y+s}),o[r].forceGravity=this.object.forceGravity=!!t.forceGravity&&t.forceGravity}.bind(this),500)}},generateMapObject:function(t,e,a){this.object.position;var s=this;s.isInPortalFn(t)&&t.delay&&(t.delay=!1,e.delay=!1,i.intervalList.value.set("delayPortal",{tick:500,fn:function(){e.delay=!0,t.delay=!0}}),/dungeon/i.test(t.locationTarget)?(i.engine.world.gravity.y=0,i.engine.world.gravity.x=0):(i.engine.world.gravity.y=1.7,i.engine.world.gravity.x=0),this.object.attacker=!1,this.object.needHelp=!1,i.globalSaveGame.value&&i.globalSaveGame.value("Auto Save","",!0),i.isSwitchMapActive=!0,s.installMapObject(t.location,"remove"),s.installMapObject(t.locationTarget,"add"),i.textures(t.locationTarget),this.object.forceGravity=!!e.forceGravity&&e.forceGravity,i.screenTransition("download",t.locationTarget,function(){setTimeout(function(){i.isSwitchMapActive=!1},950),i.intervalList.value.set(i.uniqueId(),{tick:50,fn:function(){var t=/dungeon/i.test(a)&&!e.forceGravity?i.random(100,50):0,n=i.random(100,50);if(i.Body.setPosition(s.object,{x:e.x+e.width/2,y:e.y+e.height/2}),s.object.pions&&s.object.pions.length)for(var r=0,o=s.object.pions;r<o.length;r++)o[r].rigBody.behaveRandomFn(1),i.Body.setPosition(o[r],{x:s.object.position.x+n,y:s.object.position.y+t}),o[r].forceGravity=s.object.forceGravity=!!e.forceGravity&&e.forceGravity}}),i.screenTransition("build-map")}),i.monsterTarget.value="",i.activeMap.value=t.locationTarget,i.characterUpdateQuest.value(t.attach),i.hiddenPortal(t.locationTarget))},switchMap:function(t){var e,a;this.objTranslate.moveUp&&!i.characterControl.preventControl&&this.delayPortal(function(){if("mapA"===t)e=i.staticOriPortalMapA.value,a=i.staticOriPortalmapB.value,this.generateMapObject(e,a,t),e=i.staticOriPortalMapAA.value,a=i.staticOriPortalmapAADungeonA.value,this.generateMapObject(e,a,t),e=i.staticOriPortalMapATemp.value,a=i.staticOriPortalmapDungeonH.value,this.generateMapObject(e,a,t);else if("mapB"===t)e=i.staticOriPortalmapB.value,a=i.staticOriPortalMapA.value,this.generateMapObject(e,a,t);else for(var s in i["staticPortal"+t].value)e=i[i["staticPortal"+t].value[s].portalIn].value,a=i[i["staticPortal"+t].value[s].portalOut].value,this.generateMapObject(e,a,t)}.bind(this),1)},objTranslate:i.objTranslate.value,switchInnerMap:function(t){this.objTranslate.moveUp&&!i.characterControl.preventControl&&this.delayInnerPortal(function(){if("mapDDungeonA"===t){var e=i.staticOriPortalTeleportA.value;this.teleportPortal(e,t);e=i.staticOriPortalTeleportB.value;this.teleportPortal(e,t)}}.bind(this),400)},update:function(){var t=i.activeMap.value;this.switchMap(t),this.switchInnerMap(t)}},i.staticControl=t},geometries:function(){var scope=this,diviceWidth=3e3,diviceHeight=3e3,staticSmallWidth=50,staticMediumWidth=200,heightTop,obj={createWall:function(t,e){widthTop=e&&"large"===e?3*diviceWidth:diviceWidth;var a=scope.Bodies.rectangle(2*diviceWidth,-diviceWidth/2+scope.browserHeightUpdate,50,widthTop,{isStatic:!0}),i=scope.Bodies.rectangle(0,-diviceWidth/2+scope.browserHeightUpdate,50,diviceWidth,{isStatic:!0});heightTop=e&&"large"===e?2*i.bounds.min.y-scope.browserHeightUpdate:i.bounds.min.y;var s=scope.Bodies.rectangle(i.bounds.min.x+diviceWidth,heightTop+50,2*diviceWidth,50,{isStatic:!0}),n=scope.Bodies.rectangle(diviceWidth,i.bounds.max.y+50,2*diviceWidth,50,{isStatic:!0});return s.label="staticWallTop"+t,n.label="staticWallBottom"+t,a.label="staticWallRight"+t,i.label="staticWallLeft"+t,[s,n,a,i]},createLayer:function(t,e){return scope.staticGeometry.createLayer({label:t,rangeX:e.x,rangeY:e.y,attach:"staticWallOutterBottom",layer:{object:e.layer,init:!1,firstLoad:!1},install:!1,width:3e3,height:3e3,location:e.location})},createBackground:function(t,e,a,i){for(var s=[["a_133.png","a_134.png","a_135.png","a_136.png","a_137.png","a_138.png","a_139.png","a_140.png","a_141.png","a_142.png","a_143.png","a_144.png"],["a_121.png","a_122.png","a_123.png","a_124.png","a_125.png","a_126.png","a_127.png","a_128.png","a_129.png","a_130.png","a_131.png","a_132.png"],["a_109.png","a_110.png","a_111.png","a_112.png","a_113.png","a_114.png","a_115.png","a_116.png","a_117.png","a_118.png","a_119.png","a_120.png"],["a_97.png","a_98.png","a_99.png","a_100.png","a_101.png","a_102.png","a_103.png","a_104.png","a_105.png","a_106.png","a_107.png","a_108.png"],["a_85.png","a_86.png","a_87.png","a_88.png","a_89.png","a_90.png","a_91.png","a_92.png","a_93.png","a_94.png","a_95.png","a_96.png"],["a_73.png","a_74.png","a_75.png","a_76.png","a_77.png","a_78.png","a_79.png","a_80.png","a_81.png","a_82.png","a_83.png","a_84.png"],["a_61.png","a_62.png","a_63.png","a_64.png","a_65.png","a_66.png","a_67.png","a_68.png","a_69.png","a_70.png","a_71.png","a_72.png"],["a_49.png","a_50.png","a_51.png","a_52.png","a_53.png","a_54.png","a_55.png","a_56.png","a_57.png","a_58.png","a_59.png","a_60.png"],["a_37.png","a_38.png","a_39.png","a_40.png","a_41.png","a_42.png","a_43.png","a_44.png","a_45.png","a_46.png","a_47.png","a_48.png"],["a_25.png","a_26.png","a_27.png","a_28.png","a_29.png","a_30.png","a_31.png","a_32.png","a_33.png","a_34.png","a_35.png","a_36.png"],["a_13.png","a_14.png","a_15.png","a_16.png","a_17.png","a_18.png","a_19.png","a_20.png","a_21.png","a_22.png","a_23.png","a_24.png"],["a_01.png","a_02.png","a_03.png","a_04.png","a_05.png","a_06.png","a_07.png","a_08.png","a_09.png","a_10.png","a_11.png","a_12.png"]],n=i?500:0,r=i||0,o=r,l=t;o<l+r;o++)scope.staticGeometry.createEnviPoint(a,{background:!0,scr:scope.path+e,indexRepeat:o,layer:s,range:0,attach:"staticWallOutterBottom",repeat:s[o],repeatX:500,additionalHeight:o?n-=500:0})},createSVGBuffer:function(t,e,a,i){scope.svgTot.value.total++;var s=new createjs.LoadQueue;s.addEventListener("fileload",function(t){var s=[];scope.path;s.push(scope.Svg.pathToVertices(t.result.getElementsByTagName("path")[0],150));var n=scope.Bodies.fromVertices(i.x,i.y,s,{isStatic:!0},!0);n.name=n.label=a,i.layer&&(n.layer={object:i.layer,init:!1}),scope.staticAllMap.value[e].content.staticOriGroupSVG.push(n),scope.svgTot.value.current++}),s.addEventListener("fileerror",function(t){scope.svgTot.value.current++}),s.addEventListener("error",function(t){scope.svgTot.value.current++}),s.loadFile(scope.path+t)},createNPC:function(t){var e=scope.Bodies.rectangle(t.x,t.y,60,60,{isStatic:!0,render:{sprite:{texture:t.texture}}});return e.name=e.label=t.label,e.additionalBoundsValue=t.additionalBoundsValue,e.additionalBoundsHeightValue=t.additionalBoundsHeightValue,e.additionalBoundsWidthValue=t.additionalBoundsWidthValue,e.walkFrameSpeed=2,e.behaveState=t.behaveState,e.touch=t.touch,e.isVisible=t.isVisible,e.quest={update:[],mapMark:new scope.draw.mapMark,target:t.target},e},createPoint:function(t){var e=t.point?339:1,a=t.point?215:1,i=scope.Bodies.rectangle(t.x,t.y,e,a,{isStatic:!0});return i.name=i.label=t.label,i.src=t.texture,i.fixedBounds=!!t.fixedBounds&&t.fixedBounds||0,i.isVisible=void 0===t.isVisible||t.isVisible,i.quest={update:[],mapMark:new scope.draw.mapMark,target:t.target},i},json:{ornaments:{spruceSmallDark:{width:366,height:391,fixedBounds:25}}}},Q7,R7;with(scope)scope.fragment=[function(){var t=0,e=200,a=128,i=Bodies.rectangle(t+=1e3,halfBottomBottom,a,50,{isStatic:!0});i.label="staticOriMBSpawnA";var s=Bodies.rectangle(t+=e,halfCenter,a,50,{isStatic:!0});s.label="staticOriMBSpawnB";var n=Bodies.rectangle(t-=e,halfTopCenter,a,50,{isStatic:!0});n.label="staticOriMBSpawnC";var r=Bodies.rectangle(t-=e,halfTopTop,a,50,{isStatic:!0});r.label="staticOriMBSpawnD";var o=Bodies.rectangle((t-=e)-320,halfBottomLvl2,640,50,{isStatic:!0});o.label="staticOriMBSpawnE";var l=Bodies.rectangle((t+=2*e)+960,halfBottomLvl2,1920,50,{isStatic:!0});l.label="staticOriMBSpawnF";var c=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:"rgba( 0,0,0,0.5 )",range:400,attach:"staticWallOutterBottom",location:"mapB",targetLocation:"mapA"}),h=(e=0,"mapB");return staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/grassSmallLeft.png",range:e+=1400,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/bushB.png",range:e+=50,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/foliagePackC.png",range:e+=100,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/grassSmallE.png",range:e+=100,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/grassBush.png",range:e+=700,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/foliagePackD.png",range:e+=300,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/stoneA.png",range:e+=50,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/mushroomRedMed.png",range:e+=1e3,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/grassSmallD.png",range:e+=100,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(h,{src:scope.path+"/ornaments/grassSmallF.png",range:e+=100,attach:"staticWallOutterBottom"}),scope.staticAllMap.value.mapB.content={staticWallOuttermapB:obj.createWall(h),staticOriMBSpawnA:i,staticOriMBSpawnB:s,staticOriMBSpawnC:n,staticOriMBSpawnD:r,staticOriMBSpawnE:o,staticOriMBSpawnF:l,staticOriPortalmapB:c},scope.staticAllMap.value.mapB.content}(),function(){var t=scope.browserHeightUpdate,e=3e3,a=0,i=t-e+2370,s=scope.path+"/ornaments/a/",n=Bodies.rectangle(a+=228,i+=200,366,391,{isStatic:!0});n.name=n.label="staticOriMCPassA",n.fixedBounds=25,n.src=scope.path+"/ornaments/a/spruceSmallDark.png";var r=Bodies.rectangle(a+=123,i+=100,489,552,{isStatic:!0});r.name=r.label="staticOriMCPassB",r.fixedBounds=65,r.src=scope.path+"/ornaments/a/spruceMedDark.png";var o=Bodies.rectangle(a-=30,i-=200,466,478,{isStatic:!0});o.name=o.label="staticOriMCPassC",o.src=scope.path+"/ornaments/a/spruceMed.png";var l=Bodies.rectangle(400+(a+=240),i-=300,339,215,{isStatic:!0});l.name=l.label="staticOriMCPassE",l.fixedBounds=65,l.src=scope.path+"/ornaments/a/portal right.png";var c=Bodies.rectangle(a-=40,i-=500,489,552,{isStatic:!0});c.name=c.label="staticOriMCPassF",c.fixedBounds=75,c.src=scope.path+"/ornaments/a/spruceMedDark.png";var h=Bodies.rectangle(a-=240,i-=100,312,332,{isStatic:!0});h.name=h.label="staticOriMCPassG",h.src=scope.path+"/ornaments/a/spruceSmall.png";var p=Bodies.rectangle(a+=440,i-=100,466,478,{isStatic:!0});p.name=p.label="staticOriMCPassH",p.fixedBounds=55,p.src=scope.path+"/ornaments/a/spruceMed.png";var d=Bodies.rectangle(a-=340,i-=100,466,478,{isStatic:!0});d.name=d.label="staticOriMCPassI",d.fixedBounds=45,d.src=scope.path+"/ornaments/a/spruceMed.png";var g=Bodies.rectangle(a-=240,i-=10,366,391,{isStatic:!0});g.name=g.label="staticOriMCPassJ",g.fixedBounds=65,g.src=scope.path+"/ornaments/a/spruceSmallDark.png";var m=Bodies.rectangle(a+=710,i+=370,430,478,{isStatic:!0});m.name=m.label="staticOriMCPassK",m.fixedBounds=20,m.src=scope.path+"/ornaments/a/stoneHill.png";var u=Bodies.rectangle(a-=250,i-=270,1215,576,{isStatic:!0});u.name=u.label="staticOriMCPassBGL",u.src=scope.path+"/ornaments/a/leftFence.png";var f=Bodies.rectangle(a+=650,i+=490,154,280,{isStatic:!0});f.name=f.label="staticOriMCPassM",f.fixedBounds=40,f.src=scope.path+"/ornaments/a/sign street.png";var v=Bodies.rectangle(a+=150,i+=720,489,552,{isStatic:!0});v.name=v.label="staticOriMCPassN",v.fixedBounds=75,v.src=scope.path+"/ornaments/a/spruceMedDark.png";var b=Bodies.rectangle(a+=220,i-=80,466,478,{isStatic:!0});b.name=b.label="staticOriMCPassO",b.fixedBounds=55,b.src=scope.path+"/ornaments/a/spruceMed.png";var S=Bodies.rectangle(a+=50,i-=250,489,552,{isStatic:!0});S.name=S.label="staticOriMCPassP",S.fixedBounds=75,S.src=scope.path+"/ornaments/a/spruceMedDark.png";var x=Bodies.rectangle(a+=228,i+=240,366,391,{isStatic:!0});x.name=x.label="staticOriMCPassQ",x.fixedBounds=25,x.src=scope.path+"/ornaments/a/spruceSmallDark.png";var k=Bodies.rectangle(a-=628,i-=140,466,478,{isStatic:!0});k.name=k.label="staticOriMCPassS",k.fixedBounds=25,k.src=scope.path+"/ornaments/a/spruceMed.png";var y=Bodies.rectangle(a+=1128,i+=40,286,278,{isStatic:!0});y.name=y.label="staticOriMCPassT",y.fixedBounds=75,y.src=scope.path+"/ornaments/a/relifStone.png";var B=Bodies.rectangle(a+=328,i-=200,451,516,{isStatic:!0});B.name=B.label="staticOriMCPassU",B.fixedBounds=135,B.src=scope.path+"/ornaments/a/stonehill2.png";var w=Bodies.rectangle(a+=328,i+=200,308,278,{isStatic:!0});w.name=w.label="staticOriMCPassV",w.fixedBounds=75,w.src=scope.path+"/ornaments/a/relifStone2.png";var M=Bodies.rectangle(a,i-=600,190,347,{isStatic:!0});M.name=M.label="staticOriMCPassW",M.fixedBounds=10,M.src=scope.path+"/ornaments/a/oak.png";var P=Bodies.rectangle(a+=300,i-=100,134,252,{isStatic:!0});P.name=P.label="staticOriMCPassX",P.fixedBounds=10,P.src=scope.path+"/ornaments/a/tree f.png";var A=Bodies.rectangle(a-=600,i-=200,115,218,{isStatic:!0});A.name=A.label="staticOriMCPassY",A.fixedBounds=10,A.src=scope.path+"/ornaments/a/tree g.png";var D=Bodies.rectangle(a+=450,i,114,229,{isStatic:!0});D.name=D.label="staticOriMCPassZ",D.fixedBounds=40,D.src=scope.path+"/ornaments/a/relifStone3.png";var j=Bodies.rectangle(a+=500,i,449,173,{isStatic:!0});j.name=j.label="staticOriMCPassAA",j.src=scope.path+"/ornaments/a/stonehill3.png";var T=Bodies.rectangle(a-=960,i-=350,67,146,{isStatic:!0});T.name=T.label="staticOriMCPassAB",T.fixedBounds=15,T.src=scope.path+"/ornaments/a/buffer left.png";var O=Bodies.rectangle(a-=150,i-=80,67,146,{isStatic:!0});O.name=O.label="staticOriMCPassAC",O.fixedBounds=15,O.src=scope.path+"/ornaments/a/buffer left.png";var C=Bodies.rectangle(a-=720,i+=150,367,578,{isStatic:!0});C.name=C.label="staticOriMCPassAE",C.src=scope.path+"/ornaments/a/tree h.png";var N=Bodies.rectangle(a+=270,i-=30,366,391,{isStatic:!0});N.name=N.label="staticOriMCPassAF",N.fixedBounds=35,N.src=scope.path+"/ornaments/a/spruceSmallDark.png";var q=Bodies.rectangle(a+=170,i-=250,489,552,{isStatic:!0});q.name=q.label="staticOriMCPassAG",q.fixedBounds=75,q.src=scope.path+"/ornaments/a/spruceMedDark.png";var E=Bodies.rectangle(a-=210,i-=150,466,478,{isStatic:!0});E.name=E.label="staticOriMCPassAH",E.fixedBounds=45,E.src=scope.path+"/ornaments/a/spruceMed.png";var F=Bodies.rectangle(a-=260,i-=70,312,332,{isStatic:!0});F.name=F.label="staticOriMCPassAI",F.fixedBounds=20,F.src=scope.path+"/ornaments/a/spruceSmall.png";var I=Bodies.rectangle(a+=130,i-=130,366,391,{isStatic:!0});I.name=I.label="staticOriMCPassAJ",I.fixedBounds=35,I.src=scope.path+"/ornaments/a/spruceSmallDark.png";var R=Bodies.rectangle(a-=470,i-=360,1108,935,{isStatic:!0});R.name=R.label="staticOriMCPassBGAK",R.src=scope.path+"/ornaments/a/hill-and-tree.png";var L=Bodies.rectangle(a-=80,i+=730,159,127,{isStatic:!0});L.name=L.label="staticOriMCPassAM",L.src=scope.path+"/ornaments/a/stone 2.png";var G=Bodies.rectangle(a-=70,i-=90,851,353,{isStatic:!0});G.name=G.label="staticOriMCPassBGAL",G.src=scope.path+"/ornaments/a/small lake.png";var H=Bodies.rectangle(a-=560,i-=820,1908,871,{isStatic:!0});H.name=H.label="staticOriMCPassBGAN",H.src=scope.path+"/ornaments/a/group-trees.png";var W=Bodies.rectangle(a+=3740,i+=1090,66,147,{isStatic:!0});W.name=W.label="staticOriMCPassAO",W.src=scope.path+"/ornaments/a/buffer right.png";var Y=Bodies.rectangle(a-=120,i-=100,66,147,{isStatic:!0});Y.name=Y.label="staticOriMCPassAP",Y.src=scope.path+"/ornaments/a/buffer right.png";var V=Bodies.rectangle(a+=70,i-=500,625,657,{isStatic:!0});V.name=V.label="staticOriMCPassAQ",V.fixedBounds=85,V.src=scope.path+"/ornaments/a/tree i.png";var X=Bodies.rectangle(a+=430,i-=100,451,516,{isStatic:!0});X.name=X.label="staticOriMCPassAR",X.fixedBounds=75,X.src=scope.path+"/ornaments/a/stonehill4.png";var _=Bodies.rectangle(a+=210,i-=50,339,215,{isStatic:!0});_.name=_.label="staticOriMCPassAS",_.fixedBounds=65,_.src=scope.path+"/ornaments/a/portal left.png";var U=t-e+1180,z=Body.nextGroup(!0),Q=Composites.stack(2800,U,20,1,10,10,function(t,e){return(a=Bodies.rectangle(t,e,50,80,{collisionFilter:{group:z},render:{sprite:{texture:scope.path+"/ornaments/a/bridge.png"}}})).name=a.label="staticOriPassBGBridge"+scope.uniqueId(),a.forceGravity=!0,a;var a});Composites.chain(Q,.1,0,-.1,0,{stiffness:1}),Q.bodies[0].isStatic=!0,Q.bodies[19].isStatic=!0,scope.Body.setPosition(Q.bodies[19],{x:Q.bodies[19].position.x+400,y:Q.bodies[19].position.y});var J;svgPosXA=1230,svgPosYA=t-e+940,svgPosXB=svgPosXA+230,svgPosYB=svgPosYA-395,svgPosXC=svgPosXB-1020,svgPosYC=svgPosYB-125,svgPosXD=svgPosXC+1850,svgPosYD=svgPosYC+215,svgPosXE=svgPosXD+1070,svgPosYE=svgPosYD+910,J="mapAADungeonA",obj.createSVGBuffer("/ornaments/a/lake.svg",J,"staticOriMCD",{x:svgPosXA,y:svgPosYA}),obj.createSVGBuffer("/ornaments/a/stone hill upper.svg",J,"staticOriMCSVG2",{x:svgPosXB,y:svgPosYB}),obj.createSVGBuffer("/ornaments/a/upper hill 2.svg",J,"staticOriMCSVG3",{x:svgPosXC,y:svgPosYC}),obj.createSVGBuffer("/ornaments/a/cliff buffer left a.svg",J,"staticOriMCSVG4",{x:svgPosXD,y:svgPosYD}),obj.createSVGBuffer("/ornaments/a/cliff buffer left b.svg",J,"staticOriMCSVG5",{x:3353,y:t-e+1494}),obj.createSVGBuffer("/ornaments/a/cliff buffer left c.svg",J,"staticOriMCSVG6",{x:3362,y:t-e+2454}),obj.createSVGBuffer("/ornaments/a/bridge buffer bottom.svg",J,"staticOriMCSVG7",{x:2955,y:t-e+1136}),obj.createSVGBuffer("/ornaments/a/bridge buffer bottom b.svg",J,"staticOriMCSVG8",{x:4060,y:t-e+1294}),obj.createSVGBuffer("/ornaments/a/bridge buffer bottom.svg",J,"staticOriMCSVG9",{x:3205,y:t-e+1316}),obj.createSVGBuffer("/ornaments/a/bridge buffer bottom c.svg",J,"staticOriMCSVG10",{x:3800,y:t-e+1126}),obj.createSVGBuffer("/ornaments/a/cliff buffer right.svg",J,"staticOriMCSVG11",{x:3941,y:t-e+435}),obj.createSVGBuffer("/ornaments/a/cliff buffer right b.svg",J,"staticOriMCSVG12",{x:4790,y:t-e+1561}),obj.createBackground(6,"/ornaments/a/",J,6);var K=scope.path+"/1px.png",$=Bodies.rectangle(2670,-1130,10,10,{isStatic:!0});$.src=K,$.name=$.label="staticOriMCPassPathPointA";var Z=Bodies.rectangle(2870,-1190,10,10,{isStatic:!0});Z.src=K,Z.name=Z.label="staticOriMCPassPathPointB";var tt=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});tt.src=K,tt.name=tt.label="staticOriMCPassPathPointC";var et=[$,Z,tt];staticGeometry.createMap({location:J,src:scope.path+"/ornaments/a/map.png"});var at=obj.createPoint({isVisible:!0,label:"staticOriMapAADngAPassSpawnA",texture:s+"portal left.png",x:5036,y:t-e+872,point:"portal",fixedBounds:65,target:"help"}),it=obj.createPoint({isVisible:!0,label:"staticOriMapAADngAPassSpawnB",texture:s+"portal right.png",x:784,y:t-e+2132,point:"portal",fixedBounds:65,target:"help"}),st=obj.createPoint({label:"staticOriMapAADngAPassSpawnC",texture:scope.path+"/1px.png",x:2750,y:t-e+2312,target:"help"}),nt=obj.createPoint({label:"staticOriMapAADngAPassSpawnD",texture:scope.path+"/1px.png",x:1045,y:t-e+1412,target:"help"}),rt=obj.createPoint({label:"staticOriMapAADngAPassSpawnE",texture:scope.path+"/1px.png",x:4780,y:t-e+485,target:"help"}),ot=obj.createPoint({label:"staticOriMapAADngAPassSpawnF",texture:scope.path+"/1px.png",x:5284,y:t-e+1196,target:"help"}),lt=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:"rgba( 255, 36, 36, 1 )",effect:"glowPortal",rangeX:72,rangeY:273,attach:"staticOriMapAADngAPassSpawnA",location:"mapAADungeonA",targetLocation:"mapAADungeonB"}),ct=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:"rgba( 134, 65, 245, 1 )",effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriMapAADngAPassSpawnB",location:"mapAADungeonA",targetLocation:"mapDungeonD"}),ht=obj.createNPC({isVisible:!1,touch:!0,x:947,y:t-e+2038,additionalBoundsValue:80,additionalBoundsHeightValue:-10,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanArmored-right.png",label:"staticOriNpcMapAADngAPassSpawnA"}),pt=obj.createNPC({isVisible:!1,touch:!1,x:1045,y:t-e+1966,additionalBoundsValue:70,additionalBoundsHeightValue:45,additionalBoundsWidthValue:15,target:"info",texture:scope.path+"/humanMage-right.png",label:"staticOriNpcMapAADngAPassSpawnB"}),dt=obj.createNPC({isVisible:!1,touch:!1,x:1218,y:t-e+1995,additionalBoundsValue:70,additionalBoundsHeightValue:45,additionalBoundsWidthValue:-10,target:"info",texture:scope.path+"/humanArcher-left.png",label:"staticOriNpcMapAADngAPassSpawnC"});return scope.staticAllMap.value.mapAADungeonA.content={staticWallOuttermapAADungeonA:obj.createWall(J),staticPortalmapAADungeonA:{portalA:{portalIn:"staticOriPortalmapAADungeonA",portalOut:"staticOriPortalmapAADungeonB"},portalB:{portalIn:"staticOriPortalBmapAADungeonA",portalOut:"staticOriPortalmapDungeonD"}},staticOriPortalmapAADungeonA:lt,staticOriPortalBmapAADungeonA:ct,staticOriGroupSVG:[],staticOriGroupPathPoints:et,staticOriMapAADngAPassSpawnA:at,staticOriMapAADngAPassSpawnB:it,staticOriMapAADngAPassSpawnC:st,staticOriMapAADngAPassSpawnD:nt,staticOriMapAADngAPassSpawnE:rt,staticOriMapAADngAPassSpawnF:ot,staticOriNpcMapAADngAPassSpawnA:ht,staticOriNpcMapAADngAPassSpawnB:pt,staticOriNpcMapAADngAPassSpawnC:dt,staticOriMCSpawnN:C,staticOriMCSpawnBridge:Q,staticOriMCSpawnGroup:[n,r,o,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,M,P,A,D,j,T,O,N,q,E,F,I,G,R,w,L,W,Y,V,X]},scope.staticAllMap.value.mapAADungeonA.content}(),function(){var t=scope.browserHeightUpdate,e=3e3,a=0,i=t-e+2400,s=scope.path+"/ornaments/e/",n=Bodies.rectangle(a+=228,i+=200,489,522,{isStatic:!0});n.name=n.label="staticOriMDPassA",n.fixedBounds=75,n.src=scope.path+"/ornaments/b/spruceMedDark.png";var r=Bodies.rectangle(a+=900,i-=600,114,229,{isStatic:!0});r.name=r.label="staticOriMDPassB",r.fixedBounds=35,r.src=scope.path+"/ornaments/b/ruin stone a.png";var o=Bodies.rectangle(300+(a-=20),i-=470,114,229,{isStatic:!0});o.name=o.label="staticOriMDPassC",o.fixedBounds=35,o.src=scope.path+"/ornaments/b/ruin stone a.png";var l=Bodies.rectangle(a+=160,i-=290,312,322,{isStatic:!0});l.name=l.label="staticOriMDPassD",l.fixedBounds=22,l.src=scope.path+"/ornaments/b/spruceSmall.png";var c=Bodies.rectangle(a-=60,i-=540,466,478,{isStatic:!0});c.name=c.label="staticOriMDPassE",c.fixedBounds=55,c.src=scope.path+"/ornaments/b/spruceMed.png";var h=Bodies.rectangle(a+=80,i-=240,312,322,{isStatic:!0});h.name=h.label="staticOriMDPassF",h.fixedBounds=20,h.src=scope.path+"/ornaments/b/spruceSmall.png";var p=Bodies.rectangle(a-=220,i-=220,366,391,{isStatic:!0});p.name=p.label="staticOriMDPassG",p.fixedBounds=35,p.src=scope.path+"/ornaments/b/spruceSmallDark.png";var d=Bodies.rectangle(a-=420,i+=120,671,711,{isStatic:!0});d.name=d.label="staticOriMDPassH",d.fixedBounds=75,d.src=scope.path+"/ornaments/b/tree b.png";var g=Bodies.rectangle(a+=220,i+=280,366,391,{isStatic:!0});g.name=g.label="staticOriMDPassI",g.fixedBounds=35,g.src=scope.path+"/ornaments/b/spruceSmallDark.png";var m=Bodies.rectangle(a+=620,i+=280,366,391,{isStatic:!0});m.name=m.label="staticOriMDPassJ",m.fixedBounds=35,m.src=scope.path+"/ornaments/b/spruceSmallDark.png";var u=Bodies.rectangle(a+=340,i-=780,366,391,{isStatic:!0});u.name=u.label="staticOriMDPassK",u.fixedBounds=35,u.src=scope.path+"/ornaments/b/spruceSmallDark.png";var f=Bodies.rectangle(a+=1110,i+=40,312,322,{isStatic:!0});f.name=f.label="staticOriMDPassL",f.fixedBounds=20,f.src=scope.path+"/ornaments/b/spruceSmall.png";var v=Bodies.rectangle(a+=380,i-=40,580,600,{isStatic:!0});v.name=v.label="staticOriMDPassM",v.fixedBounds=75,v.src=scope.path+"/ornaments/b/tree.png";var b=Bodies.rectangle(a+=80,i+=340,671,711,{isStatic:!0});b.name=b.label="staticOriMDPassN",b.fixedBounds=75,b.src=scope.path+"/ornaments/b/tree b.png";var S=Bodies.rectangle(a+=380,i-=310,671,711,{isStatic:!0});S.name=S.label="staticOriMDPassO",S.fixedBounds=75,S.src=scope.path+"/ornaments/b/tree b.png";var x=Bodies.rectangle(a+=80,i+=510,312,322,{isStatic:!0});x.name=x.label="staticOriMDPassP",x.fixedBounds=20,x.src=scope.path+"/ornaments/b/spruceSmall.png";var k=Bodies.rectangle(a-=280,i+=210,489,522,{isStatic:!0});k.name=k.label="staticOriMDPassQ",k.fixedBounds=75,k.src=scope.path+"/ornaments/b/spruceMedDark.png";var y=Bodies.rectangle(a+=420,i-=540,489,522,{isStatic:!0});y.name=y.label="staticOriMDPassR",y.fixedBounds=75,y.src=scope.path+"/ornaments/b/spruceMedDark.png";var B=Bodies.rectangle(a+=920,i-=90,580,600,{isStatic:!0});B.name=B.label="staticOriMDPassS",B.fixedBounds=75,B.src=scope.path+"/ornaments/b/tree.png";var w=Bodies.rectangle(a+=220,i+=190,671,711,{isStatic:!0});w.name=w.label="staticOriMDPassT",w.fixedBounds=75,w.src=scope.path+"/ornaments/b/tree b.png";var M=Bodies.rectangle(a+=120,i+=290,671,711,{isStatic:!0});M.name=M.label="staticOriMDPassU",M.fixedBounds=75,M.src=scope.path+"/ornaments/b/tree b.png";var P=Bodies.rectangle(a+=340,i-=480,366,391,{isStatic:!0});P.name=P.label="staticOriMDPassV",P.fixedBounds=35,P.src=scope.path+"/ornaments/b/spruceSmallDark.png";var A=Bodies.rectangle(a+=120,i+=110,489,522,{isStatic:!0});A.name=A.label="staticOriMDPassW",A.fixedBounds=55,A.src=scope.path+"/ornaments/b/spruceMedDark.png";var D=Bodies.rectangle(a-=220,i+=110,312,322,{isStatic:!0});D.name=D.label="staticOriMDPassX",D.fixedBounds=25,D.src=scope.path+"/ornaments/b/spruceSmall.png";var j=Bodies.rectangle(320+(a-=1420),i+=450,308,278,{isStatic:!0});j.name=j.label="staticOriMDPassZ",j.fixedBounds=75,j.src=scope.path+"/ornaments/b/ruin stone c.png";var T=Bodies.rectangle(a-=400,i+=400,114,229,{isStatic:!0});T.name=T.label="staticOriMDPassAA",T.fixedBounds=35,T.src=scope.path+"/ornaments/b/ruin stone a.png";var O=Bodies.rectangle(a-=140,i+=400,114,229,{isStatic:!0});O.name=O.label="staticOriMDPassAB",O.fixedBounds=35,O.src=scope.path+"/ornaments/b/ruin stone a.png";var C=Bodies.rectangle(a+=840,i-=350,398,516,{isStatic:!0});C.name=C.label="staticOriMDPassAC",C.fixedBounds=135,C.src=scope.path+"/ornaments/b/stone b.png";var N=Bodies.rectangle(880,-1070,366,391,{isStatic:!0});N.name=N.label="staticOriMDPassAD",N.fixedBounds=35,N.src=scope.path+"/ornaments/b/spruceSmallDark.png";var q=Bodies.rectangle(480,-1470,114,229,{isStatic:!0});q.name=q.label="staticOriMDPassAE",q.fixedBounds=35,q.src=scope.path+"/ornaments/b/ruin stone a.png";var E=obj.createPoint({isVisible:!0,label:"staticOriMapAADngBPassSpawnA",texture:s+"portal right.png",x:839,y:t-e+798,point:"portal",fixedBounds:65,target:"help"}),F=obj.createPoint({isVisible:!0,label:"staticOriMapAADngBPassSpawnB",texture:s+"portal right.png",x:4860,y:t-e+868,point:"portal",fixedBounds:65,target:"help"}),I=obj.createPoint({label:"staticOriMapAADngBPassSpawnC",texture:scope.path+"/1px.png",x:2020,y:t-e+1287,target:"help"}),R=obj.createPoint({label:"staticOriMapAADngBPassSpawnD",texture:scope.path+"/1px.png",x:3099,y:t-e+1629,target:"help"}),L=obj.createPoint({label:"staticOriMapAADngBPassSpawnE",texture:scope.path+"/1px.png",x:967,y:t-e+1930,target:"help"}),G=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriMapAADngBPassSpawnA",location:"mapAADungeonB",targetLocation:"mapAADungeonA"}),H=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriMapAADngBPassSpawnB",location:"mapAADungeonB",targetLocation:"mapDungeonA"}),W=obj.createNPC({isVisible:!0,touch:!0,x:3051,y:t-e+1038,additionalBoundsValue:70,additionalBoundsHeightValue:45,additionalBoundsWidthValue:-10,target:"info",texture:scope.path+"/humanArcher-right.png",label:"staticOriNpcMapAADngBPassSpawnA"}),Y=scope.path+"/1px.png",V=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});V.src=Y,V.name=V.label="staticOriMCPassPathPointA";var X=[V],_="mapAADungeonB";return staticGeometry.createMap({location:_,src:scope.path+"/ornaments/b/map.png"}),obj.createSVGBuffer("/ornaments/b/buffer bottom a.svg",_,"staticOriBufferMDA",{x:2270,y:t-e+2535}),obj.createSVGBuffer("/ornaments/b/buffer bottom b.svg",_,"staticOriBufferMDB",{x:4951,y:t-e+2015}),obj.createSVGBuffer("/ornaments/b/buffer upper a.svg",_,"staticOrBufferiMDC",{x:2075,y:t-e+533}),obj.createBackground(6,"/ornaments/b/",_,6),scope.staticAllMap.value.mapAADungeonB.content={staticWallOuttermapAADungeonB:obj.createWall(_),staticPortalmapAADungeonB:{portalA:{portalIn:"staticOriPortalmapAADungeonB",portalOut:"staticOriPortalmapAADungeonA"},portalB:{portalIn:"staticOriPortalmapAADungeonB2",portalOut:"staticOriPortalBmapDungeonA"}},staticOriPortalmapAADungeonB:G,staticOriPortalmapAADungeonB2:H,staticOriNpcMapAADngBPassSpawnA:W,staticOriMDSpawnA:O,staticOriMapAADngBPassSpawnA:E,staticOriMapAADngBPassSpawnB:F,staticOriMapAADngBPassSpawnC:I,staticOriMapAADngBPassSpawnD:R,staticOriMapAADngBPassSpawnE:L,staticOriGroupPathPoints:X,staticOriGroupSVG:[],staticOriMCSpawnGroup:[n,r,o,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,C,N,q]},scope.staticAllMap.value.mapAADungeonB.content}(),function(){var t=obj.createWall(o),e=scope.path+"/1px.png",a=scope.Bodies.rectangle(diviceWidth,t[3].bounds.max.y-90,2*diviceWidth,90,{isStatic:!0});a.name=a.label="staticOriMCFloor",a.src=e;var i=Bodies.rectangle(500,490,129,170,{isStatic:!0});i.src=scope.path+"/ornaments/a/portal b.png",i.name=i.label="staticOriPassPortalA";var s=Bodies.rectangle(5400,490,129,170,{isStatic:!0});s.src=scope.path+"/ornaments/a/portal b.png",s.name=s.label="staticOriPassPortalB";var n=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,rangeX:-35,rangeY:160,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticOriMCPortalA",location:"mapC",targetLocation:"mapAADungeonB"}),r=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,rangeX:-35,rangeY:160,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticOriMCPortalB",location:"mapC",targetLocation:"mapDDungeonA"}),o="mapC";return obj.createBackground(3,"/ornaments/c/",o,7),scope.staticAllMap.value.mapC.content={staticOriMCFloor:a,staticWallOuttermapC:obj.createWall(o),staticOriMCPortalA:i,staticOriMCPortalB:s,staticPortalmapC:{portalA:{portalIn:"staticOriPortalmapC",portalOut:"staticOriPortalmapAADungeonB2"},portalB:{portalIn:"staticOriPortalmapC2",portalOut:"staticOriPortalmapDDungeonA"}},staticOriPortalmapC:n,staticOriPortalmapC2:r},scope.staticAllMap.value.mapC.content}(),function(){var t="mapDDungeonA",e=scope.path+"/ornaments/d/",a=scope.browserHeightUpdate,i=3e3,s=Bodies.rectangle(767,a-i+2520,176,186,{isStatic:!0});s.name=s.label="staticOriMEPassA",s.src=scope.path+"/ornaments/d/buffer bridge bottom left a.png";var n=Bodies.rectangle(790,a-i+2415,176,186,{isStatic:!0});n.name=n.label="staticOriMEPassB",n.src=scope.path+"/ornaments/d/buffer bridge top left a.png";var r=Bodies.rectangle(2107,a-i+2535,160,205,{isStatic:!0});r.name=r.label="staticOriMEPassD",r.src=scope.path+"/ornaments/d/buffer-bridge-bottom-b.png";var o=Bodies.rectangle(2100,a-i+2500,147,205,{isStatic:!0});o.name=o.label="staticOriMEPassE",o.src=scope.path+"/ornaments/d/buffer top b.png";var l=Bodies.rectangle(2425,a-i+2535,160,205,{isStatic:!0});l.name=l.label="staticOriMEPassG",l.src=scope.path+"/ornaments/d/buffer bottom c.png";var c=Bodies.rectangle(2440,a-i+2500,160,205,{isStatic:!0});c.name=c.label="staticOriMEPassH",c.src=scope.path+"/ornaments/d/buffer top c.png";var h=Bodies.rectangle(3407,a-i+2535,160,205,{isStatic:!0});h.name=h.label="staticOriMEPassJ",h.src=scope.path+"/ornaments/d/buffer-bridge-bottom-b.png";var p=Bodies.rectangle(3400,a-i+2500,147,205,{isStatic:!0});p.name=p.label="staticOriMEPassK",p.src=scope.path+"/ornaments/d/buffer top b.png";var d=Bodies.rectangle(3737,a-i+2535,160,205,{isStatic:!0});d.name=d.label="staticOriMEPassM",d.src=scope.path+"/ornaments/d/buffer bottom c.png";var g=Bodies.rectangle(3750,a-i+2500,160,205,{isStatic:!0});g.name=g.label="staticOriMEPassN",g.src=scope.path+"/ornaments/d/buffer top c.png";var m=Bodies.rectangle(5267,a-i+2530,160,205,{isStatic:!0});m.name=m.label="staticOriMEPassP",m.src=scope.path+"/ornaments/d/buffer-bridge-bottom-b.png";var u=Bodies.rectangle(5261,a-i+2500,147,205,{isStatic:!0});u.name=u.label="staticOriMEPassQ",u.src=scope.path+"/ornaments/d/buffer top b.png";var f=Composites.stack(862,a-i+2560,18,1,1,1,function(t,e){return(a=Bodies.rectangle(t,e,50,80,{render:{sprite:{texture:scope.path+"/ornaments/d/buffer left bridge.png"}}})).name=a.label="staticOriPassBGBridgeA"+scope.uniqueId(),a.forceGravity=!0,a;var a});Composites.chain(f,.1,0,-.1,0,{stiffness:1}),f.bodies[0].isStatic=!0,f.bodies[17].isStatic=!0,scope.Body.setPosition(f.bodies[0],{x:f.bodies[0].position.x-27,y:f.bodies[0].position.y-39}),scope.Body.setPosition(f.bodies[17],{x:f.bodies[17].position.x+253,y:f.bodies[17].position.y});var v=Composites.stack(2525,a-i+2600,13,1,1,1,function(t,e){return(a=Bodies.rectangle(t,e,50,80,{render:{sprite:{texture:scope.path+"/ornaments/d/buffer left bridge.png"}}})).name=a.label="staticOriPassBGBridgeB"+scope.uniqueId(),a.forceGravity=!0,a;var a});Composites.chain(v,.1,0,-.1,0,{stiffness:1}),v.bodies[0].isStatic=!0,v.bodies[12].isStatic=!0,scope.Body.setPosition(v.bodies[0],{x:v.bodies[0].position.x-27,y:v.bodies[0].position.y-39}),scope.Body.setPosition(v.bodies[12],{x:v.bodies[12].position.x+144,y:v.bodies[12].position.y-40});var b=Composites.stack(3835,a-i+2600,20,1,1,1,function(t,e){return(a=Bodies.rectangle(t,e,50,80,{render:{sprite:{texture:scope.path+"/ornaments/d/buffer left bridge.png"}}})).name=a.label="staticOriPassBGBridgeC"+scope.uniqueId(),a.forceGravity=!0,a;var a});Composites.chain(b,.1,0,-.1,0,{stiffness:1}),b.bodies[0].isStatic=!0,b.bodies[19].isStatic=!0,scope.Body.setPosition(b.bodies[0],{x:b.bodies[0].position.x-27,y:b.bodies[0].position.y-39}),scope.Body.setPosition(b.bodies[19],{x:b.bodies[19].position.x+340,y:b.bodies[19].position.y-40}),obj.createSVGBuffer("/ornaments/d/svg buffer a.svg",t,"staticOriMEA",{x:650,y:a-i+2210}),obj.createSVGBuffer("/ornaments/d/svg buffer b.svg",t,"staticOriMEB",{x:550,y:a-i+2765}),obj.createSVGBuffer("/ornaments/d/svg buffer c.svg",t,"staticOriMEC",{x:1500,y:a-i+2685}),obj.createSVGBuffer("/ornaments/d/svg buffer d.svg",t,"staticOriMED",{x:1610,y:a-i+2480}),obj.createSVGBuffer("/ornaments/d/svg buffer e.svg",t,"staticOriMEE",{x:2980,y:a-i+2695}),obj.createSVGBuffer("/ornaments/d/svg buffer f.svg",t,"staticOriMEF",{x:3055,y:a-i+2500}),obj.createSVGBuffer("/ornaments/d/svg buffer g.svg",t,"staticOriMEG",{x:4409,y:a-i+2696}),obj.createSVGBuffer("/ornaments/d/svg buffer h.svg",t,"staticOriMEH",{x:4645,y:a-i+2496}),obj.createSVGBuffer("/ornaments/d/svg buffer i.svg",t,"staticOriMEI",{x:5194,y:a-i+2188}),obj.createSVGBuffer("/ornaments/d/svg buffer j.svg",t,"staticOriMEJ",{x:5408,y:a-i+2800}),obj.createSVGBuffer("/ornaments/d/svg buffer k.svg",t,"staticOriMEK",{x:5300,y:a-i+1536}),obj.createSVGBuffer("/ornaments/d/svg buffer l.svg",t,"staticOriMEL",{x:4190,y:a-i+1407}),obj.createSVGBuffer("/ornaments/d/svg buffer m.svg",t,"staticOriMEM",{x:3170,y:a-i+1230}),obj.createSVGBuffer("/ornaments/d/svg buffer n.svg",t,"staticOriMEN",{x:2590,y:a-i+1138}),obj.createSVGBuffer("/ornaments/d/svg buffer o.svg",t,"staticOriMEO",{x:790,y:a-i+1198}),obj.createSVGBuffer("/ornaments/d/svg buffer p.svg",t,"staticOriMEP",{x:3820,y:a-i+895}),obj.createSVGBuffer("/ornaments/d/svg buffer q.svg",t,"staticOriMEQ",{x:4950,y:a-i+761}),obj.createBackground(6,"/ornaments/d/",t,6);scope.path;var S=Bodies.rectangle(600,190,10,10,{isStatic:!0});S.name=S.label="staticOriMCPassPathPointA";var x=Bodies.rectangle(800,190,10,10,{isStatic:!0});x.name=x.label="staticOriMCPassPathPointB";var k=Bodies.rectangle(2480,240,10,10,{isStatic:!0});k.name=k.label="staticOriMCPassPathPointC";var y=Bodies.rectangle(3580,240,10,10,{isStatic:!0});y.name=y.label="staticOriMCPassPathPointD";var B=Bodies.rectangle(5380,240,10,10,{isStatic:!0});B.name=B.label="staticOriMCPassPathPointE";var w=[S,x,k,y,B],M=Bodies.rectangle(5300,a-i+2176,129,170,{isStatic:!0});M.src=scope.path+"/ornaments/a/portal b.png",M.name=M.label="staticOriPassTeleportA";var P=Bodies.rectangle(5600,a-i+1576,129,170,{isStatic:!0});P.src=scope.path+"/ornaments/a/portal b.png",P.name=P.label="staticOriPassTeleportB",staticGeometry.createMap({location:t,src:e+"map.png"});var A=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,rangeX:-35,rangeY:225,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticOriMapDDngAPassSpawnB",location:t,targetLocation:"mapDungeonD"}),D=staticGeometry.createPortal({forceGravity:!0,isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,rangeX:-35,rangeY:225,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticOriMapDDngAPassSpawnF",location:t,targetLocation:"mapDungeonH"}),j=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,rangeX:-35,rangeY:160,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticOriPassTeleportA",location:t,spawnTarget:"staticOriPortalTeleportB",forceGravity:!0}),T=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,rangeX:-35,rangeY:160,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticOriPassTeleportB",location:t,spawnTarget:"staticOriPortalTeleportA"}),O=obj.createNPC({isVisible:!0,touch:!0,x:5498,y:a-i+2275,additionalBoundsValue:85,additionalBoundsHeightValue:45,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/earthElementalMageB-left.png",label:"staticOriNpcMapDDngAPassSpawnA"}),C=obj.createPoint({label:"staticOriMapDDngAPassSpawnA",texture:scope.path+"/1px.png",x:3861,y:a-i+1340,target:"help"}),N=obj.createPoint({isVisible:!0,label:"staticOriMapDDngAPassSpawnB",texture:e+"portal b.png",x:811,y:a-i+2183,point:"portal",fixedBounds:65,target:"help"}),q=obj.createPoint({label:"staticOriMapDDngAPassSpawnC",texture:scope.path+"/1px.png",x:2177,y:a-i+1104,target:"help"}),E=obj.createPoint({label:"staticOriMapDDngAPassSpawnD",texture:scope.path+"/1px.png",x:817,y:a-i+1140,target:"help"}),F=obj.createPoint({label:"staticOriMapDDngAPassSpawnE",texture:scope.path+"/1px.png",x:5098,y:a-i+736,target:"help"}),I=obj.createPoint({isVisible:!1,label:"staticOriMapDDngAPassSpawnF",texture:e+"portal b.png",x:5788,y:a-i+610,point:"portal",fixedBounds:65,target:"help"});return scope.staticAllMap.value.mapDDungeonA.content={staticWallOuttermapDDungeonA:obj.createWall(t),staticOriGroupPathPoints:w,staticPortalmapDDungeonA:{portalA:{portalIn:"staticOriPortalmapDDungeonA",portalOut:"staticOriPortalBmapDungeonD"},portalB:{portalIn:"staticOriPortalBmapDDungeonA",portalOut:"staticOriPortalmapDungeonH"}},staticOriPortalmapDDungeonA:A,staticOriPortalBmapDDungeonA:D,staticOriMESpawnA:s,staticOriNpcMapDDngAPassSpawnA:O,staticOriMapDDngAPassSpawnA:C,staticOriMapDDngAPassSpawnB:N,staticOriMapDDngAPassSpawnC:q,staticOriMapDDngAPassSpawnD:E,staticOriMapDDngAPassSpawnE:F,staticOriMapDDngAPassSpawnF:I,staticOriPassTeleportA:M,staticOriPortalTeleportA:j,staticOriPassTeleportB:P,staticOriPortalTeleportB:T,staticOriMESpawnBrigeA:f,staticOriMESpawnBrigeB:v,staticOriMESpawnBrigeC:b,staticOriGroupSVG:[],staticOriMDSpawnGroup:[n,r,o,l,c,h,p,d,g,m,u]},scope.staticAllMap.value.mapDDungeonA.content}(),function(){var t="mapDungeonA",e=scope.path+"/ornaments/e/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(6,"/ornaments/e/",t,6);var s=obj.createPoint({isVisible:!0,label:"staticOriDngAPassSpawnA",texture:e+"portal right.png",x:4409,y:a-i+1912,point:"portal",fixedBounds:65,target:"help"}),n=obj.createPoint({label:"staticOriAPassSpawnB",texture:scope.path+"/1px.png",x:1011,y:a-i+1956,target:"help"}),r=obj.createPoint({label:"staticOriAPassSpawnC",texture:scope.path+"/1px.png",x:1624,y:a-i+977,target:"help"}),o=obj.createPoint({isVisible:!1,label:"staticOriDngAPassSpawnD",texture:e+"portal left.png",x:4989,y:a-i+698,point:"portal",fixedBounds:65,target:"help"}),l=obj.createNPC({isVisible:!0,touch:!0,x:5037,y:a-i+2350,additionalBoundsValue:55,additionalBoundsHeightValue:60,additionalBoundsWidthValue:15,target:"info",texture:scope.path+"/hollowMage-left.png",label:"staticOriNpcDngAPassSpawnA"}),c=obj.createNPC({isVisible:!0,touch:!0,x:3288,y:a-i+490,additionalBoundsValue:5,additionalBoundsHeightValue:95,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/hollowArcherB-left.png",label:"staticOriNpcDngAPassSpawnB"}),h=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngAPassSpawnA",location:"mapDungeonA",targetLocation:"mapDungeonG"}),p=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngAPassSpawnD",location:"mapDungeonA",targetLocation:"mapAADungeonB"}),d=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});d.src=scope.path+"/1px.png",d.name=d.label="staticOriAPassPathPointA";var g=[d];return staticGeometry.createMap({location:t,src:scope.path+"/ornaments/e/map.png"}),scope.staticAllMap.value.mapDungeonA.content={staticWallOuttermapDungeonA:obj.createWall(t),staticPortalmapDungeonA:{portalA:{portalIn:"staticOriPortalmapDungeonA",portalOut:"staticOriPortalBmapDungeonG"},portalB:{portalIn:"staticOriPortalBmapDungeonA",portalOut:"staticOriPortalmapAADungeonB2"}},staticOriPortalmapDungeonA:h,staticOriPortalBmapDungeonA:p,staticOriDngAPassSpawnA:s,staticOriDngAPassSpawnB:n,staticOriDngAPassSpawnC:r,staticOriDngAPassSpawnD:o,staticOriNpcDngAPassSpawnA:l,staticOriNpcDngAPassSpawnB:c,staticOriGroupPathPoints:g,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriAPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(1670,a-420,133,196,{isStatic:!0});t.src=scope.path+"/ornaments/e/treeA.png";var e=Bodies.rectangle(270,a-321,133,196,{isStatic:!0});e.src=scope.path+"/ornaments/e/treeB.png";var s=Bodies.rectangle(1047,a-714,147,274,{isStatic:!0});s.src=scope.path+"/ornaments/e/treeC.png";var n=Bodies.rectangle(397,a-443,143,248,{isStatic:!0});n.src=scope.path+"/ornaments/e/treeD.png";var r=Bodies.rectangle(1346,a-960,166,245,{isStatic:!0});r.src=scope.path+"/ornaments/e/treeE.png";var o=Bodies.rectangle(533,a-1114,145,249,{isStatic:!0});o.src=scope.path+"/ornaments/e/treeF.png";var l=Bodies.rectangle(998,a-1331,117,167,{isStatic:!0});l.src=scope.path+"/ornaments/e/treeG.png";var c=Bodies.rectangle(2701,a-409,169,291,{isStatic:!0});c.src=scope.path+"/ornaments/e/treeH.png";var h=Bodies.rectangle(2867,a-1175,147,274,{isStatic:!0});h.src=scope.path+"/ornaments/e/treeC.png";var p=Bodies.rectangle(2151,a-1005,169,291,{isStatic:!0});p.src=scope.path+"/ornaments/e/treeH.png";var d=Bodies.rectangle(216,a-1392,133,196,{isStatic:!0});d.src=scope.path+"/ornaments/e/treeB.png";var g=Bodies.rectangle(594,a-1749,117,167,{isStatic:!0});g.src=scope.path+"/ornaments/e/treeG.png";var m=Bodies.rectangle(579,a-2086,133,196,{isStatic:!0});m.src=scope.path+"/ornaments/e/treeB.png";var u=Bodies.rectangle(686,a-2178,145,249,{isStatic:!0});u.src=scope.path+"/ornaments/e/treeF.png";var f=Bodies.rectangle(1074,a-2856,147,274,{isStatic:!0});f.src=scope.path+"/ornaments/e/treeC.png";var v=Bodies.rectangle(1541,a-2250,117,167,{isStatic:!0});v.src=scope.path+"/ornaments/e/treeG.png";var b=Bodies.rectangle(1406,a-1743,135,135,{isStatic:!0});b.src=scope.path+"/ornaments/e/stone.png";var S=Bodies.rectangle(2172,a-i+1170,143,248,{isStatic:!0});S.src=scope.path+"/ornaments/e/treeD.png";var x=Bodies.rectangle(2073,a-i+1145,133,196,{isStatic:!0});x.src=scope.path+"/ornaments/e/treeB.png";var k=Bodies.rectangle(2307,a-i+712,143,248,{isStatic:!0});k.src=scope.path+"/ornaments/e/treeD.png";var y=Bodies.rectangle(2955,a-i+976,166,245,{isStatic:!0});y.src=scope.path+"/ornaments/e/treeE.png";for(var B=[t,e,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y],w=0,M=B.length;w<M;w++)B[w].name=B[w].label="staticOriAPass"+scope.uniqueId(),B[w].FixedPosition={x:B[w].position.x,y:B[w].position.y-a},B[w].fixedBounds||(B[w].fixedBounds=25);return B}()}),obj.createLayer("staticOriAPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=Bodies.rectangle(362,a-744,166,245,{isStatic:!0});t.src=scope.path+"/ornaments/e/treeE.png";var e=Bodies.rectangle(739,a-230,133,196,{isStatic:!0});e.src=scope.path+"/ornaments/e/treeA.png";var i=Bodies.rectangle(1073,a-2749,166,244,{isStatic:!0});i.src=scope.path+"/ornaments/e/treeI.png";var s=Bodies.rectangle(460,a-2569,135,135,{isStatic:!0});s.src=scope.path+"/ornaments/e/stone.png";var n=Bodies.rectangle(1476,a-2250,147,274,{isStatic:!0});n.src=scope.path+"/ornaments/e/treeC.png";var r=Bodies.rectangle(760,a-2066,169,291,{isStatic:!0});r.src=scope.path+"/ornaments/e/treeH.png";var o=Bodies.rectangle(530,a-1533,133,196,{isStatic:!0});o.src=scope.path+"/ornaments/e/treeA.png";var l=Bodies.rectangle(1310,a-1464,169,291,{isStatic:!0});l.src=scope.path+"/ornaments/e/treeH.png";var c=Bodies.rectangle(1005,a-915,169,291,{isStatic:!0});c.src=scope.path+"/ornaments/e/treeH.png";var h=Bodies.rectangle(1722,a-1099,147,274,{isStatic:!0});h.src=scope.path+"/ornaments/e/treeC.png";var p=Bodies.rectangle(2559,a-993,166,244,{isStatic:!0});p.src=scope.path+"/ornaments/e/treeI.png";var d=Bodies.rectangle(2330,a-1562,147,274,{isStatic:!0});d.src=scope.path+"/ornaments/e/treeC.png";var g=Bodies.rectangle(2215,a-439,133,196,{isStatic:!0});g.src=scope.path+"/ornaments/e/treeA.png";var m=Bodies.rectangle(1555,a-324,169,291,{isStatic:!0});m.src=scope.path+"/ornaments/e/treeH.png";var u=Bodies.rectangle(2408,a-1867,117,167,{isStatic:!0});u.src=scope.path+"/ornaments/e/treeG.png";var f=Bodies.rectangle(2392,a-2204,133,196,{isStatic:!0});f.src=scope.path+"/ornaments/e/treeB.png";var v=Bodies.rectangle(2499,a-2296,145,249,{isStatic:!0});v.src=scope.path+"/ornaments/e/treeF.png";var b=Bodies.rectangle(2024,a-2761,169,291,{isStatic:!0});b.src=scope.path+"/ornaments/e/treeH.png";for(var S=[t,e,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b],x=0,k=S.length;x<k;x++)S[x].name=S[x].label="staticOriAPass"+scope.uniqueId(),S[x].FixedPosition={x:S[x].position.x,y:S[x].position.y-a},S[x].fixedBounds||(S[x].fixedBounds=25);return S}()})]},scope.staticAllMap.value.mapDungeonA.content}(),function(){var t="mapDungeonB",e=scope.path+"/ornaments/f/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(6,"/ornaments/f/",t,6);var s=obj.createPoint({label:"staticOriDngBPassSpawnA",texture:scope.path+"/1px.png",x:5135,y:a-i+601,target:"help"}),n=obj.createPoint({isVisible:!0,label:"staticOriDngCPassSpawnB",texture:e+"portal right.png",x:3138,y:a-i+1322,point:"portal",fixedBounds:65,target:"help"}),r=obj.createPoint({label:"staticOriDngBPassSpawnC",texture:scope.path+"/1px.png",x:1055,y:a-i+2395,target:"help"}),o=obj.createPoint({label:"staticOriDngBPassSpawnD",texture:scope.path+"/1px.png",x:1645,y:a-i+1286,target:"help"}),l=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});l.src=scope.path+"/1px.png",l.name=l.label="staticOriBPassPathPointA";var c=[l],h=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngBPassSpawnB",location:"mapDungeonB",targetLocation:"mapDungeonC"});return staticGeometry.createMap({location:t,src:scope.path+"/ornaments/f/map.png"}),scope.staticAllMap.value.mapDungeonB.content={staticWallOuttermapDungeonB:obj.createWall(t),staticPortalmapDungeonB:{portalA:{portalIn:"staticOriPortalmapDungeonB",portalOut:"staticOriPortalBmapDungeonC"}},staticOriPortalmapDungeonB:h,staticOriDngBPassSpawnA:s,staticOriDngBPassSpawnB:n,staticOriDngBPassSpawnC:r,staticOriDngBPassSpawnD:o,staticOriGroupPathPoints:c,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriBPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(450,a-i+2460,176,261,{isStatic:!0});t.src=scope.path+"/ornaments/f/treeA.png";var e=Bodies.rectangle(1073,a-i+2779,131,195,{isStatic:!0});e.src=scope.path+"/ornaments/f/treeB.png";var s=Bodies.rectangle(730,a-i+2003,170,242,{isStatic:!0});s.src=scope.path+"/ornaments/f/treeC.png";var n=Bodies.rectangle(1423,a-i+2079,145,271,{isStatic:!0});n.src=scope.path+"/ornaments/f/treeD.png";var r=Bodies.rectangle(2091,a-i+2178,164,242,{isStatic:!0});r.src=scope.path+"/ornaments/f/treeE.png";var o=Bodies.rectangle(1944,a-i+1738,137,226,{isStatic:!0});o.src=scope.path+"/ornaments/f/treeF.png";var l=Bodies.rectangle(1084,a-i+1690,131,194,{isStatic:!0});l.src=scope.path+"/ornaments/f/treeG.png";var c=Bodies.rectangle(2796,a-i+1812,176,261,{isStatic:!0});c.src=scope.path+"/ornaments/f/treeA.png";var h=Bodies.rectangle(1490,a-i+2426,104,94,{isStatic:!0});h.src=scope.path+"/ornaments/f/ruinA.png";var p=Bodies.rectangle(1630,a-i+2368,175,150,{isStatic:!0});p.src=scope.path+"/ornaments/f/ruinB.png";var d=Bodies.rectangle(1807,a-i+2403,105,97,{isStatic:!0});d.src=scope.path+"/ornaments/f/ruinC.png";var g=Bodies.rectangle(2045,a-i+2746,176,261,{isStatic:!0});g.src=scope.path+"/ornaments/f/treeA.png";var m=Bodies.rectangle(2867,a-i+2378,137,226,{isStatic:!0});m.src=scope.path+"/ornaments/f/treeF.png";var u=Bodies.rectangle(1994,a-i+1280,105,97,{isStatic:!0});u.src=scope.path+"/ornaments/f/ruinC.png";var f=Bodies.rectangle(1107,a-i+1180,137,226,{isStatic:!0});f.src=scope.path+"/ornaments/f/treeF.png";var v=Bodies.rectangle(448,a-i+1137,176,261,{isStatic:!0});v.src=scope.path+"/ornaments/f/treeA.png";var b=Bodies.rectangle(1625,a-i+806,140,193,{isStatic:!0});b.src=scope.path+"/ornaments/f/treeH.png";var S=Bodies.rectangle(306,a-i+193,178,261,{isStatic:!0});S.src=scope.path+"/ornaments/f/treeI.png";var x=Bodies.rectangle(685,a-i+578,137,226,{isStatic:!0});x.src=scope.path+"/ornaments/f/treeF.png";var k=Bodies.rectangle(1885,a-i+280,178,261,{isStatic:!0});k.src=scope.path+"/ornaments/f/treeI.png";var y=Bodies.rectangle(2739,a-i+345,175,150,{isStatic:!0});y.src=scope.path+"/ornaments/f/ruinD.png";var B=Bodies.rectangle(2893,a-i+956,178,261,{isStatic:!0});B.src=scope.path+"/ornaments/f/treeI.png";var w=Bodies.rectangle(2879,a-i+383,105,97,{isStatic:!0});w.src=scope.path+"/ornaments/f/ruinC.png";for(var M=[t,e,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w],P=0,A=M.length;P<A;P++)M[P].name=M[P].label="staticOriBPass"+scope.uniqueId(),M[P].FixedPosition={x:M[P].position.x,y:M[P].position.y-a},M[P].fixedBounds||(M[P].fixedBounds=25);return M}()}),obj.createLayer("staticOriBPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=Bodies.rectangle(513,a-1536,145,271,{isStatic:!0});t.src=scope.path+"/ornaments/f/treeD.png";var e=Bodies.rectangle(713,a-1057,164,242,{isStatic:!0});e.src=scope.path+"/ornaments/f/treeE.png";var i=Bodies.rectangle(1164,a-1312,104,94,{isStatic:!0});i.src=scope.path+"/ornaments/f/ruinA.png";var s=Bodies.rectangle(1341,a-1342,175,150,{isStatic:!0});s.src=scope.path+"/ornaments/f/ruinD.png";var n=Bodies.rectangle(1481,a-1284,105,97,{isStatic:!0});n.src=scope.path+"/ornaments/f/ruinC.png";var r=Bodies.rectangle(1376,a-512,176,261,{isStatic:!0});r.src=scope.path+"/ornaments/f/treeA.png";var o=Bodies.rectangle(2507,a-546,178,261,{isStatic:!0});o.src=scope.path+"/ornaments/f/treeI.png";var l=Bodies.rectangle(2228,a-1014,164,242,{isStatic:!0});l.src=scope.path+"/ornaments/f/treeE.png";var c=Bodies.rectangle(2726,a-1293,141,194,{isStatic:!0});c.src=scope.path+"/ornaments/f/treeJ.png";var h=Bodies.rectangle(2302,a-1891,137,226,{isStatic:!0});h.src=scope.path+"/ornaments/f/treeK.png";var p=Bodies.rectangle(1451,a-2197,164,242,{isStatic:!0});p.src=scope.path+"/ornaments/f/treeE.png";var d=Bodies.rectangle(659,a-2743,178,261,{isStatic:!0});d.src=scope.path+"/ornaments/f/treeI.png";var g=Bodies.rectangle(1051,a-2569,165,212,{isStatic:!0});g.src=scope.path+"/ornaments/f/treeB.png";var m=Bodies.rectangle(1675,a-2861,178,261,{isStatic:!0});m.src=scope.path+"/ornaments/f/treeI.png";var u=Bodies.rectangle(2173,a-2551,104,94,{isStatic:!0});u.src=scope.path+"/ornaments/f/ruinA.png";var f=Bodies.rectangle(2313,a-2609,175,150,{isStatic:!0});f.src=scope.path+"/ornaments/f/ruinB.png";var v=Bodies.rectangle(2498,a-2600,175,150,{isStatic:!0});v.src=scope.path+"/ornaments/f/ruinD.png";var b=Bodies.rectangle(2638,a-2541,105,97,{isStatic:!0});b.src=scope.path+"/ornaments/f/ruinC.png";for(var S=[t,e,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b],x=0,k=S.length;x<k;x++)S[x].name=S[x].label="staticOriBPass"+scope.uniqueId(),S[x].FixedPosition={x:S[x].position.x,y:S[x].position.y-a},S[x].fixedBounds||(S[x].fixedBounds=25);return S}()})]},scope.staticAllMap.value.mapDungeonB.content}(),function(){var t="mapDungeonC",e=scope.path+"/ornaments/g/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(6,"/ornaments/g/",t,6);var s=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});s.src=scope.path+"/1px.png",s.name=s.label="staticOriCPassPathPointA";var n=[s],r=obj.createPoint({label:"staticOriDngCPassSpawnA",texture:scope.path+"/1px.png",x:1228,y:a-i+972,target:"help"}),o=obj.createPoint({label:"staticOriDngCPassSpawnB",texture:scope.path+"/1px.png",x:672,y:a-i+2555,target:"help"}),l=obj.createPoint({isVisible:!0,label:"staticOriDngCPassSpawnC",texture:e+"portal right.png",x:2610,y:a-i+2149,point:"portal",fixedBounds:65,target:"help"}),c=obj.createPoint({isVisible:!1,label:"staticOriDngCPassSpawnD",texture:e+"portal right.png",x:5026,y:a-i+2280,point:"portal",fixedBounds:65,target:"help"}),h=obj.createPoint({label:"staticOriDngCPassSpawnE",texture:scope.path+"/1px.png",x:3542,y:a-i+1936,target:"help"}),p=obj.createPoint({label:"staticOriDngCPassSpawnF",texture:scope.path+"/1px.png",x:5119,y:a-i+1042,target:"help"}),d=obj.createNPC({isVisible:!0,touch:!0,x:3640,y:a+-i+692,additionalBoundsValue:50,additionalBoundsWidthValue:0,additionalBoundsHeightValue:65,target:"info",texture:scope.path+"/goblinMage-left.png",label:"staticOriNpcDngCPassSpawnA"}),g=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngCPassSpawnC",location:"mapDungeonC",targetLocation:"mapDungeonG"}),m=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngCPassSpawnD",location:"mapDungeonC",targetLocation:"mapDungeonB"});return staticGeometry.createMap({location:t,src:scope.path+"/ornaments/g/map.png"}),scope.staticAllMap.value.mapDungeonC.content={staticWallOuttermapDungeonC:obj.createWall(t),staticPortalmapDungeonC:{portalA:{portalIn:"staticOriPortalmapDungeonC",portalOut:"staticOriPortalmapDungeonG"},portalB:{portalIn:"staticOriPortalBmapDungeonC",portalOut:"staticOriPortalmapDungeonB"}},staticOriPortalmapDungeonC:g,staticOriPortalBmapDungeonC:m,staticOriDngCPassSpawnA:r,staticOriDngCPassSpawnB:o,staticOriDngCPassSpawnC:l,staticOriDngCPassSpawnD:c,staticOriDngCPassSpawnE:h,staticOriDngCPassSpawnF:p,staticOriNpcDngCPassSpawnA:d,staticOriGroupPathPoints:n,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriCPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(672,a-i+2555,119,188,{isStatic:!0});t.src=scope.path+"/ornaments/g/treeA.png";var e=Bodies.rectangle(348,a-i+2004,120,189,{isStatic:!0});e.src=scope.path+"/ornaments/g/treeB.png";var s=Bodies.rectangle(1150,a-i+2192,116,181,{isStatic:!0});s.src=scope.path+"/ornaments/g/treeC.png";var n=Bodies.rectangle(1235,a-i+2767,182,209,{isStatic:!0});n.src=scope.path+"/ornaments/g/stoneA.png";var r=Bodies.rectangle(1150,a-i+2192,116,190,{isStatic:!0});r.src=scope.path+"/ornaments/g/treeE.png";var o=Bodies.rectangle(1091,a-i+2347,70,99,{isStatic:!0});o.src=scope.path+"/ornaments/g/obA.png";var l=Bodies.rectangle(1524,a-i+2322,120,209,{isStatic:!0});l.src=scope.path+"/ornaments/g/treeB.png";var c=Bodies.rectangle(1595,a-i+2331,79,144,{isStatic:!0});c.src=scope.path+"/ornaments/g/treeD.png";var h=Bodies.rectangle(196,a-i+1569,92,155,{isStatic:!0});h.src=scope.path+"/ornaments/g/treeF.png";var p=Bodies.rectangle(1088,a-i+1682,98,92,{isStatic:!0});p.src=scope.path+"/ornaments/g/obB.png";var d=Bodies.rectangle(1285,a-i+1845,136,177,{isStatic:!0});d.src=scope.path+"/ornaments/g/stoneB.png";var g=Bodies.rectangle(1558,a-i+1874,113,94,{isStatic:!0});g.src=scope.path+"/ornaments/g/obC.png";var m=Bodies.rectangle(1690,a-i+1593,152,267,{isStatic:!0});m.src=scope.path+"/ornaments/g/treeG.png";var u=Bodies.rectangle(2121,a-i+1775,98,91,{isStatic:!0});u.src=scope.path+"/ornaments/g/obD.png";var f=Bodies.rectangle(2610,a-i+1949,98,91,{isStatic:!0});f.src=scope.path+"/ornaments/g/obE.png";var v=Bodies.rectangle(2155,a-i+2382,70,99,{isStatic:!0});v.src=scope.path+"/ornaments/g/obF.png";var b=Bodies.rectangle(2141,a-i+1969,297,204,{isStatic:!0});b.src=scope.path+"/ornaments/g/tentA.png";var S=Bodies.rectangle(2909,a-i+1930,103,88,{isStatic:!0});S.src=scope.path+"/ornaments/g/rootA.png",S.fixedBounds=5;var x=Bodies.rectangle(2911,a-i+2342,113,94,{isStatic:!0});x.src=scope.path+"/ornaments/g/obG.png";var k=Bodies.rectangle(2738,a-i+2495,292,219,{isStatic:!0});k.src=scope.path+"/ornaments/g/tentB.png",k.fixedBounds=45;var y=Bodies.rectangle(2488,a-i+2611,70,99,{isStatic:!0});y.src=scope.path+"/ornaments/g/obA.png";var B=Bodies.rectangle(2574,a-i+2911,70,99,{isStatic:!0});B.src=scope.path+"/ornaments/g/obA.png";var w=Bodies.rectangle(2365,a-i+2614,79,153,{isStatic:!0});w.src=scope.path+"/ornaments/g/treeH.png";var M=Bodies.rectangle(302,a-i+206,92,155,{isStatic:!0});M.src=scope.path+"/ornaments/g/treeF.png";var P=Bodies.rectangle(346,a-i+522,152,267,{isStatic:!0});P.src=scope.path+"/ornaments/g/treeG.png";var A=Bodies.rectangle(454,a-i+641,120,189,{isStatic:!0});A.src=scope.path+"/ornaments/g/treeB.png";var D=Bodies.rectangle(558,a-i+1047,119,188,{isStatic:!0});D.src=scope.path+"/ornaments/g/treeA.png";var j=Bodies.rectangle(1060,a-i+184,116,181,{isStatic:!0});j.src=scope.path+"/ornaments/g/treeC.png";var T=Bodies.rectangle(1031,a-i+1014,152,267,{isStatic:!0});T.src=scope.path+"/ornaments/g/treeG.png";var O=Bodies.rectangle(1228,a-i+972,79,124,{isStatic:!0});O.src=scope.path+"/ornaments/g/treeD.png";var C=Bodies.rectangle(1687,a-i+539,79,153,{isStatic:!0});C.src=scope.path+"/ornaments/g/treeH.png";var N=Bodies.rectangle(1735,a-i+1156,70,99,{isStatic:!0});N.src=scope.path+"/ornaments/g/obA.png";var q=Bodies.rectangle(2004,a-i+278,152,267,{isStatic:!0});q.src=scope.path+"/ornaments/g/treeG.png";var E=Bodies.rectangle(2085,a-i+718,120,189,{isStatic:!0});E.src=scope.path+"/ornaments/g/treeB.png";var F=Bodies.rectangle(2246,a-i+1068,113,94,{isStatic:!0});F.src=scope.path+"/ornaments/g/obH.png";var I=Bodies.rectangle(2358,a-i+1062,117,204,{isStatic:!0});I.src=scope.path+"/ornaments/g/treeI.png";var R=Bodies.rectangle(2466,a-i+1027,128,222,{isStatic:!0});R.src=scope.path+"/ornaments/g/treeJ.png";var L=Bodies.rectangle(2613,a-i+1214,70,99,{isStatic:!0});L.src=scope.path+"/ornaments/g/obF.png";var G=Bodies.rectangle(2785,a-i+624,70,99,{isStatic:!0});G.src=scope.path+"/ornaments/g/obA.png";for(var H=[t,e,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G],W=0,Y=H.length;W<Y;W++)H[W].name=H[W].label="staticOriCPass"+scope.uniqueId(),H[W].FixedPosition={x:H[W].position.x,y:H[W].position.y-a},H[W].fixedBounds||(H[W].fixedBounds=25);return H}()}),obj.createLayer("staticOriCPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=Bodies.rectangle(143,a-2598,116,181,{isStatic:!0});t.src=scope.path+"/ornaments/g/treeC.png";var e=Bodies.rectangle(330,a-1837,103,88,{isStatic:!0});e.src=scope.path+"/ornaments/g/rootB.png";var i=Bodies.rectangle(448,a-2322,98,91,{isStatic:!0});i.src=scope.path+"/ornaments/g/obD.png";var s=Bodies.rectangle(739,a-2478,292,219,{isStatic:!0});s.src=scope.path+"/ornaments/g/tentC.png",s.fixedBounds=45;var n=Bodies.rectangle(801,a-2839,79,153,{isStatic:!0});n.src=scope.path+"/ornaments/g/treeH.png";var r=Bodies.rectangle(715,a-1853,105,91,{isStatic:!0});r.src=scope.path+"/ornaments/g/obI.png";var o=Bodies.rectangle(1192,a-1817,296,204,{isStatic:!0});o.src=scope.path+"/ornaments/g/tentD.png";var l=Bodies.rectangle(1192,a-2297,98,92,{isStatic:!0});l.src=scope.path+"/ornaments/g/obB.png";var c=Bodies.rectangle(1180,a-2454,120,189,{isStatic:!0});c.src=scope.path+"/ornaments/g/treeB.png";var h=Bodies.rectangle(1643,a-2192,157,267,{isStatic:!0});h.src=scope.path+"/ornaments/g/treeG.png";var p=Bodies.rectangle(1906,a-1904,113,94,{isStatic:!0});p.src=scope.path+"/ornaments/g/obG.png";var d=Bodies.rectangle(2653,a-1943,116,181,{isStatic:!0});d.src=scope.path+"/ornaments/g/treeC.png";var g=Bodies.rectangle(2520,a-2381,116,181,{isStatic:!0});g.src=scope.path+"/ornaments/g/treeC.png";var m=Bodies.rectangle(2628,a-2500,157,267,{isStatic:!0});m.src=scope.path+"/ornaments/g/treeG.png";var u=Bodies.rectangle(2672,a-2819,95,155,{isStatic:!0});u.src=scope.path+"/ornaments/g/treeK.png";var f=Bodies.rectangle(422,a-1443,113,94,{isStatic:!0});f.src=scope.path+"/ornaments/g/obC.png";var v=Bodies.rectangle(595,a-1290,292,219,{isStatic:!0});v.src=scope.path+"/ornaments/g/tentC.png",v.fixedBounds=45;var b=Bodies.rectangle(401,a-1029,105,131,{isStatic:!0});b.src=scope.path+"/ornaments/g/obJ.png";var S=Bodies.rectangle(760,a-874,70,99,{isStatic:!0});S.src=scope.path+"/ornaments/g/obF.png";var x=Bodies.rectangle(968,a-1171,79,153,{isStatic:!0});x.src=scope.path+"/ornaments/g/treeL.png";var k=Bodies.rectangle(1179,a-1403,70,99,{isStatic:!0});k.src=scope.path+"/ornaments/g/obA.png";var y=Bodies.rectangle(1532,a-1490,79,124,{isStatic:!0});y.src=scope.path+"/ornaments/g/treeM.png";var B=Bodies.rectangle(1913,a-1234,119,188,{isStatic:!0});B.src=scope.path+"/ornaments/g/treeA.png";var w=Bodies.rectangle(1920,a-924,70,99,{isStatic:!0});w.src=scope.path+"/ornaments/g/obF.png";var M=Bodies.rectangle(2437,a-988,120,189,{isStatic:!0});M.src=scope.path+"/ornaments/g/treeB.png";var P=Bodies.rectangle(2291,a-1421,92,155,{isStatic:!0});P.src=scope.path+"/ornaments/g/treeF.png";var A=Bodies.rectangle(158,a-401,105,131,{isStatic:!0});A.src=scope.path+"/ornaments/g/obK.png";var D=Bodies.rectangle(665,a-557,297,204,{isStatic:!0});D.src=scope.path+"/ornaments/g/tentA.png";var j=Bodies.rectangle(633,a-208,128,222,{isStatic:!0});j.src=scope.path+"/ornaments/g/treeJ.png";var T=Bodies.rectangle(741,a-183,117,204,{isStatic:!0});T.src=scope.path+"/ornaments/g/treeI.png";var O=Bodies.rectangle(872,a-186,105,131,{isStatic:!0});O.src=scope.path+"/ornaments/g/obJ.png";var C=Bodies.rectangle(1126,a-650,70,99,{isStatic:!0});C.src=scope.path+"/ornaments/g/obA.png";var N=Bodies.rectangle(1569,a-520,292,219,{isStatic:!0});N.src=scope.path+"/ornaments/g/tentC.png",N.fixedBounds=45;var q=Bodies.rectangle(1734,a-84,70,99,{isStatic:!0});q.src=scope.path+"/ornaments/g/obF.png";var E=Bodies.rectangle(1943,a-381,79,153,{isStatic:!0});E.src=scope.path+"/ornaments/g/treeL.png";var F=Bodies.rectangle(2204,a-538,113,94,{isStatic:!0});F.src=scope.path+"/ornaments/g/obG.png";var I=Bodies.rectangle(2644,a-278,70,99,{isStatic:!0});I.src=scope.path+"/ornaments/g/obF.png";for(var R=[t,e,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I],L=0,G=R.length;L<G;L++)R[L].name=R[L].label="staticOriCPass"+scope.uniqueId(),R[L].FixedPosition={x:R[L].position.x,y:R[L].position.y-a},R[L].fixedBounds||(R[L].fixedBounds=25);return R}()})]},scope.staticAllMap.value.mapDungeonC.content}(),function(){var t="mapDungeonD",e=scope.path+"/ornaments/h/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(6,"/ornaments/h/",t,6);var s=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});s.src=scope.path+"/1px.png",s.name=s.label="staticOriDPassPathPointA";var n=[s],r=obj.createPoint({isVisible:!0,label:"staticOriDngDPassSpawnA",texture:e+"portal right.png",x:760,y:a-i+706,point:"portal",fixedBounds:65,target:"help"}),o=obj.createPoint({label:"staticOriDngDPassSpawnB",texture:scope.path+"/1px.png",x:992,y:a-i+2234,target:"help"}),l=obj.createPoint({label:"staticOriDngDPassSpawnC",texture:scope.path+"/1px.png",x:1937,y:a-i+2148,target:"help"}),c=obj.createPoint({label:"staticOriDngDPassSpawnD",texture:scope.path+"/1px.png",x:2422,y:a-i+793,target:"help"}),h=obj.createPoint({label:"staticOriDngDPassSpawnE",texture:scope.path+"/1px.png",x:3268,y:a-i+2251,target:"help"}),p=obj.createPoint({label:"staticOriDngDPassSpawnF",texture:scope.path+"/1px.png",x:4828,y:a-i+801,target:"help"}),d=obj.createPoint({label:"staticOriDngDPassSpawnF",texture:scope.path+"/1px.png",x:5160,y:a-i+1886,target:"help"}),g=obj.createPoint({isVisible:!1,label:"staticOriDngDPassSpawnH",texture:e+"portal left.png",x:5245,y:a-i+1117,point:"portal",fixedBounds:65,target:"help"}),m=obj.createNPC({isVisible:!1,touch:!0,x:1004,y:a+-i+674,additionalBoundsValue:70,additionalBoundsHeightValue:45,additionalBoundsWidthValue:-10,target:"info",texture:scope.path+"/humanArcher-right.png",label:"staticOriNpcDngDPassSpawnA"}),u=obj.createNPC({isVisible:!1,touch:!0,x:4505,y:a+-i+2113,additionalBoundsValue:80,additionalBoundsHeightValue:-10,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanArmored-right.png",label:"staticOriNpcDngDPassSpawnB"}),f=obj.createNPC({isVisible:!1,touch:!1,x:4670,y:a+-i+2192,additionalBoundsValue:85,additionalBoundsHeightValue:45,additionalBoundsWidthValue:25,target:"info",texture:scope.path+"/elfMage-left.png",label:"staticOriNpcDngDPassSpawnC"}),v=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngDPassSpawnA",location:"mapDungeonD",targetLocation:"mapAADungeonA"}),b=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngDPassSpawnH",location:"mapDungeonD",targetLocation:"mapDDungeonA"});return staticGeometry.createMap({location:t,src:e+"map.png"}),scope.staticAllMap.value.mapDungeonD.content={staticWallOuttermapDungeonD:obj.createWall(t),staticPortalmapDungeonD:{portalA:{portalIn:"staticOriPortalmapDungeonD",portalOut:"staticOriPortalBmapAADungeonA"},portalB:{portalIn:"staticOriPortalBmapDungeonD",portalOut:"staticOriPortalmapDDungeonA"}},staticOriPortalmapDungeonD:v,staticOriPortalBmapDungeonD:b,staticOriDngDPassSpawnA:r,staticOriDngDPassSpawnB:o,staticOriDngDPassSpawnC:l,staticOriDngDPassSpawnD:c,staticOriDngDPassSpawnE:h,staticOriDngDPassSpawnF:p,staticOriDngDPassSpawnG:d,staticOriDngDPassSpawnH:g,staticOriNpcDngDPassSpawnA:m,staticOriNpcDngDPassSpawnB:u,staticOriNpcDngDPassSpawnC:f,staticOriGroupPathPoints:n,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriDPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(217,a-i+2869,107,133,{isStatic:!0});t.src=e+"obA.png";var s=Bodies.rectangle(171,a-i+2272,115,95,{isStatic:!0});s.src=e+"obB.png";var n=Bodies.rectangle(502,a-i+2334,203,274,{isStatic:!0});n.src=e+"houseA.png",n.fixedBounds=0;var r=Bodies.rectangle(624,a-i+2562,195,106,{isStatic:!0});r.src=e+"ruinA.png";var o=Bodies.rectangle(889,a-i+2862,71,100,{isStatic:!0});o.src=e+"obC.png";var l=Bodies.rectangle(1020,a-i+2503,155,272,{isStatic:!0});l.src=e+"treeA.png";var c=Bodies.rectangle(1200,a-i+2847,71,101,{isStatic:!0});c.src=e+"obD.png";var h=Bodies.rectangle(1174,a-i+2403,99,92,{isStatic:!0});h.src=e+"obE.png";var p=Bodies.rectangle(1368,a-i+2288,291,410,{isStatic:!0});p.src=e+"houseB.png";var d=Bodies.rectangle(1693,a-i+2861,107,133,{isStatic:!0});d.src=e+"obF.png";var g=Bodies.rectangle(1871,a-i+2446,71,101,{isStatic:!0});g.src=e+"obD.png";var m=Bodies.rectangle(2383,a-i+2532,117,204,{isStatic:!0});m.src=e+"treeB.png";var u=Bodies.rectangle(2485,a-i+2487,155,272,{isStatic:!0});u.src=e+"treeA.png";var f=Bodies.rectangle(2820,a-i+2314,224,274,{isStatic:!0});f.src=e+"houseC.png",f.fixedBounds=0;var v=Bodies.rectangle(2429,a-i+2010,291,410,{isStatic:!0});v.src=e+"houseD.png";var b=Bodies.rectangle(104,a-i+1912,71,101,{isStatic:!0});b.src=e+"obD.png";var S=Bodies.rectangle(350,a-i+2011,155,272,{isStatic:!0});S.src=e+"treeA.png";var x=Bodies.rectangle(299,a-i+1587,203,274,{isStatic:!0});x.src=e+"houseA.png",x.fixedBounds=0;var k=Bodies.rectangle(781,a-i+1831,136,155,{isStatic:!0});k.src=e+"obG.png";var y=Bodies.rectangle(787,a-i+1493,128,222,{isStatic:!0});y.src=e+"treeC.png";var B=Bodies.rectangle(844,a-i+1557,127,204,{isStatic:!0});B.src=e+"treeB.png";var w=Bodies.rectangle(946,a-i+1512,155,272,{isStatic:!0});w.src=e+"treeA.png";var M=Bodies.rectangle(978,a-i+1425,107,133,{isStatic:!0});M.src=e+"obA.png";var P=Bodies.rectangle(1317,a-i+1709,224,274,{isStatic:!0});P.src=e+"houseC.png",P.fixedBounds=0;var A=Bodies.rectangle(1476,a-i+1937,65,155,{isStatic:!0});A.src=e+"em.png",A.fixedBounds=0;var D=Bodies.rectangle(1474,a-i+1580,99,92,{isStatic:!0});D.src=e+"obH.png";var j=Bodies.rectangle(1471,a-i+1411,71,100,{isStatic:!0});j.src=e+"obC.png";var T=Bodies.rectangle(1782,a-i+1426,71,100,{isStatic:!0});T.src=e+"obD.png";var O=Bodies.rectangle(1852,a-i+1827,71,100,{isStatic:!0});O.src=e+"obC.png";var C=Bodies.rectangle(2003,a-i+1764,155,272,{isStatic:!0});C.src=e+"treeA.png";var N=Bodies.rectangle(2259,a-i+1717,107,133,{isStatic:!0});N.src=e+"obA.png";var q=Bodies.rectangle(2454,a-i+1433,107,133,{isStatic:!0});q.src=e+"obF.png";var E=Bodies.rectangle(2635,a-i+1363,107,133,{isStatic:!0});E.src=e+"obA.png";var F=Bodies.rectangle(175,a-i+1099,155,272,{isStatic:!0});F.src=e+"treeA.png";var I=Bodies.rectangle(242,a-i+574,291,410,{isStatic:!0});I.src=e+"houseB.png";var R=Bodies.rectangle(412,a-i+281,107,133,{isStatic:!0});R.src=e+"obF.png";var L=Bodies.rectangle(668,a-i+328,145,272,{isStatic:!0});L.src=e+"treeA.png";var G=Bodies.rectangle(800,a-i+1010,71,100,{isStatic:!0});G.src=e+"obC.png";var H=Bodies.rectangle(1303,a-i+852,281,410,{isStatic:!0});H.src=e+"houseD.png";var W=Bodies.rectangle(1497,a-i+967,99,92,{isStatic:!0});W.src=e+"obH.png";var Y=Bodies.rectangle(1651,a-i+1057,155,272,{isStatic:!0});Y.src=e+"treeA.png";var V=Bodies.rectangle(1197,a-i+144,99,92,{isStatic:!0});V.src=e+"obE.png";var X=Bodies.rectangle(1354,a-i+273,214,274,{isStatic:!0});X.src=e+"houseE.png";var _=Bodies.rectangle(1727,a-i+125,155,272,{isStatic:!0});_.src=e+"treeA.png";var U=Bodies.rectangle(1829,a-i+160,117,204,{isStatic:!0});U.src=e+"treeB.png";var z=Bodies.rectangle(1886,a-i+106,128,222,{isStatic:!0});z.src=e+"treeC.png";var Q=Bodies.rectangle(1891,a-i+395,136,155,{isStatic:!0});Q.src=e+"obJ.png";var J=Bodies.rectangle(2048,a-i+1119,136,86,{isStatic:!0});J.src=e+"ruinB.png";var K=Bodies.rectangle(2170,a-i+898,203,274,{isStatic:!0});K.src=e+"houseF.png";var $=Bodies.rectangle(2321,a-i+575,155,272,{isStatic:!0});$.src=e+"treeA.png";var Z=Bodies.rectangle(2373,a-i+151,203,274,{isStatic:!0});Z.src=e+"houseF.png";var tt=Bodies.rectangle(2567,a-i+476,71,100,{isStatic:!0});tt.src=e+"obC.png";var et=Bodies.rectangle(2767,a-i+505,155,272,{isStatic:!0});et.src=e+"treeA.png";var at=Bodies.rectangle(2863,a-i+816,203,274,{isStatic:!0});at.src=e+"houseA.png";for(var it=[t,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G,H,W,Y,V,X,_,U,z,Q,J,K,$,Z,tt,et,at],st=0,nt=it.length;st<nt;st++)it[st].name=it[st].label="staticOriDPass"+scope.uniqueId(),it[st].FixedPosition={x:it[st].position.x,y:it[st].position.y-a},it[st].fixedBounds||(it[st].fixedBounds=25);return it}()}),obj.createLayer("staticOriDPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=Bodies.rectangle(133,a-2782,203,274,{isStatic:!0});t.src=e+"houseA.png";var i=Bodies.rectangle(221,a-2412,115,95,{isStatic:!0});i.src=e+"obK.png";var s=Bodies.rectangle(307,a-2579,155,272,{isStatic:!0});s.src=e+"treeA.png";var n=Bodies.rectangle(554,a-2715,155,272,{isStatic:!0});n.src=e+"treeA.png";var r=Bodies.rectangle(877,a-2763,128,222,{isStatic:!0});r.src=e+"treeD.png";var o=Bodies.rectangle(934,a-2699,117,204,{isStatic:!0});o.src=e+"treeB.png";var l=Bodies.rectangle(1237,a-2872,71,101,{isStatic:!0});l.src=e+"obD.png";var c=Bodies.rectangle(1506,a-2797,203,274,{isStatic:!0});c.src=e+"houseF.png";var h=Bodies.rectangle(1848,a-2745,117,204,{isStatic:!0});h.src=e+"treeB.png";var p=Bodies.rectangle(1906,a-2809,128,222,{isStatic:!0});p.src=e+"treeC.png";var d=Bodies.rectangle(1921,a-2331,115,95,{isStatic:!0});d.src=e+"obB.png";var g=Bodies.rectangle(1651,a-2437,291,410,{isStatic:!0});g.src=e+"houseB.png";var m=Bodies.rectangle(1207,a-2249,203,274,{isStatic:!0});m.src=e+"houseF.png";var u=Bodies.rectangle(1076,a-2293,71,100,{isStatic:!0});u.src=e+"obC.png";var f=Bodies.rectangle(830,a-2204,155,272,{isStatic:!0});f.src=e+"treeA.png";var v=Bodies.rectangle(474,a-2164,136,86,{isStatic:!0});v.src=e+"ruinB.png";var b=Bodies.rectangle(2078,a-2637,71,101,{isStatic:!0});b.src=e+"obD.png";var S=Bodies.rectangle(2613,a-2807,203,274,{isStatic:!0});S.src=e+"houseA.png";var x=Bodies.rectangle(2513,a-2536,71,100,{isStatic:!0});x.src=e+"obC.png";var k=Bodies.rectangle(2624,a-2564,155,272,{isStatic:!0});k.src=e+"treeA.png";var y=Bodies.rectangle(2500,a-2186,203,274,{isStatic:!0});y.src=e+"houseA.png";var B=Bodies.rectangle(170,a-1398,224,274,{isStatic:!0});B.src=e+"houseE.png";var w=Bodies.rectangle(126,a-1136,71,100,{isStatic:!0});w.src=e+"obC.png";var M=Bodies.rectangle(82,a-983,128,222,{isStatic:!0});M.src=e+"treeC.png";var P=Bodies.rectangle(139,a-919,117,204,{isStatic:!0});P.src=e+"treeB.png";var A=Bodies.rectangle(472,a-977,224,274,{isStatic:!0});A.src=e+"houseE.png";var D=Bodies.rectangle(582,a-1302,71,101,{isStatic:!0});D.src=e+"obD.png";var j=Bodies.rectangle(1066,a-989,291,410,{isStatic:!0});j.src=e+"houseB.png";var T=Bodies.rectangle(1236,a-1282,107,133,{isStatic:!0});T.src=e+"obF.png";var O=Bodies.rectangle(1492,a-1245,155,272,{isStatic:!0});O.src=e+"treeA.png";var C=Bodies.rectangle(1644,a-1172,71,101,{isStatic:!0});C.src=e+"obD.png";var N=Bodies.rectangle(1702,a-1033,136,86,{isStatic:!0});N.src=e+"ruinC.png";var q=Bodies.rectangle(293,a-1906,115,95,{isStatic:!0});q.src=e+"obB.png";var E=Bodies.rectangle(563,a-1872,224,274,{isStatic:!0});E.src=e+"houseC.png";var F=Bodies.rectangle(792,a-1940,71,101,{isStatic:!0});F.src=e+"obD.png";var I=Bodies.rectangle(931,a-1663,127,204,{isStatic:!0});I.src=e+"treeB.png";var R=Bodies.rectangle(989,a-1727,138,222,{isStatic:!0});R.src=e+"treeC.png";var L=Bodies.rectangle(1366,a-1872,107,133,{isStatic:!0});L.src=e+"obF.png";var G=Bodies.rectangle(136,a-633,71,100,{isStatic:!0});G.src=e+"obC.png";var H=Bodies.rectangle(1010,a-522,155,272,{isStatic:!0});H.src=e+"treeA.png";var W=Bodies.rectangle(1112,a-477,117,204,{isStatic:!0});W.src=e+"treeB.png";var Y=Bodies.rectangle(1624,a-553,71,100,{isStatic:!0});Y.src=e+"obC.png";var V=Bodies.rectangle(1802,a-138,107,133,{isStatic:!0});V.src=e+"obA.png";var X=Bodies.rectangle(1964,a-1848,107,133,{isStatic:!0});X.src=e+"obA.png";var _=Bodies.rectangle(2889,a-1659,107,133,{isStatic:!0});_.src=e+"obF.png";var U=Bodies.rectangle(2709,a-1526,148,222,{isStatic:!0});U.src=e+"treeC.png";var z=Bodies.rectangle(2651,a-1462,137,204,{isStatic:!0});z.src=e+"treeB.png";var Q=Bodies.rectangle(2549,a-1507,175,272,{isStatic:!0});Q.src=e+"treeA.png";var J=Bodies.rectangle(2021,a-1419,99,92,{isStatic:!0});J.src=e+"obE.png";var K=Bodies.rectangle(2178,a-1290,224,274,{isStatic:!0});K.src=e+"houseE.png";var $=Bodies.rectangle(2715,a-1168,136,155,{isStatic:!0});$.src=e+"obJ.png";var Z=Bodies.rectangle(2127,a-711,291,410,{isStatic:!0});Z.src=e+"houseD.png";var tt=Bodies.rectangle(2322,a-596,99,92,{isStatic:!0});tt.src=e+"obH.png";var et=Bodies.rectangle(2476,a-516,155,272,{isStatic:!0});et.src=e+"treeA.png";var at=Bodies.rectangle(2606,a-137,71,101,{isStatic:!0});at.src=e+"obD.png";var it=Bodies.rectangle(2295,a-152,71,101,{isStatic:!0});it.src=e+"obC.png";var st=Bodies.rectangle(1802,a-138,107,133,{isStatic:!0});st.src=e+"obA.png";for(var nt=[t,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G,H,W,Y,V,X,_,U,z,Q,J,K,$,Z,tt,et,at,it,st],rt=0,ot=nt.length;rt<ot;rt++)nt[rt].name=nt[rt].label="staticOriDPass"+scope.uniqueId(),nt[rt].FixedPosition={x:nt[rt].position.x,y:nt[rt].position.y-a},nt[rt].fixedBounds||(nt[rt].fixedBounds=25);return nt}()})]},scope.staticAllMap.value.mapDungeonD.content}(),function(){var t="mapDungeonE",e=scope.path+"/ornaments/i/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(6,"/ornaments/i/",t,6);var s=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});s.src=scope.path+"/1px.png",s.name=s.label="staticOriEPassPathPointA";var n=[s],r=obj.createPoint({isVisible:!0,label:"staticOriDngEPassSpawnA",texture:e+"portal right.png",x:2640,y:a-i+1761,point:"portal",fixedBounds:65,target:"help"}),o=obj.createPoint({label:"staticOriDngEPassSpawnB",texture:scope.path+"/1px.png",x:1057,y:a-i+712,target:"help"}),l=obj.createPoint({label:"staticOriDngEPassSpawnC",texture:scope.path+"/1px.png",x:933,y:a-i+1904,target:"help"}),c=obj.createPoint({label:"staticOriDngEPassSpawnD",texture:scope.path+"/1px.png",x:4445,y:a-i+784,target:"help"}),h=obj.createPoint({label:"staticOriDngEPassSpawnE",texture:scope.path+"/1px.png",x:4193,y:a-i+1886,target:"help"}),p=obj.createPoint({label:"staticOriDngEPassSpawnF",texture:scope.path+"/1px.png",x:4751,y:a-i+2367,target:"help"}),d=obj.createPoint({isVisible:!1,label:"staticOriDngEPassSpawnG",texture:e+"portal right.png",x:3994,y:a-i+2473,point:"portal",fixedBounds:65,target:"help"}),g=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:2948,y:a+-i+2219,additionalBoundsValue:95,additionalBoundsHeightValue:25,additionalBoundsWidthValue:20,target:"info",texture:scope.path+"/humanRoyalSpear-right.png",label:"staticOriNpcDngEPassSpawnA"}),m=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:3380,y:a+-i+2451,additionalBoundsValue:95,additionalBoundsHeightValue:0,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanRoyalArmored-right.png",label:"staticOriNpcDngEPassSpawnB"}),u=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:3842,y:a+-i+1953,additionalBoundsValue:95,additionalBoundsHeightValue:0,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanRoyalArmored-left.png",label:"staticOriNpcDngEPassSpawnB"}),f=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:3056,y:a+-i+1579,additionalBoundsValue:95,additionalBoundsHeightValue:25,additionalBoundsWidthValue:20,target:"info",texture:scope.path+"/humanRoyalSpear-left.png",label:"staticOriNpcDngEPassSpawnA"}),v=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:2800,y:a+-i+1176,additionalBoundsValue:95,additionalBoundsHeightValue:25,additionalBoundsWidthValue:20,target:"info",texture:scope.path+"/humanRoyalSpear-right.png",label:"staticOriNpcDngEPassSpawnA"}),b=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:2530,y:a+-i+916,additionalBoundsValue:95,additionalBoundsHeightValue:0,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanRoyalArmored-left.png",label:"staticOriNpcDngEPassSpawnB"}),S=obj.createNPC({behaveState:"die",isVisible:!1,touch:!1,x:3270,y:a+-i+1183,additionalBoundsValue:95,additionalBoundsHeightValue:0,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanRoyalArmored-right.png",label:"staticOriNpcDngEPassSpawnB"}),x=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngEPassSpawnA",location:"mapDungeonE",targetLocation:"mapDungeonH"}),k=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngEPassSpawnG",location:"mapDungeonE",targetLocation:"mapDungeonF"});return staticGeometry.createMap({location:t,src:e+"map.png"}),scope.staticAllMap.value.mapDungeonE.content={staticWallOuttermapDungeonE:obj.createWall(t),staticPortalmapDungeonE:{portalA:{portalIn:"staticOriPortalmapDungeonE",portalOut:"staticOriPortalBmapDungeonH"},portalB:{portalIn:"staticOriPortalBmapDungeonE",portalOut:"staticOriPortalmapDungeonF"}},staticOriPortalmapDungeonE:x,staticOriPortalBmapDungeonE:k,staticOriNpcDngEPassSpawnA:g,staticOriNpcDngEPassSpawnB:m,staticOriNpcDngEPassSpawnC:u,staticOriNpcDngEPassSpawnD:f,staticOriNpcDngEPassSpawnE:v,staticOriNpcDngEPassSpawnF:b,staticOriNpcDngEPassSpawnG:S,staticOriDngEPassSpawnA:r,staticOriDngEPassSpawnB:o,staticOriDngEPassSpawnC:l,staticOriDngEPassSpawnD:c,staticOriDngEPassSpawnE:h,staticOriDngEPassSpawnF:p,staticOriDngEPassSpawnG:d,staticOriGroupPathPoints:n,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriEPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(414,a-i+157,210,266,{isStatic:!0});t.src=e+"treeA.png";var s=Bodies.rectangle(437,a-i+766,260,260,{isStatic:!0});s.src=e+"treeB.png";var n=Bodies.rectangle(336,a-i+1528,210,266,{isStatic:!0});n.src=e+"treeA.png";var r=Bodies.rectangle(358,a-i+2137,260,260,{isStatic:!0});r.src=e+"treeB.png";var o=Bodies.rectangle(831,a-i+2659,229,291,{isStatic:!0});o.src=e+"treeC.png";var l=Bodies.rectangle(1241,a-i+2232,228,286,{isStatic:!0});l.src=e+"treeD.png";var c=Bodies.rectangle(1424,a-i+2721,94,143,{isStatic:!0});c.src=e+"stoneA.png";var h=Bodies.rectangle(2133,a-i+2598,287,274,{isStatic:!0});h.src=e+"treeH.png";var p=Bodies.rectangle(2749,a-i+2474,175,261,{isStatic:!0});p.src=e+"treeI.png";var d=Bodies.rectangle(2411,a-i+1960,322,342,{isStatic:!0});d.src=e+"treeF.png";var g=Bodies.rectangle(2746,a-i+1569,286,273,{isStatic:!0});g.src=e+"treeG.png";var m=Bodies.rectangle(2795,a-i+825,94,143,{isStatic:!0});m.src=e+"stoneA.png";var u=Bodies.rectangle(2367,a-i+572,322,342,{isStatic:!0});u.src=e+"treeF.png";var f=Bodies.rectangle(1703,a-i+155,260,260,{isStatic:!0});f.src=e+"treeE.png";var v=Bodies.rectangle(1320,a-i+860,228,286,{isStatic:!0});v.src=e+"treeD.png";var b=Bodies.rectangle(910,a-i+1287,229,291,{isStatic:!0});b.src=e+"treeC.png";var S=Bodies.rectangle(1624,a-i+1526,260,260,{isStatic:!0});S.src=e+"treeE.png";var x=Bodies.rectangle(1642,a-i+1196,94,143,{isStatic:!0});x.src=e+"stoneA.png";var k=Bodies.rectangle(853,a-i+370,66,56,{isStatic:!0});k.src=e+"root.png";var y=Bodies.rectangle(1187,a-i+114,57,54,{isStatic:!0});y.src=e+"stone.png";var B=Bodies.rectangle(774,a-i+1742,66,56,{isStatic:!0});B.src=e+"root.png";var w=Bodies.rectangle(1108,a-i+1486,57,54,{isStatic:!0});w.src=e+"stone.png";for(var M=[t,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w],P=0,A=M.length;P<A;P++)M[P].name=M[P].label="staticOriEPass"+scope.uniqueId(),M[P].FixedPosition={x:M[P].position.x,y:M[P].position.y-a},M[P].fixedBounds||(M[P].fixedBounds=25);return M}()}),obj.createLayer("staticOriEPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=Bodies.rectangle(71,a-2683,260,260,{isStatic:!0});t.src=e+"treeB.png";var i=Bodies.rectangle(396,a-2065,322,342,{isStatic:!0});i.src=e+"treeK.png";var s=Bodies.rectangle(299,a-1697,109,205,{isStatic:!0});s.src=e+"ruinA.png";var n=Bodies.rectangle(165,a-1618,182,128,{isStatic:!0});n.src=e+"ruinB.png";var r=Bodies.rectangle(363,a-1231,287,274,{isStatic:!0});r.src=e+"treeH.png";var o=Bodies.rectangle(240,a-904,182,128,{isStatic:!0});o.src=e+"ruinB.png";var l=Bodies.rectangle(723,a-332,322,342,{isStatic:!0});l.src=e+"treeK.png";var c=Bodies.rectangle(1263,a-715,175,261,{isStatic:!0});c.src=e+"treeI.png";var h=Bodies.rectangle(964,a-1374,175,261,{isStatic:!0});h.src=e+"treeI.png";var p=Bodies.rectangle(1032,a-2238,228,286,{isStatic:!0});p.src=e+"treeD.png";var d=Bodies.rectangle(1389,a-2831,260,260,{isStatic:!0});d.src=e+"treeB.png";var g=Bodies.rectangle(1772,a-2126,229,287,{isStatic:!0});g.src=e+"treeL.png";var m=Bodies.rectangle(1589,a-1627,94,143,{isStatic:!0});m.src=e+"stoneB.png";var u=Bodies.rectangle(1768,a-1267,210,266,{isStatic:!0});u.src=e+"treeA.png";var f=Bodies.rectangle(1770,a-836,260,260,{isStatic:!0});f.src=e+"treeB.png";var v=Bodies.rectangle(2386,a-370,229,290,{isStatic:!0});v.src=e+"treeO.png";var b=Bodies.rectangle(2653,a-741,228,286,{isStatic:!0});b.src=e+"treeD.png";var S=Bodies.rectangle(2181,a-1699,229,291,{isStatic:!0});S.src=e+"treeM.png";var x=Bodies.rectangle(2655,a-2220,260,260,{isStatic:!0});x.src=e+"treeE.png";var k=Bodies.rectangle(2678,a-2829,208,264,{isStatic:!0});k.src=e+"treeJ.png";for(var y=[t,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k],B=0,w=y.length;B<w;B++)y[B].name=y[B].label="staticOriEPass"+scope.uniqueId(),y[B].FixedPosition={x:y[B].position.x,y:y[B].position.y-a},y[B].fixedBounds||(y[B].fixedBounds=25);return y}()})]},scope.staticAllMap.value.mapDungeonE.content}(),function(){var t="mapDungeonF",e=scope.path+"/ornaments/j/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(6,"/ornaments/j/",t,6),(r=Bodies.rectangle(1600,-1500,339,215,{isStatic:!0})).name=r.label="staticOriFPassSpawnA",r.src=scope.path+"/1px.png";var s=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});s.src=scope.path+"/1px.png",s.name=s.label="staticOriFPassPathPointA";var n=[s],r=obj.createPoint({isVisible:!0,label:"staticOriDngFPassSpawnA",texture:e+"portal right.png",x:841,y:a-i+1312,point:"portal",fixedBounds:65,target:"help"}),o=obj.createPoint({label:"staticOriDngFPassSpawnB",texture:scope.path+"/1px.png",x:1350,y:a-i+2392,target:"help"}),l=obj.createPoint({label:"staticOriDngFPassSpawnC",texture:scope.path+"/1px.png",x:3489,y:a-i+2408,target:"help"}),c=obj.createPoint({label:"staticOriDngFPassSpawnD",texture:scope.path+"/1px.png",x:5080,y:a-i+2264,target:"help"}),h=obj.createPoint({label:"staticOriDngFPassSpawnE",texture:scope.path+"/1px.png",x:4749,y:a-i+701,target:"help"}),p=obj.createPoint({isVisible:!0,label:"staticOriDngFPassSpawnF",texture:e+"portal right.png",x:4517,y:a-i+1615,point:"portal",fixedBounds:65,target:"help"}),d=obj.createNPC({isVisible:!0,touch:!0,x:2288,y:a+-i+939,additionalBoundsValue:80,additionalBoundsHeightValue:-10,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanArmored-right.png",label:"staticOriNpcDngFPassSpawnA"}),g=obj.createNPC({isVisible:!1,touch:!0,x:3469,y:a+-i+1402,additionalBoundsValue:95,additionalBoundsHeightValue:0,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/humanRoyalArmored-left.png",label:"staticOriNpcDngFPassSpawnB"}),m=staticGeometry.createPortal({isVisible:!0,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngFPassSpawnA",location:"mapDungeonF",targetLocation:"mapDungeonE"}),u=staticGeometry.createPortal({isVisible:!0,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngFPassSpawnF",location:"mapDungeonF",targetLocation:"mapDungeonH"});return staticGeometry.createMap({location:t,src:e+"map.png"}),scope.staticAllMap.value.mapDungeonF.content={staticWallOuttermapDungeonF:obj.createWall(t),staticPortalmapDungeonF:{portalA:{portalIn:"staticOriPortalmapDungeonF",portalOut:"staticOriPortalBmapDungeonE"},portalB:{portalIn:"staticOriPortalBmapDungeonF",portalOut:"staticOriPortalCmapDungeonH"}},staticOriPortalmapDungeonF:m,staticOriPortalBmapDungeonF:u,staticOriNpcDngFPassSpawnA:d,staticOriNpcDngFPassSpawnB:g,staticOriDngFPassSpawnA:r,staticOriDngFPassSpawnB:o,staticOriDngFPassSpawnC:l,staticOriDngFPassSpawnD:c,staticOriDngFPassSpawnE:h,staticOriDngFPassSpawnF:p,staticOriGroupPathPoints:n,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriFPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(515,a-i+2084,157,277,{isStatic:!0});t.src=e+"treeA.png";var s=Bodies.rectangle(1334,a-i+2617,121,215,{isStatic:!0});s.src=e+"treeC.png";var n=Bodies.rectangle(1408,a-i+2543,120,217,{isStatic:!0});n.src=e+"treeD.png";var r=Bodies.rectangle(2096,a-i+2407,138,224,{isStatic:!0});r.src=e+"treeB.png";var o=Bodies.rectangle(2844,a-i+2584,159,278,{isStatic:!0});o.src=e+"treeE.png";var l=Bodies.rectangle(2659,a-i+2339,121,215,{isStatic:!0});l.src=e+"treeC.png";var c=Bodies.rectangle(2736,a-i+2257,159,282,{isStatic:!0});c.src=e+"treeF.png";var h=Bodies.rectangle(2837,a-i+2202,159,282,{isStatic:!0});h.src=e+"treeF.png";var p=Bodies.rectangle(2599,a-i+1870,109,119,{isStatic:!0});p.src=e+"bfA.png",p.fixedBounds=25;var d=Bodies.rectangle(2784,a-i+1608,205,270,{isStatic:!0});d.src=e+"houseA.png",d.fixedBounds=45;var g=Bodies.rectangle(2911,a-i+1582,110,121,{isStatic:!0});g.src=e+"bfC.png",g.fixedBounds=25;var m=Bodies.rectangle(2313,a-i+1556,159,278,{isStatic:!0});m.src=e+"treeE.png";var u=Bodies.rectangle(1112,a-i+1711,138,224,{isStatic:!0});u.src=e+"treeB.png";var f=Bodies.rectangle(1487,a-i+1969,282,289,{isStatic:!0});f.src=e+"houseB.png",f.fixedBounds=45;var v=Bodies.rectangle(1278,a-i+2075,101,115,{isStatic:!0});v.src=e+"bfB.png",v.fixedBounds=25;var b=Bodies.rectangle(1243,a-i+2169,109,119,{isStatic:!0});b.src=e+"bfA.png",b.fixedBounds=25;var S=Bodies.rectangle(1799,a-i+2296,101,115,{isStatic:!0});S.src=e+"bfB.png",S.fixedBounds=25;var x=Bodies.rectangle(2025,a-i+2147,110,121,{isStatic:!0});x.src=e+"bfC.png",S.fixedBounds=25;var k=Bodies.rectangle(1731,a-i+1885,109,119,{isStatic:!0});k.src=e+"bfA.png";var y=Bodies.rectangle(400,a-i+1088,159,278,{isStatic:!0});y.src=e+"treeE.png";var B=Bodies.rectangle(499,a-i+1031,109,119,{isStatic:!0});B.src=e+"bfA.png",B.fixedBounds=25;var w=Bodies.rectangle(534,a-i+937,101,115,{isStatic:!0});w.src=e+"bfB.png",w.fixedBounds=25;var M=Bodies.rectangle(1030,a-i+853,282,289,{isStatic:!0});M.src=e+"houseC.png",M.fixedBounds=45;var P=Bodies.rectangle(1283,a-i+1100,110,121,{isStatic:!0});P.src=e+"bfC.png",P.fixedBounds=25;var A=Bodies.rectangle(1411,a-i+1078,188,332,{isStatic:!0});A.src=e+"treeG.png";var D=Bodies.rectangle(1503,a-i+1138,138,224,{isStatic:!0});D.src=e+"treeB.png";var j=Bodies.rectangle(1619,a-i+1120,109,119,{isStatic:!0});j.src=e+"bfA.png",j.fixedBounds=25;var T=Bodies.rectangle(1889,a-i+1287,109,119,{isStatic:!0});T.src=e+"bfA.png",T.fixedBounds=25;var O=Bodies.rectangle(2465,a-i+1153,110,121,{isStatic:!0});O.src=e+"bfC.png",O.fixedBounds=25;var C=Bodies.rectangle(2763,a-i+1276,109,119,{isStatic:!0});C.src=e+"bfA.png",C.fixedBounds=25;var N=Bodies.rectangle(2895,a-i+918,110,121,{isStatic:!0});N.src=e+"bfC.png",N.fixedBounds=25;var q=Bodies.rectangle(2651,a-i+1041,110,121,{isStatic:!0});q.src=e+"bfC.png",q.fixedBounds=25;var E=Bodies.rectangle(2569,a-i+914,159,278,{isStatic:!0});E.src=e+"treeE.png";var F=Bodies.rectangle(2428,a-i+874,109,119,{isStatic:!0});F.src=e+"bfA.png",F.fixedBounds=25;var I=Bodies.rectangle(2157,a-i+763,290,329,{isStatic:!0});I.src=e+"houseD.png",I.fixedBounds=55;var R=Bodies.rectangle(1864,a-i+894,110,121,{isStatic:!0});R.src=e+"bfC.png",R.fixedBounds=25;var L=Bodies.rectangle(2371,a-i+387,159,278,{isStatic:!0});L.src=e+"treeE.png";var G=Bodies.rectangle(2301,a-i+264,159,278,{isStatic:!0});G.src=e+"treeE.png";var H=Bodies.rectangle(2175,a-i+300,192,332,{isStatic:!0});H.src=e+"treeH.png";var W=Bodies.rectangle(757,a-i+345,159,278,{isStatic:!0});W.src=e+"treeE.png";for(var Y=[t,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G,H,W],V=0,X=Y.length;V<X;V++)Y[V].name=Y[V].label="staticOriEPass"+scope.uniqueId(),Y[V].FixedPosition={x:Y[V].position.x,y:Y[V].position.y-a},Y[V].fixedBounds||(Y[V].fixedBounds=5);return Y}()}),obj.createLayer("staticOriFPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=Bodies.rectangle(95,a-1426,109,119,{isStatic:!0});t.src=e+"bfA.png",t.fixedBounds=25;var i=Bodies.rectangle(155,a-1196,110,121,{isStatic:!0});i.src=e+"bfC.png",i.fixedBounds=25;var s=Bodies.rectangle(257,a-702,121,215,{isStatic:!0});s.src=e+"treeC.png";var n=Bodies.rectangle(336,a-658,121,215,{isStatic:!0});n.src=e+"treeC.png";var r=Bodies.rectangle(1008,a-538,157,277,{isStatic:!0});r.src=e+"treeA.png";var o=Bodies.rectangle(1696,a-402,121,215,{isStatic:!0});o.src=e+"treeC.png";var l=Bodies.rectangle(1770,a-328,120,217,{isStatic:!0});l.src=e+"treeD.png";var c=Bodies.rectangle(2589,a-861,157,277,{isStatic:!0});c.src=e+"treeI.png";var h=Bodies.rectangle(1992,a-1234,138,244,{isStatic:!0});h.src=e+"treeJ.png";var p=Bodies.rectangle(1456,a-1601,192,332,{isStatic:!0});p.src=e+"treeH.png";var d=Bodies.rectangle(1364,a-1541,138,244,{isStatic:!0});d.src=e+"treeJ.png";var g=Bodies.rectangle(791,a-1389,159,278,{isStatic:!0});g.src=e+"treeE.png";var m=Bodies.rectangle(1115,a-908,110,121,{isStatic:!0});m.src=e+"bfC.png",m.fixedBounds=25;var u=Bodies.rectangle(1090,a-816,109,119,{isStatic:!0});u.src=e+"bfA.png",u.fixedBounds=25;var f=Bodies.rectangle(1398,a-608,109,119,{isStatic:!0});f.src=e+"bfA.png",f.fixedBounds=25;var v=Bodies.rectangle(1885,a-743,110,121,{isStatic:!0});v.src=e+"bfC.png",v.fixedBounds=25;var b=Bodies.rectangle(1843,a-835,101,115,{isStatic:!0});b.src=e+"bfD.png",b.fixedBounds=25;var S=Bodies.rectangle(1617,a-976,282,289,{isStatic:!0});S.src=e+"houseC.png",S.fixedBounds=45;var x=Bodies.rectangle(126,a-2079,205,270,{isStatic:!0});x.src=e+"houseF.png",x.fixedBounds=45;var k=Bodies.rectangle(256,a-2062,109,119,{isStatic:!0});k.src=e+"bfA.png",k.fixedBounds=25;var y=Bodies.rectangle(241,a-1738,110,121,{isStatic:!0});y.src=e+"bfC.png",y.fixedBounds=25;var B=Bodies.rectangle(639,a-1792,109,119,{isStatic:!0});B.src=e+"bfA.png",B.fixedBounds=25;var w=Bodies.rectangle(1205,a-1762,110,121,{isStatic:!0});w.src=e+"bfC.png",w.fixedBounds=25;var M=Bodies.rectangle(1843,a-1817,110,121,{isStatic:!0});M.src=e+"bfC.png",M.fixedBounds=25;var P=Bodies.rectangle(2704,a-1857,159,278,{isStatic:!0});P.src=e+"treeE.png";var A=Bodies.rectangle(2519,a-2050,101,115,{isStatic:!0});A.src=e+"bfD.png",A.fixedBounds=25;var D=Bodies.rectangle(2347,a-2600,159,278,{isStatic:!0});D.src=e+"treeE.png";var j=Bodies.rectangle(1703,a-2787,188,332,{isStatic:!0});j.src=e+"treeG.png";var T=Bodies.rectangle(1577,a-2823,159,278,{isStatic:!0});T.src=e+"treeE.png";var O=Bodies.rectangle(1507,a-2700,159,278,{isStatic:!0});O.src=e+"treeE.png";var C=Bodies.rectangle(815,a-2708,192,332,{isStatic:!0});C.src=e+"treeH.png";var N=Bodies.rectangle(723,a-2648,134,224,{isStatic:!0});N.src=e+"treeJ.png";var q=Bodies.rectangle(117,a-2480,159,278,{isStatic:!0});q.src=e+"treeE.png";var E=Bodies.rectangle(535,a-2031,159,278,{isStatic:!0});E.src=e+"treeE.png";var F=Bodies.rectangle(676,a-2071,110,121,{isStatic:!0});F.src=e+"bfC.png",F.fixedBounds=25;var I=Bodies.rectangle(947,a-2182,290,329,{isStatic:!0});I.src=e+"houseG.png",I.fixedBounds=55;var R=Bodies.rectangle(1153,a-2137,110,121,{isStatic:!0});R.src=e+"bfC.png",R.fixedBounds=25;var L=Bodies.rectangle(1294,a-2122,101,115,{isStatic:!0});L.src=e+"bfD.png",L.fixedBounds=25;var G=Bodies.rectangle(1874,a-1889,109,119,{isStatic:!0});G.src=e+"bfA.png",G.fixedBounds=25;var H=Bodies.rectangle(2074,a-2092,282,289,{isStatic:!0});H.src=e+"houseB.png",H.fixedBounds=45;for(var W=[t,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G,H],Y=0,V=W.length;Y<V;Y++)W[Y].name=W[Y].label="staticOriFPass"+scope.uniqueId(),W[Y].FixedPosition={x:W[Y].position.x,y:W[Y].position.y-a},W[Y].fixedBounds||(W[Y].fixedBounds=5);return W}()})]},scope.staticAllMap.value.mapDungeonF.content}(),function(){var t="mapDungeonG",e=scope.path+"/ornaments/k/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(12,"/ornaments/k/",t);var s=obj.createPoint({label:"staticOriGPassSpawnA",texture:scope.path+"/1px.png",x:4569,y:a+-6e3+4869,target:"help"}),n=obj.createPoint({label:"staticOriGPassSpawnB",texture:scope.path+"/1px.png",x:2761,y:a-6e3+3396,target:"help"}),r=obj.createPoint({label:"staticOriGPassSpawnC",texture:scope.path+"/1px.png",x:1284,y:a-6e3+2119,target:"help"}),o=obj.createPoint({label:"staticOriGPassSpawnD",texture:scope.path+"/1px.png",x:4500,y:a+-6e3+1320,target:"help"}),l=obj.createPoint({isVisible:!1,label:"staticOriDungeonGSpawnE",texture:e+"portal right.png",x:4989,point:"portal",fixedBounds:65,y:a+-6e3+2835,target:"help"}),c=obj.createPoint({isVisible:!1,label:"staticOriDungeonGSpawnF",texture:e+"portal right.png",x:608,point:"portal",fixedBounds:65,y:a+-6e3+3342,target:"help"}),h=obj.createNPC({isVisible:!0,touch:!0,x:4207,y:a+-6e3+4101,additionalBoundsValue:55,additionalBoundsHeightValue:60,additionalBoundsWidthValue:15,target:"info",texture:scope.path+"/hollowMage-left.png",label:"staticOriNpcPassSpawnB"}),p=obj.createNPC({isVisible:!1,touch:!0,x:378,y:a-6e3+4263,additionalBoundsValue:55,additionalBoundsHeightValue:60,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/hollowMage-right.png",label:"staticOriNpcPassSpawnC"}),d=obj.createNPC({isVisible:!1,touch:!0,x:2561,y:a-6e3+3496,additionalBoundsValue:55,additionalBoundsHeightValue:60,additionalBoundsWidthValue:0,target:"info",texture:scope.path+"/fireElemental-left.png",label:"staticOriNpcPassSpawnD"});obj.createSVGBuffer("/ornaments/k/buffer-cliff-left.svg",t,"staticOriDngGBufferA",{x:316,y:a-6e3+4979}),obj.createSVGBuffer("/ornaments/k/buffer-cliff-right.svg",t,"staticOriDngGBufferB",{x:1215,y:a-6e3+4945});var g=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDungeonGSpawnE",location:"mapDungeonG",targetLocation:"mapDungeonC"}),m=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDungeonGSpawnF",location:"mapDungeonG",targetLocation:"mapDungeonA"});staticGeometry.createMap({location:t,src:e+"map.png"});var u=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});u.src=scope.path+"/1px.png",u.name=u.label="staticOriGPassPathPointA";var f=[u];return scope.staticAllMap.value.mapDungeonG.content={staticWallOuttermapDungeonG:obj.createWall(t,"large"),staticPortalmapDungeonG:{portalA:{portalIn:"staticOriPortalmapDungeonG",portalOut:"staticOriPortalmapDungeonC"},portalB:{portalIn:"staticOriPortalBmapDungeonG",portalOut:"staticOriPortalmapDungeonA"}},staticOriPortalmapDungeonG:g,staticOriPortalBmapDungeonG:m,staticOriDungeonGSpawnA:s,staticOriDungeonGSpawnB:n,staticOriDungeonGSpawnC:r,staticOriDungeonGSpawnD:o,staticOriDungeonGSpawnE:l,staticOriDungeonGSpawnF:c,staticOriGroupPathPoints:f,staticOriGroupSVG:[],staticOriNpcPassSpawnB:h,staticOriNpcPassSpawnC:p,staticOriNpcPassSpawnD:d,groupLayer:[obj.createLayer("staticOriGPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(92,a-6e3+5263,139,224,{isStatic:!0});t.src=e+"treeA.png";var i=Bodies.rectangle(110,a-6e3+5084,192,333,{isStatic:!0});i.src=e+"treeB.png";var s=Bodies.rectangle(132,a-6e3+5e3,192,333,{isStatic:!0});s.src=e+"treeB.png";var n=Bodies.rectangle(224,a-6e3+5057,141,264,{isStatic:!0});n.src=e+"treeC.png";var r=Bodies.rectangle(343,a-6e3+5063,51,127,{isStatic:!0});r.src=e+"stoneE.png";var o=Bodies.rectangle(256,a-6e3+5789,148,198,{isStatic:!0});o.src=e+"stoneA.png",o.fixedBounds=45;var l=Bodies.rectangle(383,a-6e3+5319,336,337,{isStatic:!0});l.src=e+"stoneC.png",l.fixedBounds=45;var c=Bodies.rectangle(587,a-6e3+5066,91,125,{isStatic:!0});c.src=e+"sign.png";var h=Bodies.rectangle(876,a-6e3+5190,170,207,{isStatic:!0});h.src=e+"stoneD.png";var p=Bodies.rectangle(1317,a-6e3+5575,192,332,{isStatic:!0});p.src=e+"treeD.png";var d=Bodies.rectangle(1443,a-6e3+5539,158,278,{isStatic:!0});d.src=e+"treeE.png";var g=Bodies.rectangle(1513,a-6e3+5662,158,278,{isStatic:!0});g.src=e+"treeE.png";var m=Bodies.rectangle(1489,a-6e3+5876,76,82,{isStatic:!0});m.src=e+"stoneB.png";var u=Bodies.rectangle(1900,a-6e3+5802,158,278,{isStatic:!0});u.src=e+"treeE.png";var f=Bodies.rectangle(2002,a-6e3+5732,99,85,{isStatic:!0});f.src=e+"stoneF.png";var v=Bodies.rectangle(2566,a-6e3+5881,118,110,{isStatic:!0});v.src=e+"treeM.png",v.fixedBounds=45;var b=Bodies.rectangle(2831,a-6e3+5709,122,215,{isStatic:!0});b.src=e+"treeI.png";var S=Bodies.rectangle(2751,a-6e3+5632,120,217,{isStatic:!0});S.src=e+"treeH.png";var x=Bodies.rectangle(2658,a-6e3+5173,135,235,{isStatic:!0});x.src=e+"treeL.png";var k=Bodies.rectangle(2560,a-6e3+5068,122,215,{isStatic:!0});k.src=e+"treeI.png";var y=Bodies.rectangle(2445,a-6e3+5203,158,282,{isStatic:!0});y.src=e+"treeK.png";var B=Bodies.rectangle(2381,a-6e3+5010,158,282,{isStatic:!0});B.src=e+"treeK.png";var w=Bodies.rectangle(2166,a-6e3+5038,218,245,{isStatic:!0});w.src=e+"stoneG.png",w.fixedBounds=45;var M=Bodies.rectangle(1853,a-6e3+5182,448,438,{isStatic:!0});M.src=e+"houseA.png",M.fixedBounds=60;var P=Bodies.rectangle(1588,a-6e3+4925,158,282,{isStatic:!0});P.src=e+"treeJ.png";var A=Bodies.rectangle(1543,a-6e3+4998,120,217,{isStatic:!0});A.src=e+"treeH.png";var D=Bodies.rectangle(1429,a-6e3+5026,158,278,{isStatic:!0});D.src=e+"treeE.png";var j=Bodies.rectangle(89,a-6e3+4717,51,127,{isStatic:!0});j.src=e+"stoneE.png",j.fixedBounds=25;var T=Bodies.rectangle(164,a-6e3+4552,191,172,{isStatic:!0});T.src=e+"treeQ.png";var O=Bodies.rectangle(296,a-6e3+4607,174,156,{isStatic:!0});O.src=e+"stoneI.png",O.fixedBounds=25;var C=Bodies.rectangle(651,a-6e3+4483,143,167,{isStatic:!0});C.src=e+"treeN.png";var N=Bodies.rectangle(742,a-6e3+4205,160,205,{isStatic:!0});N.src=e+"treeP.png";var q=Bodies.rectangle(798,a-6e3+4212,106,128,{isStatic:!0});q.src=e+"treeO.png";var E=Bodies.rectangle(556,a-6e3+4017,160,205,{isStatic:!0});E.src=e+"treeP.png";var F=Bodies.rectangle(358,a-6e3+4263,131,205,{isStatic:!0});F.src=e+"stoneJ.png",F.fixedBounds=25;var I=Bodies.rectangle(139,a-6e3+4196,314,254,{isStatic:!0});I.src=e+"stoneK.png",I.fixedBounds=25;var R=Bodies.rectangle(157,a-6e3+4122,313,261,{isStatic:!0});R.src=e+"stoneL.png",R.fixedBounds=25;var L=Bodies.rectangle(173,a-6e3+3981,106,126,{isStatic:!0});L.src=e+"treeR.png";var G=Bodies.rectangle(94,a-6e3+3891,139,244,{isStatic:!0});G.src=e+"treeA.png";var H=Bodies.rectangle(113,a-6e3+3714,192,333,{isStatic:!0});H.src=e+"treeB.png";var W=Bodies.rectangle(133,a-6e3+3629,192,333,{isStatic:!0});W.src=e+"treeB.png";var Y=Bodies.rectangle(225,a-6e3+3688,141,246,{isStatic:!0});Y.src=e+"treeC.png";var V=Bodies.rectangle(1025,a-6e3+4854,148,129,{isStatic:!0});V.src=e+"treeS.png",V.fixedBounds=25;var X=Bodies.rectangle(1266,a-6e3+4790,104,122,{isStatic:!0});X.src=e+"treeR.png";var _=Bodies.rectangle(1301,a-6e3+4588,159,205,{isStatic:!0});_.src=e+"treeU.png";var U=Bodies.rectangle(1681,a-6e3+4637,159,192,{isStatic:!0});U.src=e+"treeT.png",U.fixedBounds=25;var z=Bodies.rectangle(2079,a-6e3+4407,160,205,{isStatic:!0});z.src=e+"treeP.png";var Q=Bodies.rectangle(2390,a-6e3+4682,188,172,{isStatic:!0});Q.src=e+"treeX.png",Q.fixedBounds=25;var J=Bodies.rectangle(2927,a-6e3+4519,336,337,{isStatic:!0});J.src=e+"stoneM.png",J.fixedBounds=25;var K=Bodies.rectangle(2903,a-6e3+3744,76,82,{isStatic:!0});K.src=e+"stoneB.png";var $=Bodies.rectangle(2452,a-6e3+3771,243,239,{isStatic:!0});$.src=e+"ruinD.png",$.fixedBounds=40;var Z=Bodies.rectangle(2385,a-6e3+3857,181,129,{isStatic:!0});Z.src=e+"ruinC.png",Z.fixedBounds=40;var tt=Bodies.rectangle(2003,a-6e3+4083,197,228,{isStatic:!0});tt.src=e+"treeW.png";var et=Bodies.rectangle(1752,a-6e3+3888,197,122,{isStatic:!0});et.src=e+"root.png",et.fixedBounds=40;var at=Bodies.rectangle(1578,a-6e3+4006,199,109,{isStatic:!0});at.src=e+"ruinB.png",at.fixedBounds=40;var it=Bodies.rectangle(1302,a-6e3+4271,143,168,{isStatic:!0});it.src=e+"treeV.png";var st=Bodies.rectangle(978,a-6e3+3956,157,106,{isStatic:!0});st.src=e+"ruinA.png",st.fixedBounds=30;var nt=Bodies.rectangle(2761,a-6e3+3396,230,276,{isStatic:!0});nt.src=e+"treeAA.png",nt.fixedBounds=25;var rt=Bodies.rectangle(2614,a-6e3+3141,120,217,{isStatic:!0});rt.src=e+"treeH.png";var ot=Bodies.rectangle(2688,a-6e3+3067,122,215,{isStatic:!0});ot.src=e+"treeI.png";var lt=Bodies.rectangle(2155,a-6e3+3240,106,128,{isStatic:!0});lt.src=e+"treeO.png";var ct=Bodies.rectangle(1808,a-6e3+3463,160,205,{isStatic:!0});ct.src=e+"treeP.png";var ht=Bodies.rectangle(1263,a-6e3+3408,218,246,{isStatic:!0});ht.src=e+"stoneN.png",ht.fixedBounds=35;var pt=Bodies.rectangle(1592,a-6e3+2980,158,278,{isStatic:!0});pt.src=e+"treeE.png";var dt=Bodies.rectangle(838,a-6e3+2966,307,295,{isStatic:!0});dt.src=e+"houseB.png",dt.fixedBounds=70;var gt=Bodies.rectangle(481,a-6e3+2963,296,282,{isStatic:!0});gt.src=e+"houseC.png",gt.fixedBounds=70;for(var mt=[t,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G,H,W,Y,V,X,_,U,z,Q,J,K,$,Z,tt,et,at,it,st,nt,rt,ot,lt,ct,ht,pt,dt,gt],ut=0,ft=mt.length;ut<ft;ut++)mt[ut].name=mt[ut].label="staticOriGPass"+scope.uniqueId(),mt[ut].FixedPosition={x:mt[ut].position.x,y:mt[ut].position.y-a},mt[ut].fixedBounds||(mt[ut].fixedBounds=15);return mt}()}),obj.createLayer("staticOriGPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=a+-6e3,i=Bodies.rectangle(739,t+4174,158,282,{isStatic:!0});i.src=e+"treeJ.png";var s=Bodies.rectangle(638,t+4229,158,282,{isStatic:!0});s.src=e+"treeJ.png";var n=Bodies.rectangle(561,t+4311,139,244,{isStatic:!0});n.src=e+"treeA.png";var r=Bodies.rectangle(146,t+4905,158,278,{isStatic:!0});r.src=e+"treeE.png";var o=Bodies.rectangle(652,t+5641,120,217,{isStatic:!0});o.src=e+"treeH.png";var l=Bodies.rectangle(1292,t+5668,158,278,{isStatic:!0});l.src=e+"treeE.png";var c=Bodies.rectangle(1795,t+5341,158,278,{isStatic:!0});c.src=e+"treeE.png";var h=Bodies.rectangle(1921,t+5376,192,333,{isStatic:!0});h.src=e+"treeB.png";var p=Bodies.rectangle(2613,t+5493,158,278,{isStatic:!0});p.src=e+"treeE.png";var d=Bodies.rectangle(2203,t+4995,218,246,{isStatic:!0});d.src=e+"stoneN.png",d.fixedBounds=35;var g=Bodies.rectangle(2675,t+4713,158,282,{isStatic:!0});g.src=e+"treeG.png";var m=Bodies.rectangle(2605,t+4594,158,278,{isStatic:!0});m.src=e+"treeE.png";var u=Bodies.rectangle(1873,t+4355,122,215,{isStatic:!0});u.src=e+"treeI.png";var f=Bodies.rectangle(1770,t+4397,158,278,{isStatic:!0});f.src=e+"treeE.png";var v=Bodies.rectangle(1569,t+4869,122,215,{isStatic:!0});v.src=e+"treeI.png";var b=Bodies.rectangle(1059,t+4806,158,278,{isStatic:!0});b.src=e+"treeE.png";var S=Bodies.rectangle(989,t+4925,158,282,{isStatic:!0});S.src=e+"treeK.png";var x=Bodies.rectangle(117,t+3007,158,278,{isStatic:!0});x.src=e+"treeE.png";var k=Bodies.rectangle(127,t+3383,157,106,{isStatic:!0});k.src=e+"ruinA.png",k.fixedBounds=30;var y=Bodies.rectangle(86,t+3823,158,278,{isStatic:!0});y.src=e+"treeE.png";var B=Bodies.rectangle(1367,t+3801,448,438,{isStatic:!0});B.src=e+"houseD.png",B.fixedBounds=80;var w=Bodies.rectangle(2708,t+3959,158,278,{isStatic:!0});w.src=e+"treeE.png";var M=Bodies.rectangle(2675,t+3458,192,333,{isStatic:!0});M.src=e+"treeB.png";var P=Bodies.rectangle(2549,t+3422,158,278,{isStatic:!0});P.src=e+"treeE.png";var A=Bodies.rectangle(1922,t+3647,178,214,{isStatic:!0});A.src=e+"treeY.png",A.fixedBounds=25;var D=Bodies.rectangle(1718,t+3252,159,205,{isStatic:!0});D.src=e+"treeU.png";var j=Bodies.rectangle(1037,t+3346,158,278,{isStatic:!0});j.src=e+"treeE.png";var T=Bodies.rectangle(581,t+3216,191,172,{isStatic:!0});T.src=e+"treeQ.png";for(var O=[i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T],C=0,N=O.length;C<N;C++)O[C].name=O[C].label="staticOriDPass"+scope.uniqueId(),O[C].FixedPosition={x:O[C].position.x,y:O[C].position.y-a},O[C].fixedBounds||(O[C].fixedBounds=15);return O}()}),obj.createLayer("staticOriGPassLayerC",{x:0,y:-3e3,location:t,layer:function(){var t=Bodies.rectangle(1269,a-i+2439,158,278,{isStatic:!0});t.src=e+"treeE.png";var s=Bodies.rectangle(1655,a-i+2300,158,278,{isStatic:!0});s.src=e+"treeE.png";var n=Bodies.rectangle(1726,a-i+2176,158,278,{isStatic:!0});n.src=e+"treeE.png";var r=Bodies.rectangle(1852,a-i+2212,192,333,{isStatic:!0});r.src=e+"treeB.png";var o=Bodies.rectangle(2128,a-i+1856,170,208,{isStatic:!0});o.src=e+"stoneO.png";var l=Bodies.rectangle(1740,a-i+1663,158,278,{isStatic:!0});l.src=e+"treeE.png";var c=Bodies.rectangle(1625,a-i+1635,122,215,{isStatic:!0});c.src=e+"treeI.png";var h=Bodies.rectangle(1580,a-i+1563,158,282,{isStatic:!0});h.src=e+"treeK.png";var p=Bodies.rectangle(1284,a-i+2119,157,106,{isStatic:!0});p.src=e+"stoneP.png",p.fixedBounds=30;var d=Bodies.rectangle(788,a-i+1648,158,282,{isStatic:!0});d.src=e+"treeJ.png";var g=Bodies.rectangle(723,a-i+1820,158,282,{isStatic:!0});g.src=e+"treeJ.png";var m=Bodies.rectangle(607,a-i+1721,120,217,{isStatic:!0});m.src=e+"treeH.png";var u=Bodies.rectangle(511,a-i+1810,158,278,{isStatic:!0});u.src=e+"treeE.png";var f=Bodies.rectangle(417,a-i+2269,122,215,{isStatic:!0});f.src=e+"treeI.png";var v=Bodies.rectangle(338,a-i+2347,120,217,{isStatic:!0});v.src=e+"treeH.png";var b=Bodies.rectangle(555,a-i+2747,120,217,{isStatic:!0});b.src=e+"treeH.png";var S=Bodies.rectangle(624,a-i+2791,158,278,{isStatic:!0});S.src=e+"treeE.png";var x=Bodies.rectangle(756,a-i+2708,158,282,{isStatic:!0});x.src=e+"treeJ.png";var k=Bodies.rectangle(1396,a-i+2892,192,333,{isStatic:!0});k.src=e+"treeB.png";var y=Bodies.rectangle(1522,a-i+2856,158,278,{isStatic:!0});y.src=e+"treeE.png";var B=Bodies.rectangle(2912,a-i+2426,148,199,{isStatic:!0});B.src=e+"stoneQ.png",B.fixedBounds=25;var w=Bodies.rectangle(2479,a-i+1926,141,246,{isStatic:!0});w.src=e+"treeC.png";var M=Bodies.rectangle(2944,a-i+1695,139,244,{isStatic:!0});M.src=e+"treeA.png";var P=Bodies.rectangle(478,a-i+179,158,282,{isStatic:!0});P.src=e+"treeJ.png";var A=Bodies.rectangle(377,a-i+234,158,282,{isStatic:!0});A.src=e+"treeJ.png";var D=Bodies.rectangle(300,a-i+316,120,217,{isStatic:!0});D.src=e+"treeH.png";var j=Bodies.rectangle(798,a-i+811,135,235,{isStatic:!0});j.src=e+"treeL.png";var T=Bodies.rectangle(728,a-i+929,158,282,{isStatic:!0});T.src=e+"treeK.png";var O=Bodies.rectangle(1308,a-i+874,122,215,{isStatic:!0});O.src=e+"treeI.png";var C=Bodies.rectangle(2200,a-i+951,139,244,{isStatic:!0});C.src=e+"treeA.png";var N=Bodies.rectangle(2292,a-i+891,158,282,{isStatic:!0});N.src=e+"treeK.png";var q=Bodies.rectangle(2527,a-i+373,192,333,{isStatic:!0});q.src=e+"treeB.png";var E=Bodies.rectangle(1612,a-i+359,122,215,{isStatic:!0});E.src=e+"treeI.png";var F=Bodies.rectangle(1509,a-i+402,158,278,{isStatic:!0});F.src=e+"treeE.png";for(var I=[t,s,n,r,o,l,c,h,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F],R=0,L=I.length;R<L;R++)I[R].name=I[R].label="staticOriGPass"+scope.uniqueId(),I[R].FixedPosition={x:I[R].position.x,y:I[R].position.y-a},I[R].fixedBounds||(I[R].fixedBounds=15);return I}()}),obj.createLayer("staticOriGPassLayerD",{x:3e3,y:-3e3,location:t,layer:function(){var t=a+-i,s=Bodies.rectangle(806,t+1960,196,229,{isStatic:!0});s.src=e+"treeAB.png";var n=Bodies.rectangle(730,t+2283,159,205,{isStatic:!0});n.src=e+"treeU.png";var r=Bodies.rectangle(3746,t+2851,143,167,{isStatic:!0});r.src=e+"treeN.png";var o=Bodies.rectangle(1160,t+2869,160,205,{isStatic:!0});o.src=e+"treeP.png";var l=Bodies.rectangle(1216,t+2876,106,128,{isStatic:!0});l.src=e+"treeO.png";var c=Bodies.rectangle(1719,t+2935,143,168,{isStatic:!0});c.src=e+"treeV.png";var h=Bodies.rectangle(2626,t+2650,143,167,{isStatic:!0});h.src=e+"treeN.png";var p=Bodies.rectangle(2203,t+2259,159,205,{isStatic:!0});p.src=e+"treeU.png";var d=Bodies.rectangle(1508,t+2147,143,167,{isStatic:!0});d.src=e+"treeN.png";var g=Bodies.rectangle(999,t+2505,148,199,{isStatic:!0});g.src=e+"stoneQ.png",g.fixedBounds=30;var m=Bodies.rectangle(1508,t+2464,160,205,{isStatic:!0});m.src=e+"treeP.png";var u=Bodies.rectangle(2026,t+2611,160,205,{isStatic:!0});u.src=e+"treeP.png";var f=Bodies.rectangle(1873,t+4355,122,215,{isStatic:!0});f.src=e+"treeI.png";var v=Bodies.rectangle(1770,t+4397,158,278,{isStatic:!0});v.src=e+"treeE.png";var b=Bodies.rectangle(1569,t+4869,122,215,{isStatic:!0});b.src=e+"treeI.png";var S=Bodies.rectangle(1059,t+4806,158,278,{isStatic:!0});S.src=e+"treeE.png";var x=Bodies.rectangle(989,t+4925,158,282,{isStatic:!0});x.src=e+"treeK.png";var k=Bodies.rectangle(92,t+1881,141,246,{isStatic:!0});k.src=e+"treeC.png";var y=Bodies.rectangle(58,t+1721,192,333,{isStatic:!0});y.src=e+"treeB.png";var B=Bodies.rectangle(37,t+1638,192,333,{isStatic:!0});B.src=e+"treeB.png";var w=Bodies.rectangle(682,t+1472,135,235,{isStatic:!0});w.src=e+"treeL.png";var M=Bodies.rectangle(1374,t+1355,192,333,{isStatic:!0});M.src=e+"treeB.png";var P=Bodies.rectangle(1500,t+1320,135,235,{isStatic:!0});P.src=e+"treeL.png";var A=Bodies.rectangle(2002,t+1647,135,235,{isStatic:!0});A.src=e+"treeL.png";var D=Bodies.rectangle(2643,t+1620,122,215,{isStatic:!0});D.src=e+"treeI.png";var j=Bodies.rectangle(2306,t+904,158,282,{isStatic:!0});j.src=e+"treeJ.png";var T=Bodies.rectangle(2236,t+785,135,235,{isStatic:!0});T.src=e+"treeL.png";var O=Bodies.rectangle(2733,t+291,122,215,{isStatic:!0});O.src=e+"treeI.png";var C=Bodies.rectangle(2657,t+208,158,282,{isStatic:!0});C.src=e+"treeK.png";var N=Bodies.rectangle(2556,t+153,158,282,{isStatic:!0});N.src=e+"treeK.png";var q=Bodies.rectangle(1725,t+848,120,217,{isStatic:!0});q.src=e+"treeH.png";var E=Bodies.rectangle(1525,t+376,158,278,{isStatic:!0});E.src=e+"treeE.png";var F=Bodies.rectangle(1422,t+334,124,215,{isStatic:!0});F.src=e+"treeF.png";var I=Bodies.rectangle(1092,t+975,218,245,{isStatic:!0});I.src=e+"stoneG.png",I.fixedBounds=30;var R=Bodies.rectangle(690,t+573,135,235,{isStatic:!0});R.src=e+"treeL.png";var L=Bodies.rectangle(620,t+692,158,282,{isStatic:!0});L.src=e+"treeK.png";var G=Bodies.rectangle(275,t+133,122,215,{isStatic:!0});G.src=e+"treeI.png";for(var H=[s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G],W=0,Y=H.length;W<Y;W++)H[W].name=H[W].label="staticOriLayerEdngGPass"+scope.uniqueId(),H[W].FixedPosition={x:H[W].position.x,y:H[W].position.y-a},H[W].fixedBounds||(H[W].fixedBounds=15);return H}()})]},scope.staticAllMap.value.mapDungeonG.content}(),function(){var t="mapDungeonH",e=scope.path+"/ornaments/l/",a=scope.browserHeightUpdate,i=3e3;obj.createBackground(12,"/ornaments/l/",t);var s=Bodies.rectangle(4500,-1170,10,10,{isStatic:!0});s.src=scope.path+"/1px.png",s.name=s.label="staticOriHPassPathPointA";var n=[s],r=obj.createPoint({isVisible:!0,label:"staticOriDngHPassSpawnA",texture:e+"portal left.png",x:1905,point:"portal",fixedBounds:65,y:a+-6e3+5241,target:"help"}),o=obj.createPoint({label:"staticOriDngHPassSpawnB",texture:scope.path+"/1px.png",x:3740,y:a-6e3+4039,target:"help"}),l=obj.createPoint({label:"staticOriDngHPassSpawnC",texture:scope.path+"/1px.png",x:2029,y:a-6e3+4524,target:"help"}),c=obj.createPoint({label:"staticOriDngHPassSpawnD",texture:scope.path+"/1px.png",x:4615,y:a-6e3+1283,target:"help"}),h=obj.createPoint({label:"staticOriDngHPassSpawnE",texture:scope.path+"/1px.png",x:1070,y:a-6e3+1236,target:"help"}),p=obj.createPoint({label:"staticOriDngHPassSpawnF",texture:scope.path+"/1px.png",x:1470,y:a-6e3+2196,target:"help"}),d=obj.createPoint({isVisible:!1,label:"staticOriDngHPassSpawnG",texture:e+"portal left.png",x:2370,y:a+-6e3+1009,point:"portal",fixedBounds:65,target:"help"}),g=obj.createPoint({isVisible:!1,label:"staticOriDngHPassSpawnI",texture:e+"portal left.png",x:2370,y:a+-6e3+1909,point:"portal",fixedBounds:65,target:"help"}),m=obj.createNPC({isVisible:!0,touch:!0,x:5100,y:a+-6e3+2764,additionalBoundsValue:55,additionalBoundsHeightValue:60,additionalBoundsWidthValue:15,target:"info",texture:scope.path+"/hollowMage-left.png",label:"staticOriNpcDngHPassSpawnA"}),u=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngHPassSpawnA",location:"mapDungeonH",targetLocation:"mapDDungeonA"}),f=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngHPassSpawnG",location:"mapDungeonH",targetLocation:"mapDungeonE"}),v=staticGeometry.createPortal({isVisible:!1,width:staticMediumWidth,height:staticMediumWidth,color:scope.rgbRandom(1),effect:"glowPortal",rangeX:70,rangeY:270,attach:"staticOriDngHPassSpawnI",location:"mapDungeonH",targetLocation:"mapDungeonF"});return staticGeometry.createMap({location:t,src:e+"map.png"}),scope.staticAllMap.value.mapDungeonH.content={staticWallOuttermapDungeonH:obj.createWall(t,"large"),staticPortalmapDungeonH:{portalA:{portalIn:"staticOriPortalmapDungeonH",portalOut:"staticOriPortalBmapDDungeonA"},portalB:{portalIn:"staticOriPortalBmapDungeonH",portalOut:"staticOriPortalmapDungeonE"},portalC:{portalIn:"staticOriPortalCmapDungeonH",portalOut:"staticOriPortalBmapDungeonF"}},staticOriPortalmapDungeonH:u,staticOriPortalBmapDungeonH:f,staticOriPortalCmapDungeonH:v,staticOriDngHPassSpawnA:r,staticOriDngHPassSpawnB:o,staticOriDngHPassSpawnC:l,staticOriDngHPassSpawnD:c,staticOriDngHPassSpawnE:h,staticOriDngHPassSpawnF:p,staticOriDngHPassSpawnG:d,staticOriDngHPassSpawnI:g,staticOriNpcDngHPassSpawnA:m,staticOriGroupPathPoints:n,staticOriGroupSVG:[],groupLayer:[obj.createLayer("staticOriHPassLayerA",{x:0,y:0,location:t,layer:function(){var t=Bodies.rectangle(248,a-6e3+4718,276,356,{isStatic:!0});t.src=e+"treeA.png";var i=Bodies.rectangle(583,a-6e3+5299,276,356,{isStatic:!0});i.src=e+"treeA.png";var s=Bodies.rectangle(1454,a-6e3+5736,266,343,{isStatic:!0});s.src=e+"treeC.png";var n=Bodies.rectangle(2702,a-6e3+5645,242,312,{isStatic:!0});n.src=e+"treeB.png";var r=Bodies.rectangle(2880,a-6e3+5542,266,343,{isStatic:!0});r.src=e+"treeC.png";var o=Bodies.rectangle(2099,a-6e3+5219,242,312,{isStatic:!0});o.src=e+"treeB.png",o.fixedBounds=45;var l=Bodies.rectangle(1920,a-6e3+5116,266,343,{isStatic:!0});l.src=e+"treeC.png",l.fixedBounds=45;var c=Bodies.rectangle(1304,a-6e3+5196,91,125,{isStatic:!0});c.src=e+"sign.png";var h=Bodies.rectangle(1128,a-6e3+4822,339,339,{isStatic:!0});h.src=e+"stone.png";var p=Bodies.rectangle(2924,a-6e3+4527,201,295,{isStatic:!0});p.src=e+"treeD.png";var d=Bodies.rectangle(2872,a-6e3+4370,276,356,{isStatic:!0});d.src=e+"treeA.png";var g=Bodies.rectangle(2690,a-6e3+4376,242,312,{isStatic:!0});g.src=e+"treeB.png";var m=Bodies.rectangle(1496,a-6e3+4266,266,343,{isStatic:!0});m.src=e+"treeC.png";var u=Bodies.rectangle(1255,a-6e3+3846,276,356,{isStatic:!0});u.src=e+"treeA.png";var f=Bodies.rectangle(695,a-6e3+4310,242,312,{isStatic:!0});f.src=e+"treeB.png";var v=Bodies.rectangle(597,a-6e3+4246,242,312,{isStatic:!0});v.src=e+"treeB.png";var b=Bodies.rectangle(471,a-6e3+4321,201,295,{isStatic:!0});b.src=e+"treeD.png";var S=Bodies.rectangle(507,a-6e3+3639,459,324,{isStatic:!0});S.src=e+"houseA.png",S.fixedBounds=60;var x=Bodies.rectangle(1613,a-6e3+3406,134,90,{isStatic:!0});x.src=e+"ruinM.png";var k=Bodies.rectangle(1720,a-6e3+3233,275,258,{isStatic:!0});k.src=e+"treeF.png";var y=Bodies.rectangle(2159,a-6e3+3712,247,292,{isStatic:!0});y.src=e+"treeE.png";var B=Bodies.rectangle(2581,a-6e3+3825,157,101,{isStatic:!0});B.src=e+"ruinL.png";var w=Bodies.rectangle(2610,a-6e3+3307,149,199,{isStatic:!0});w.src=e+"stoneA.png",w.fixedBounds=45;var M=Bodies.rectangle(2846,a-6e3+3077,99,85,{isStatic:!0});M.src=e+"stoneB.png";var P=Bodies.rectangle(2927,a-6e3+3859,63,113,{isStatic:!0});P.src=e+"ruinC.png";var A=Bodies.rectangle(2762,a-6e3+3964,70,113,{isStatic:!0});A.src=e+"ruinK.png";var D=Bodies.rectangle(2538,a-6e3+4154,63,113,{isStatic:!0});D.src=e+"ruinC.png";var j=Bodies.rectangle(2340,a-6e3+4058,128,199,{isStatic:!0});j.src=e+"ruinJ.png";var T=Bodies.rectangle(2151,a-6e3+4001,80,180,{isStatic:!0});T.src=e+"ruinA.png";var O=Bodies.rectangle(1990,a-6e3+4106,80,179,{isStatic:!0});O.src=e+"ruinB.png";var C=Bodies.rectangle(1858,a-6e3+4226,63,113,{isStatic:!0});C.src=e+"ruinC.png";var N=Bodies.rectangle(1702,a-6e3+4307,129,200,{isStatic:!0});N.src=e+"ruinD.png";var q=Bodies.rectangle(1783,a-6e3+4406,80,179,{isStatic:!0});q.src=e+"ruinB.png";var E=Bodies.rectangle(1946,a-6e3+4478,80,180,{isStatic:!0});E.src=e+"ruinA.png";var F=Bodies.rectangle(2075,a-6e3+4561,71,113,{isStatic:!0});F.src=e+"ruinE.png";var I=Bodies.rectangle(2194,a-6e3+4619,63,113,{isStatic:!0});I.src=e+"ruinI.png";var R=Bodies.rectangle(2036,a-6e3+4737,70,113,{isStatic:!0});R.src=e+"ruinK.png";var L=Bodies.rectangle(1909,a-6e3+4809,129,200,{isStatic:!0});L.src=e+"ruinD.png";var G=Bodies.rectangle(2074,a-6e3+4914,80,179,{isStatic:!0});G.src=e+"ruinB.png";var H=Bodies.rectangle(2263,a-6e3+5032,80,179,{isStatic:!0});H.src=e+"ruinF.png";var W=Bodies.rectangle(2494,a-6e3+4887,80,179,{isStatic:!0});W.src=e+"ruinF.png";var Y=Bodies.rectangle(2584,a-6e3+4830,63,113,{isStatic:!0});Y.src=e+"ruinI.png";var V=Bodies.rectangle(2679,a-6e3+4713,80,179,{isStatic:!0});V.src=e+"ruinB.png";var X=Bodies.rectangle(2780,a-6e3+4623,128,199,{isStatic:!0});X.src=e+"ruinJ.png";var _=Bodies.rectangle(2559,a-6e3+4284,128,199,{isStatic:!0});_.src=e+"ruinJ.png";for(var U=[t,i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R,L,G,H,W,Y,V,X,_],z=0,Q=U.length;z<Q;z++)U[z].name=U[z].label="staticOriGPass"+scope.uniqueId(),U[z].FixedPosition={x:U[z].position.x,y:U[z].position.y-a},U[z].fixedBounds||(U[z].fixedBounds=25);return U}()}),obj.createLayer("staticOriHPassLayerB",{x:3e3,y:0,location:t,layer:function(){var t=a+-6e3,i=Bodies.rectangle(200,t+5022,266,343,{isStatic:!0});i.src=e+"treeC.png";var s=Bodies.rectangle(379,t+5125,242,312,{isStatic:!0});s.src=e+"treeB.png";var n=Bodies.rectangle(693,t+5602,188,243,{isStatic:!0});n.src=e+"treeH.png";var r=Bodies.rectangle(2037,t+5736,266,343,{isStatic:!0});r.src=e+"treeC.png";var o=Bodies.rectangle(2772,t+5240,267,356,{isStatic:!0});o.src=e+"treeA.png";var l=Bodies.rectangle(2303,t+4815,266,343,{isStatic:!0});l.src=e+"treeC.png";var c=Bodies.rectangle(2188,t+5196,91,125,{isStatic:!0});c.src=e+"signB.png";var h=Bodies.rectangle(1571,t+5116,266,343,{isStatic:!0});h.src=e+"treeC.png";var p=Bodies.rectangle(1393,t+5219,201,259,{isStatic:!0});p.src=e+"treeD.png";var d=Bodies.rectangle(1950,t+4333,339,339,{isStatic:!0});d.src=e+"stoneC.png",d.fixedBounds=40;var g=Bodies.rectangle(2644,t+3400,99,85,{isStatic:!0});g.src=e+"stoneD.png";var m=Bodies.rectangle(2236,t+3846,267,356,{isStatic:!0});m.src=e+"treeA.png";var u=Bodies.rectangle(1879,t+3406,134,90,{isStatic:!0});u.src=e+"ruinN.png";var f=Bodies.rectangle(1771,t+3233,275,258,{isStatic:!0});f.src=e+"treeI.png";var v=Bodies.rectangle(1481,t+3939,201,259,{isStatic:!0});v.src=e+"treeD.png";var b=Bodies.rectangle(1356,t+3864,267,356,{isStatic:!0});b.src=e+"treeA.png";var S=Bodies.rectangle(1258,t+3928,242,312,{isStatic:!0});S.src=e+"treeB.png";var x=Bodies.rectangle(1078,t+3180,267,356,{isStatic:!0});x.src=e+"treeA.png";var k=Bodies.rectangle(906,t+3319,201,259,{isStatic:!0});k.src=e+"treeD.png";var y=Bodies.rectangle(708,t+3221,201,259,{isStatic:!0});y.src=e+"treeD.png";var B=Bodies.rectangle(239,t+3143,251,281,{isStatic:!0});B.src=e+"treeJ.png";var w=Bodies.rectangle(56,t+4619,129,200,{isStatic:!0});w.src=e+"ruinD.png";var M=Bodies.rectangle(233,t+4707,80,179,{isStatic:!0});M.src=e+"ruinB.png";var P=Bodies.rectangle(411,t+4817,63,113,{isStatic:!0});P.src=e+"ruinC.png";var A=Bodies.rectangle(570,t+4673,80,180,{isStatic:!0});A.src=e+"ruinA.png";var D=Bodies.rectangle(696,t+4557,80,180,{isStatic:!0});D.src=e+"ruinA.png";var j=Bodies.rectangle(837,t+4438,80,179,{isStatic:!0});j.src=e+"ruinB.png";var T=Bodies.rectangle(964,t+4366,71,113,{isStatic:!0});T.src=e+"ruinE.png";var O=Bodies.rectangle(1040,t+4242,128,119,{isStatic:!0});O.src=e+"ruinJ.png";var C=Bodies.rectangle(855,t+4206,63,113,{isStatic:!0});C.src=e+"ruinI.png";var N=Bodies.rectangle(662,t+4084,80,179,{isStatic:!0});N.src=e+"ruinB.png";var q=Bodies.rectangle(528,t+3996,129,200,{isStatic:!0});q.src=e+"ruinD.png";var E=Bodies.rectangle(688,t+3883,80,179,{isStatic:!0});E.src=e+"ruinF.png";var F=Bodies.rectangle(543,t+3831,63,113,{isStatic:!0});F.src=e+"ruinI.png";var I=Bodies.rectangle(383,t+3734,80,179,{isStatic:!0});I.src=e+"ruinF.png";var R=Bodies.rectangle(145,t+3723,80,179,{isStatic:!0});R.src=e+"ruinB.png";for(var L=[i,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N,q,E,F,I,R],G=0,H=L.length;G<H;G++)L[G].name=L[G].label="staticOriDPass"+scope.uniqueId(),L[G].FixedPosition={x:L[G].position.x,y:L[G].position.y-a},L[G].fixedBounds||(L[G].fixedBounds=15);return L}()}),obj.createLayer("staticOriHPassLayerC",{x:0,y:-3e3,location:t,layer:function(){var t=Bodies.rectangle(536,a-i+1553,266,343,{isStatic:!0});t.src=e+"treeC.png";var s=Bodies.rectangle(993,a-i+1982,266,343,{isStatic:!0});s.src=e+"treeC.png";var n=Bodies.rectangle(647,a-i+2462,251,281,{isStatic:!0});n.src=e+"treeK.png";var r=Bodies.rectangle(1053,a-i+2829,246,291,{isStatic:!0});r.src=e+"treeL.png";var o=Bodies.rectangle(2006,a-i+2422,246,291,{isStatic:!0});o.src=e+"treeL.png";var l=Bodies.rectangle(2663,a-i+2805,217,280,{isStatic:!0});l.src=e+"treeM.png";var c=Bodies.rectangle(2916,a-i+2581,157,101,{isStatic:!0});c.src=e+"ruinO.png",c.fixedBounds=30;var h=Bodies.rectangle(2882,a-i+1823,339,339,{isStatic:!0});h.src=e+"stoneC.png",h.fixedBounds=40,Bodies.rectangle(2620,a-i+1685,91,125,{isStatic:!0}).src=e+"signB.png";var p=Bodies.rectangle(2505,a-i+1346,188,243,{isStatic:!0});p.src=e+"treeH.png";var d=Bodies.rectangle(1981,a-i+1248,276,256,{isStatic:!0});d.src=e+"treeA.png";var g=Bodies.rectangle(1647,a-i+1829,276,256,{isStatic:!0});g.src=e+"treeA.png";var m=Bodies.rectangle(2872,a-i+755,266,343,{isStatic:!0});m.src=e+"treeC.png";var u=Bodies.rectangle(2696,a-i+856,242,312,{isStatic:!0});u.src=e+"treeB.png";var f=Bodies.rectangle(2409,a-i+907,149,199,{isStatic:!0});f.src=e+"stoneA.png";var v=Bodies.rectangle(1759,a-i+851,223,288,{isStatic:!0});v.src=e+"treeN.png";var b=Bodies.rectangle(1633,a-i+776,276,356,{isStatic:!0});b.src=e+"treeA.png";var S=Bodies.rectangle(1535,a-i+840,276,356,{isStatic:!0});S.src=e+"treeA.png";var x=Bodies.rectangle(734,a-i+796,266,343,{isStatic:!0});x.src=e+"treeC.png";var k=Bodies.rectangle(1146,a-i+227,276,356,{isStatic:!0});k.src=e+"treeA.png";var y=Bodies.rectangle(2505,a-i+205,188,243,{isStatic:!0});y.src=e+"treeH.png";var B=Bodies.rectangle(1009,a-i+1432,70,113,{isStatic:!0});B.src=e+"ruinK.png";var w=Bodies.rectangle(882,a-i+1504,129,200,{isStatic:!0});w.src=e+"ruinD.png";var M=Bodies.rectangle(1047,a-i+1609,80,179,{isStatic:!0});M.src=e+"ruinB.png";var P=Bodies.rectangle(1236,a-i+1727,80,179,{isStatic:!0});P.src=e+"ruinF.png";var A=Bodies.rectangle(1467,a-i+1582,80,179,{isStatic:!0});A.src=e+"ruinF.png";var D=Bodies.rectangle(1557,a-i+1525,63,113,{isStatic:!0});D.src=e+"ruinI.png";var j=Bodies.rectangle(1614,a-i+1139,63,113,{isStatic:!0});j.src=e+"ruinC.png";var T=Bodies.rectangle(1417,a-i+952,80,180,{isStatic:!0});T.src=e+"ruinA.png";var O=Bodies.rectangle(1189,a-i+868,128,199,{isStatic:!0});O.src=e+"ruinJ.png";var C=Bodies.rectangle(933,a-i+863,80,179,{isStatic:!0});C.src=e+"ruinB.png";var N=Bodies.rectangle(500,a-i+992,80,179,{isStatic:!0});N.src=e+"ruinB.png";for(var q=[t,s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D,j,T,O,C,N],E=0,F=q.length;E<F;E++)q[E].name=q[E].label="staticOriGPass"+scope.uniqueId(),q[E].FixedPosition={x:q[E].position.x,y:q[E].position.y-a},q[E].fixedBounds||(q[E].fixedBounds=15);return q}()}),obj.createLayer("staticOriGPassLayerD",{x:3e3,y:-3e3,location:t,layer:function(){var t=a+-i,s=Bodies.rectangle(2334,t+2815,247,292,{isStatic:!0});s.src=e+"treeE.png";var n=Bodies.rectangle(2202,t+2456,459,324,{isStatic:!0});n.src=e+"houseB.png",n.fixedBounds=60;var r=Bodies.rectangle(1378,t+2238,2238,356,{isStatic:!0});r.src=e+"treeA.png";var o=Bodies.rectangle(407,t+2397,216,280,{isStatic:!0});o.src=e+"treeO.png";var l=Bodies.rectangle(497,t+1389,242,312,{isStatic:!0});l.src=e+"treeB.png";var c=Bodies.rectangle(318,t+1286,266,343,{isStatic:!0});c.src=e+"treeC.png";var h=Bodies.rectangle(721,t+310,276,356,{isStatic:!0});h.src=e+"treeA.png";var p=Bodies.rectangle(2277,t+385,266,343,{isStatic:!0});p.src=e+"treeC.png";var d=Bodies.rectangle(2454,t+1280,223,288,{isStatic:!0});d.src=e+"treeN.png";var g=Bodies.rectangle(2266,t+1165,266,343,{isStatic:!0});g.src=e+"treeC.png";var m=Bodies.rectangle(1535,t+864,266,343,{isStatic:!0});m.src=e+"treeC.png";var u=Bodies.rectangle(1066,t+1289,276,356,{isStatic:!0});u.src=e+"treeA.png";var f=Bodies.rectangle(1800,t+1785,266,343,{isStatic:!0});f.src=e+"treeC.png";var v=Bodies.rectangle(2078,t+1371,63,113,{isStatic:!0});v.src=e+"ruinC.png";var b=Bodies.rectangle(1750,t+1343,80,179,{isStatic:!0});b.src=e+"ruinB.png";var S=Bodies.rectangle(1600,t+1624,80,179,{isStatic:!0});S.src=e+"ruinF.png";var x=Bodies.rectangle(1310,t+1761,128,199,{isStatic:!0});x.src=e+"ruinJ.png";var k=Bodies.rectangle(1295,t+1475,80,179,{isStatic:!0});k.src=e+"ruinF.png";var y=Bodies.rectangle(925,t+1040,80,180,{isStatic:!0});y.src=e+"ruinA.png";var B=Bodies.rectangle(1070,t+988,63,113,{isStatic:!0});B.src=e+"ruinC.png";var w=Bodies.rectangle(1230,t+891,80,180,{isStatic:!0});w.src=e+"ruinA.png";var M=Bodies.rectangle(1686,t+1016,63,113,{isStatic:!0});M.src=e+"ruinI.png";var P=Bodies.rectangle(1851,t+1121,71,113,{isStatic:!0});P.src=e+"ruinE.png";var A=Bodies.rectangle(2044,t+963,80,179,{isStatic:!0});A.src=e+"ruinB.png";var D=Bodies.rectangle(2342,t+1006,80,179,{isStatic:!0});D.src=e+"ruinB.png";for(var j=[s,n,r,o,l,c,h,p,d,g,m,u,f,v,b,S,x,k,y,B,w,M,P,A,D],T=0,O=j.length;T<O;T++)j[T].name=j[T].label="staticOriDPass"+scope.uniqueId(),j[T].FixedPosition={x:j[T].position.x,y:j[T].position.y-a},j[T].fixedBounds||(j[T].fixedBounds=25);return j}()})]},scope.staticAllMap.value.mapDungeonH.content}(),function(){var t=Bodies.rectangle(500,halfBottom,128,25,{isStatic:!0});t.label="staticBoxPreventJumpSpawnA",t.src=scope.path+"/grass/grassHalf.png";var e=Bodies.rectangle(3100,halfBottom,128,25,{isStatic:!0});e.label="staticSpawnPhaseOneB",e.src=scope.path+"/grass/grassHalf.png";var a=Bodies.rectangle(3300,halfCenter,256,25,{isStatic:!0});a.label="staticBoxSmallB",a.src=scope.path+"/grass/staticBoxSmallB.png";var i=Bodies.rectangle(3500,halfTopCenter,128,25,{isStatic:!0});i.label="staticSpawnPhaseOneC",i.src=scope.path+"/grass/grassHalf.png";for(var s=staticMediumWidth,n=3500,r=[],o=0;o<3;o++)if(n+=s,1===o){var l=Bodies.rectangle(n,halfTopTop,3*staticMediumWidth,50,{isStatic:!0});l.label="staticBoxPreventJumpMapAA",l.src=scope.path+"/grass/preventJumpA.png",n+=100}else if(2===o){var c=Bodies.rectangle((n+=s)+2*staticMediumWidth-75,levelHeight,2*staticMediumWidth-100,50,{isStatic:!0});c.moveSate=!0,c.label="staticBoxPreventJumpUpDownA",c.switchTo="up",c.moveEnd=halfTopTop,c.moveStart=levelHeight,c.src=scope.path+"/grass/rollUp.png";var h=Bodies.rectangle(n+=s/2-25,halfCenter,staticMediumWidth,levelHeight+50,{isStatic:!0});h.label="staticBoxUpA",h.src=scope.path+"/grass/hill.png";var p=Bodies.rectangle(n+=2*s+50,levelHeight-staticSmallWidth,staticSmallWidth,50,{isStatic:!0});p.label="staticBoxrollPairA",p.triggerTo="staticBoxPreventJumpUpDownA",p.switchState=!0,r.push(p),(x=Bodies.rectangle(n,halfTopTop+halfBottomLvl2,85,50,{isStatic:!0})).label="staticBoxLvlB3a",x.src=scope.path+"/grass/grassHalfSmall.png",r.push(x),(x=Bodies.rectangle(n-s,halfCenterLvl2,85,50,{isStatic:!0})).label="staticBoxLvlB3b",x.src=scope.path+"/grass/grassHalfSmall.png",r.push(x);var d=Bodies.rectangle(n,halfTopCenterLvl2,85,50,{isStatic:!0});d.label="staticBoxLvlB3c",d.src=scope.path+"/grass/grassHalfSmall.png";var g=Bodies.rectangle(n-3*s,halfCenterLvl2,staticMediumWidth,50,{isStatic:!0});g.label="staticBoxLvlB3d",g.src=scope.path+"/grass/grassMed.png";var m=Bodies.rectangle(n+=s+2*staticMediumWidth+25,halfTopTopLvl2,4*staticMediumWidth+50,50,{isStatic:!0});m.label="staticBoxPreventJumpMapAB6",m.src=scope.path+"/grass/grass850.png"}s=staticMediumWidth;var u=3500,f=staticMediumWidth/2,v=[];for(o=0;o<21;o++)if(5===o){var b=Bodies.rectangle(u+s-125,halfTopTop+halfBottomLvl2/2,50,halfBottomLvl2-50,{isStatic:!0});b.label="staticBoxPreventJumpMapAB2",b.src=scope.path+"/grass/grassHill.png"}else if(o>3){if(16===o){var S=Bodies.rectangle((u+s)/2,halfBottomLvl2,13*staticMediumWidth,50,{isStatic:!0});S.label="staticBoxPreventJumpMapAB3",S.src=scope.path+"/grass/preventJumpC.png"}var x;if(17===o)(x=Bodies.rectangle(f,halfTopCenter,staticMediumWidth,50,{isStatic:!0})).label="staticBoxPreventJumpMapAB4",x.src=scope.path+"/grass/grassMed.png",v.push(x);if(19===o){var k=Bodies.rectangle(f+=4*s,halfTopTop+halfBottomLvl2/2,10,10,{isStatic:!0});k.label="staticBoxPreventJump-"+o}}else{if(3===o){var y=Bodies.rectangle(u+s,halfTopTop,3*staticMediumWidth,50,{isStatic:!0});y.label="staticBoxPreventJumpMapAB1",y.src=scope.path+"/grass/preventJumpB.png"}u-=s}s=0;var B="mapA";staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSmallLeft.png",range:s+=400,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/fence.png",range:s+=1200,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSmallLeft.png",range:s+=100,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/bush.png",range:s+=2300,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/foliagePack.png",range:s+=1200,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/flwrC.png",range:s+=100,attach:"staticWallOutterBottom"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSamllB.png",range:150,attach:"staticBoxSmallB"});var w=0;staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/foliagePack.png",range:w+=130,attach:"staticBoxPreventJumpMapAB1"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/mushroomRedSmall.png",range:w+=40,attach:"staticBoxPreventJumpMapAB1"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSmallC.png",range:w+=40,attach:"staticBoxPreventJumpMapAB1"});var M=0;staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/fence.png",range:M+=600,attach:"staticBoxPreventJumpMapAB3"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/tree-big.png",range:M+=100,attach:"staticBoxPreventJumpMapAB3"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/tree-small.png",range:M+=150,attach:"staticBoxPreventJumpMapAB3"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSmallE.png",range:M+=750,attach:"staticBoxPreventJumpMapAB3"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSmallD.png",range:M+=200,attach:"staticBoxPreventJumpMapAB3"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/grassSmallD.png",range:50,attach:"staticSpawnPhaseOneH"});var P=0;staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/mushroomRedSmall.png",range:P+=150,attach:"staticBoxPreventJumpMapAA"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/mushroomRedMed.png",range:P+=50,attach:"staticBoxPreventJumpMapAA"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/bush.png",range:50,attach:"staticBoxUpA"});var A=0;staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/bush.png",range:A+=50,attach:"staticBoxPreventJumpMapAB6"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/stoneA.png",range:A+=50,attach:"staticBoxPreventJumpMapAB6"}),staticGeometry.createEnviPoint(B,{src:scope.path+"/ornaments/foliagePackB.png",range:A+=50,attach:"staticBoxPreventJumpMapAB6"});var D=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,range:100,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticBoxPreventJumpMapAB3",location:"mapA",targetLocation:"mapB"}),j=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,range:500,color:scope.rgbRandom(1),effect:"glowPortal",attach:"staticWallOutterBottom",location:"mapA",targetLocation:"mapAADungeonA"}),T=staticGeometry.createPortal({width:staticMediumWidth,height:staticMediumWidth,range:700,attach:"staticWallOutterBottom",color:scope.rgbRandom(1),effect:"glowPortal",location:"mapA",targetLocation:"mapDungeonH"});return scope.staticAllMap.value.mapA.content={staticWallOuttermapA:obj.createWall(B),staticSpawnPhaseOneA:t,staticSpawnPhaseOneB:e,staticSpawnPhaseOneC:i,staticSpawnPhaseOneD:k,staticSpawnPhaseOneG:d,staticSpawnPhaseOneH:g,staticOriPortalMapA:D,staticOriPortalMapAA:j,staticOriPortalMapATemp:T,staticBoxSmallJumpC:r,staticBoxSmallJumpD:v,staticSpawnPhaseOneF:b,staticBoxPreventJumpMapAB6:m,staticBoxPreventJumpMapAA:l,staticBoxPreventJumpMapAB1:y,staticBoxPreventJumpMapAB3:S,staticBoxPreventJumpUpDownA:c,staticBoxUpA:h,staticBoxSmallB:a},scope.staticAllMap.value.mapA.content}(),{staticCoin:function(){var t=scope.path+"/coin-sprite.png",e=Bodies.circle(0,0,20,{collisionFilter:{category:2},render:{sprite:{texture:t}}});return e.label="coin-"+scope.uniqueId(),e.name="item",e.inverseInertia=0,e}},{staticFireBall:function(){var t=scope.path+"/1px.png",e=Bodies.circle(0,0,1,{isStatic:!0,collisionFilter:{category:2},render:{sprite:{texture:t}}});return e.label="staticFireBall-"+scope.uniqueId(),e.name="pass",e.inverseInertia=0,e}},{staticRocket:function(){var t=scope.path+"/rocket-sprite.png",e=Bodies.rectangle(800,200,40,40,{isStatic:!0,collisionFilter:{mask:2},render:{sprite:{texture:t}}});return e.label="staticRocket-"+scope.uniqueId(),e}},{createItem:function(t,e,a){"Ness Scale"===t&&(t="drop-item");var i=scope.path+"/"+t+".png";return item=Bodies.rectangle(0,0,e,a,{collisionFilter:{category:4},render:{sprite:{texture:i}}}),item.label="item_"+t+"_"+scope.uniqueId(),item.name="item",item.inverseInertia=0,item}},{staticMonsterBlack:function(){var t=scope.path+"/monster-black-right.png",e=Bodies.circle(0,0,20,{collisionFilter:{mask:1},render:{sprite:{texture:t}}});return e.label="monster-black-"+scope.uniqueId(),e.inverseInertia=0,e.name="monster-black",e.visible=!0,e}},{staticMonsterHorn:function(){var t=scope.path+"/monster-horn-right.png",e=Bodies.circle(0,0,20,{collisionFilter:{category:4},render:{sprite:{texture:t}}});return e.label="monster-horn-"+scope.uniqueId(),e.inverseInertia=0,e.name="monster-horn",e.visible=!0,e}},{staticMonsterSlime:function(){var t=scope.path+"/monster-slime-right.png",e=Bodies.rectangle(0,0,40,25,{collisionFilter:{category:4},render:{sprite:{texture:t}}});return e.label="monster-slime-"+scope.uniqueId(),e.inverseInertia=0,e.name="monster-slime",e.visible=!0,e}},{staticAreaDmg:function(t,e,a){var i=scope.path+"/1px.png",s=Bodies.rectangle(t.x,t.y,e,a,{isStatic:!0,collisionFilter:{category:4},render:{sprite:{texture:i}}});return s.monsterParameters=[],s.label="areaDmg-"+scope.uniqueId(),s.inverseInertia=0,s.name="areaDmg",s.visible=!0,s.pass=!0,s}},{staticGeneralMonster:function(t,e,a,i){var s=scope.path+"/"+t+"-right.png",n=Bodies.rectangle(0,0,60,70,{collisionFilter:{category:4},render:{sprite:{texture:s}}});return n.label="monster-"+t+"-"+scope.uniqueId(),n.inverseInertia=0,n.name="monster-"+t,n.initialName=t,n.additionalBoundsValue=e,n.additionalBoundsHeightValue=i,n.additionalBoundsWidthValue=a,n.walkFrameSpeed=2,n.visible=!0,n.mapMark=new scope.draw.mapMark,n.stateStorage="monster"+t.charAt(0).toUpperCase()+t.slice(1)+"State",n}},(Q7=scope.path+"/mage-character-right.png",R7=Bodies.rectangle(scope.browserWidthUpdate/2,scope.browserHeightUpdate/2,60,70,{friction:1,collisionFilter:{mask:1},render:{sprite:{texture:Q7}}}),R7.label="oval",R7.behave="idle",R7.stateStorage="characterState",R7.initialName="mage-character",R7.additionalBoundsHeightValue=58,R7.additionalBoundsWidthValue=21,R7.pions=[],R7.totalOfFrames=45,R7.additionalBoundsValue=60,R7.mapMark=new scope.draw.mapMark,R7.walkFrameSpeed=2,R7.name="character",R7.inverseInertia=0,{oval:R7}),{staticMonsterGolem:function(){var t=scope.path+"/golem-right.png",e=Bodies.rectangle(0,0,200,130,{collisionFilter:{category:4},render:{sprite:{texture:t}}});return e.label="monster-golem-"+scope.uniqueId(),e.inverseInertia=0,e.name="monster-golem",e.visible=!0,e}},{staticMonsterYellow:function(){var t=scope.path+"/monster-yellow-rocket-right.png",e=Bodies.circle(0,0,20,{collisionFilter:{mask:1},render:{sprite:{texture:t}}});return e.label="monster-yellow-"+scope.uniqueId(),e.inverseInertia=0,e.name="monster-land",e.visible=!0,e}},{staticGreenDragon:function(){var t=scope.path+"/dragon-green-left.png",e=Bodies.rectangle(200,200,111,50,{isStatic:!0,collisionFilter:{category:4},render:{sprite:{texture:t}}});return e.label="monster-green-dragon-"+scope.uniqueId(),e.inverseInertia=0,e.name="monster-green-dragon",e.visible=!0,e}}]},skillCasting:function(){if(scope.tickMinute--,scope.tickMinute<=1){var t=scope.buffGUI.value.storage,e=scope.characterSkills.value.get("oval");if(t.length)for(var a in t){var i=scope.getFirstChild(scope.id(t[a].status.id));scope.text(i,Math.floor(25*t[a].status.tick/1e3)+"s")}for(var s=0,n=e.length;s<n;s++)if(!e[s].state){e[s].tickUpdate--;var r,o,l,c=scope.qs("time-span-"+e[s].label),h=e[s],p=h.tickUpdate;l=Math.floor(25*p/1e3),p<=0&&(h.loading.remove="true"),r=l>=60?(o=Math.floor(l/60))+","+(l-60*o):l<0?1:l+1,c&&"block"!==c.style.display&&(c.style.display="block"),c&&scope.text(c,r)}scope.tickMinute=40}},initilizeObject:function(){var scope=this,MouseConstraint=Matter.MouseConstraint,MouseMatter=Matter.Mouse,mouseMatter=MouseMatter.create(canvas);with(scope){world=engine.world;for(var jj=0,kk=fragment;jj<kk.length;jj++)for(var ll in kk[jj])ll in kk[jj]&&(/staticWall|staticOri|staticMonsterBlack|staticFireBall|staticMonsterYellow|staticGreenDragon|staticCoin|staticRocket/i.test(ll)?"staticWallOuttermapA"===ll&&World.add(world,kk[jj][ll]):World.add(world,kk[jj][ll]),objFragment[ll]=kk[jj][ll]);world.gravity.y=1.7,world.gravity.x=0;var mouseConstraint=MouseConstraint.create(engine,{mouse:mouseMatter,constraint:{stiffness:.2,render:{visible:!0}}});scope.extend(scope.objFragment,{monsterSlimeState:new scope.storageState.value,monsterBlackState:new scope.storageState.value,monsterHornState:new scope.storageState.value,monsterGolemState:new scope.storageState.value,monsterYetiState:new scope.storageState.value,monsterYetiAlphaState:new scope.storageState.value,monsterLightElementalState:new scope.storageState.value,monsterFireElementalState:new scope.storageState.value,monsterBugTailWarriorRedState:new scope.storageState.value,monsterBugWarriorRedState:new scope.storageState.value,monsterBugWarriorState:new scope.storageState.value,monsterBugTailWarriorState:new scope.storageState.value,monsterBugQueenState:new scope.storageState.value,monsterBugState:new scope.storageState.value,monsterGoblinWarriorMageState:new scope.storageState.value,monsterGoblinWarriorSpearState:new scope.storageState.value,monsterGoblinWarriorArmoredState:new scope.storageState.value,monsterGoblinWarriorArcherState:new scope.storageState.value,monsterBeastElementalSpearState:new scope.storageState.value,monsterBeastElementalArmoredState:new scope.storageState.value,monsterEarthElementalMageBState:new scope.storageState.value,monsterEarthElementalMageState:new scope.storageState.value,monsterWhiteBoarJrState:new scope.storageState.value,monsterBoarJrState:new scope.storageState.value,monsterBoarState:new scope.storageState.value,monsterBoarWhiteState:new scope.storageState.value,monsterWolfArcherState:new scope.storageState.value,monsterWolfHunterState:new scope.storageState.value,monsterWolfMageState:new scope.storageState.value,monsterWolfSpearState:new scope.storageState.value,monsterWolfArmoredState:new scope.storageState.value,monsterWolfHummerState:new scope.storageState.value,monsterHollowArcherBState:new scope.storageState.value,monsterHollowArcherState:new scope.storageState.value,monsterHollowArmoredState:new scope.storageState.value,monsterHollowSpearState:new scope.storageState.value,monsterHollowMageState:new scope.storageState.value,monsterMinatourMageState:new scope.storageState.value,monsterMinatourArmoredState:new scope.storageState.value,monsterMinatourSpearState:new scope.storageState.value,monsterMinatourArcherState:new scope.storageState.value,monsterHumanRoyalArmoredState:new scope.storageState.value,monsterHumanRoyalSpearState:new scope.storageState.value,monsterHumanRoyalArcherState:new scope.storageState.value,monsterHumanArmoredState:new scope.storageState.value,monsterHumanMageState:new scope.storageState.value,monsterHumanArcherState:new scope.storageState.value,monsterElfSpearState:new scope.storageState.value,monsterElfArcherState:new scope.storageState.value,monsterElfMageState:new scope.storageState.value,monsterElfArmoredState:new scope.storageState.value,monsterGoblinSpearState:new scope.storageState.value,monsterGoblinArmoredState:new scope.storageState.value,monsterGoblinMageState:new scope.storageState.value,monsterGoblinArcherState:new scope.storageState.value,monsterSekletonArmoredState:new scope.storageState.value,monsterSekletonArcherState:new scope.storageState.value,monsterYellowState:new scope.storageState.value,greenDragonState:new scope.storageState.value,rocketState:new scope.storageState.value,monsterParameters:new scope.storageState.value,monsterGetDamage:new scope.storageState.value,itemShop:new scope.storageState.value,monsterAttribute:function(t,e,a){if(t>=0&&t<5){if("soul"===e){var i=scope.random(13,7);return a?2*i:i}if("exp"===e){var s=scope.random(45,31);return a?2*s:s}}else if(t>=5&&t<10){if("soul"===e){i=scope.random(17,11);return a?2*i:i}if("exp"===e){s=scope.random(84,63);return a?2*s:s}}else if(t>=10&&t<13){if("soul"===e){i=scope.random(21,9);return a?2*i:i}if("exp"===e){s=scope.random(155,105);return a?2*s:s}}else if(t>=13&&t<16){if("soul"===e){i=scope.random(28,15);return a?2*i:i}if("exp"===e){s=scope.random(185,135);return a?2*s:s}}else if(t>=16&&t<19){if("soul"===e){i=scope.random(35,23);return a?2*i:i}if("exp"===e){s=scope.random(235,175);return a?2*s:s}}else if(t>=19&&t<21){if("soul"===e){i=scope.random(45,33);return a?2*i:i}if("exp"===e){s=scope.random(237,185);return a?2*s:s}}else if(t>=21&&t<23){if("soul"===e){i=scope.random(21,15);return a?2*i:i}if("exp"===e){s=scope.random(215,165);return a?2*s:s}}else if(t>=23&&t<25){if("soul"===e){i=scope.random(42,34);return a?2*i:i}if("exp"===e){s=scope.random(295,215);return a?2*s:s}}else if(t>=25&&t<27){if("soul"===e){i=scope.random(58,43);return a?2*i:i}if("exp"===e){s=scope.random(435,375);return a?2*s:s}}else if(t>=27&&t<30){if("soul"===e){i=scope.random(91,73);return a?2*i:i}if("exp"===e){s=scope.random(565,495);return a?2*s:s}}},pickUpDropItem:function(t){var e=t.parent,a=t.initial,i=t.value;if(scope.items.value[e][a]){for(var s=characterInventoryBag.value.get("oval"),n=!0,r=0;r<s.length;r++)if(s[r].root.initial===a&&s[r].quantity<99){s[r].unique?n=!0:s[r].quantity+i>99?(i=s[r].quantity+i-99,s[r].quantity=99,n=!0):(n=!1,s[r].quantity+=i);break}n&&s.push(new scope.items.value[e][a]({quantity:i}))}},characterDropItem:function(t){characterInventoryBag.value.get("oval");var e,a=scope.oval.value.position,i=scope.random(1,0)?"left":"right",s=t.displayName?t.displayName:t.name,n=a.x+("left"===i?scope.random(1,0)?scope.random(-50,-100):scope.random(50,100):scope.random(1,0)?scope.random(50,100):scope.random(-50,-100)),r=a.y+("left"===i?scope.random(1,0)?scope.random(-50,-100):scope.random(50,100):scope.random(1,0)?scope.random(50,100):scope.random(-50,-100));(e=new scope.monsterControl.item.create(n,r,s,{name:"Ness Scale",width:74,height:68},t.root)).object.itemVal=t.quantity,scope.monsterControl.itemTemp.push(e),scope.World.add(scope.staticWorld.value,e.object)},infoLog:new scope.storageState.value,infoLogFn:"",infoFilter:"",questLog:"",intervalList:new scope.storageState.value,characterQuest:new scope.storageState.value,characterUpdateQuest:"",characterParameters:"",characterGetDamage:new scope.storageState.value,characterInventoryBag:new scope.storageState.value,initUndeadSkill:function(){for(var t=["lightningShock"],e=!0,a=function(t){for(var e=scope.slice(scope.qsAll("disable-skill")),a=0;a<e.length;a++){var i=e[a].parentNode.className;/undead/i.test(i)&&(e[a].style.display=t?"block":"none")}},i=0;i<t.length;i++)if(scope.buffGUI.value.get(t[i])){e=!1;break}if(e){var s=scope.characterSkills.value.get("oval"),n=scope.characterInventoryBag.value.get("oval");i=0;t:for(var r=s.length;i<r;i++)if("undead"===s[i].name){var o=scope.isMobile.value()?scope.qs("familiar-box-mb"):scope.qs("familia-box");if(divItem=scope.slice(o.getElementsByTagName("div")),!divItem.length){s[i].disable=!0,a(!0);break t}for(var l=0,c=divItem.length;l<c;l++){var h=divItem[l].getAttribute("label");if(h)for(var p=0,d=n.length;p<d;p++)if(h===n[p].label){s[i].disable=!1,a(!1);break t}}}}},characterSkills:new scope.storageState.value,caracterSkillToogleFn:function(t){var e=scope.characterSkills.value.get("oval"),a=scope.characterParameters.value.mp,i=[],s=[],n=!0,r=scope.buffGUI.value.storage,o=!0;for(var l in r)/lightningShock/i.test(r[l].name)&&(o=!1);if(o){for(var c=0,h=e.length;c<h;c++)a<e[c].mp&&!e[c].disable||t?(e[c].disable=!0,i.push(e[c])):(a>=e[c].mp&&e[c].disable||t)&&(e[c].disable=!1,s.push(e[c])),a<e[c].mp&&"undead"===e[c].name&&(n=!1);i.length&&scope.disableSkill.value("disable",i),s.length&&scope.disableSkill.value("enable",s),n&&!scope.qs("familia-box").getElementsByTagName("div").length&&scope.initUndeadSkill.value()}},characterSkillDisable:function(t,e){for(var a=scope.characterSkills.value.get(scope.oval.value.label),i=0,s=a.length;i<s;i++)if(e)for(var n=0;n<e.length;n++)a[i].label===e[n].label&&(a[i].disable="disable"===t);else a[i].disable="disable"===t;scope.initUndeadSkill.value()},disableSkill:function(t,e){for(var a=scope.slice(scope.qsAll("disable-skill")),i=0;i<a.length;i++)if(e)for(var s=a[i].parentNode.getAttribute("label"),n=0;n<e.length;n++)s===e[n].label&&(a[i].style.display="disable"===t?"block":"none");else a[i].style.display="disable"===t?"block":"none"},characterState:new scope.storageState.value,characterMobileControl:{status:"",charObj:"",top:!1,left:!1,bottom:!1,right:!1,jump:!1},characterStatus:"",characterLevel:function(t,e){var a,i,s=scope.characterParameters.value,n=[s],r=function(t,a){var i={attributLvl:{mage:{statA:{attackRange:2,attack:1,hp:4.2,mp:4.7,magicDefense:8,defense:3},statB:{attackRange:12,attack:8,hp:5.7,mp:5.8,magicDefense:16,defense:12},statC:{attackRange:17,attack:12,hp:6.8,mp:6.3,magicDefense:24,defense:22},statD:{attackRange:24,attack:18,hp:8.8,mp:9.3,magicDefense:31,defense:21},statE:{attackRange:36,attack:28,hp:10.8,mp:10.3,magicDefense:41,defense:41}},warrior:{statA:{attackRange:1,attack:6,hp:5,mp:70,magicDefense:3,defense:13},statB:{attackRange:5,attack:21,hp:7.4,mp:35,magicDefense:6,defense:17},statC:{attackRange:9,attack:37,hp:9.7,mp:15,magicDefense:9,defense:25},statD:{attackRange:13,attack:47,hp:10.7,mp:13,magicDefense:12,defense:22},statE:{attackRange:23,attack:41,hp:12.7,mp:10,magicDefense:22,defense:29}},archer:{statA:{attackRange:6,attack:3,hp:4.1,mp:70,magicDefense:7,defense:13},statB:{attackRange:24,attack:6,hp:4.7,mp:35,magicDefense:11,defense:15},statC:{attackRange:41,attack:12,hp:7.7,mp:15,magicDefense:13,defense:17},statD:{attackRange:53,attack:19,hp:9.4,mp:12,magicDefense:24,defense:19},statD:{attackRange:50,attack:27,hp:11.4,mp:14,magicDefense:44,defense:32}}},instantceFormula:function(t){for(var e=scope.isMobile.value()?scope.qs("items-equipment-mb"):scope.qs("passive-magic"),a=scope.slice(e.getElementsByTagName("li")),i=scope.characterInventoryBag.value.get("oval"),s=[],n=0,r=a.length;n<r;n++){var o=a[n].getElementsByTagName("div");if(o.length)for(var l=0;l<i.length;l++)o[0].getAttribute("label")===i[l].label&&s.push(i[l])}if((s=scope.uniqueArray(s)).length){n=0;for(var c=t.originalParams;n<s.length;n++)if(s[n].effect){var h=s[n].effect;for(var r in h)switch(r){case"attack":t.attackRangeMax=t.attackRangeMax+c.attackRangeMax*h[r].value/100,t.attackRangeMin=t.attackRangeMin+c.attackRangeMin*h[r].value/100,t.attackMax=t.attackMax+c.attackMax*h[r].value/100,t.attackMin=t.attackMin+c.attackMin*h[r].value/100;break;case"defense":t.defenseMax=t.defenseMax+c.defenseMax*h[r].value/100,t.defenseMin=t.defenseMin+c.defenseMin*h[r].value/100;break;case"magicDefense":t.magicDefenseMax=t.magicDefenseMax+c.magicDefenseMax*h[r].value/100,t.magicDefenseMin=t.magicDefenseMin+c.magicDefenseMin*h[r].value/100}}}},changeCharStat:function(t,e,i){var s=a.originalParams?a.originalParams:a,n=this.attributLvl[t][e];percentageKill=i?1:scope.randomFloat(.99,.8),a.attackRangeMax=s.attackRangeMax+=Math.round(n.attackRange*percentageKill),a.attackRangeMin=s.attackRangeMin+=Math.round(n.attackRange*percentageKill),a.attackMax=s.attackMax+=Math.round(n.attack*percentageKill),a.attackMin=s.attackMin+=Math.round(n.attack*percentageKill),a.magicDefenseMax=s.magicDefenseMax+=Math.round(n.magicDefense*percentageKill),a.magicDefenseMin=s.magicDefenseMin+=Math.round(n.magicDefense*percentageKill),a.defenseMax=s.defenseMax+=Math.round(n.defense*percentageKill),a.defenseMin=s.defenseMin+=Math.round(n.defense*percentageKill),a.maxHealth=s.maxHealth+=Math.round(Math.round(s.maxHealth*(n.hp/100))*percentageKill),a.maxMp=s.maxMp+=Math.round(Math.round(s.maxMp*(n.mp/100))*percentageKill),a.originalParams&&this.instantceFormula(a)}},s="oval"===a.name?"mage":"Blood Lich Warrior"===a.name?"warrior":"archer",n=a.name===e;t>=0&&t<3?i.changeCharStat(s,"statA",n):t>=3&&t<7?i.changeCharStat(s,"statA",n):t>=7&&t<13?i.changeCharStat(s,"statB",n):t>=13&&t<15?i.changeCharStat(s,"statC",n):t>=15&&t<18?i.changeCharStat(s,"statD",n):t>=18&&t<=25&&i.changeCharStat(s,"statE",n)},o={levelA:[25,50,75,100,125,150,175,200,225,250],levelB:[300,350,400,450,500,550,600,650,700,750],levelC:[750,1050,1350,1700,4200,4700,5200,5700,6200,6700]},l=function(t,e,a,i){for(var s=0,n=a.length+e;s<n;s++)if(i.tot+=a[s],s+1===t.level){i.tot+=s+1===10?o.levelB[0]:s+1===20?o.levelC[0]:a[s+1];break}},c=s.object.pions,h=scope.characterInventoryBag.value.get("oval"),p=[];if(c.length)t:for(var d=0;d<c.length;d++)for(var g=c[d].rigBody.itemLabel,m=0,u=h.length;m<u;m++)if(h[m].label===g){p.push(h[m].familiar);continue t}for(d=0,m=(n=n.concat(p)).length;d<m;d++){var f=n[d],v="oval"===n[d].name,b={tot:0};if(t){var S=f.name===e?1:scope.randomFloat(.85,.65),x=Math.round(t.exp*S);f.expTemp+=x,v&&(scope.text(scope.qs("addedExp"),"+"+x),$(".addedExp").show(),$(".addedExp").fadeOut(4500),scope.text(scope.qs("currentExp"),f.expTemp),scope.infoLogFn.value({title:"regular-title",text:{white:"Got",chocolate:" +"+x+" ",skyBlue:"Exp"}}))}if(v&&(scope.text(scope.qs("level"),f.level),scope.text(scope.qs("currentExp"),f.expTemp)),i=b,(a=f).level<=10?l(a,0,o.levelA,i):a.level>10&&a.level<=20?l(a,a.level,o.levelA.concat(o.levelB),i):a.level>20&&a.level<=30&&l(a,a.level,o.levelA.concat(o.levelB).concat(o.levelC),i),f.expTemp>f.exp+b.tot&&(f.exp=f.expTemp,f.level++,v&&f.skillPoint++,r(f.level,f)),v){var k=(f.expTemp-f.exp)/b.tot*100;scope.css(scope.qs("exp-bar"),{width:Math.round(k)+"%"}),scope.text(scope.qs("nextEpx"),f.exp+b.tot),scope.text(scope.qs("level"),f.level)}}},characterPionsAttribute:function(t){var e={clearParameters:function(t){t.modifierAbilities={},t.originalParams&&(originalParams=t.originalParams,t.attackRangeMax=originalParams.attackRangeMax,t.attackRangeMin=originalParams.attackRangeMin,t.attackMax=originalParams.attackMax,t.attackMin=originalParams.attackMin,t.magicDefenseMax=originalParams.magicDefenseMax,t.magicDefenseMin=originalParams.magicDefenseMin,t.defenseMax=originalParams.defenseMax,t.defenseMin=originalParams.defenseMin)},expandAbilityParams:function(t,e,a,i){e[i]=a[i].value,scope.extend(t.modifierAbilities,e,!0)},parameters:function(t,e,a,i){t.originalParams||(t.originalParams={},scope.extend(t.originalParams,t,!0)),t.modifierAbilities||(t.modifierAbilities={});for(var s=0,n=t.originalParams;s<e.length;s++)if(e[s].effect){var r=e[s].effect;for(var o in r){var l={};switch(o){case"attack":t.attackRangeMax=t.attackRangeMax+n.attackRangeMax*r[o].value/100,t.attackRangeMin=t.attackRangeMin+n.attackRangeMin*r[o].value/100,t.attackMax=t.attackMax+n.attackMax*r[o].value/100,t.attackMin=t.attackMin+n.attackMin*r[o].value/100;break;case"defense":t.defenseMax=t.defenseMax+n.defenseMax*r[o].value/100,t.defenseMin=t.defenseMin+n.defenseMin*r[o].value/100;break;case"magicDefense":t.magicDefenseMax=t.magicDefenseMax+n.magicDefenseMax*r[o].value/100,t.magicDefenseMin=t.magicDefenseMin+n.magicDefenseMin*r[o].value/100;break;case"avoid":case"stun":case"critical":this.expandAbilityParams(t,l,r,o)}}}}},a=scope.characterInventoryBag.value.get("oval");if("reset"===t){for(var i=0,s=a.length;i<s;i++)if(a[i].familiar){var n=a[i].familiar;e.clearParameters(n)}}else if("update"===t){var r=scope.isMobile.value()?scope.qs("items-equipment-mb"):scope.qs("passive-magic"),o=scope.oval.value.pions,l=scope.slice(r.getElementsByTagName("li")),c=[];for(i=0,s=l.length;i<s;i++){var h=l[i].getElementsByTagName("div");if(h.length)for(var p=0;p<a.length;p++)h[0].getAttribute("label")===a[p].label&&function(){var t=a[p].effect;for(var e in t)for(var i=0,s=t[e].target;i<s.length;i++)if(/pion/i.test(s[i]))return!0;return!1}()&&c.push(a[p])}if((c=scope.uniqueArray(c)).length)for(s=0,p=a.length;s<p;s++)if(a[s].familiar){n=a[s].familiar;e.parameters(n,c,a)}if(o.length&&c.length)t:for(i=0;i<o.length;i++){var d=o[i].rigBody.itemLabel;for(s=0,p=a.length;s<p;s++)if(a[s].label===d){n=a[s].familiar;e.parameters(o[i].rigBody.monsterParameters,c,a);continue t}}}},items:"",scaleMap:{map:2,mark:8,centerMark:{x:20,y:35},centerMap:{x:30,y:0},close:!1},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},registerMagicBoxItem:new scope.storageState.value,monsterGotHitWithSkill:new scope.storageState.value,areaDmgPool:new scope.storageState.value,staticWallOutter:"",buffSkill:new scope.storageState.value,buffGUI:new scope.storageState.value,mouseConstraint:mouseConstraint,globalAudio:new scope.storageState.value,globalLoadGame:scope.loadGame,globalEngine:scope.engine,globalWorld:scope.World,globalBody:scope.Body,globalSaveLoad:function(){},globalSaveGame:"",globalLoopingAudio:new scope.storageState.value,controlGUICheck:function(){var t=scope.slice(scope.qsAll(".med-divice-nav"));if(scope.isMobile.value()){for(var e in scope.qs(".nav-left-b").style.display="block",t)t[e].style.display="block";scope.qs("hidden-menu").style.display="block",scope.removeClass(scope.qs("mini-map-mobile"),"hidden"),scope.addClass(scope.qs("menu-map-mobile"),"hidden"),scope.qs("controller-right").style.display="block",scope.qs("nav-bottom").style.display="none",scope.qs("nav-bottom-mobile").style.display="block",scope.qs("info-menu").style.display="none",scope.qs("nav-info-text").style.display="none",scope.qs("info-text").style.display="none",scope.qs("menu-map").style.display="none"}else{for(var e in scope.qs("nav-left-b").style.display="none",t)t[e].style.display="none";scope.qs("hidden-menu").style.display="none",scope.qs("nav-bottom").style.display="block",scope.qs("nav-bottom-mobile").style.display="none",scope.qs("controller-right").style.display="none",scope.addClass(scope.qs("mini-map-mobile"),"hidden"),scope.addClass(scope.qs("menu-map-mobile"),"hidden"),scope.qs("info-menu").style.display="block",scope.qs("nav-info-text").style.display="block",scope.qs("info-text").style.display="block",scope.qs("menu-map").style.display="block"}scope.characterLevel.value()},healthBar:function(t,e,a,i,s,n){var r="small"===i?100:"medium"===i?150:200,o=s-r/2,l=n-20;t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(o,l,1*r,8),t.fillStyle="#FF0000",t.fillRect(o,l,e/a*r,8)},orderObjectFn:function(){for(var t=scope.Composite.allBodies(scope.engine.world),e=[],a=[],i=[],s=0,n=t.length;s<n;s++){var r=t[s].bounds.max.y;/PassBG/i.test(t[s].label)?i.push(r):e.push(r)}e.sort(function(t,e){return t-e}),scope.orderObj=e,i.sort(function(t,e){return t-e}),a=i;t:for(s=0,n=t.length;s<n;s++){r=t[s].bounds.max.y;for(var o=0,l=e;o<l.length;o++)if(r===l[o]&&!/PassBG/i.test(t[s].label)){scope.orderObj[o]=t[s];continue t}for(var c=0,h=i;c<h.length;c++)if(r===h[c]&&/PassBG/i.test(t[s].label)){a[c]=t[s];continue t}}e=a.concat(scope.orderObj);var p="";for(s=0;s<e.length;s++)/controlRigh/i.test(e[s].label)&&(p=e[s],e.splice(s,1),e.unshift(p));scope.orderObj=e},markingMonster:function(){var t=scope.path+"/MarkMonster.png",e=document.body.getBoundingClientRect(),a=scope.Bodies.rectangle(e.x,e.y,200,100,{isStatic:!0});a.name=a.label="staticOriPassControlRight",a.fixedBounds=0,a.src=t,scope.Body.setPosition(a,{x:e.x+e.width/2,y:e.y+e.height/2}),scope.Composite.addBody(scope.engine.world,a),scope.staticAllMap.value[scope.activeMap.value].content.staticOriPassControlRight=a;var i=a.label,s={};return s[i]={textures:"",src:t},scope.getTexture(s[i],s[i].src),scope.extend(scope.staticAllMap.value[scope.activeMap.value].textures,s,!0),scope.orderObjectFn.value(),scope.objTranslate.value.objectMarker.state=!0,scope.objTranslate.value.objectMarker.monster=a,a},addChildQuest:function(t,e,a){var i=document.createElement("div");i.className="quest-tree gold",span=document.createElement("span"),scope.text(i,t.detail),t.isFinish||(t.active=!0),/slay|collect/i.test(t.type)?(span.setAttribute("label",t.label),span.className="questStatus",scope.text(span," ( "+t.current+" / "+t.require+" ) "),i.appendChild(span)):/info/i.test(t.type)&&(span.setAttribute("label",t.label),span.className="hidden",i.appendChild(span)),e.appendChild(i);t.mapMark;if(""!==t.mapMark){var s=document.createElement("div"),n=document.createElement("div"),r=function(t,e){for(var a=scope.slice(scope.qsAll("preventError"+t)),i=0,s=a.length;i<s;i++)"removeHidden"===e?scope.removeClass(a[i],"hidden"):scope.addClass(a[i],"hidden")};markingQuest=function(t,e){/npc/i.test(t.target)&&(scope[t.target].value.isVisible=!0),r(t.label,"removeHidden");for(var a=scope[t.mapMark].value.quest.update,i=0,s=a.length,n=!0;i<s;i++)a[i]===t.label&&(n=!1),i===s-1&&n&&a.push(t.label);if(a.length||a.push(t.label),t.mapMarkExtend&&t.mapMarkExtend.length)for(var o=0,l=t.mapMarkExtend;o<l.length;o++)scope[l[o]].value.quest.update.push(t.label)},s.className="active-quest",n.className="click preventError"+t.label+" hidden",s.appendChild(n),i.appendChild(s),a&&(scope.removeClass(n,"hidden"),markingQuest(t,scope.getFirstChild(s))),scope.attachListener(i,"click",function(t){var e=scope.getFirstChild(s);if(/hidden/i.test(e.className))markingQuest(t,e);else{r(t.label,"addHidden");for(var a=0,i=(l=scope[t.mapMark].value.quest.update).length;a<i;a++)l[a]===t.label&&l.splice(a,1);if(t.mapMarkExtend&&t.mapMarkExtend.length)for(var n=0,o=t.mapMarkExtend;n<o.length;n++){var l;for(a=0,i=(l=scope[o[n]].value.quest.update).length;a<i;a++)if(l[a]===t.label){l.splice(a,1);break}}}}.bind(null,t))}else scope.addClass(i,"dot-quest");return i},fragmentQuestFn:{cluesQuestE:function(){return characterInventoryBag.value.get("oval").push(new scope.items.value.tool.upgrader({quantity:1})),scope.pushMsgText.value("UPGRADER TOOL TO BE ADDED TO INVENTORY",400),!0},elementalQuestD:function(){return characterInventoryBag.value.get("oval").push(new scope.items.value.dropMonster.obsidian({quantity:1})),scope.pushMsgText.value("OBSIDIAN FRAGMENT TO BE ADDED TO INVENTORY",400),!0},familiarQuestA:function(){var t=scope.staticOriPortalmapDungeonG.value.attach;return scope.staticOriPortalmapDungeonG.value.isVisible=!0,scope[t].value.isVisible=!0,!0},goblinraceQuestD:function(){return characterInventoryBag.value.get("oval").push(new scope.items.value.dropMonster.nortusHeart({quantity:1})),scope.pushMsgText.value("NORTUS HEART TO BE ADDED TO INVENTORY",400),!0},goblinraceQuestF:function(){for(var t=characterInventoryBag.value.get("oval"),e=0,a=t.length;e<a;e++)if("Nortus Shield"===t[e].name){t[e].quantity=0,t.push(new scope.items.value.dropMonster.mossealMysticalStone({quantity:1})),scope.pushMsgText.value("MOSSEAL STONE TO BE ADDED TO INVENTORY",400);var i=scope.staticOriPortalBmapDungeonC.value.attach;return scope.staticOriPortalBmapDungeonC.value.isVisible=!0,scope[i].value.isVisible=!0,!0}return!1},necromancerQuestD:function(){return scope.staticOriNpcPassSpawnC.value.isVisible=!0,scope.staticOriNpcDngCPassSpawnA.value.isVisible=!0,!0},slaygoblinQuestA:function(){return scope.staticOriNpcDngCPassSpawnA.value.isVisible=!0,scope.staticOriNpcDngCPassSpawnA.value.quest.update.length=0,!0},slaygoblinQuestB:function(){return scope.staticOriNpcDngCPassSpawnA.value.isVisible=!1,scope.staticOriNpcDngCPassSpawnA.value.quest.update.length=0,!0},slaygoblinQuestF:function(){return scope.staticOriNpcPassSpawnC.value.isVisible=!0,!0},slaygoblinQuestG:function(){scope.staticOriNpcPassSpawnC.value.isVisible=!1;var t=scope.staticOriPortalBmapDungeonG.value.attach;return scope.staticOriPortalBmapDungeonG.value.isVisible=!0,scope[t].value.isVisible=!0,!0},telsadianQuestD:function(){var t=characterInventoryBag.value.get("oval");return t.push(new scope.items.value.magic.bloodLichWarrior({quantity:1})),t.push(new scope.items.value.dropMonster.radianMagol({quantity:1})),scope.pushMsgText.value("BLOOD LICH WARRIOR AND RADIOAN MAGOL TO BE ADDED TO INVENTORY",400),!0},bloodlicharcherQuestD:function(){return characterInventoryBag.value.get("oval").push(new scope.items.value.magic.bloodLichArcher({quantity:1})),scope.staticOriNpcDngAPassSpawnB.value.isVisible=!1,scope.pushMsgText.value("BLOOD LICH ARCHER TO BE ADDED TO INVENTORY",400),!0},bloodlicharcherQuestE:function(){scope.staticOriNpcDngAPassSpawnA.value.isVisible=!1;var t=scope.staticOriPortalBmapDungeonA.value.attach;return scope.staticOriPortalBmapDungeonA.value.isVisible=!0,scope[t].value.isVisible=!0,!0},magicianQuestC:function(){return scope.staticOriNpcMapAADngAPassSpawnA.value.isVisible=!0,scope.staticOriNpcMapAADngAPassSpawnB.value.isVisible=!0,scope.staticOriNpcMapAADngAPassSpawnC.value.isVisible=!0,scope.staticOriNpcMapAADngBPassSpawnA.value.isVisible=!1,!0},khalQuestA:function(){return scope.staticOriNpcMapAADngAPassSpawnA.value.isVisible=!1,scope.staticOriNpcMapAADngAPassSpawnB.value.isVisible=!1,scope.staticOriNpcMapAADngAPassSpawnC.value.isVisible=!1,scope.staticOriNpcDngDPassSpawnA.value.isVisible=!0,!0},khalQuestB:function(){return scope.staticOriNpcDngDPassSpawnA.value.isVisible=!1,scope.staticOriNpcDngDPassSpawnB.value.isVisible=!0,scope.staticOriNpcDngDPassSpawnC.value.isVisible=!0,!0},khalQuestG:function(){var t=scope.staticOriPortalBmapDungeonD.value.attach;return scope.staticOriPortalBmapDungeonD.value.isVisible=!0,scope[t].value.isVisible=!0,scope.staticOriNpcDngDPassSpawnB.value.isVisible=!1,scope.staticOriNpcDngDPassSpawnC.value.isVisible=!1,!0},lapisQuestD:function(){var t=scope.staticOriPortalBmapDDungeonA.value.attach;return scope.staticOriPortalBmapDDungeonA.value.isVisible=!0,scope[t].value.isVisible=!0,!0},lapisQuestF:function(){for(var t=characterInventoryBag.value.get("oval"),e=0,a=t.length;e<a;e++)if("Lapis Fragment"===t[e].name)return t[e].quantity=0,t.push(new scope.items.value.magic.lapisGemstone({quantity:1})),scope.pushMsgText.value("LAPIST GEMSTONE TO BE ADDED TO INVENTORY",400),scope.staticOriNpcMapAADngAPassSpawnA.value.isVisible=!1,!0;return!1},invasionQuestD:function(){return characterInventoryBag.value.get("oval").push(new scope.items.value.dropMonster.voidOre({quantity:1})),scope.pushMsgText.value("VOID ORE TO BE ADDED TO INVENTORY",400),!0},invasionQuestF:function(){var t=scope.staticOriPortalBmapDungeonH.value.attach;return scope.staticOriPortalBmapDungeonH.value.isVisible=!0,scope[t].value.isVisible=!0,!0},invasionQuestI:function(){var t=scope.staticOriPortalBmapDungeonH.value.attach;scope.staticOriPortalBmapDungeonH.value.isVisible=!0,scope[t].value.isVisible=!0;t=scope.staticOriPortalBmapDungeonE.value.attach;scope.staticOriPortalBmapDungeonE.value.isVisible=!0,scope[t].value.isVisible=!0;t=scope.staticOriPortalmapDungeonF.value.attach;scope.staticOriPortalmapDungeonF.value.isVisible=!0,scope[t].value.isVisible=!0,scope.staticOriNpcDngHPassSpawnA.value.isVisible=!1;var e=scope.staticAllMap.value.mapDungeonE.content;for(var a in e)/npc/i.test(a)&&(e[a].isVisible=!0);return!0},tragedyQuestA:function(){var t=scope.staticOriPortalmapDungeonF.value.attach;return scope.staticOriPortalmapDungeonF.value.isVisible=!1,scope[t].value.isVisible=!1,scope.staticOriNpcDngFPassSpawnB.value.isVisible=!0,!0},tragedyQuestF:function(){var t=scope.staticOriPortalBmapDungeonF.value.attach;scope.staticOriPortalBmapDungeonF.value.isVisible=!0,scope[t].value.isVisible=!0;t=scope.staticOriPortalCmapDungeonH.value.attach;return scope.staticOriPortalCmapDungeonH.value.isVisible=!0,scope[t].value.isVisible=!0,scope.staticOriNpcDngHPassSpawnA.value.isVisible=!0,scope.staticOriNpcDngFPassSpawnB.value.behaveState="die",!0},tragedyQuestG:function(){return scope.removeClass(scope.qs("dev-note"),"hidden"),!0}},pushMsgText:function(t,e){for(var a=document.createElement("div"),i=document.createElement("div"),s="msg-"+scope.uniqueId(),n=scope.intervalList.value.storage,r=!1,o=0,l=0,c=n.length;l<c;l++)if(n[l].status.name&&"msg-text"===n[l].status.name&&++o>=2){r=!0;break}if(!r){var h=scope.qs("info-important").getElementsByTagName("div");for(l=0,c=h.length;l<c;l++)/close-msg/i.test(h[l].className)||scope.addClass(h[l],"pop-up-text-move");i.className="close-msg",a.className="pop-up-text "+s,scope.text(a,t),a.appendChild(i),scope.qs("info-important").appendChild(a),scope.attachListener(i,"click",function(){/pop-up-text-move/i.test(scope.qs(s).className)?scope.addClass(scope.qs(s),"pop-up-text-out pop-up-text-move"):scope.addClass(scope.qs(s),"pop-up-text-out")}),scope.intervalList.value.set(s,{name:"msg-text",classNm:s,tick:10,fn:function(){scope.addClass(scope.qs(s),"pop-up-text-in")}}),scope.intervalList.value.set(s+"_mimic",{name:"msg-text",classNm:s,tick:e,fn:function(){/pop-up-text-move/i.test(scope.qs(s).className)?scope.addClass(scope.qs(s),"pop-up-text-out pop-up-text-move"):scope.addClass(scope.qs(s),"pop-up-text-out"),setTimeout(function(){scope.qs(s).remove()},450)}})}},updateMessageText:function(t){var e=scope.characterQuest.value.storage,a="";for(var i in e){var s=e[i].status;if(s&&!s.isFinish){var n=s.questTree;for(var r in n)n[r].active&&n[r].message&&n[r].target.toLowerCase()===t.toLowerCase()&&(a=n[r].message);a&&scope.textDialog(a);break}}}},!0),scope.accessor.call(scope,{global:scope.objFragment,accessorName:"_worldObject",namespace:_owlBird.namespace}),scope.objFragment.length=0,scope.buffSkill.value.set("aqua-heal",{name:"aquaHeal",tick:2400,healing:3,delay:50}),scope.buffSkill.value.set("aqua-spirit",{name:"aquaSpirit",tick:2400,healing:3,delay:50}),scope.staticWallOutter.value=function(){var t="staticWallOutter"+scope.activeMap.value;return scope[t].value},scope.items.value={tool:{upgrader:function(t){this.name="upgrader",this.displayName="crafting tool",this.root={parent:"tool",initial:"upgrader"},this.quantity=t&&t.quantity||1,this.className="upgrader",this.type="crafting tool",this.usage="tool",this.bagLocation="",this.detail="a tool for upgrading, enchanting or combining items",this.unique=!0,this.label=scope.uniqueId()}},dropMonster:{nessQueenScale:function(t){this.name="Ness Queen Scale",this.root={parent:"dropMonster",initial:"nessQueenScale"},this.quantity=t&&t.quantity||1,this.className="ness-queen-scale",this.type="consumable material",this.usage="mana potion",this.size="small",this.bagLocation="",this.detail="Queen ness scale contains magical herb, it gives magic effect to increase of magic points",this.unique=!1,this.label=scope.uniqueId()},nessScale:function(t){this.name="ness scale",this.root={parent:"dropMonster",initial:"nessScale"},this.quantity=t&&t.quantity||1,this.className="ness-scale",this.type="consumable material",this.usage="health potion",this.size="small",this.bagLocation="",this.detail="Ness scale contains magical herb, it gives magic effect to increase of health points",this.unique=!1,this.label=scope.uniqueId()},nessFang:function(t){this.name="ness fang",this.root={parent:"dropMonster",initial:"nessFang"},this.quantity=t&&t.quantity||1,this.className="ness-fang",this.type="enchantment material",this.usage="enchantment material",this.size="small",this.bagLocation="",this.enchant=["consumable material"],this.formula={healthPotion:"tierA",manaPotion:"tierA"},this.detail="Ness fang contains magical herb, it gives a higher success rate when combined to consumable herb material",this.unique=!1,this.label=scope.uniqueId()},bedrockMeat:function(t){this.name="Bedrock Meat",this.root={parent:"dropMonster",initial:"bedrockMeat"},this.quantity=t&&t.quantity||1,this.className="bedrock-meat",this.type="medium consumable material",this.usage="health medium potion",this.size="small",this.bagLocation="",this.detail="Bedrock meat contains magical herb, it gives effect to cure of health points",this.unique=!1,this.label=scope.uniqueId()},bedrockBone:function(t){this.name="Bedrock Bone",this.root={parent:"dropMonster",initial:"bedrockBone"},this.quantity=t&&t.quantity||1,this.className="bedrock-bone",this.type="medium consumable material",this.usage="mana medium potion",this.size="small",this.bagLocation="",this.detail="Bedrock Bone contains magical herb, it gives effect to cure of mana points",this.unique=!1,this.label=scope.uniqueId()},bedrockFang:function(t){this.name="Bedrock Fang",this.root={parent:"dropMonster",initial:"bedrockFang"},this.quantity=t&&t.quantity||1,this.className="bedrock-fang",this.type="Bedrock Fang",this.size="small",this.bagLocation="",this.enchant=["medium consumable material"],this.formula={healthPotion:"tierB",manaPotion:"tierB"},this.detail="Bedrock Fang contains magical herb, gives a higher success rate when it's combined to medium consumable material",this.unique=!1,this.label=scope.uniqueId()},meat:function(t){this.name="Gall Boar Meat",this.root={parent:"dropMonster",initial:"meat"},this.quantity=t&&t.quantity||1,this.className="meat",this.type="consumable material",this.usage="health potion",this.size="small",this.bagLocation="",this.detail="Gall Boar meat contains magical herb, gives effect to increase of small amount of health",this.unique=!1,this.label=scope.uniqueId()},gallBoarFang:function(t){this.name="Gall Boar Fang",this.root={parent:"dropMonster",initial:"gallBoarFang"},this.quantity=t&&t.quantity||1,this.className="boar-fang",this.type="enchantment material",this.usage="enchantment material",this.size="small",this.bagLocation="",this.enchant=["consumable material"],this.formula={healthPotion:"tierA",manaPotion:"tierA"},this.detail="Gall Boar Fang contains magical herb, gives a higher success rate when it's combined to consumable herb material",this.unique=!1,this.label=scope.uniqueId()},nortusGreenScale:function(t){this.name="Nortus Green Scale",this.root={parent:"dropMonster",initial:"nortusGreenScale"},this.quantity=t&&t.quantity||1,this.className="nortus-green-scale",this.type="nortus green material",this.usage="nortus shield",this.size="small",this.bagLocation="",this.detail="Nortus green, given a higher success rate when combined to nortus heart material",this.unique=!1,this.label=scope.uniqueId()},nortusRedScale:function(t){this.name="Nortus Red Scale",this.root={parent:"dropMonster",initial:"nortusRedScale"},this.quantity=t&&t.quantity||1,this.className="nortus-red-scale",this.type="nortus red material",this.usage="nortus shield",this.size="small",this.bagLocation="",this.detail="nortus red, it gives a higher success rate when combined to nortus heart material",this.unique=!1,this.label=scope.uniqueId()},nortusHeart:function(t){this.name="Nortus Heart",this.root={parent:"dropMonster",initial:"nortusHeart"},this.quantity=t&&t.quantity||1,this.className="nortus-heart",this.type="nortus's heart",this.size="small",this.bagLocation="",this.sacrifice=4,this.enchant=["nortus red material","nortus green material"],this.formula={nortusShield:"tierA"},this.detail="nortus heart, provide mysterious mystic energy",this.unique=!1,this.label=scope.uniqueId()},taintedGem:function(t){this.name="Tainted Gem",this.root={parent:"dropMonster",initial:"taintedGem"},this.quantity=t&&t.quantity||1,this.className="tainted-gem",this.type="tainted gem material",this.usage="tainted material",this.size="small",this.bagLocation="",this.detail="enchantment material, merger it to void ore to create a magic item",this.unique=!1,this.label=scope.uniqueId()},taintedSoul:function(t){this.name="Tainted Soul",this.root={parent:"dropMonster",initial:"taintedSoul"},this.quantity=t&&t.quantity||1,this.className="tainted-soul",this.type="tainted soul material",this.usage="tainted material",this.size="small",this.bagLocation="",this.detail="enchantment material, merger it to void ore to create a magic item",this.unique=!1,this.label=scope.uniqueId()},voidOre:function(t){this.name="Void Ore",this.root={parent:"dropMonster",initial:"voidOre"},this.quantity=t&&t.quantity||1,this.className="void-ore",this.type="void ore",this.size="small",this.bagLocation="",this.sacrifice=4,this.enchant=["tainted soul material","tainted gem material"],this.formula={taintedJewel:"tierA"},this.detail="raw material, enchant it to tainted materials to create a magic item",this.unique=!1,this.label=scope.uniqueId()},nortusGreenTailScale:function(t){this.name="Nortus Green Tail Scale",this.root={parent:"dropMonster",initial:"nortusGreenTailScale"},this.quantity=t&&t.quantity||1,this.className="nortus-green-tail-scale",this.type="nortus tail material",this.usage="mana strong potion",this.size="small",this.bagLocation="",this.detail="nortus green tail material will provide mana strong potion, gives a higher success rate when combined to nortus heart",this.unique=!1,this.label=scope.uniqueId()},nortusRedTailScale:function(t){this.name="Nortus Red Tail Scale",this.root={parent:"dropMonster",initial:"nortusRedTailScale"},this.quantity=t&&t.quantity||1,this.className="nortus-red-tail-scale",this.type="nortus tail material",this.usage="health strong potion",this.size="small",this.bagLocation="",this.detail="nortus red tail will provide health storng potion, gives a higher success rate when it's combined to nortus heart ",this.unique=!1,this.label=scope.uniqueId()},nortusTailHeart:function(t){this.name="Nortus Tail Heart",this.root={parent:"dropMonster",initial:"nortusTailHeart"},this.quantity=t&&t.quantity||1,this.className="nortus-tail-heart",this.type="enchantment material",this.size="small",this.bagLocation="",this.enchant=["nortus tail material"],this.formula={healthPotion:"tierC",manaPotion:"tierC"},this.detail="nortus heart material",this.unique=!1,this.label=scope.uniqueId()},nortusShield:function(t){this.name="Nortus Shield",this.root={parent:"dropMonster",initial:"nortusShield"},this.quantity=t&&t.quantity||1,this.className="nortus-shield",this.type="nortus shield material",this.size="small",this.bagLocation="",this.detail="it gives maximum defense when enchant to a magic item",this.unique=!1,this.label=scope.uniqueId()},mossealMysticalStone:function(t){this.name="Mosseal mystical  Stone",this.root={parent:"dropMonster",initial:"mossealMysticalStone"},this.quantity=t&&t.quantity||1,this.className="mosseal-mystical-stone",this.type="mosseal mystical  stone material",this.sacrifice=3,this.enchant=["light soul material"],this.formula={telsadian:"tierA"},this.bagLocation="",this.detail="legend tells the elementals put in their heart soul to this stone to bring back their life and lives hundred years",this.unique=!1,this.label=scope.uniqueId()},lightSoul:function(t){this.name="Light Soul",this.root={parent:"dropMonster",initial:"lightSoul"},this.quantity=t&&t.quantity||1,this.className="light-soul",this.type="light soul material",this.usage="telsadian fragment",this.bagLocation="",this.detail="light soul, can be combined with mosseal stone",this.unique=!1,this.label=scope.uniqueId()},obsidian:function(t){this.name="Obsidian Stone",this.root={parent:"dropMonster",initial:"obsidian"},this.quantity=t&&t.quantity||1,this.className="runes-a",this.type="obsidian stone",this.usage="red gem stone",this.bagLocation="",this.detail="Obsidian Fragment",this.unique=!1,this.label=scope.uniqueId()},telsadian:function(t){this.name="Telsadian Stone",this.root={parent:"dropMonster",initial:"telsadian"},this.quantity=t&&t.quantity||1,this.className="runes-b",this.type="telsadian stone",this.usage="red gem stone",this.bagLocation="",this.detail="Telsadian Fragment",this.unique=!1,this.label=scope.uniqueId()},radianMagol:function(t){this.name="Radian Magol Stone",this.root={parent:"dropMonster",initial:"radianMagol"},this.quantity=t&&t.quantity||1,this.className="runes-c",this.type="radian magol stone",this.bagLocation="",this.enchant=["obsidian stone","telsadian stone"],this.formula={redGemStone:"tierA"},this.detail="Radian Magol Fragment",this.unique=!1,this.label=scope.uniqueId()},lapisFragment:function(t){this.name="Lapis Fragment",this.root={parent:"dropMonster",initial:"lapisFragment"},this.quantity=t&&t.quantity||1,this.className="lapis-fragment",this.type="Gemstone",this.usage="lapis gemstone",this.bagLocation="",this.detail="a piece of lapis Gemstone, contained strong magic, can be enchanted with magic item",this.unique=!1,this.label=scope.uniqueId()},basicMagicPlant:function(t){this.name="basic magical plant",this.root={parent:"dropMonster",initial:"basicMagicPlant"},this.quantity=t&&t.quantity||1,this.className="basic-magic-plant",this.type="basic plant material",this.usage="mana medium potion",this.size="small",this.bagLocation="",this.detail="basic magical plant contains goblin light magic it gives a mana potion when it's combined to goblin elixir",this.unique=!1,this.label=scope.uniqueId()},basicHerbPlant:function(t){this.name="Basic Herb Plant",this.root={parent:"dropMonster",initial:"basicHerbPlant"},this.quantity=t&&t.quantity||1,this.className="basic-herb-plant",this.type="basic plant material",this.usage="health medium potion",this.size="small",this.bagLocation="",this.detail="basic medical herb contains goblin light magic it gives a strong healing when it's combined to goblin elixir",this.unique=!1,this.label=scope.uniqueId()},goblinElixir:function(t){this.name="Goblin Elixir",this.root={parent:"dropMonster",initial:"goblinElixir"},this.quantity=t&&t.quantity||1,this.className="goblin-elixir",this.type="goblin elixir material",this.size="small",this.enchant=["basic plant material"],this.formula={healthPotion:"tierB",manaPotion:"tierB"},this.bagLocation="",this.detail="goblin elixir, can be enchanted to goblin basic plant",this.unique=!1,this.label=scope.uniqueId()}},magic:{manaStrongPotion:function(t){this.name="manapotion",this.displayName="Mana Strong Potion",this.root={parent:"magic",initial:"manaStrongPotion"},this.quantity=t&&t.quantity||1,this.cure=350,this.cooldown=140,this.className="mana-strong-potion",this.enchantment=!1,this.type="potion",this.usage="healing",this.size="small",this.bagLocation="",this.detail="Restore 350 points of Mana, Cooldown 3.5s ",this.unique=!1,this.label=scope.uniqueId()},healthStrongPotion:function(t){this.name="healthpotion",this.displayName="Health Strong Potion",this.root={parent:"magic",initial:"healthStrongPotion"},this.quantity=t&&t.quantity||1,this.cure=350,this.cooldown=140,this.className="health-strong-potion",this.enchantment=!1,this.type="potion",this.usage="healing",this.size="small",this.bagLocation="",this.detail="Restore 350 points of Health, Cooldown 3.5s ",this.unique=!1,this.label=scope.uniqueId()},manaMediumPotion:function(t){this.name="manapotion",this.displayName="Mana Medium Potion",this.root={parent:"magic",initial:"manaMediumPotion"},this.quantity=t&&t.quantity||1,this.cure=200,this.cooldown=120,this.className="mana-medium-potion",this.enchantment=!1,this.type="potion",this.usage="healing",this.size="small",this.bagLocation="",this.detail="Restore 200 points of Mana, Cooldown 3s ",this.unique=!1,this.label=scope.uniqueId()},taintedJewel:function(t){this.name="taintedJewel",this.displayName="Tainted Jewel",this.root={parent:"magic",initial:"taintedJewel"},this.quantity=t&&t.quantity||1,this.className="tainted-jewel",this.enchantment=!1,this.type="mystic",this.usage="upgrade",this.bagLocation="",this.effect={defense:{target:["character","pion"],value:10},magicDefense:{target:["character","pion"],value:10}},this.registered=[],this.detail="+ 10% defense increased for companions",this.unique=!0,this.label=scope.uniqueId()},lapisGemstone:function(t){this.name="lapisGemstone",this.displayName="Lapis Gemstone",this.root={parent:"magic",initial:"lapisGemstone"},this.quantity=t&&t.quantity||1,this.className="lapis-gemstone",this.enchantment=!1,this.type="mystic",this.usage="upgrade",this.bagLocation="",this.effect={attack:{target:["character","pion"],value:10}},this.registered=[],this.detail="+ 10% all attack increased for companions",this.unique=!0,this.label=scope.uniqueId()},healthMediumPotion:function(t){this.name="healthpotion",this.displayName="Health Medium Potion",this.root={parent:"magic",initial:"healthMediumPotion"},this.quantity=t&&t.quantity||1,this.cure=200,this.cooldown=120,this.className="health-medium-potion",this.enchantment=!1,this.type="potion",this.usage="healing",this.size="small",this.bagLocation="",this.detail="Restore 200 points of Health, Cooldown 3s ",this.unique=!1,this.label=scope.uniqueId()},healthPotion:function(t){this.name="healthpotion",this.displayName="Health Potion",this.root={parent:"magic",initial:"healthPotion"},this.quantity=t&&t.quantity||1,this.cure=100,this.cooldown=100,this.className="health-potion",this.enchantment=!1,this.type="potion",this.usage="healing",this.size="small",this.bagLocation="",this.detail="Restore 100 points of Health, Cooldown 2.5s ",this.unique=!1,this.label=scope.uniqueId()},manaPotion:function(t){this.name="manapotion",this.displayName="Mana Potion",this.root={parent:"magic",initial:"manaPotion"},this.quantity=t&&t.quantity||1,this.cure=100,this.className="mana-potion",this.enchantment=!1,this.type="potion",this.usage="healing",this.size="small",this.bagLocation="",this.detail="Restore 100 points of mana, Cooldown 2.5s",this.unique=!1,this.label=scope.uniqueId()},blueJewel:function(t){this.name="bluejewel",this.displayName="Blue Jewel",this.root={parent:"magic",initial:"blueJewel"},this.quantity=t&&t.quantity||1,this.className="blue-jewel",this.enchantment=!1,this.type="mystic",this.usage="upgrade",this.bagLocation="",this.effect={attack:{target:["character","pion"],value:20},defense:{target:["character","pion"],value:20},magicDefense:{target:["character","pion"],value:20}},this.registered=[],this.detail="+ 20% all attack, +15% All defense increased for companions",this.unique=!1,this.label=scope.uniqueId()},redJewel:function(t){this.name="redjewel",this.displayName="Red Jewel",this.root={parent:"magic",initial:"redJewel"},this.quantity=t&&t.quantity||1,this.className="red-jewel",this.enchantment=!1,this.type="mystic",this.usage="upgrade",this.bagLocation="",this.effect={attack:{target:["character","pion"],value:20}},this.registered=[],this.detail="+ 20% all attack increased for companions",this.unique=!0,this.label=scope.uniqueId()},greenLightNecklace:function(t){this.name="greenlightnecklace",this.displayName="Green Light Necklace",this.root={parent:"magic",initial:"greenLightNecklace"},this.quantity=t&&t.quantity||1,this.className="green-light-necklace",this.enchantment=!1,this.type="mystic",this.usage="upgrade",this.bagLocation="",this.effect={stun:{target:["character","pion"],value:15},critical:{target:["character","pion"],value:15}},this.registered=[],this.detail=" + 15% provide both stun and critical chance to companions ",this.unique=!0,this.label=scope.uniqueId()},redGemStone:function(t){this.name="redgemstone",this.displayName="Red Gemstone",this.root={parent:"magic",initial:"redGemStone"},this.quantity=t&&t.quantity||1,this.className="red-gem-stone",this.type="mystic",this.usage="upgrade",this.enchantment=!1,this.bagLocation="",this.effect={avoid:{target:["character"],value:15}},this.registered=[],this.detail="+ 15% dodge ability to character ",this.unique=!0,this.label=scope.uniqueId()},goldGemStone:function(t){this.name="goldgemstone",this.displayName="Gold Gemstone",this.root={parent:"magic",initial:"goldGemStone"},this.quantity=t&&t.quantity||1,this.className="gold-gem-stone",this.enchantment=!1,this.type="mystic",this.usage="upgrade",this.bagLocation="",this.effect={critical:{target:["character"],value:15}},this.registered=[],this.detail="+ 15% critical chance to character ",this.unique=!0,this.label=scope.uniqueId()},bloodLichWarrior:function(t){this.name="bloodlichwarrior",this.displayName="Blood Lich Warrior",this.root={parent:"magic",initial:"bloodLichWarrior"},this.quantity=t&&t.quantity||1,this.className="blood-lich-warrior",this.enchantment=!1,this.type="mystic",this.bagLocation="",this.exp=0,this.expTemp=0,this.companion="monsterSekletonArmored",this.familiar={name:"Blood Lich Warrior",level:1,exp:0,expTemp:0,attackRangeMax:10,attackRangeMin:5,attackRange:70,attackMax:25,attackMin:15,defenseMax:43,defenseMin:32,magicDefenseMax:8,magicDefenseMin:4,maxHealth:2200,maxMp:10,hpBar:"medium",requiredSoul:15,buffSkill:{},abilitySkill:{block:25,defense:{max:35,min:15}},item:[],attackFrame:[{frame:[15],audio:["hit-sword"]}],audioDie:"",spell:!0,attckerType:"warrior"},this.registered=[],this.detail="He's called the Dread Terror, The Elder of Undead Clan, Required souls to summon Blood Lich Warrior",this.unique=!0,this.label=scope.uniqueId()},bloodLichArcher:function(t){this.name="bloodlichArcher",this.displayName="Blood Lich Archer",this.root={parent:"magic",initial:"bloodLichArcher"},this.quantity=t&&t.quantity||1,this.className="blood-lich-archer",this.enchantment=!1,this.type="mystic",this.bagLocation="",this.exp=0,this.expTemp=0,this.companion="monsterSekletonArcher",this.familiar={name:"Blood Lich Archer",level:1,exp:0,expTemp:0,posX:35,posY:50,weaponName:"arrow",weaponWidth:7,weaponHeight:44,attackRangeMax:28,attackRangeMin:17,attackRange:70,attackMax:25,attackMin:15,defenseMax:15,defenseMin:7,magicDefenseMax:28,magicDefenseMin:16,maxHealth:1300,maxMp:10,hpBar:"medium",requiredSoul:15,buffSkill:{},abilitySkill:{},item:[],attackFrame:[{frame:[20],audio:["arrow-fly-2"]}],audioDie:"",spell:!0,attckerType:"warrior"},this.registered=[],this.detail="Undead Lich Archer, Required souls to summon Blood Lich Archer",this.unique=!0,this.label=scope.uniqueId()}},skills:{fireballAcid3:{name:"fireball-acid-3",className:"fireball-acid-3",displayName:"Meteor Rain",type:"active",caracterClass:"wizard",tick:1e3,tickUpdate:1e3,mp:678,state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"A fireball which explodes on impact for 220% of average damage of character in a 100 radius, cooldown 25s",firstLoad:!0,active:!1,slotLocation:"",level:20},fireballAcid2:{name:"fireball-acid-2",className:"fireball-acid-2",displayName:"Meteor Strike",type:"active",caracterClass:"magus",tick:600,tickUpdate:600,mp:200,state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"A fireball which explodes on impact for 420% of average damage of character in a 100 radius, cooldown 15s",upgradeClass:"fireball-acid-3",upgradeProperty:"fireballAcid3",next:"A fireball which explodes on impact for 220% of average damage of character in a 100 radius, cooldown 25s",require:{skillPoint:7,level:20},firstLoad:!0,active:!1,slotLocation:"",level:15},fireballAcid:{name:"fireball-acid",className:"fireball-acid",displayName:"Fire Ball",type:"active",caracterClass:"magus",tick:300,tickUpdate:300,mp:50,state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"A bolt of fire that inflicts 250% of average damage of character.",upgradeClass:"fireball-acid-2",upgradeProperty:"fireballAcid2",next:"A fireball which explodes on impact for 420% of average damage of character in a 100 radius, cooldown 15s",require:{skillPoint:3,level:15},firstLoad:!0,active:!0,slotLocation:"",level:1},iceBeam:{name:"ice-beam",className:"ice-beam",displayName:"Ice Beam",type:"active",tick:400,tickUpdate:400,mp:45,caracterClass:"magus",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"A spike of ice that take 120% of average damage of character, cooldown 10s",firstLoad:!0,active:!0,slotLocation:"",level:3},lifeDrain:{name:"life-drain",className:"life-drain",displayName:"Life Drain",type:"active",tick:2e3,tickUpdate:2e3,mp:165,caracterClass:"magus",state:!0,disable:!1,label:scope.uniqueId(),target:"",firstLoad:!0,active:!0,detail:"it continuously takes of health points of target and +3% chance to convert damage to mana , cooldown 50s ",slotLocation:"",level:11},aquaSpirit:{name:"aqua-spirit",className:"aqua-spirit",displayName:"Aqua Spirit",type:"active",tick:3600,tickOriginal:3600,tickUpdate:3600,mp:355,caracterClass:"wizard",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"An aura surrounds target will take effect in a 300, it gives an increase of health rate points for 60s, cooldown 90s",firstLoad:!0,active:!1,slotLocation:"",level:13},aquaHeal:{name:"aqua-heal",className:"aqua-heal",displayName:"Aqua Heal",type:"active",tick:3600,tickOriginal:3600,tickUpdate:3600,mp:180,caracterClass:"magus",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"Restored player Health points for 60s.",upgradeClass:"aqua-spirit",upgradeProperty:"aquaSpirit",next:"An aura surrounds target will take effect in a 300 radius, gives an increase health rate points for 30s, cooldown 90s",require:{skillPoint:5,level:13},firstLoad:!0,active:!0,slotLocation:"",level:6},lightning:{name:"lightning",className:"lightning",displayName:"Lightning",type:"active",tick:300,tickUpdate:300,mp:60,caracterClass:"magus",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"150% lightning damage to selected target.",upgradeClass:"lightning-strike",upgradeProperty:"lightningStrike",next:"strike a target continuously with lightning, 40% deal damage to selected target, cooldown 20s",require:{skillPoint:3,level:13},firstLoad:!0,active:!0,slotLocation:"",level:5},lightningStrike:{name:"lightning-strike",className:"lightning-strike",displayName:"Lightning Strike",type:"active",tick:2e3,tickUpdate:2e3,mp:215,caracterClass:"magus",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"strike a target continuously with lightning, 40% deal damage to selected target, cooldown 50s",upgradeClass:"chain-lightning",upgradeProperty:"chainLightning",next:"chain lightning with 420% deal damage in a 300 radius, cooldown 25s",require:{skillPoint:6,level:18},firstLoad:!0,active:!1,slotLocation:"",level:13},chainLightning:{name:"chain-lightning",className:"chain-lightning",displayName:"chain Lightning",type:"active",tick:1e3,tickUpdate:1e3,mp:550,caracterClass:"wizard",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"chain lightning with 420% deal damage in a 300 radius, cooldown 25s",firstLoad:!0,active:!1,slotLocation:"",level:18},undead:{name:"undead",className:"undead",displayName:"Gate of Undead World",type:"active",tick:7200,tickUpdate:7200,mp:350,caracterClass:"magus",state:!0,disable:!1,label:scope.uniqueId(),target:"",detail:"The Darkest Gate of Undead World, Summons undead familiar for 180 seconds, cooldown 180s",familiar:[],firstLoad:!0,active:!0,slotLocation:"",level:1}}},scope.characterState.value.set(scope.oval.value.label,"idle"),scope.questLog.value=function(t,e){var a=d.quest;if(questStat=function(t,e,a){var i=document.createElement("div"),s=document.createElement("div"),n=document.createElement("abbr");scope.text(n,t.title),n.className="primary-title",t.active=!0,checked=a<=1;var r=scope.addChildQuest.value(e,s,checked);return s.className="wrap",s.insertBefore(n,s.firstChild),i.className="quest",i.appendChild(s),scope.qs("wrap-box").className="wrap-box",scope.qs("wrap-box").insertBefore(i,scope.qs("wrap-box").firstChild),scope.infoLogFn.value({title:"primary-title",text:{yellow:t.title}}),{wrap:s,firstQuest:r}},a[t])if(e)for(var i=0;i<e.length;i++){var s,n,r=(h=e[i].status).questTree,o=!0,l=0;for(n in r)(r[n].isFinish||r[n].active)&&l++;if(h.active)for(var c in r)o?(s=questStat(h,r[c],l),o=!1,e[i-1]&&(prevObjQuest=e[i-1].status,prevObjQuest.visibility&&(scope[prevObjQuest.visibility.hide].value.isVisible=!1,scope[prevObjQuest.visibility.show].value.isVisible=!0,scope[prevObjQuest.visibility.hide].value.quest.update.length=0)),r[c].isFinish&&(s.firstQuest.className="quest-tree gold linethrough")):r[c].active&&(r[c].message&&scope.text(scope.qs("body-dialog"),r[c].message),scope.addChildQuest.value(r[c],s.wrap,!0))}else{var h=a[t];if(!scope.characterQuest.value.get(h.title)){r=h.questTree;for(var c in scope.characterQuest.value.set(h.title,h),r)if(!r[c].isFinish){questStat(h,r[c],!0);break}}}},scope.characterUpdateQuest.value=function(t,e){var a=scope.characterQuest.value.storage,i=function(t,e){if(t.merger){var a=t.merger;for(var i in e)if(e[i].merger===a&&!e[i].isFinish&&e[i].label!==t.label)return!1}return!0},s=function(t){return!t.fn||scope.fragmentQuestFn.value[t.fn]()},n=function(t,e){if(t.isFinish=!0,t.active=!1,t.mapMarkExtend)for(var a=0,i=t.mapMarkExtend;a<i.length;a++)for(var s=0,n=(c=scope[i[a]].value.quest.update).length;s<n;s++)c[s]===t.label&&c.splice(s,1);var r=""===t.mapMark?"dot-quest":"";(o=scope.nthParent(l,1)).className="quest-tree gold linethrough "+r;var o=scope.slice(o.getElementsByTagName("div"));for(a=0;a<o.length;a++)/click/i.test(o[a].className)&&(o[a].className="click hidden");if("dot-quest"!==r){var c;for(s=0,n=(c=scope[t.mapMark].value.quest.update).length;s<n;s++)c[s]===t.label&&c.splice(s,1)}};for(var r in a){var o=a[r].status;if(o&&!o.isFinish){for(var l,c=scope.slice(scope.qs("wrap-box").getElementsByTagName("span")),h=o.questTree,p=!0,d=0,g=c.length;d<g;d++)for(var m in h)if(!h[m].isFinish&&c[d].getAttribute("label")===h[m].label&&h[m].target.toLowerCase()===t.toLowerCase()){if(l=c[d],/slay|collect/i.test(h[m].type)&&s(h[m])){if(h[m].current++,!(h[m].current<h[m].require)){n(h[m],t.toLowerCase());var u=i(h[m],h);if(h[m].next&&u)for(var f=0,v=h[m].next;f<v.length;f++)h[v[f]].active=!0,scope.addChildQuest.value(h[v[f]],scope.nthParent(l,2),!0)}scope.text(l," ( "+h[m].current+" / "+h[m].require+" ) ")}else if(/info/i.test(h[m].type)&&s(h[m])){n(h[m],t.toLowerCase());u=i(h[m],h);if(h[m].next&&u)for(f=0,v=h[m].next;f<v.length;f++)h[v[f]].active=!0,scope.addChildQuest.value(h[v[f]],scope.nthParent(l,2),!0)}break}for(var d in h)if(!h[d].isFinish){p=!1;break}p&&(o.next&&scope.questLog.value(o.next),o.visibility&&(scope[o.visibility.hide].value.isVisible=!1,scope[o.visibility.show].value.isVisible=!0,scope[o.visibility.hide].value.quest.update.length=0),scope.nthParent(l,3).remove(),0===scope.slice(scope.qs("wrap-box").getElementsByTagName("div")).length&&(scope.qs("wrap-box").className="wrap-box nopadding"),o.isFinish=!0,o.active=!1,scope.preventBugLoad=!1)}}},scope.infoLogFn.value=function(t){scope.infoLog.value.set(scope.uniqueId(),t);var e,a,i,s,n=scope.infoLog.value.storage,r=n.length,o=scope.qs("wrap-box-text"),l=scope.qs("wrap-box-text-mobile");for(l.innerHTML=o.innerHTML="",scope.css(o,{transform:"0px, 0px,0px"}),scope.css(l,{transform:"0px, 0px,0px"}),r>50&&(n.splice(0,1),r--);r--;){var c=document.createElement("span");for(var h in c.className=n[r].status.title,n[r].status.text){var p=n[r].status.text[h];e=c,a=h,i=p,s=void 0,(s=document.createElement("abbr")).className=a,scope.text(s,i),e.appendChild(s)}o.appendChild(c),l.appendChild(c.cloneNode(!0))}for(var d=scope.slice(scope.qs("nav-info-text").getElementsByTagName("div")),g=(h=0,d.length);h<g;h++){var m=d[h].className;if(scope.getFirstChild(d[h])){"checkbox-all"===m?scope.infoFilter.value(0):"checkbox-quest"===m?scope.infoFilter.value(2):"checkbox-item"===m&&scope.infoFilter.value(3);break}}},scope.infoFilter.value=function(t){for(var e=scope.slice(scope.qs("wrap-box-text").getElementsByTagName("span")),a=0,i=e.length;a<i;a++)scope.addClass(e[a],"hidden");if(0===t)for(a=0,i=e.length;a<i;a++)scope.removeClass(e[a],"hidden");else if(2===t)for(a=0,i=e.length;a<i;a++)/primary-title/i.test(e[a].className)&&scope.removeClass(e[a],"hidden");else if(3===t)for(a=0,i=e.length;a<i;a++)/regular-title|exp-title/i.test(e[a].className)&&scope.removeClass(e[a],"hidden")},scope.characterGetDamage.value.set(scope.oval.value.label,[]),scope.characterInventoryBag.value.set(scope.oval.value.label,[new scope.items.value.magic.bloodLichWarrior({quantity:1}),new scope.items.value.magic.manaPotion({quantity:99}),new scope.items.value.magic.manaMediumPotion({quantity:99}),new scope.items.value.magic.manaStrongPotion({quantity:99}),new scope.items.value.magic.healthPotion({quantity:99}),new scope.items.value.magic.healthMediumPotion({quantity:99}),new scope.items.value.magic.healthStrongPotion({quantity:99})]),scope.characterSkills.value.set(scope.oval.value.label,[scope.items.value.skills.undead,scope.items.value.skills.fireballAcid,scope.items.value.skills.fireballAcid2,scope.items.value.skills.fireballAcid3,scope.items.value.skills.lifeDrain,scope.items.value.skills.iceBeam,scope.items.value.skills.lightning,scope.items.value.skills.lightningStrike,scope.items.value.skills.chainLightning,scope.items.value.skills.aquaHeal,scope.items.value.skills.aquaSpirit]),scope.characterParameters.value={name:"oval",range:600,attackRangeMax:25,attackRangeMin:15,rigBody:"",health:500,maxHealth:500,maxHealthCure:500,mp:500,maxMp:500,maxMpCure:500,attackMax:5,attackMin:1,defenseMax:10,defenseMin:5,magicDefenseMax:35,magicDefenseMin:25,buffSkill:0,setting:{mpPercentage:100,healthPercentage:100,effect:!0},abilitySkill:{},lifeDrainDmg:{damage:45},fireBall3:{damage:220,effect:{burningEffect:new scope.globalSkill.value.burningEffect}},fireBall2:{damage:420,effect:{burningEffect:new scope.globalSkill.value.burningEffect}},fireBallDmg:{damage:250},iceBeamDmg:{damage:150},lightning:{damage:150},lightningStrike:{damage:40},chainLightning:{damage:420,effect:{lightningShock:new scope.globalSkill.value.lightningShock}},attackDelaySkill:{lifeDrain:0},attackDelayNormal:0,exp:0,expTemp:0,skillPoint:0,soulPoint:5e4,level:1,attckerType:"caster",object:scope.oval.value},scope.characterSkills.value.set("initial",{label:"",state:!1,target:""}),scope.staticWorld.value=engine.world,scope.controlGUICheck.value(),localStorage.getItem("load")||(scope.itemShop.value.set("global",d.shop),scope.questLog.value("clues"),scope.character())}}},_owlBird.GUI=function(t){this.fn=new t.utils;var e={path:this.fn.qs("site").getAttribute("data-bitmap")};for(var a in e)t[a]=e[a];for(var i=(a=arguments).length;i--;)"function"==typeof a[i]&&(a[i].apply(null,[this,t]),a[i].apply(null,[this,e]),this.controllers(),this.bagAndSkill(),this.mouseCreate(document.body))},_owlBird.GUI.prototype={controllers:function(){var t=this,e=t.qs("jump-right-nav"),a=t.qs("attack-right-nav"),i=t.slice(t.qs("menu-map").getElementsByTagName("li")),s=t.slice(t.qs("menu-map-mobile").getElementsByTagName("li")),n=i.concat(s),r=t.qs("menu-ui-left"),o=t.qs("menu-ui-right"),l=t.qs("close-dialog"),c=t.qs("gui-player"),h={outterObj:t.qs("outter"),innerObj:t.qs("inner"),move:!1,pointRad:{},angle:0,offset:{top:0,left:0}},p={outterObj:t.qs("controller-right"),innerObj:t.qs("inner-right"),markObj:"",markerLabel:"",move:!1,pointRad:{},angle:0,offset:{top:0,left:0},moveRange:{oldX:0,oldY:9,x:0,y:0,start:0}},g={getControlRad:function(t){var e=t.outterObj.getBoundingClientRect();t.pointRad.x=e.left+e.width/2,t.pointRad.y=e.top+e.height/2,t.offset.left=e.left,t.offset.top=e.top,t.outterWidth=t.outterObj.offsetWidth,t.innerWidth=t.innerObj.offsetWidth},getPointRad:function(t){return{x:Math.cos(t),y:Math.sin(t)}},getAngle:function(t,e){if(0===t&&0===e)return h.angle;var a=Math.atan(e/t);return 0>t&&0<=e?a+=Math.PI:0>t&&0>e?a+=Math.PI:0<=t&&0>e&&(a+=2*Math.PI),h.angle=a,a},isInside:function(t,e){return t<=e/2},setBtnPosition:function(e,a,i){var s=i.innerWidth/2;t.css(i.innerObj,{top:i.offset.top-s-i.innerWidth+5+i.outterWidth-a*i.outterWidth/2-s+"px",left:i.offset.left-s-30+i.outterWidth+e*i.outterWidth/2-s+"px",position:"fixed"})},setIdle:function(e,a,i){var s,n,r=t.browserWidth()/2;if(t.mousePosition.value.pos.mousedown.x<r){var o=t.characterMobileControl.value;i&&(t.objTranslate.value.moveUp=!1,t.objTranslate.value.moveDown=!1,o.charObj.moveUp=!1,o.charObj.moveDown=!1),e!==o.status&&(s=t.oval.value.stateStorage,n=t.oval.value.label,t.isMobile.value()&&("up"!==e&&(t.objTranslate.value.moveUp=!1),"down"!==e&&(t.objTranslate.value.moveDown=!1),"left"!==e&&(t.objTranslate.value.moveLeft=!1),"right"!==e&&(t.objTranslate.value.moveRight=!1),"left"!==e&&(o.charObj.moveLeft=!1),"right"!==e&&(o.charObj.moveRight=!1),"up"!==e&&(o.charObj.moveUp=!1),"down"!==e&&(o.charObj.moveDown=!1),"right"===e&&(o.charObj.dirSwitch.right=!0),"left"===e&&(o.charObj.dirSwitch.left=!0),/idle|die/i.test(e)&&(/idle/i.test(e)&&t[s].value.set(n,"idle"),t.objTranslate.value.staticObjMoveX=0),o.status=a))}},control:function(e){var a=t.characterMobileControl.value,i=a.charObj.dirSwitch;"left"===e?a.charObj.moveLeft||(t.objTranslate.value.moveLeft=!0,a.charObj.moveLeft=!0,i.delayDir=2):"right"===e?a.charObj.moveRight||(t.objTranslate.value.moveRight=!0,a.charObj.moveRight=!0,i.delayDir=2):"up"===e?a.charObj.moveUp||(t.objTranslate.value.moveUp=!0,a.charObj.moveUp=!0,i.delayDir=2):"down"===e&&(a.charObj.moveDown||(t.objTranslate.value.moveDown=!0,a.charObj.moveDown=!0,i.delayDir=2))},centerMap:function(t){6===t.mark?(t.centerMap.x=-10,t.centerMap.y=55,t.centerMark.x=0,t.centerMark.y=25):8===t.mark?(t.centerMap.x=40,t.centerMap.y=0,t.centerMark.x=25,t.centerMark.y=35):10===t.mark&&(t.centerMap.x=85,t.centerMap.y=-62,t.centerMark.x=40,t.centerMark.y=45)},inMobleControl:function(e){if(!t.isMobile.value())return!1;var a=document.body.getBoundingClientRect(),i={max:{},min:{}};i.max.x=a.right/2,i.min.x=50,i.max.y=a.bottom-50,i.min.y=a.bottom/2,e.x>i.min.x&&e.x<i.max.x&&e.y>i.min.y&&e.y<i.max.y&&(h.outterObj.style.marginLeft=e.x-h.outterWidth/2+"px",h.outterObj.style.marginTop=e.y-a.bottom-h.outterWidth/2+5+"px",t.removeClass(h.innerObj,"center"),t.removeClass(h.outterObj,"hidden"),h.move=!0)},inMobleControlRight:function(e){if(!t.isMobile.value())return!1;var a=p.outterObj.getBoundingClientRect();e.x>a.x&&e.x<a.x+a.width&&e.y>a.y&&e.y<a.y+a.height&&(t.removeClass(p.innerObj,"center"),p.move=!0,p.markObj=t.markingMonster.value(),p.markerLabel=p.markObj.label,p.moveRange.x=e.x,p.moveRange.y=e.y,p.moveRange.oldX=p.markObj.position.x,p.moveRange.oldY=p.markObj.position.y)},initControl:function(e){g.getControlRad(e);var a=t.mousePosition.value.pos.mousemove.x,i=t.mousePosition.value.pos.mousemove.y,s=t.distanceAndAngleBetweenTwoPoints(e.pointRad.x,e.pointRad.y,a,i),n=e.outterWidth/2,r=(a-e.offset.left+n-e.outterWidth)/e.outterWidth*2,o=(-(i-e.offset.top+n)+e.outterWidth)/e.outterWidth*2,l=g.getAngle(r,o),c=l*(180/Math.PI);if(g.isInside(s.distance,e.outterWidth))t.css(e.innerObj,{top:i+"px",left:a+"px",position:"fixed"});else{var h=g.getPointRad(l);g.setBtnPosition(h.x,h.y,e)}return{degree:c,pos:{x:a,y:i}}},removeMarkerMonster:function(e){for(var a=t.globalEngine.value.world.bodies,i=0;i<a.length;i++)/controlRight/i.test(a[i].label)&&t.globalWorld.value.remove(t.globalEngine.value.world,a[i])}};t.attachListener(t.qs("credit-close"),"click",function(e){t.addClass(t.nthParent(this,2),"hidden")});for(var m=0,u=t.slice(t.qsAll("loading-header li"));m<u.length;m++)t.attachListener(u[m],"click",function(e,a){t.playAudio("tab-selected"),2===e?t.removeClass(t.qs("credit-alert"),"hidden"):1===e?t.fullscreenToogle(a):0===e&&(/off/i.test(a.className)?(a.className="speaker-on",d.mute=!1):(a.className="speaker-off",d.mute=!0))}.bind(this,m,u[m]));t.scrollSlide(),t.attachListener(r,"click",function(e){localStorage.setItem("load",t.JSONstringfy(owlDATA.jsonData)),location.reload()}),t.attachListener(o,"click",function(e){/expand/i.test(this.className)?(t.css(t.qs("menu-save"),{width:"0px",transition:"width 450ms ease-in-out"}),t.css(this,{transform:"0px,0px,0px",transition:"transform 450ms ease-in-out"}),t.removeClass(this,"expand")):(t.css(t.qs("menu-save"),{width:"250px",transition:"width 450ms ease-in-out"}),t.css(this,{transform:"170px,0px,0px",transition:"transform 450ms ease-in-out"}),t.addClass(this,"expand"))}),t.attachListener(l,"click",function(e){t.addClass(t.nthParent(this,2),"hidden")});var f=t.qs("info-text").getBoundingClientRect(),v=t.qs("init-box").getBoundingClientRect(),b=document.body.getBoundingClientRect();t.qs("info-text").style.height=(b.bottom-f.top)/1.5+"px",t.qs("init-box").style.maxHeight=(b.bottom-v.top)/2+"px";for(var S=t.slice(t.qs("nav-info-text").getElementsByTagName("div")),x=(m=0,S.length);m<x;m++)/checkbox/i.test(S[m].className)&&t.attachListener(S[m],"click",function(e,a){e.appendChild(t.qs("check")),t.infoFilter.value(a)}.bind(this,S[m],m));t.attachListener(t.qs("mini-map-mobile"),"click",function(e){if(/hidden/i.test(t.qs("menu-map-mobile").className)){t.removeClass(t.qs("menu-map-mobile"),"hidden"),t.removeClass(t.qs("box-map"),"hidden");var a=t.scaleMap.value;a&&(t.qs("progress-exp").style.marginTop="180px",t.qs("progress-exp").style.marginRight="0",a.close=!1)}else t.addClass(t.qs("menu-map-mobile"),"hidden")}),t.attachListener(t.qs("mini-map"),"click",function(e){var a=t.scaleMap.value;this.style.display="none",t.removeClass(t.qs("box-map"),"hidden"),t.qs("menu-map").style.display="block",t.isMobile.value()||(t.qs("info-menu").style.display="block"),t.qs("progress-exp").style.marginTop="180px",t.qs("progress-exp").style.marginRight="0",a.close=!1});for(m=0,x=n.length;m<x;m++)t.attachListener(n[m],"click",function(e){var a=t.scaleMap.value;0===e||5===e?(a.close=!0,5===e?(t.addClass(t.qs("menu-map-mobile"),"hidden"),t.removeClass(t.qs("mini-map-mobile"),"hidden")):(t.qs("menu-map").style.display="none",t.qs("mini-map").style.display="block",t.qs("info-menu").style.display="none"),t.addClass(t.qs("box-map"),"hidden"),t.qs("progress-exp").style.marginTop="-5px",t.qs("progress-exp").style.marginRight="55px"):(2===e||3===e)&&a.mark>6?(a.map-=.5,a.mark-=2,g.centerMap(a)):(1===e||4===e)&&a.mark<10&&(a.map+=.5,a.mark+=2,g.centerMap(a))}.bind(this,m));t.attachListener(a,t.CursorStartEvent,function(e){t.characterMobileControl.value.charObj.isAttacking=!0}),t.attachListener(e,t.CursorStartEvent,function(e){t.oval.value.forceGravity&&(t.characterMobileControl.value.charObj.jump=!0)}),t.attachListener(document,t.CursorStartEvent,function(e){/hidden/i.test(c.className)&&(g.inMobleControl(t.mousePosition.value.pos.mousemove),g.inMobleControlRight(t.mousePosition.value.pos.mousemove))}),t.attachListener(document.body,t.CursorMoveEvent,function(e){if("die"!==t[t.oval.value.stateStorage].value.storage[0].status){if(p.move&&/hidden/i.test(c.className)){var a=g.initControl(p).pos,i=5*(a.x-p.moveRange.x),s=5*(a.y-p.moveRange.y);t.globalBody.value.setPosition(p.markObj,{x:p.moveRange.oldX+i,y:p.moveRange.oldY+s}),t.css(p.outterObj,{"z-index":"2",opacity:"1",transition:"opacity 0.5s linear"})}if(h.move&&/hidden/i.test(c.className)){g.getControlRad(h);var n=g.initControl(h).degree;n>35&&n<65?(g.setIdle("right","right"),g.control("up"),g.control("right")):n>65&&n<115?(g.setIdle("up","up"),g.control("up")):n>115&&n<155?(g.setIdle("left","left"),g.control("up"),g.control("left")):n>155&&n<215?(g.setIdle("left","left",!0),g.control("left")):n>215&&n<245?(g.setIdle("left","left"),g.control("down"),g.control("left")):n>245&&n<295?(g.setIdle("down","down"),g.control("down")):n>295&&n<335?(g.setIdle("right","right"),g.control("down"),g.control("right")):(g.setIdle("right","right",!0),g.control("right"))}}else g.setIdle("die")}),t.attachListener(document.body,t.CursorEndEvent,function(e){"die"===t[t.oval.value.stateStorage].value.storage[0].status?g.setIdle("die"):!t.characterMobileControl.value.charObj.jump&&g.setIdle("idle"),h.innerObj.setAttribute("style",""),p.innerObj.setAttribute("style",""),t.addClass(h.outterObj,"hidden"),t.addClass(p.outterObj,"center"),h.move=!1,p.move&&(g.removeMarkerMonster(p.markerLabel),t.orderObjectFn.value(),t.objTranslate.value.objectMarker.state=!1,p.move=!1,t.css(p.outterObj,{"z-index":"0",opacity:"0",transition:"opacity 0.5s linear"}))})},bagAndSkill:function(){setTimeout(function(){var t=this,e=(t.bagLoot.getElementsByTagName("div")[0],t.slice(t.qs("passive-magic").getElementsByTagName("li"))),a=t.slice(t.qs("body-box").getElementsByTagName("div")),i=t.slice(t.qs("familia-box").getElementsByTagName("li")),s=t.slice(t.bagLoot.getElementsByTagName("li")).concat([t.slotButtonHp,t.slotButtonMp]).concat(e).concat(a).concat(i),n=[t.slotSkillA,t.slotSkillB,t.slotSkillC,t.id("slot-skill-i"),t.id("slot-skill-j"),t.id("slot-skill-k"),t.id("slot-skill-l"),t.id("slot-skill-m"),t.id("slot-skill-n"),t.id("slot-skill-o"),t.id("slot-skill-p"),t.id("slot-skill-q")],r=t.slice(t.slotPassiveSkill.getElementsByTagName("li")),o=n.concat(r),l=t.slice(t.qs("list-skills").getElementsByTagName("li")),c=t.qs("container-skill"),h=t.slice(t.skillBox.getElementsByTagName("li")).concat(n).concat(r).concat(l),p=window.localStorage,g=t.qs("switch-right-nav"),m=t.qsAll("nav-right"),u=t.qs("gui-player"),f=(t.skillBox,t.qs("skill-point")),v=t.qs("soul-point"),b=t.qs("upgrade-msg"),S=t.qs("save-msg"),x=t.qs("load-msg"),k=t.qs("load-alert"),y=t.qs("load-alert").getElementsByTagName("button"),B=t.qs("upgrade-header"),w=t.qs("upgrade-alert"),M=t.qs("upgrade-alert").getElementsByTagName("button")[0],P=t.qs("upgrade-msg").getElementsByTagName("button"),A=t.qs("save-msg").getElementsByTagName("button"),D=t.qs("load-msg").getElementsByTagName("button"),j=t.qs("upgrade-msg").getElementsByTagName("p")[1],T=t.qs("static-detail"),O=t.slice(t.qs("control-container-detail").getElementsByTagName("div")),C=t.qs("main-config").getElementsByTagName("li"),N=t.qs("save-detail-cnt"),q=t.qs("menu-save").getElementsByTagName("ul")[0],E=t.qs("save-alert"),F=t.qs("save-alert").getElementsByTagName("button")[0],I=t.qs("dev-note"),R=I.getElementsByTagName("button")[0],L=t.qs("drop-alert"),G=L.getElementsByTagName("button")[0],H=L.getElementsByTagName("button")[1],W=t.slice(t.qs("button-small").getElementsByTagName("div")),Y=t.slice(t.qs("hidden-menu").getElementsByTagName("li")),V=t.qs("box-level"),X=t.qs("monster-params"),_=X.getElementsByTagName("button")[0],U=t.qs("shop-box"),z=U.getElementsByTagName("button")[0],Q=t.qs("shop"),J=t.qs("buy-box"),K=t.qs("buy-box").getElementsByTagName("button")[0],$=t.qs("orientation-alert"),Z=$.getElementsByTagName("button")[0],tt=Y[0],et=(Y[1],Y[2],Y[3],Y[4],W[0]),at=W[1],it=W[2],st=W[3],nt=W[4],rt=W[5],ot=t.slice(t.qs("menu-bag-bottom").getElementsByTagName("li")).slice(2,5),lt=!1;if(t.isMobile.value()){lt=!0,e=t.slice(t.qs("items-equipment-mb").getElementsByTagName("li"));var ct=t.slice(t.qs("items-hidden-potion-mb").getElementsByTagName("li")),ht=t.slice(t.qs("items-hidden-familiar-mb").getElementsByTagName("li")),pt=t.slice(t.qs("items-bag-mb").getElementsByTagName("li")),dt=(s=pt.concat(e).concat(a).concat(ht).concat(ct),ot=t.slice(t.qs("control-itembg-mb").getElementsByTagName("div")),T=t.qs("wrap-item-info-mb"),u=t.qs("gui-player-mb"),ct[0]),gt=ct[1],mt=(f=t.qs("skill-point-mb"),v=t.qs("soul-point-mb"),t.slice(t.qs("items-slot-skill-mb").getElementsByTagName("li"))),ut=(l=t.slice(t.qs("items-skill-mb").getElementsByTagName("li")),o=n.concat(r).concat(mt),h=t.slice(t.skillBox.getElementsByTagName("li")).concat(n).concat(r).concat(l).concat(mt),N=t.qs("save-detail-cnt-mb"),t.slice(t.qsAll("sc-confirm")));t.addClass(t.qs("upgrader-box"),"mobile"),t.qs("cnt-bag-mb").insertBefore(t.qs("upgrader-box"),t.qs("cnt-bag-mb").firstChild);for(var ft=0,vt=ut.length;ft<vt;ft++)t.addClass(ut[ft],"mobile");var bt=document.getElementsByTagName("html")[0].getBoundingClientRect().height-55;t.css(t.qs("monster-content"),{height:bt+"px"})}var St={getSkillByProperty:function(e,a){var i=t.characterSkills.value.get("oval");for(var s in i)for(var n in i[s])if(i[s][n]===e&&a===n)return i[s]},magicFormula:function(e){for(var a={operators:{"+":function(t,e){return t+e},"-":function(t,e){return t-e}},removeNotExistObjectinItem:function(a){var i=t.globalEngine.value.world.bodies;t:for(var s=0,n=e.item.registered.length;s<n;s++){for(var r=0,o=i.length;r<o;r++)if(e.item.registered[s]===i[r].label)continue t;e.item.registered.splice(s,1)}},isObjectRegistered:function(t,e,a,i){for(var s=0,n=t.registered.length;s<n;s++){if("check"===a&&t.registered[s]===e)return"attach"!==i;if("delete"===a&&t.registered[s]===e){t.registered.splice(s,1);break}}return!0},require:function(e,a,i){return!!this.isObjectRegistered(i.item,a,"check",i.status)&&(e.originalParams||(e.originalParams={},t.extend(e.originalParams,e,!0)),e.modifierAbilities||(e.modifierAbilities={}),"detached"===i.status?this.isObjectRegistered(i.item,a,"delete"):i.item.registered.push(a),!0)},stunOrCriticalChange:function(e,a,i,s){if(this.require(e,a,i)){var n="attached"===i.status?"+":"-";if("attached"===i.status)if(e.modifierAbilities[s])e.modifierAbilities[s]=this.operators[n](e.modifierAbilities[s],i.prop.value);else{var r={};r[s]=i.prop.value,t.extend(e.modifierAbilities,r,!0)}else e.modifierAbilities[s]=this.operators[n](e.modifierAbilities[s],i.prop.value)}},defenseChange:function(t,e,a){if(this.require(t,e,a)){var i=t.originalParams.defenseMax,s=t.originalParams.defenseMin,n="attached"===a.status?"+":"-";t.defenseMax=this.operators[n](t.defenseMax,i*a.prop.value/100),t.defenseMin=this.operators[n](t.defenseMin,s*a.prop.value/100)}},magicDefenseChange:function(t,e,a){if(this.require(t,e,a)){var i=t.originalParams.magicDefenseMax,s=t.originalParams.magicDefenseMin,n="attached"===a.status?"+":"-";t.magicDefenseMax=this.operators[n](t.magicDefenseMax,i*a.prop.value/100),t.magicDefenseMin=this.operators[n](t.magicDefenseMin,s*a.prop.value/100)}},attackChange:function(t,e,a){if(this.require(t,e,a)){var i=t.originalParams.attackRangeMax,s=t.originalParams.attackRangeMin,n=t.originalParams.attackMax,r=t.originalParams.attackMin,o="attached"===a.status?"+":"-";t.attackRangeMax=this.operators[o](t.attackRangeMax,i*a.prop.value/100),t.attackRangeMin=this.operators[o](t.attackRangeMin,s*a.prop.value/100),t.attackMax=this.operators[o](t.attackMax,n*a.prop.value/100),t.attackMin=this.operators[o](t.attackMin,r*a.prop.value/100)}},initControl:function(t,e,a){switch(a.init){case"attack":this.attackChange(t,e,a);break;case"defense":this.defenseChange(t,e,a);break;case"magicDefense":this.magicDefenseChange(t,e,a);break;case"stun":this.stunOrCriticalChange(t,e,a,"stun");break;case"critical":this.stunOrCriticalChange(t,e,a,"critical");break;case"avoid":this.stunOrCriticalChange(t,e,a,"avoid")}}},i=e.prop,s=t.characterParameters.value,n=t.oval.value.pions,r=0,o=i.target.length;r<o;r++)if("character"===i.target[r])a.initControl(s,s.object.label,e);else if("pion"===i.target[r]){for(var l=t.characterInventoryBag.value.get("oval"),c=0,h=l.length;c<h;c++){l[c].familiar&&a.initControl(l[c].familiar,l[c].label,e)}if(n.length)t:for(var p=0;p<n.length;p++){var d=n[p].rigBody.itemLabel;for(c=0,h=l.length;c<h;c++)if(l[c].label===d){a.initControl(n[p].rigBody.monsterParameters,n[p].rigBody.label,e);continue t}}}a.removeNotExistObjectinItem(e),"attached"===e.status&&t.registerMagicBoxItem.value.set(e.item.label,e.item)},checkAndRegisterItem:function(e,a){for(var i=t.characterInventoryBag.value.get(t.oval.value.label),s=t.registerMagicBoxItem.value,n=0,r=i.length;n<r;n++)if(("detached"===a||function(){for(var t=0,e=s.storage.length;t<e;t++)if(i[n]&&s.storage[t].name===i[n].label)return!1;return!0}())&&i[n]&&i[n].label===e&&/lapisGemstone|taintedJewel|greenlightnecklace|redjewel|bluejewel|redgemstone|goldgemstone/i.test(i[n].name)){for(var o in i[n].effect){var l=i[n].effect[o];this.magicFormula({init:o,prop:l,label:i[n].label,item:i[n],status:a})}break}},magicBox:function(a){for(var i=t.registerMagicBoxItem.value,s=0,n=e.length;s<n;s++){(h=e[s].getElementsByTagName("div")).length&&this.checkAndRegisterItem(h[0].getAttribute("label"),"attached")}t:for(var r=0,o=i.storage.length;r<o;r++)if(i.storage[r]){if(!a)for(var l=0,c=e.length;l<c;l++){var h;if((h=e[l].getElementsByTagName("div")).length&&i.storage[r].name===h[0].getAttribute("label"))continue t}this.checkAndRegisterItem(i.storage[r].name,"detached"),i.storage[r]&&t.registerMagicBoxItem.value.remove(i.storage[r].name)}},upgrade:function(e,a,i){var s=this;t.attachListener(e,"click",function(){t.playAudio("tab-selected"),t.removeClass(b,"hidden");var e=s.getSkillByProperty(a,"className");t.text(j,e.detail),t.text(B,e.displayName),b.setAttribute("label",e.label),b.setAttribute("prev-label",i)})},enchantFormula:function(e){for(var i={healthPotion:{tierA:{root:"magic",item:"healthPotion",type:"small",material:["health potion"]},tierB:{root:"magic",item:"healthMediumPotion",type:"small",material:["health medium potion"]},tierC:{root:"magic",item:"healthStrongPotion",type:"small",material:["health strong potion"]}},manaPotion:{tierA:{root:"magic",item:"manaPotion",type:"small",material:["mana potion"]},tierB:{root:"magic",item:"manaMediumPotion",type:"small",material:["mana medium potion"]},tierC:{root:"magic",item:"manaStrongPotion",type:"small",material:["mana strong potion"]}},nortusShield:{tierA:{root:"dropMonster",item:"nortusShield",type:"small",material:["nortus shield"]}},telsadian:{tierA:{root:"dropMonster",item:"telsadian",type:"small",material:["telsadian fragment"]}},redGemStone:{tierA:{root:"magic",item:"redGemStone",type:"small",material:["red gem stone"]}},taintedJewel:{tierA:{root:"magic",item:"taintedJewel",type:"small",material:["tainted material"]}}},s=t.characterInventoryBag.value.get("oval"),n=[],r=e.sacrifice&&e.sacrifice||1,o=0,l=a.length;o<l;o++){var c=a[o].getElementsByTagName("div");if(c.length)for(var h=c[0].getAttribute("label"),p=0,d=s.length;p<d;p++)for(var g=0,m=e.enchant.length;g<m;g++)h===s[p].label&&!s[p].enchant&&e.enchant[g]===s[p].type&&s[p].quantity>=r&&n.push(s[p])}var u=e.formula;t:for(var f in u)if(i[f])for(var v=i[f][u[f]],b=0,S=v.material,x=[],k=0,y=0;b<S.length;b++){for(var B=0;B<n.length;B++)n[B].usage===S[b]&&(x.push(n[B]),y++);if(y===e.enchant.length){var w=[];w.push(e.quantity);for(var M=0,P=x.length;M<P;M++)w.push(x[M].quantity);k=e.sacrifice?e.sacrifice:w.sort(function(t,e){return t-e})[0];for(M=0,P=x.length;M<P;M++)x[M].quantity-=k;e.sacrifice?e.quantity=0:k<e.quantity?e.quantity-=k:e.quantity=0;var A=new t.items.value[v.root][v.item]({quantity:e.sacrifice?1:k});A.bagLocation="slot-upgrd-f",A.enchantment=!0,w.length=0,s.push(A),this.createItem(A),t.characterUpdateQuest.value(v.item),this.fetchLoot();break t}}this.fetchLoot()},upgrader:function(){var e=t.qs("upgrader-box"),i=this;/hidden/i.test(e.className)?t.removeClass(e,"hidden"):t.addClass(e,"hidden");var s=t.qs("head-box").cloneNode(!0);t.qs("head-box").parentNode.replaceChild(s,t.qs("head-box")),t.attachListener(s,"click",function(){t.playAudio("tab-selected"),t.addClass(this.parentNode,"hidden");for(var e=0;e<a.length;e++)a[e].innerHTML="",i.fetchLoot(!0)});s=t.qs("footer-box").cloneNode(!0);t.qs("footer-box").parentNode.replaceChild(s,t.qs("footer-box")),t.attachListener(t.qs("footer-box"),"click",function(){if(t.playAudio("tab-selected"),!t.id("slot-upgrd-f").getElementsByTagName("div").length)for(var e=t.characterInventoryBag.value.get("oval"),s=0,n=a.length;s<n;s++){var r=a[s].getElementsByTagName("div");if(r.length)for(var o=r[0].getAttribute("label"),l=0,c=e.length;l<c;l++)if(o===e[l].label&&e[l].enchant){i.enchantFormula(e[l]);break}}})},fetchQuest:function(){var e=t.characterQuest.value.storage,a=lt?"main-quest-mb":"main-quest",i=lt?"child-quest-mb":"quest-detail",s=function(e){for(var i=t.slice(document.querySelectorAll("."+a+" > li")),s=0,n=i.length;s<n;s++)t.removeClass(i[s],"active");t.addClass(e,"active")},n=function(e){var a=!0,s=function(e){for(var a=t.slice(e.getElementsByTagName("div")),i=0;i<a.length;i++)/click/i.test(a[i].className)&&r.active&&t[r.mapMark]&&t[r.mapMark].value.quest.update.length&&t.removeClass(a[i],"hidden")};for(var n in t.qs(i).innerHTML="",e){var r=e[n];if(l=document.createElement("li"),r.active||r.isFinish){t.addChildQuest.value(r,l),t.qs(i).appendChild(l);var o=""===r.mapMark?"dot-quest":"";r.isFinish&&(t.getFirstChild(l).className="quest-tree gold linethrough "+o),a=!1,s(l)}}if(a)for(var n in e){r=e[n];var l=document.createElement("li");t.addChildQuest.value(r,l),t.qs(i).appendChild(l),s(l);break}};for(var r in t.qs(i).innerHTML=t.qs(a).innerHTML="",e){var o=e[r].status;if(o){var l=document.createElement("li");t.text(l,o.title),s(l),t.attachListener(l,"click",function(e,a){t.playAudio("tab-selected"),s(e),n(a)}.bind(this,l,o.questTree)),t.qs(a).insertBefore(l,t.qs(a).firstChild)}}e.length&&n(e[e.length-1].status.questTree)},fetchSkillOnload:function(){for(var e=t.characterSkills.value.get(t.oval.value.label),a=0;a<e.length;a++)if(""!==e[a].slotLocation){var i=document.createElement("div");i.className="item clone "+e[a].className,i.setAttribute("label",e[a].label),i.setAttribute("type",e[a].type);var s=document.createElement("div");s.className="time-span time-span-"+e[a].label,i.appendChild(s);var n=document.createElement("div");n.className="disable-skill",i.appendChild(n),t.id(e[a].slotLocation).innerHTML="",t.id(e[a].slotLocation).appendChild(i)}},fetchSkill:function(){var e=t.items.value.skills,a=t.characterParameters.value;t.text(f,a.skillPoint),t.text(v,a.soulPoint),soulCnt=lt?t.qs("soul-val-mb"):t.qs("soul-val");for(var i=0,s=t.slice(c.getElementsByTagName("li"));i<s.length;i++)s[i].innerHTML="";for(var r=0,o=n.length;r<o;r++){var p=t.getFirstChild(n[r]);if(p)for(var d in e){var g=e[d];if(p.getAttribute("label")===g.label){var m=document.createElement("div");for(s=0;s<h.length;s++)if(!h[s].getElementsByTagName("div").length&&/slot-skill/i.test(h[s].className)){m.className="item "+g.className,m.setAttribute("label",g.label),m.setAttribute("type",g.type),h[s].appendChild(m);break}}}}for(e=t.items.value.skills,r=0,o=l.length;r<o;r++){var u=t.getFirstChild(l[r]);for(var d in e){g=e[d];if(u.className.split(" ")[1]===g.className){if(u.innerHTML="",u.parentNode.setAttribute("drag","true"),e[d].level>a.level||e[d].next&&!e[d].active||/wizard/i.test(e[d].caracterClass)&&!e[d].active){var b=document.createElement("div");divInner=document.createElement("div"),b.className="cover-up",divInner.className="cover-level",t.text(divInner,g.level),b.appendChild(divInner),u.innerHTML="",u.parentNode.setAttribute("drag","false"),u.appendChild(b)}u.setAttribute("label",g.label)}}}},fetchLoot:function(e){for(var a=t.slotButtonHp.getElementsByTagName("div"),i=t.slotButtonMp.getElementsByTagName("div"),n=t.characterInventoryBag.value.get(t.oval.value.label),r=0;r<n.length;r++)for(var o=0;o<s.length;o++)if(s[o]&&n[r]){var l=t.slice(s[o].getElementsByTagName("div")),c=l.length&&n[r].label===l[0].getAttribute("label");if(c&&(l[1]&&n[r].quantity>1&&(t.text(l[1],n[r].quantity),t.removeClass(l[1],"hidden")),0===n[r].quantity&&(t.nthParent(l[0],1).innerHTML="",n.splice(r,1))),c||a.length&&n[r].label===a[0].getAttribute("label")||i.length&&n[r].label===i[0].getAttribute("label"))break;o===s.length-1&&n[r].quantity&&this.createItem(n[r],e)}},skillDetail:function(e){for(var a=t.characterSkills.value.get(t.oval.value.label),i=t.items.value.skills,s=lt?t.qs("innerwrap-info-skill-mb"):t.detailSkill,n=0;n<a.length;n++)if(a[n]&&a[n].label===e){var r=t.qs("familiar-temp-box").getElementsByTagName("div").length,o=t.qs("items-hidden-familiar-mb").getElementsByTagName("li").length;if(r||"undead"===a[n].name?o||t.qs("items-hidden-familiar-mb").appendChild(t.qs("familiar-box-mb")):t.qs("familiar-temp-box").appendChild(t.qs("familiar-box")),r||"undead"!==a[n].name){s.innerHTML="";t:for(var l in a[n])if(/displayName|familiar|detail|next|upgradeClass|require/i.test(l)&&"className"!==l){var c=document.createElement("li"),h=document.createElement("span"),p=document.createElement("span"),d=i[a[n].upgradeProperty];if(d&&d.active&&/next|upgradeClass|require/i.test(l))continue t;if("require"===l){var g="skill points : "+a[n][l].skillPoint+", Required Level  : "+a[n][l].level;t.text(h,l),t.text(p,g),c.appendChild(h),c.appendChild(p);var m=document.createElement("li"),u=document.createElement("abbr");t.text(u,"Unlock"),m.className="upgrade-button",m.appendChild(u),St.upgrade(m,a[n].upgradeClass,e)}else if("upgradeClass"===l){var f=document.createElement("div");f.className="item "+a[n][l],c.className="box",c.appendChild(f)}else"familiar"===l?lt?(c.className="familiar-inner-box-mb",c.appendChild(t.qs("familiar-box-mb"))):(c.className="familiar-inner-box",c.appendChild(t.qs("familiar-box"))):(t.text(h,"displayName"===l?"Name":l),t.text(p,a[n][l]),c.appendChild(h),c.appendChild(p));s.appendChild(c),"require"===l&&d&&!d.active&&s.appendChild(m)}}break}},createItem:function(e,a){var i=document.createElement("div");i.className="item "+e.className,i.setAttribute("label",e.label);var n=document.createElement("div");if(n.className="item-number hidden",t.text(n,e.quantity),i.appendChild(n),""===e.bagLocation||a){for(var r=0;r<s.length;r++)if(!s[r].getElementsByTagName("div").length){s[r].appendChild(i);break}}else t.id(e.bagLocation).appendChild(i)},createDetail:function(e,a){if(e="enchant"===e.toLowerCase()?"Required Material":e,a instanceof Object&&!(a instanceof Array)){if(/magic resistance/i.test(e))var i="magicDefenseMin",s="magicDefenseMax";else if(/physical resistance/i.test(e))i="defenseMin",s="defenseMax";else if(/range damage/i.test(e))i="attackRangeMin",s="attackRangeMax";else if(/melee damage/i.test(e))i="attackMin",s="attackMax";else"displayName"===e&&(e="Name");if(a.originalParams)var n=a.originalParams[i],r=Math.round(a[i]),o=Math.round(r-n),l=Math.round(a[s]),c=a.originalParams[s],h=Math.round(l-c);else n=Math.round(a[i]),c=Math.round(a[s]);var p=document.createElement("li"),d=document.createElement("span"),g=document.createElement("span"),m=document.createElement("abbr"),u=document.createElement("span"),f=document.createElement("abbr");spanStrip=document.createElement("span"),u.className=g.className="static bold",d.className="staticBlock",m.className=f.className="light-blue",t.text(d,e),t.text(g,n),t.text(m," + "+o),t.text(u,c),t.text(f," + "+h),t.text(spanStrip," - "),parseInt(o)&&g.appendChild(m),parseInt(h)&&u.appendChild(f),parseInt(h)&&parseInt(h),p.appendChild(d),p.appendChild(g),p.appendChild(spanStrip),p.appendChild(u)}else{p=document.createElement("li"),d=document.createElement("span");var v=document.createElement("span"),b=a instanceof Array;v.className=b?"gold":"",a=b?a.join(", "):a,"Abilities "===e?v.className="light-blue":"displayName"===e?e="Name":"mp"===e&&(e="Required Magic Points"),t.text(d,e),t.text(v,a),p.appendChild(d),p.appendChild(v)}return p},charDetail:function(t){var e=t.params;if(lt||(t.box.innerHTML=""),t.box.appendChild(this.createDetail("Level ",Math.round(e.level))),t.box.appendChild(this.createDetail("Health Points ",e.health?e.health+" / "+e.maxHealth:e.maxHealth)),t.box.appendChild(this.createDetail("Magic Points ",e.mp?e.maxMp?e.mp+" / "+e.maxMp:e.mp:e.maxMp)),t.box.appendChild(this.createDetail("Attack Range ",e.range?e.range:e.attackRange)),t.box.appendChild(this.createDetail("Melee Damage",e)),t.box.appendChild(this.createDetail("Range Damage",e)),t.box.appendChild(this.createDetail("Physical Resistance ",e)),t.box.appendChild(this.createDetail("Magic Resistance ",e)),e.modifierAbilities){var a=[];for(var i in e.modifierAbilities)e.modifierAbilities[i]>0&&a.push(("avoid"===i?"dodge":i)+" "+Math.round(e.modifierAbilities[i])+" %");a.length&&t.box.appendChild(this.createDetail("Abilities ",a.join(" ,  ")))}},skillInfoDetail:function(e){var a=t.items.value.skills,i=t.detailInventory;if(/clone/i.test(e.className))return!1;for(var s in a)if(a[s]&&a[s].label===e.getAttribute("label")){for(var n in i.innerHTML="",a[s])/displayName|mp|detail/i.test(n)&&"className"!==n&&i.appendChild(this.createDetail(n,a[s][n]));if(!lt){var r=e.parentNode.getBoundingClientRect();t.css(t.qs("item-popup"),{top:r.top+"px",left:r.left+5+"px"})}break}},shopDetail:function(t){t.box.innerHTML="";for(var e=0,a=t.items;e<a.length;e++)if(a[e].label===t.label){for(var i in a[e])!/displayName|type|detail/i.test(i)&&"enchant"!==i||"className"===i||t.box.appendChild(this.createDetail(i,a[e][i]));return a[e]}},itemDetail:function(e){var a=t.characterInventoryBag.value.get(t.oval.value.label),i=lt?T:t.detailInventory;if(i.innerHTML="",e)for(var s=0;s<a.length;s++)if(a[s]&&a[s].label===e.getAttribute("label")){for(var n in a[s])if((/displayName|name|type|detail/i.test(n)||"enchant"===n)&&"className"!==n)if(a[s].displayName){if("name"===n)continue;i.appendChild(this.createDetail(n,a[s][n]))}else i.appendChild(this.createDetail(n,a[s][n]));if(!lt){var r=e.parentNode.getBoundingClientRect();t.css(t.qs("item-popup"),{top:r.top+"px",left:r.left+"px"})}break}},guiPionToogle:function(e){if(/blood-lich/i.test(e.className)){for(var a=e.getAttribute("label"),i=lt?T:t.qs("pion-detail"),s=t.characterInventoryBag.value.get("oval"),n=0,r=s.length;n<r;n++)if(a===s[n].label){this.charDetail({params:s[n].familiar,box:i});break}if(!lt)var o=0,l=setInterval(function(){t.removeClass(t.qs("familiar-params-box"),"hidden");var e=t.qs("item-popup").getBoundingClientRect(),a=t.qs("familiar-params-box").getBoundingClientRect(),i=document.body.getBoundingClientRect(),s=(a.height-e.height)/2,n=e.top-s,r={top:n+"px"};i.bottom<a.bottom&&(r={top:e.top-a.height+e.height+"px"}),n&&e.right?t.css(t.qs("familiar-params-box"),t.extend({position:"absolute",opacity:o,left:e.right+"px"},r)):t.addClass(t.qs("familiar-params-box"),"hidden"),++o>1&&clearInterval(l)},10)}},guiToogle:function(){lt&&/hidden/i.test(u.className)?(t.removeClass(u,"hidden"),this.GUImobile.firstLoad(),this.GUImobile.replaceSkills("attach"),t.playAudio("Inventory_Open_01")):/hidden/i.test(u.className)?(t.removeClass(u,"hidden"),t.addClass(document.getElementsByTagName("header")[0],"hidden"),t.addClass(t.qs("nav-bottom-mobile"),"hidden"),t.playAudio("Inventory_Open_01")):(t.addClass(u,"hidden"),t.removeClass(document.getElementsByTagName("header")[0],"hidden"),t.removeClass(t.qs("nav-bottom-mobile"),"hidden"),t.playAudio("inventory-close"))},activeTab:function(e){var a=t.slice(t.qs("container-menu").getElementsByTagName("li"));t.playAudio("tab-selected");for(var i=0,s=a.length;i<s;i++){var n=t.getFirstChild(a[i]);t.removeClass(n,"active-tab"),n.className===e.className&&t.addClass(e,"active-tab")}},selectTab:function(e,a){var i=t.qs("gui-player"),s=[t.bagContainer,t.skillContainer,t.questContainer,t.controlContainer];this.fetchQuest(),this.charDetail({params:t.characterParameters.value,box:T}),this.fetchLoot(),this.fetchSkill(),/hidden/i.test(i.className)?t.removeClass(i,"hidden"):/hidden/i.test(e.className)||St.guiToogle();for(var n=0;n<s.length;n++)e===s[n]?(t.addClass(e,"active"),t.removeClass(e,"hidden")):(t.addClass(s[n],"hidden"),t.removeClass(s[n],"active"));this.activeTab(a),t.removeClass(tt,"expand"),t.css(t.qs("hidden-menu"),{transform:"0px,0px,0px",transition:"transform 450ms ease-in-out"}),/hidden/i.test(i.className)?(t.removeClass(document.getElementsByTagName("header")[0],"hidden"),t.removeClass(t.qs("nav-bottom-mobile"),"hidden")):(t.addClass(document.getElementsByTagName("header")[0],"hidden"),t.addClass(t.qs("nav-bottom-mobile"),"hidden"))},emptyBagLocation:function(e){for(var a=t.characterInventoryBag.value.get("oval"),i=0,s=a.length;i<s;i++)if(e===a[i].label){a[i].bagLocation="";break}},loadSaveGame:function(){var e=JSON.parse(p.getItem("saveGame"));for(var a in e){var i=document.createElement("li");i.setAttribute("target",a),t.text(i,a),N.insertBefore(i,N.firstChild),cloneLi=i.cloneNode(!0),q.insertBefore(cloneLi,q.firstChild)}var s=document.createElement("li");t.text(s,"SAVE NEW GAME"),N.appendChild(s);var n=N.getElementsByTagName("li"),r=t.slice(n);for(a=0;a<r.length;a++)t.attachListener(r[a],"click",function(){t.playAudio("tab-selected");var e=this.getAttribute("target");if(e){var a=x.getElementsByTagName("p")[0];t.text(a,"Save Game, "+e),t.removeClass(x,"hidden"),x.setAttribute("target",e)}else/hidden/i.test(S.className)?t.removeClass(S,"hidden"):t.addClass(S,"hidden")});a=0;for(var o=t.slice(q.getElementsByTagName("li"));a<o.length;a++)t.attachListener(o[a],"click",function(){t.playAudio("tab-selected");var e=JSON.parse(p.getItem("saveGame"))[this.getAttribute("target")];p.setItem("load",t.JSONstringfy(e)),location.reload()})},loadMenuSaveGame:function(){t.attachListener(y[1],"click",function(){t.playAudio("tab-selected"),t.addClass(k,"hidden")}),t.attachListener(y[0],"click",function(){t.playAudio("tab-selected"),St.saveNewGame(x.getAttribute("target"),!1,!0),t.addClass(k,"hidden")}),t.attachListener(D[0],"click",function(){t.playAudio("tab-selected");var e=JSON.parse(p.getItem("saveGame"))[x.getAttribute("target")];p.setItem("load",t.JSONstringfy(e)),location.reload()}),t.attachListener(D[1],"click",function(){t.playAudio("tab-selected"),t.removeClass(k,"hidden"),t.addClass(x,"hidden")}),t.attachListener(D[2],"click",function(){t.playAudio("tab-selected"),t.addClass(x,"hidden")}),t.attachListener(F,"click",function(){t.playAudio("tab-selected"),t.addClass(E,"hidden")}),t.attachListener(A[1],"click",function(){t.playAudio("tab-selected"),t.addClass(S,"hidden")}),t.attachListener(A[0],"click",function(){t.playAudio("tab-selected");var e=t.nthParent(this,2).getElementsByTagName("input")[0],a=t.encodeStr(e.value);a.length?St.saveNewGame(a,e):e.focus()})},saveNewGame:function(e,a,i){var n=JSON.parse(p.getItem("saveGame"));if(n&&Object.keys(n).length<5||null===n||i){var r=t.characterInventoryBag.value.get(t.oval.value.label),l=t.characterSkills.value.get(t.oval.value.label);St.checkBagLocation(s,r,"bag"),St.checkBagLocation(o,l,"skill"),t.characterSkillDisable.value("enable");var c=t.characterInventoryBag.value.get("oval"),h=t.characterParameters.value,d=t.characterQuest.value.storage,g=t.characterSkills.value.get("oval");activeMap=t.activeMap.value,regMagicItem=t.registerMagicBoxItem.value.storage,itemShop=t.itemShop.value.get("global"),forceGravity=t.oval.value.forceGravity,test=!0,pathPoint={pathPoint:t.staticAllMap.value[activeMap].content.staticOriGroupPathPoints[0].position,userPoint:t.oval.value.position,map:activeMap},format={charPoints:pathPoint,charBag:c,charParams:h,charQuest:d,charForceGravity:forceGravity,regMagicItem:regMagicItem,charSkills:t.JSONstringfy(g),systemSkills:t.JSONstringfy(t.items.value.skills),itemShop:itemShop},t.addClass(S,"hidden"),t.addClass(x,"hidden");var m={};if(n){for(var u in n)if(u===e){n[u]=format,test=!1;break}m[e]=format,test&&t.extend(n,m)}else n={},m[e]=format,t.extend(n,m);var f=t.JSONstringfy(n);p.setItem("saveGame",f),N.innerHTML="",St.loadSaveGame(),a&&(a.value="")}else t.removeClass(E,"hidden"),t.addClass(S,"hidden"),a&&(a.value="")},installGlobalSaveGame:function(){var e=setInterval(function(){t.globalSaveLoad.value&&(t.globalSaveLoad.value=function(){St.charDetail({params:t.characterParameters.value,box:T}),St.fetchLoot(),St.fetchSkill(),St.fetchSkillOnload()},t.globalSaveGame.value=St.saveNewGame,clearInterval(e))},100)},checkLoadGame:function(){var e,a=p.getItem("load");if(a){e=JSON.parse(a);var i=setInterval(function(){t.globalLoadGame.value&&(t.globalLoadGame.value(e.charPoints.map,e),t.addClass(t.qs("loading-ui"),"hidden"),p.removeItem("load"),clearInterval(i))},100)}else t.removeClass(t.qs("loading-ui"),"hidden")},checkBagLocation:function(e,a,i){for(var s=0;s<a.length;s++)"bag"===i?a[s].bagLocation="":a[s].slotLocation="";for(var n=0;n<e.length;n++){var r=t.getFirstChild(e[n]);if(r.getAttribute){var o=r.getAttribute("label");if(o)for(s=0;s<a.length;s++)if(o===a[s].label){"bag"===i?a[s].bagLocation=r.parentNode.id:a[s].slotLocation=r.parentNode.id;break}}}},GUImobile:{isFirstLoad:!1,heightInventory:0,transformInventory:0,itemWWHH:{inventory:0,skill:0},previousItem:"",firstLoad:function(){this.layoutMobile(),this.hideItemCntOverflow("hidden"),this.isFirstLoad||(this.tabsInventory(),this.tabsMainGUI(),this.tabsControl(),this.isFirstLoad=!0)},hideItemCntOverflow:function(e){for(var a=t.qs("items-bag-mb").getBoundingClientRect(),i=0,s=pt.length;i<s;i++)if("hidden"===e){var n=pt[i].getBoundingClientRect();a.bottom<n.bottom||n.top+5<a.top?pt[i].style.opacity=0:pt[i].style.opacity=1}else pt[i].style.opacity=1},replaceSkills:function(e){var a=t.slice(t.qs("items-slot-skill-mb").getElementsByTagName("li")),i=t.slice(t.qsAll("slot-mb")),s=function(t,e){for(var a=0,i=t.length;a<i;a++){var s=t[a].getElementsByTagName("div"),n=t[a].getAttribute("att");if(s.length)for(var r=0,o=e.length;r<o;r++){if(n===e[r].getAttribute("att")){s[0].setAttribute("style",""),e[r].appendChild(s[0]);break}}}};"attach"===e?s(i,a):s(a,i)},replaceSekleton:function(e){var a=function(e){for(var a=0;a<ht.length;a++){var i=ht[a].getElementsByTagName("div");"inventory"===e?ht[a].setAttribute("style",""):t.css(ht[a],{width:this.itemWWHH[e]+"px",height:this.itemWWHH[e]+"px"}),i.length&&t.css(i[0],{width:this.itemWWHH[e]+"px",height:this.itemWWHH[e]+"px"})}}.bind(this);if("attach"===e)t.qs("items-hidden-familiar-mb").appendChild(t.qs("familiar-box-mb")),a("inventory");else{var i=t.qs("familiar-inner-box-mb");i&&(i.appendChild(t.qs("familiar-box-mb")),a("skill"))}},replacePotions:function(e){var a=dt.getElementsByTagName("div"),i=gt.getElementsByTagName("div"),s=t.slotButtonHp.getElementsByTagName("div"),n=t.slotButtonMp.getElementsByTagName("div");"attach"===e?(a.length&&t.slotButtonHp.appendChild(a[0]),i.length&&t.slotButtonMp.appendChild(i[0])):(s.length&&dt.appendChild(s[0]),n.length&&gt.appendChild(n[0]))},infoItemToogle:function(e,a){"char"===e?(t.removeClass(t.qs("item-info-detail"),"active"),t.addClass(t.qs("chara-info-detail"),"active"),St.charDetail({params:t.characterParameters.value,box:T})):(t.removeClass(t.qs("chara-info-detail"),"active"),t.addClass(t.qs("item-info-detail"),"active"),St.itemDetail(a),St.guiPionToogle(a),this.previousItem=a)},layoutMobile:function(){var e=t.qs("items-bag-mb").offsetHeight;t.css(t.qs("items-bag-mb"),{width:e+"px"});var a=t.qs("items-bag-mb").offsetHeight/5;t.css(t.qs("items-equipment-mb"),{width:a+"px"}),t.css(t.qs("items-hidden-potion-mb"),{width:a+"px",height:e+"px","margin-left":-(a+30)+"px"}),t.css(t.qs("items-hidden-familiar-mb"),{width:a+"px",height:e+"px","margin-left":-(a+30)+"px"});var i=t.qs("cnt-bag-mb").offsetWidth-e-a-35;t.css(t.qs("items-info-mb"),{width:i+"px"});var s=t.qs("items-skill-mb").offsetHeight,n=s/5;t.css(t.qs("items-skill-mb"),{width:s-n+"px"});for(var r=t.qs("items-skill-mb").getElementsByTagName("li"),o=r[0].offsetWidth,l=0;l<r.length;l++)t.css(r[l],{height:o-2+"px"});var c=t.qs("items-slot-skill-mb").getElementsByTagName("li"),h=t.qs("items-slot-skill-mb").getElementsByTagName("ul")[0];t.css(t.qs("items-slot-skill-mb"),{width:2*(o-2)+4+"px"});for(l=0;l<c.length;l++)t.css(c[l],{width:o-2+"px",height:o-2+"px"});t.css(h,{"margin-top":n+"px"});i=t.qs("cnt-skill-mb").offsetWidth-t.qs("items-skill-mb").offsetWidth-t.qs("items-slot-skill-mb").offsetWidth-35;t.css(t.qs("items-info-skill-mb"),{width:i+"px"});var p=t.qs("items-quest-mb").offsetHeight;t.css(t.qs("items-quest-mb"),{width:p+"px"});i=t.qs("cnt-quest-mb").offsetWidth-t.qs("items-quest-mb").offsetWidth-15;t.css(t.qs("items-info-quest-mb"),{width:i+"px","margin-left":"15px"});p=t.qs("items-control-mb").offsetHeight;t.css(t.qs("items-control-mb"),{width:p-p/4+"px"});i=t.qs("cnt-control-mb").offsetWidth-t.qs("items-control-mb").offsetWidth-15;t.css(t.qs("items-info-control-mb"),{width:i+"px","margin-left":"15px"}),this.heightInventory=5*t.id("slot-a-mb").offsetHeight,this.transformInventory=-(a+30),this.itemWWHH.inventory=a,this.itemWWHH.skill=o-2},tabsInventory:function(){t.attachListener(t.qs("chara-info-detail"),"click",function(){t.playAudio("tab-selected"),T.innerHTML="",this.infoItemToogle("char")}.bind(this)),t.attachListener(t.qs("item-info-detail"),"click",function(){t.playAudio("tab-selected"),T.innerHTML="",this.infoItemToogle("item",this.previousItem)}.bind(this))},tabsMainGUI:function(){for(var e=t.slice(t.qs("container-menu-mb").getElementsByTagName("li")),a=e.splice(0,4),i=t.slice(document.querySelectorAll(".tab-list-content-mb > li")),s=0;s<a.length;s++)t.attachListener([a[s],Y[s+1]],"click",function(e,s){t.removeClass(u,"hidden");for(var n=0;n<a.length;n++)t.removeClass(a[n],"active-tab-mb"),t.removeClass(i[n],"active-detail-mb");t.addClass(e,"active-tab-mb"),t.addClass(i[s],"active-detail-mb"),this.layoutMobile(),this.replaceSkills("attach"),t.scrollSlideParams.fn(),0===s?this.replaceSekleton("attach"):1===s&&this.replaceSekleton("detached"),St.fetchQuest(),t.removeClass(tt,"expand"),t.css(t.qs("hidden-menu"),{transform:"0px,0px,0px",transition:"transform 450ms ease-in-out"}),t.playAudio("tab-selected")}.bind(this,a[s],s));t.attachListener(e[0],"click",function(){t.addClass(t.qs("gui-player-mb"),"hidden"),this.replaceSkills("detached"),t.playAudio("inventory-close")}.bind(this))},tabsControl:function(){for(var e=t.slice(t.qs("items-control-mb").getElementsByTagName("li")),a=0,i=e.length;a<i;a++)t.attachListener(e[a],"click",function(e,a){for(var i=0,s=e.length;i<s;i++)t.removeClass(e[i],"active");t.addClass(t.qs("tab-performance-mb"),"hidden"),t.addClass(t.qs("tab-save-game-mb"),"hidden"),0===a?(t.removeClass(t.qs("tab-performance-mb"),"hidden"),t.addClass(e[a],"active")):1===a&&(t.removeClass(t.qs("tab-save-game-mb"),"hidden"),t.addClass(e[a],"active")),t.playAudio("tab-selected")}.bind(this,e,a))}},initShop:function(){var e=this,a=t.qs("shop-detail"),i=t.qs("shop-detail-item"),s={selected:{charaterParams:t.characterParameters.value,characterLoot:t.characterInventoryBag.value.get("oval"),attach:!1,item:"",current:1,itemParams:"",initialTimeOut:"",initialTimeInverval:"",reset:function(){this.item="",this.itemParams="",this.current=1}},objectItems:[],items:t.itemShop.value.get("global"),displayBuyProperties:function(e,a){document.createElement("li");var i=document.createElement("div"),n=document.createElement("abbr"),r=t.qs("buy-item-content"),o=t.qs("buy-title"),l=t.qs("buy-text"),c=t.qs("price-display");a=s.selected;if(t.text(n," S.CRISTALS "+a.charaterParams.soulPoint),t.text(o,e.name),t.text(l,e.shop.price+" x 1"),i.className="item "+e.className,i.setAttribute("label",e.label),n.className="gold",o.appendChild(n),r.innerHTML="",r.appendChild(i),a.itemParams=e,t.text(c,e.shop.price*a.current),!a.attach){a.attach=!0;var h=t.qs("buy-button-plus"),p=t.qs("buy-button-min"),d=t.qs("buy-button-confirm"),g=function(e){var i=a.itemParams;a.current<i.shop.max&&i.shop.price*(a.current+1)<a.charaterParams.soulPoint&&a.current++,t.text(l,i.shop.price+" x "+a.current),t.text(c,i.shop.price*a.current),t.css(e,{"background-size":"30%"})},m=function(e){var i=a.itemParams;a.current>1&&a.current--,t.text(l,i.shop.price+" x "+a.current),t.text(c,i.shop.price*a.current),t.css(e,{"background-size":"30%"})};t.attachListener(d,"click",function(){var e=a.itemParams,i=e.shop.price*a.current,n=s.items[e.shop.itemName];i<=a.charaterParams.soulPoint?(a.charaterParams.soulPoint-=i,a.characterLoot.push(new t.items.value[e.shop.root][e.shop.itemName]({quantity:a.current})),"~"!==n.available&&s.items[e.shop.itemName].available--,t.pushMsgText.value("+"+a.current+" "+e.displayName+" TO BE ADDED TO INVENTORY",400)):t.pushMsgText.value("NOT ENOUGH SOUL CRISTAL",400),t.addClass(U,"hidden"),t.addClass(J,"hidden"),a.reset()}),t.attachListener([h,p],t.CursorStartEvent,function(){var t=this,e=/buy-button-plus/i.test(t.className)?g:m;clearTimeout(a.initialTimeOut),clearInterval(a.initialTimeInverval),a.initialTimeOut=setTimeout(function(){a.initialTimeInverval=setInterval(function(){e(t)},100)},1e3),e(t)}),t.attachListener([h,p],t.CursorEndEvent,function(){clearTimeout(a.initialTimeOut),clearInterval(a.initialTimeInverval),t.css(this,{"background-size":"35%"})})}},createItem:function(e){var a=document.createElement("li"),i=document.createElement("div"),s=document.createElement("span"),n=new t.items.value[e.root][e.itemName],r=n.className;return e.shopParams.itemName=e.itemName,t.extend(n,{shop:e.shopParams},!0),i.setAttribute("label",n.label),i.className="item "+r,s.className="price",t.text(s,e.price),a.appendChild(i),a.appendChild(s),this.objectItems.push(n),a},generateItems:function(){for(var t in this.items){var e=this.items[t];if(e.available){var i=this.createItem({price:e.price,root:e.root,itemName:t,shopParams:e});this.attachEvent(i),a.appendChild(i)}}},attachEvent:function(a){var n={item:""},r=a.getElementsByTagName("div")[0],o=function(){t.removeClass(i,"hidden");var r=t.getFirstChild(a),o=a.getBoundingClientRect(),l=t.mousePosition.value.pos.mousedown.x,c=t.getFirstChild(U).getBoundingClientRect(),h=i.getBoundingClientRect(),p=c.left+c.width/2;i.setAttribute("style",""),o.right>p?t.css(i,{left:(lt?o.left:l)-(lt?h.width:c.left+h.width+o.width/2)+"px","border-right":"2px solid rgba( 0, 0, 0, 0.33 )","text-align":"right",position:"fixed"}):t.css(i,{left:(lt?o.left:l)+o.width-c.left-(lt?0:o.width/2)+"px","border-left":"2px solid rgba( 0, 0, 0, 0.33 )","text-align":"left",position:"fixed"}),n.item=e.shopDetail({box:i,items:s.objectItems,label:r.getAttribute("label")})};t.attachListener(r,t.CursorStartEvent,o),t.attachListener(r,t.CursorMoveEvent,o),t.attachListener(r,t.CursorLeaveEvent,function(e){t.addClass(i,"hidden")}),t.attachListener(r,t.CursorEndEvent,function(e){s.displayBuyProperties(n.item),t.removeClass(J,"hidden")}),t.attachListener(U,t.CursorEndEvent,function(e){t.addClass(i,"hidden")})}};t.attachListener(Q,"click",function(e){s.items=t.itemShop.value.get("global"),s.selected.charaterParams=t.characterParameters.value,s.selected.characterLoot=t.characterInventoryBag.value.get("oval"),a.innerHTML="",s.generateItems(),t.removeClass(U,"hidden"),t.playAudio("tab-selected")}),t.attachListener(z,"click",function(e){t.addClass(U,"hidden"),t.playAudio("tab-selected")}),t.attachListener(K,"click",function(e){t.addClass(J,"hidden"),t.playAudio("tab-selected"),s.selected.reset()})},objDiscard:"",initDropItem:function(e){var a=this;e?"open"===e&&t.nthParent(a.objDiscard,2)&&t.removeClass(L,"hidden"):(t.attachListener(G,"click",function(e){t.addClass(L,"hidden")}),t.attachListener(H,"click",function(){for(var e=t.characterInventoryBag.value.get("oval"),i=0,s=e.length;i<s;i++)if(e[i]&&e[i].label===a.objDiscard.getAttribute("label")){t.characterDropItem.value(e[i]),t.addClass(L,"hidden"),e.splice(i,1);break}a.objDiscard.remove()}))},initShowMonsterParams:function(){t.attachListener(V,"click",function(e){if(/hidden/i.test(X.className)){t.removeClass(X,"hidden");var a=t.monsterParameters.value.get(t.monsterTarget.value),i=t.qs("content-detail"),s=t.qs("monster-title");i.innerHTML="",t.text(s,a.name),St.charDetail({params:a,box:i})}else t.addClass(X,"hidden")}),t.attachListener(_,"click",function(e){t.addClass(X,"hidden")})},initUpgradeGUI:function(){t.attachListener(P[0],"click",function(){for(var e=b.getAttribute("label"),a=b.getAttribute("prev-label"),i=St.getSkillByProperty(e,"label"),s=t.characterParameters.value,n=t.characterSkills.value.get(t.oval.value.label),r=t.items.value.skills,o=0,l=n;o<l.length;o++)if(l[o].label===a){if(s.skillPoint>=l[o].require.skillPoint&&s.level>=l[o].require.level){for(var c in s.skillPoint-=l[o].require.skillPoint,r)r[c].label===i.label&&(r[c].active=!0);i.active=!0,St.skillDetail(i.label),St.fetchSkill()}else t.removeClass(w,"hidden");t.addClass(b,"hidden");break}t.playAudio("tab-selected")}),t.attachListener(M,"click",function(){t.playAudio("tab-selected"),t.addClass(w,"hidden")}),t.attachListener(P[1],"click",function(){t.playAudio("tab-selected"),t.addClass(b,"hidden")})},initIsLanscape:function(){t.attachListener(Z,"click",function(){t.addClass($,"hidden")}),t.attachListener(R,"click",function(){t.addClass(I,"hidden")})},preloadAndExitAlert:function(){var e=t.slice(t.qs("preload-alert").getElementsByTagName("button"));t.attachListener(e[0],"click",function(){t.addClass(t.qs("preload-alert"),"hidden"),t.playAudio("tab-selected")}),t.attachListener(e[1],"click",function(){var e=JSON.parse(p.getItem("saveGame"))["Auto Save"];e?(p.setItem("load",t.JSONstringfy(e)),t.addClass(t.qs("preload-alert"),"hidden"),t.playAudio("tab-selected"),location.reload()):(p.setItem("load",t.JSONstringfy(owlDATA.jsonData)),location.reload())}),t.attachListener(e[2],"click",function(){t.globalPreloadError.value(),t.addClass(t.qs("preload-alert"),"hidden"),t.playAudio("tab-selected")});e=t.slice(t.qs("exit-alert").getElementsByTagName("button"));t.attachListener(e[0],"click",function(){t.addClass(t.qs("exit-alert"),"hidden"),t.playAudio("tab-selected")}),t.attachListener(e[1],"click",function(){location.reload(),t.playAudio("tab-selected")})},registerAutoSave:function(){t.intervalList.value.set("auto-save",{always:!0,tick:12e3,tickUpdate:12e3,fn:function(){t.pushMsgText.value("saving your progress ",100),t.globalSaveGame.value("Auto Save","",!0)}})}};t.attachListener(g,"click",function(){for(var e=0,a=m.length;e<a;e++)/hidden/i.test(m[e].className)?t.removeClass(m[e],"hidden"):t.addClass(m[e],"hidden")}),St.initUpgradeGUI(),St.checkLoadGame(),St.installGlobalSaveGame(),St.loadSaveGame(),lt&&St.GUImobile.firstLoad(),St.initShowMonsterParams(),St.initShop(),St.initDropItem(),St.loadMenuSaveGame(),St.initIsLanscape(),St.preloadAndExitAlert(),St.registerAutoSave();for(ft=0;ft<C.length;ft++)t.attachListener(C[ft],"click",function(){if(t.playAudio("tab-selected"),this.getAttribute("target")){for(var e=0;e<O.length;e++)O[e].getAttribute("target")&&t.addClass(O[e],"hidden");for(var a=0;a<C.length;a++)t.removeClass(C[a],"selected");t.removeClass(t.qs([this.getAttribute("target")]),"hidden"),t.addClass(this,"selected")}else t.removeClass(t.qs("exit-alert"),"hidden")});t.attachListener(tt,"click",function(){/expand/i.test(this.className)?(t.removeClass(this,"expand"),t.css(t.qs("hidden-menu"),{transform:"0px,0px,0px",transition:"transform 450ms ease-in-out"})):(t.addClass(this,"expand"),t.css(t.qs("hidden-menu"),{transform:"-195px,0px,0px",transition:"transform 450ms ease-in-out"}))}),t.attachListener([t.controlTab,et],"click",function(){St.selectTab(t.controlContainer,t.controlTab)}),t.attachListener([t.questTab,at],"click",function(){St.selectTab(t.questContainer,t.questTab)}),t.attachListener([t.skillTab,it],"click",function(){St.selectTab(t.skillContainer,t.skillTab)}),t.attachListener([t.bagTab,st],"click",function(){St.selectTab(t.bagContainer,t.bagTab)}),t.attachListener(nt,"click",function(){t.fullscreenToogle(this),t.playAudio("tab-selected")}),t.attachListener(rt,"click",function(){/off/i.test(this.className)?(this.className="speaker-on",d.mute=!1):(this.className="speaker-off",d.mute=!0),t.playAudio("tab-selected")}),t.attachListener(t.slotPassiveSkill,"click",function(e){if(e.target===this){var a=this.getElementsByTagName("div")[0];/hidden/i.test(a.className)?t.removeClass(a,"hidden"):t.addClass(a,"hidden")}}),t.attachListener(t.bagButton,"click",function(){St.charDetail({params:t.characterParameters.value,box:T}),St.fetchLoot(),St.fetchLoot(),St.fetchSkill(),St.guiToogle(),St.fetchQuest(),t.scrollSlideParams.fn()}),t.attachListener(t.qs("close-btn-skill"),"click",function(){t.addClass(t.qs("list-skills"),"hidden"),t.qs("button-skills").style.backgroundImage="url("+t.path+"/plus.png)"}),t.attachListener(t.qs("close-quest"),"click",function(e){/hidden/i.test(t.qs("init-box").className)?(t.removeClass(t.qs("init-box"),"hidden"),this.style.backgroundImage="url("+t.path+"/minus.png)"):(t.addClass(t.qs("init-box"),"hidden"),this.style.backgroundImage="url("+t.path+"/plus.png)")}),t.attachListener(t.qs("button-skills"),"click",function(){/hidden/i.test(t.qs("list-skills").className)?(t.removeClass(t.qs("list-skills"),"hidden"),t.qs("button-skills").style.backgroundImage="url("+t.path+"/minus.png)"):(t.addClass(t.qs("list-skills"),"hidden"),t.qs("button-skills").style.backgroundImage="url("+t.path+"/plus.png)")});for(ft=0;ft<n.length;ft++)t.attachListener(n[ft],"click",function(){var e=this.getElementsByTagName("div")||this.getElementsByTagName("li");if(e.length){var a=e[0].getAttribute("label"),i=t.characterSkills.value.get(t.oval.value.label);charParams=t.characterParameters.value;for(var s=0;s<i.length;s++)if(i[s].label===a&&i[s].state&&(/undead|aqua-heal|aqua-spirit/i.test(i[s].name)||t.monsterTarget.value)&&charParams.mp>i[s].mp){if(i[s].active&&charParams.level>=i[s].level&&!i[s].disable){i[s].firstLoad=!1,t.characterSkills.value.set("initial",{label:a,state:!0,target:e[0]});break}}else i[s].label!==a||i[s].disable||t.monsterTarget.value||!charParams.health||t.pushMsgText.value("SKILL'll ACTIVE WHEN TARGET IS SELECTED  AND WITHIN ATTACK RANGE   ",100)}});var xt={move:!1,startX:0,startY:0,endX:0,endY:0,startItem:"",endItem:"",itemName:!0};for(ft=0;ft<h.length;ft++)t.attachListener(h[ft],t.CursorMoveEvent,function(e){if(!xt.move&&t.getFirstChild(this)&&xt.itemName!==t.getFirstChild(this).className){var a=t.getFirstChild(this);St.skillInfoDetail(a),/clone/i.test(a.className)?t.addClass(t.qs("item-popup"),"hidden"):t.removeClass(t.qs("item-popup"),"hidden"),xt.itemName=a.className}}),t.attachListener(h[ft],t.CursorLeaveEvent,function(e){t.addClass(t.qs("item-popup"),"hidden"),xt.itemName=!0}),t.attachListener(h[ft],t.CursorStartEvent,function(e){var a=this.getElementsByTagName("div");if(a.length&&!xt.move){var i=a[0].getBoundingClientRect();t.mousePosition.value.pos.mousedown.x,t.mousePosition.value.pos.mousedown.y;xt.startX,xt.clientX,xt.startX=i.left,xt.startY=i.top,xt.move=!0,xt.bugMove=!0,xt.startItem=a[0],St.skillDetail(xt.startItem.getAttribute("label")),St.GUImobile.replaceSekleton("detached"),/container-skill/i.test(t.nthParent(a[0],3).className)&&t.addClass(t.qs("list-skills"),"hidden")}});t.attachListener(document.body,t.CursorMoveEvent,function(e){if(xt.move&&(!(s=xt.startItem.parentNode.getAttribute("drag"))||"false"!==s)){var a=t.mousePosition.value.pos.mousemove.x,i=t.mousePosition.value.pos.mousemove.y;t.addClass(t.qs("item-popup"),"hidden"),xt.bugMove&&(xt.clientX=a,xt.clientY=i,xt.bugMove=!1),t.css(xt.startItem,{top:xt.startY+(i-xt.clientY)+"px",left:xt.startX+(a-xt.clientX)+"px",width:xt.startItem.parentNode.offsetWidth+"px ",height:xt.startItem.parentNode.offsetHeight+"px ",position:"fixed","z-index":"1"})}var s}),t.attachListener(document.body,t.CursorEndEvent,function(e){t.id("nav").appendChild(t.qs("item-popup"));var a=t.getRelativeMousePositionToRegisterObject(o);if(xt.move&&a&&function(){for(var t=0;t<o.length;t++){var e=o[t].getElementsByTagName("div");if(e.length&&e[0].getAttribute("label")===xt.startItem.getAttribute("label"))return!1}return!0}()){var i=t.id(a),s=i.getBoundingClientRect(),n=xt.startItem.cloneNode(!0),r=/active/i.test(i.className)?"active":"passive";if(n.className=n.className+" clone",n.innerHTML="",xt.startItem.getAttribute("type")===r){t.playAudio("item-drop"),i.innerHTML="";var l=document.createElement("div");l.className="time-span time-span-"+n.getAttribute("label");var c=document.createElement("div");c.className="disable-skill",n.appendChild(c),n.appendChild(l),i.appendChild(n),t.css(n,{top:s.top+"px",left:s.left+"px",width:i.offsetWidth+"px",height:i.offsetHeight+"px",position:""}),t.css(xt.startItem,{top:xt.startY+"px",left:xt.startX+"px",position:""}),lt||(St.fetchSkill(),t.addClass(t.qs("list-skills"),"hidden")),t.initUndeadSkill.value(),t.caracterSkillToogleFn.value("pass")}else t.css(xt.startItem,{top:xt.startY+"px",left:xt.startX+"px",position:""})}else t.css(xt.startItem,{top:xt.startY+"px",left:xt.startX+"px",position:""});var h=!!xt.startItem.parentNode&&xt.startItem.parentNode.className;if(/active/i.test(h)){var p=t.mousePosition.value.pos.mouseup.x,d=t.mousePosition.value.pos.mouseup.y;if(!p&&!d){p=t.mousePosition.value.pos.mousemove.x,d=t.mousePosition.value.pos.mousemove.y;t.mousePosition.value.pos.mouseup.x=p,t.mousePosition.value.pos.mouseup.y=d}var g=xt.startItem.getBoundingClientRect();g.right>p&&g.left<p&&g.top<d&&g.bottom>d||!xt.move||(xt.startItem.parentNode.innerHTML="",St.fetchSkill())}lt&&!/hidden/i.test(u.className)&&t.addClass(t.qs("item-popup"),"hidden"),xt.move=!1});var kt={move:!1,startX:0,startY:0,endX:0,endY:0,startItem:"",endItem:"",itemName:!0},yt=function(e){if(lt){a=t.slice(e.parentNode.getElementsByTagName("div"));/control-bagA-mb/i.test(e.className)?t.css(t.qs("bag-wrap-mb"),{"margin-top":"0px"}):/control-bagB-mb/i.test(e.className)?t.css(t.qs("bag-wrap-mb"),{"margin-top":-St.GUImobile.heightInventory+"px"}):/control-bagC-mb/i.test(e.className)&&t.css(t.qs("bag-wrap-mb"),{"margin-top":2*-St.GUImobile.heightInventory+"px"}),St.GUImobile.hideItemCntOverflow("show")}else{var a=t.slice(e.parentNode.getElementsByTagName("li"));/loot-c/i.test(e.className)?t.css(t.qs("bag-wrap"),{"margin-top":"0px"}):/loot-b/i.test(e.className)?t.css(t.qs("bag-wrap"),{"margin-top":"-250px"}):/loot-a/i.test(e.className)&&t.css(t.qs("bag-wrap"),{"margin-top":"-500px"})}for(var i=0;i<a.length;i++)t.removeClass(a[i],"active");t.addClass(e,"active")};t.attachListener([t.qs("bag-loot-container"),t.qs("inventory-detail-mb")],t.CursorMoveEvent,function(e){if(kt.move)for(var a=0;a<ot.length;a++){var i=ot[a].getBoundingClientRect(),s=t.mousePosition.value.pos.mousemove.x,n=t.mousePosition.value.pos.mousemove.y;s>i.x&&s<i.x+i.width&&n>i.y&&n<i.y+i.height&&yt(ot[a])}});for(ft=0;ft<ot.length;ft++)t.attachListener(ot[ft],"click",function(){yt(this),lt&&St.GUImobile.hideItemCntOverflow("hidden")});for(ft=0;ft<s.length;ft++)t.attachListener(s[ft],t.CursorMoveEvent,function(e){if(!kt.move&&t.getFirstChild(this)&&kt.itemName!==t.getFirstChild(this).className){var a=t.getFirstChild(this);!/slot-button/i.test(this.className)&&a.getAttribute("label")&&(St.itemDetail(a),t.removeClass(t.qs("item-popup"),"hidden"),kt.itemName=a.className,t.removeClass(t.qs("item-popup"),"hidden"),St.guiPionToogle(a))}}),t.attachListener(s[ft],t.CursorLeaveEvent,function(e){t.addClass(t.qs("item-popup"),"hidden"),t.addClass(t.qs("familiar-params-box"),"hidden"),kt.itemName=!0}),t.attachListener(s[ft],t.CursorStartEvent,function(e){var a=this.getElementsByTagName("div");if(a.length&&!kt.move){var i=a[0].getBoundingClientRect();t.mousePosition.value.pos.mousedown.x,t.mousePosition.value.pos.mousedown.y;if(lt){if(!/hidden/i.test(u.className)){var s=a[0];St.GUImobile.infoItemToogle("item",s),t.css(t.qs("items-hidden-potion-mb"),{display:"none"});for(var n=ct.concat(ht),r=0;r<n.length;r++)n[r].style.opacity=1;t.css(t.qs("items-hidden-familiar-mb"),{display:"none"}),t.isScroll.value=!1,/slot-upgrd/i.test(s.parentNode.id)?(t.css(t.qs("items-bag-mb"),{"z-index":"1"}),t.css(t.qs("upgrader-box"),{"z-index":"2"}),t.css(t.qs("items-equipment-mb"),{"z-index":"1"})):/slot-magic/i.test(s.parentNode.id)?(t.css(t.qs("items-equipment-mb"),{"z-index":"2"}),t.css(t.qs("items-bag-mb"),{"z-index":"1"}),t.css(t.qs("upgrader-box"),{"z-index":"1"})):(t.css(t.qs("items-bag-mb"),{"z-index":"2"}),t.css(t.qs("upgrader-box"),{"z-index":"2"}),t.css(t.qs("items-equipment-mb"),{"z-index":"1"})),s.setAttribute("style",""),t.removeClass(s,"force-overflow");var o=t.slice(t.qsAll("wrap-item-detail-mb > div"));cnt=o[0],scroll=o[1],t.css(cnt,{transform:"0px,0px,0px"}),t.css(scroll,{transform:"0px,0px,0px"})}}else if(/slot-upgrd/i.test(a[0].parentNode.id)?(t.css(t.qs("bag-loot"),{"z-index":"1"}),t.css(t.qs("upgrader-box"),{"z-index":"2"})):(t.css(t.qs("bag-loot"),{"z-index":"2"}),t.css(t.qs("upgrader-box"),{"z-index":"2"})),/passive-magic/i.test(t.nthParent(a[0],3).className)&&(t.css(t.qs("bag-loot"),{"z-index":"1"}),t.css(t.qs("passive-magic"),{"z-index":"2"})),/blood-lich/i.test(a[0].className)&&!/slot-familia/i.test(a[0].parentNode.id)&&!lt){t.removeClass(t.qs("familiar-temp-box"),"hidden"),t.qs("familiar-temp-box").getElementsByTagName("div").length||t.qs("familiar-temp-box").appendChild(t.qs("familiar-box"));var l=t.qs("bag-loot").getBoundingClientRect();t.css(t.qs("familiar-temp-box"),{position:"fixed",top:i.top+"px",left:l.right+"px","z-index":"2"})}t.playAudio("item-pick"),kt.startX=i.left,kt.startY=i.top,kt.move=!0,kt.bugMove=!0,kt.startItem=a[0],t.scrollSlideParams.fn()}}),t.attachListener(s[ft],t.CursorEndEvent,function(e){var a=t.getRelativeMousePositionToRegisterObject(s),i=!1;if(/blood-lich/i.test(kt.startItem.className)&&(t.addClass(t.qs("familiar-temp-box"),"hidden"),t.qs("familiar-inner-box")&&t.qs("familiar-inner-box").appendChild(t.qs("familiar-box")),!a&&kt.startItem.parentNode&&/slot-familia/i.test(kt.startItem.parentNode.id))){var n=t.mousePosition.value.pos.mouseup.x,r=t.mousePosition.value.pos.mouseup.y,o=t.nthParent(kt.startItem,2).getBoundingClientRect();if(!(o.right>n&&o.left<n&&o.top<r&&o.bottom>r)){t.playAudio("item-drop"),kt.startItem.parentNode.innerHTML="";var l=kt.startItem.getAttribute("label");St.emptyBagLocation(l),St.fetchLoot(),i=!0}}if(kt.move&&a){var c=t.id(a),h=c.getElementsByTagName("div"),p=c.getBoundingClientRect(),d=t.slotButtonHp.getElementsByTagName("div"),g=t.slotButtonMp.getElementsByTagName("div"),m=t.characterInventoryBag.value.get(t.oval.value.label),f=t.mousePosition.value.pos.mousemove.x,v=t.mousePosition.value.pos.mousemove.y;if(/magic/i.test(a))for(var b=0,S=m.length;b<S;b++){if(m[b]&&m[b].label===kt.startItem.getAttribute("label")&&"upgrade"===m[b].usage){t.playAudio("item-drop"),h.length||(t.css(kt.startItem,{top:p.top+"px",left:p.left+"px",position:""}),c.appendChild(kt.startItem));break}t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""})}else if(h.length){var x=t.slotButtonHp.getBoundingClientRect(),k=t.slotButtonMp.getBoundingClientRect();if(x.right>f&&x.left<f&&x.top<v&&x.bottom>v)for(b=0;b<m.length;b++){if(m[b]&&m[b].label===kt.startItem.getAttribute("label")&&"healthpotion"===m[b].name){(h=d).length?(t.css(h[0],{top:kt.startY+"px",left:kt.startX+"px",position:""}),kt.startItem.parentNode.appendChild(h[0]),t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""}),t.slotButtonHp.appendChild(kt.startItem)):(t.css(kt.startItem,{top:x.top+"px",left:x.left+"px",position:""}),t.slotButtonHp.appendChild(kt.startItem)),t.text(kt.startItem.getElementsByTagName("div")[0],m[b].quantity);break}t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""})}else if(k.right>f&&k.left<f&&k.top<v&&k.bottom>v)for(b=0;b<m.length;b++){if(m[b]&&m[b].label===kt.startItem.getAttribute("label")&&"manapotion"===m[b].name){(h=g).length?(t.css(h[0],{top:kt.startY+"px",left:kt.startX+"px",position:""}),kt.startItem.parentNode.appendChild(h[0]),t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""}),t.slotButtonMp.appendChild(kt.startItem)):(t.css(kt.startItem,{top:k.top+"px",left:k.left+"px",position:""}),t.slotButtonMp.appendChild(kt.startItem)),t.text(kt.startItem.getElementsByTagName("div")[0],m[b].quantity);break}t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""})}else{l=kt.startItem.getAttribute("label");var y,B,w=h[0].getAttribute("label");if(l)for(b=0;b<m.length;b++)if(m[b]&&m[b].label===l)for(S=0;S<m.length;S++)if(m[S]&&m[S].label===w&&(m[b].displayName?m[b].displayName===m[S].displayName:m[b].name===m[S].name)&&!m[b].unique&&m[b].label!==m[S].label){m[b].quantity+m[S].quantity<=99?(y=m[b].quantity+=m[S].quantity,m.splice(S,1),h[0].remove()):(B=99-m[b].quantity,y=m[b].quantity=99,m[S].quantity-=B),void 0!==h[0]&&t.text(h[0].getElementsByTagName("div")[0],m[S].quantity),t.text(kt.startItem.getElementsByTagName("div")[0],y);break}if(void 0!==h[0]&&(t.css(h[0],{top:kt.startY+"px",left:kt.startX+"px",position:""}),kt.startItem.parentNode.appendChild(h[0])),t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""}),c.appendChild(kt.startItem),/upgrader/i.test(kt.startItem.className)&&St.upgrader(),d.length){for(b=0;b<m.length;b++)if(m[b].label===d[0].getAttribute("label")){t.text(d[0].getElementsByTagName("div")[0],m[b].quantity);break}}else;}}else""!==kt.startItem&&(t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""}),c.appendChild(kt.startItem));t.playAudio("item-drop"),kt.move=!1}else kt.startItem&&(t.css(kt.startItem,{top:kt.startY+"px",left:kt.startX+"px",position:""}),St.objDiscard=kt.startItem,St.initDropItem("open"));(i||/slot-familia/i.test(a))&&t.initUndeadSkill.value(),kt.move=!1,St.magicBox(),lt?(/hidden/i.test(u.className)||t.addClass(t.qs("item-popup"),"hidden"),t.addClass(kt.startItem,"force-overflow"),St.GUImobile.hideItemCntOverflow("hidden"),t.isScroll.value=!0,setTimeout(function(){t.css(t.qs("cnt-bag-mb"),{"margin-left":"15px"}),t.css(t.qs("items-hidden-potion-mb"),{"margin-left":St.GUImobile.transformInventory+"px"}),t.css(t.qs("items-hidden-familiar-mb"),{"margin-left":St.GUImobile.transformInventory+"px"}),setTimeout(function(){t.css(t.qs("items-hidden-potion-mb"),{display:"none"}),t.css(t.qs("items-hidden-familiar-mb"),{display:"none"}),St.GUImobile.replacePotions("attach")},200)},500)):(t.addClass(t.qs("familiar-params-box"),"hidden"),St.charDetail({params:t.characterParameters.value,box:T})),kt.startItem=""});t.attachListener(document.body,t.CursorMoveEvent,function(e){if(kt.move){var a=t.mousePosition.value.pos.mousemove.x,i=t.mousePosition.value.pos.mousemove.y;t.addClass(t.qs("item-popup"),"hidden"),t.addClass(t.qs("familiar-params-box"),"hidden"),kt.bugMove&&(kt.clientX=a,kt.clientY=i,kt.bugMove=!1),lt?t.css(kt.startItem,{top:kt.startY+(i-kt.clientY)+"px",left:kt.startX+(a-kt.clientX)+"px",width:kt.startItem.parentNode.offsetWidth+"px ",height:kt.startItem.parentNode.offsetHeight+"px ",position:"fixed","z-index":"1"}):t.css(kt.startItem,{top:kt.startY+(i-kt.clientY)+"px",left:kt.startX+(a-kt.clientX)+"px",position:"fixed","z-index":"1"}),lt&&/blood-lich|mana|health/i.test(kt.startItem.className)&&(/mana|health/i.test(kt.startItem.className)&&/potion/i.test(kt.startItem.className)?(t.css(t.qs("items-hidden-potion-mb"),{"margin-left":"15px",display:"block"}),St.GUImobile.replacePotions("detached")):/blood-lich/i.test(kt.startItem.className)&&t.css(t.qs("items-hidden-familiar-mb"),{"margin-left":"15px",display:"block"}),t.css(t.qs("cnt-bag-mb"),{"margin-left":-St.GUImobile.transformInventory+"px"}))}})}.bind(this),1e3)}},_owlBird.init=function(){for(var t,e=new _owlBird.utils,a=_owlBird.storage.bind(e)(),i=e.qsAll("page-content"),s=a.regPage,n=s.length;n--;)a.fetch({id:s[n],callback:function(n,r){for(var o=0;o<i.length;o++)if(n==="/"+i[o].id){e.getFirstChild(i[o]).innerHTML=r;break}a.fragment.length===s.length&&(e.qs("overlap-screen").remove(),e.qs("screen").style.display="block",t={messageCnt:e.qs("screen-info"),blocker:e.qs("screen-info"),bagButton:e.qs("bag-button"),tabButton:e.qs("tab-button"),skillTab:e.qs("skill-tab"),skillBox:e.qs("box-skill"),skillContainer:e.qs("box-skill-container"),questContainer:e.qs("box-quest-container"),questTab:e.qs("quest-tab"),controlContainer:e.qs("box-config-container"),controlTab:e.qs("control-tab"),bagContainer:e.qs("bag-loot-container"),detailInventory:e.qs("inventory-detail"),detailSkill:e.qs("skill-detail"),buffBox:e.qs("buff-box"),bagTab:e.qs("bag-tab"),bagLoot:e.qs("bag-loot"),loading:e.qs("loading-assets"),slotButtonHp:e.id("slot-hp"),slotButtonMp:e.id("slot-mp"),slotSkillA:e.id("slot-skill-a"),slotSkillB:e.id("slot-skill-b"),slotSkillC:e.id("slot-skill-c"),slotPassiveSkill:e.qs("slot-passive-skill"),slotItemNumber:e.qs("active-item-number"),browserWidth:function(){return document.body.clientWidth},browserHeight:function(){return document.body.clientHeight},utils:_owlBird.utils,bridge:_owlBird.bridge,deligate:_owlBird.deligate,register:_owlBird.register,particle:_owlBird.particle,physics:_owlBird.physics,sprites:_owlBird.sprites,plugins:_owlBird.plugins,AIs:_owlBird.AIs,component:_owlBird.component,transport:_owlBird.transport,mouse:_owlBird.mouse,storage:_owlBird.storage},new _owlBird.GUI(t,e.extend),new _owlBird.animation(t,e.extend))}.bind(a,s[n])})}()}(owlDATA,window);}},5) 